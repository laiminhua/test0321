(()=>{var t=Object.create,A=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,r=(t,A)=>()=>(A||t((A={exports:{}}).exports,A),A.exports),o=(r,o,a)=>(a=null!=r?t(i(r)):{},((t,i,r,o)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let a of n(i))!s.call(t,a)&&a!==r&&A(t,a,{get:()=>i[a],enumerable:!(o=e(i,a))||o.enumerable});return t})(!o&&r&&r.__esModule?a:A(a,"default",{value:r,enumerable:!0}),r)),a=r(((t,A)=>{A.exports={name:"spray-conch-compile",version:"2.1.16",description:"",private:!0,egg:{declarations:!0},port:5e3,dependencies:{"@babel/core":"^7.12.3","@babel/generator":"^7.18.2","@babel/parser":"^7.18.5","@babel/preset-env":"^7.12.1","@babel/traverse":"^7.18.2","@babel/types":"^7.18.4","@rollup/plugin-node-resolve":"^13.3.0","@rollup/plugin-strip":"^2.1.0","@vue/babel-helper-vue-jsx-merge-props":"^1.2.1","@vue/babel-preset-jsx":"^1.2.3","@vue/compiler-sfc":"^2.6.14",babylon:"^6.18.0","cross-env":"^7.0.2",egg:"^2.15.1","egg-axios":"^1.1.5","egg-cors":"^2.2.3","egg-logrotator":"^3.1.0","egg-scripts":"^2.11.0",esbuild:"^0.14.43",jscodeshift:"^0.13.1","patch-package":"^6.5.0",rimraf:"^3.0.2",rollup:"^2.32.1","rollup-plugin-babel":"^4.4.0","rollup-plugin-terser":"^7.0.2",sass:"^1.27.0",shelljs:"^0.8.4","string-to-file-stream":"^1.2.0"},devDependencies:{"@release-it/conventional-changelog":"^3.3.0",autod:"^3.0.1","autod-egg":"^1.1.0",compressing:"^1.5.1","egg-bin":"^4.11.0","egg-ci":"^1.11.0","egg-mock":"^3.21.0",eslint:"^5.13.0","eslint-config-egg":"^7.1.0","release-it":"^14.11.8",rimraf:"^3.0.2"},engines:{node:">=10.0.0"},scripts:{start:"cross-env EGG_SERVER_ENV=prod MOCK_HOME_DIR=./logs/scripts egg-scripts start ","start-test":"cross-env EGG_SERVER_ENV=test MOCK_HOME_DIR=./logs/scripts egg-scripts start ",stop:"egg-scripts stop ",dev:"egg-bin dev EGG_SERVER_ENV=local",debug:"egg-bin debug",test:"npm run lint -- --fix && npm run test-local","test-local":"egg-bin test",cov:"egg-bin cov",lint:"eslint .",ci:"npm run lint && npm run cov",autod:"autod",build:"node ./script/build.js",restart:"npm run stop && npm run start","restart-test":"npm run stop && npm run start-test",release:"release-it --no-npm.publish",postinstall:"patch-package"},ci:{version:"10"},repository:{type:"git",url:"git@git.uino.com:hundun/nanshan-compile-preview.git"},author:"zhanglin@uinnova.com",license:"MIT",babel:{presets:["@vue/babel-preset-jsx"]}}})),l=r(((t,A)=>{var e=a(),n=[["rgb(255, 255, 204)","rgb(222, 252, 205)","rgb(189, 249, 206)","rgb(157, 246, 207)","rgb(124, 242, 208)","rgb(91, 239, 209)"],["rgb(52, 255, 245)","rgb(49, 224, 242)","rgb(45, 192, 238)","rgb(42, 161, 235)","rgb(39, 130, 231)","rgb(35, 98, 228)"],["rgb(255, 220, 132)","rgb(255, 196, 124)","rgb(254, 171, 117)","rgb(254, 147, 109)","rgb(254, 123, 101)","rgb(253, 98, 94)"],["rgb(109, 212, 0)","rgb(91, 218, 39)","rgb(73, 224, 78)","rgb(55, 230, 117)","rgb(36, 235, 156)","rgb(18, 241, 195)"],["rgb(215, 74, 255)","rgb(198, 78, 255)","rgb(181, 82, 255)","rgb(164, 86, 255)","rgb(146, 90, 255)","rgb(129, 94, 255)"],["rgb(68, 215, 182)","rgb(99, 198, 159)","rgb(130, 182, 137)","rgb(162, 165, 114)","rgb(193, 148, 91)","rgb(224, 132, 69)"],["rgb(255, 87, 56)","rgb(239, 141, 122)","rgb(223, 196, 189)","rgb(207, 250, 255)","rgb(138, 214, 255)","rgb(69, 178, 255)"],["rgb(120, 69, 255)","rgb(165, 121, 251)","rgb(210, 173, 247)","rgb(255, 225, 243)","rgb(255, 170, 197)","rgb(255, 116, 151)"],["rgb(255, 104, 61)","rgb(255, 144, 122)","rgb(255, 185, 182)","rgb(255, 225, 243)","rgb(170, 209, 219)","rgb(85, 192, 196)"],["rgb(91, 11, 255)","rgb(146, 82, 251)","rgb(200, 154, 247)","rgb(255, 225, 243)","rgb(255, 170, 237)","rgb(255, 116, 231)"],["rgb(255, 112, 76)","rgb(255, 150, 132)","rgb(255, 187, 187)","rgb(255, 225, 243)","rgb(255, 204, 162)","rgb(255, 182, 81)"],["rgb(77, 177, 86)","rgb(136, 193, 138)","rgb(196, 209, 191)","rgb(255, 225, 243)","rgb(190, 197, 247)","rgb(126, 170, 251)"]];A.exports={version:e.version,globalVar:{themeColor:n,scripts:{},async:!1,printLog:!0,resource:{fontOptimize:!1}},themeColor:n}}));function c(t){let A=parseInt("none"===t.style.display?0:getComputedStyle(t).height);return Number.isNaN(A)?0:A}function u(t,A,e=!0){Object.getOwnPropertyNames(A).forEach((n=>{(!t[n]||t[n]&&e)&&(t[n]=A[n])}))}function h(t={}){if(t){if(!Array.isArray(t)){let{top:A=0,right:e=0,bottom:n=0,left:i=0}=t;t=[A,e,n,i]}return t.map((t=>B(t))).join(" ")}return 0}function d(t,A=""){if(!t)return;let e,n=A.split(".");for(;e=n.shift();){if(!t[e])return null;t=t[e]}return t}function p(t){if(!t||"object"!=typeof t)return t;let A=t instanceof Array?[]:{};for(let e in t)A[e]="object"==typeof t[e]?p(t[e]):t[e];return A}function g(t,A){return typeof t!=typeof A&&console.warn("组件数据类型发生更改可能存在错误"),t&&A&&!Array.isArray(t)&&!Array.isArray(A)&&"object"==typeof t&&"object"==typeof A?Object.assign(A,t):t}function f(t,A){!t||Object.entries(t).forEach(A)}var B=t=>`${t||0}px`,m=t=>"function"==typeof t,w=t=>null==t;function y(t){return new t({errorCaptured:t=>{let{id:A}=this;return C({id:A,instance:this,error:t}),!1}})}function C({id:t="",instance:A={},error:e}){conch.__globalVar.printLog&&console.error(t+"图表执行错误:\n"+e),conch.errorHandler&&conch.errorHandler({id:t,...A},e)}var Q=class{static init(){let{options:t}=this.__richConfig;if(t)if("string"==typeof t)try{t=new Function("return "+t)()}catch{throw t={},new Error("转换图表json出现错误")}else t=p(t);else t={};if(Array.isArray(t)?t={blueprint:{name:"蓝图节点",group:"UI-Chart",inputs:[{name:"显示",type:"exec"},{name:"隐藏",type:"exec"},{name:"数据",type:"any"}],outputs:[]},propertyPanel:t}:(!t.blueprint||Object.keys(t.blueprint).length<2)&&(t.blueprint={name:"蓝图节点",group:"UI-Chart",inputs:[{name:"显示",type:"exec"},{name:"隐藏",type:"exec"},{name:"数据",type:"any"}],outputs:[]}),Array.isArray(t.propertyPanel)&&t.propertyPanel.length>0){let A={};t.propertyPanel.forEach((t=>{let e=A;if(t.key){let A=t.key.split(".");A.shift();for(let n=0;n<A.length;n++)n<A.length-1?(e[A[n]]||(e[A[n]]={name:A[n],type:"group",children:{}}),e=e[A[n]].children):(t.default=t.value,delete t.value,delete t.key,e[A[n]]=t)}else func(t.children)})),t.propertyPanel=A}this._options=t}getBlueprintNode(t,A){let e=this;return class extends BaseNode{static config={...e._options.blueprint,name:t||e._options.blueprint.name,id:A};constructor(){super()}isEntrance(){return!0}onExecute(t,A,n){e.onExecute(t,A,n,this)}onStop(){e.onStop(this)}}}onExecute(t,A,e,n){switch(n.curExecName){case"显示":this.show();break;case"隐藏":this.hide()}A._updateData_&&this.setData(A._updateData_)}onStop(){}};function v(t){return[t.text,{...t.font,textAlign:t.site,fontSize:B(t.font.fontSize),lineHeight:t.lineHeight?B(t.lineHeight):null,padding:h(t.padding)}]}function b(t,A,e){t.innerHTML=A,e&&Object.assign(t.style,e)}var U=class{static init(){this.titleDom=document.createElement("div"),this.subTitleDom=document.createElement("div"),this.parentDom.appendChild(this.titleDom),Object.assign(this.titleDom.style,{flexShrink:0}),Object.assign(this.subTitleDom.style,{flexShrink:0}),this.parentDom.appendChild(this.subTitleDom)}__resizeParentHeight(){this.dom.style.height=`calc(100% - ${B(c(this.titleDom)+c(this.subTitleDom))})`}setTitle(t,A){b(this.titleDom,t,A)}setSubTitle(t,A){b(this.subTitleDom,t,A)}openTitle(){this.titleDom.style.display="block",this.resize()}closeTitle(){this.titleDom.style.display="none",this.resize()}openSubTitle(){this.subTitleDom.style.display="block",this.resize()}closeSubTitle(){this.subTitleDom.style.display="none",this.resize()}updateTitle(t){t&&(this.titleDom.style.display=t.show?"block":"none",this.setTitle(...v(t)))}updateSubTitle(t){t&&(this.subTitleDom.style.display=t.show?"block":"none",this.setSubTitle(...v(t)))}},F=o(l()),I=class{static init(){this.themes=F.themeColor,this.themeIndex=1}__setPadding(t){this.padding!==t&&(this.padding=t),Object.assign(this.parentDom.style,{padding:h(t)})}setPadding(t){this.__setPadding(t),this.resize()}setCompBG(t=""){Object.assign(this.parentDom.style,{background:t,backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"})}setTheme(t){this.theme!==t&&(this.theme=t),this.render()}__updateTheme(t=this.theme){if(t)if(t.backgroundColor&&t.backgroundColor.show){let A=t.backgroundColor,{type:e,value:n}=A,i="";if("image"===e)A.url&&(i=`url(${A.url})`);else if(n)switch(e){case"flat":i=n;break;case"linearGradient":let{angle:t,stops:A}=n;i=`linear-gradient(${t}deg, ${A.map((t=>`${t.color} ${t.offset}%`)).join(",")})`;break;case"radialGradient":i=`radial-gradient(${n.stops.map((t=>`${t.color} ${t.offset}%`)).join(",")})`}this.setCompBG(i)}else this.setCompBG("")}__transform(){this.padding&&this.__setPadding(this.padding);let t=d(this.config||this.opts,"menu.title");if(t){let{title:A,subTitle:e}=t;this.updateTitle(A),this.updateSubTitle(e)}}},E=class{constructor(t){this.identified=t,this.operations=[]}done(...t){this.operations=this.operations.concat(t.filter((t=>"function"==typeof t)))}async _run(...t){for(let A,e=0;A=this.operations[e];e++)await A(...t)}remove(t){for(let A=this.operations.length-1;A>=0;A--)t===this.operations[A]&&this.operations.splice(A,1)}destroy(){this.identified=null,this.operations=null}},M=class{constructor(t){this.actions={},this.instance=t}wait(t){return this.actions[t]?this.actions[t]:this.actions[t]=new E(t)}clearWait(t,A){if(!t&&!A)return Object.values(this.actions).forEach((t=>t.destroy())),void(this.actions={});if(this.actions[t]){if(!A)return this.actions[t].destroy(),void delete this.actions[t];this.actions[t].remove(A)}}trigger(t,...A){this.actions[t]&&this.actions[t]._run(...A)}},L=class{static init(){this._waiter=new M(this)}trigger(...t){return this._waiter.trigger(...t)}on(t,A){this._waitAction(t).done(A)}off(t,A){this._clearWaitAction(t,A)}_waitAction(t){return this._waiter.wait(t)}_clearWaitAction(t,A){this._waiter.clearWait(t,A)}},_=class{static init(){this._eventTypes={},this._eventBus={}}$on(t,A,e=this){return this.hasType(t)||(this._eventTypes[t]=t,this._eventBus[t]=[]),this._eventBus[t].push([A,e]),this}$once(t,A,e){let n=(...i)=>{this.$off(t,n),A.apply(e,i)};return n.fn=A,this.$on(t,n),this}$off(t,A,e){if(!t&&!A)return this.$offAll(),this;if(!this.hasType(t))return this;if(!A)return this._eventBus[t]=[],this;let n=this._eventBus[t],i=n.length;for(;i>-1;){if(!n[i]){i--;continue}let[t,s]=n[i];(t===A||t.fn===A)&&(e?s===e&&n.splice(i,1):n.splice(i,1)),i--}return this}$emit(t,...A){if(!this.hasType(t))return this;let e=this._eventBus[t];if(e&&e.length){let t=[...e];for(let e of t){let[t,n]=e;t.apply(n,A)}}return this}$offAll(){this._eventTypes={},this._eventBus={}}hasType(t){return this._eventTypes[t]===t}},D=o(l()),$={script:([t,A],e)=>new Promise((n=>{let i=window.document.head.querySelector("#"+t);i?i.isLoading?n():i.addEventListener("load",(()=>{n()})):(i=document.createElement("script"),i.src=(e||"")+A,i.type="text/javascript",i.isLoading=!1,i.addEventListener("load",(()=>{i.isLoading=!0,n()})),i.addEventListener("error",(()=>{n()})),i.id=t,window.document.head.appendChild(i))})),css([t,A],e){let n=window.document.head.querySelector("#"+t+"css");n||(n=document.createElement("link"),n.href=(e||"")+A,n.rel="stylesheet",n.id=t+"css",window.document.head.appendChild(n))},font:(t,A,e=!1)=>new Promise((async n=>{let i=Array.from(window.document.fonts.values());for(let n=0;n<t.length;n++){let{file:s,psName:r,descriptors:o,files:a}=t[n];if(i.some((t=>t.family===r)))return;if(a&&o){let t=a.map((t=>new window.FontFace(r,`url('${A}/cssfonts/${t}')`,o).load())),e=await Promise.any(t);window.document.fonts.add(e)}else{let t=e?s.replace(/\.(ttf|otf)/i,".woff2"):s,n=new window.FontFace(r,`url('${A}/fonts/${t}')`);n.load().then((t=>{window.document.fonts.add(t)})).catch((t=>{console.log(t)})),await n.loaded}}n()})),style(t,A=""){let e=document.head.querySelector("#styles_comp_global_"+A);e||(e=document.createElement("style"),e.type="text/css",e.id="styles_comp_global_"+A,e.appendChild(document.createTextNode(t)),document.head.appendChild(e)),A||e.appendChild(document.createTextNode(t))}},S=class{async __initScript(){let{script:t}=this.__richConfig,A=this._config.prefix||"";if(!D.globalVar.async&&t){this.script=t,this._config&&this._config.script&&Object.entries(this._config.script).forEach((([t,A])=>{this.script[t]=A}));let e=Object.entries(this.script).filter((([t,A])=>"string"==typeof A)),n=e.shift();for(;n;)await $.script(n,A),n=e.shift()}}__initResource(){let{img:t,fonts:A,cssfonts:e,css:n,script:i}=this.__richConfig,s=this._config.prefix||"";A&&$.font(Object.values(A),s,D.globalVar.resource.fontOptimize),e&&$.font(e,s),this.img={},this.fonts={},f(t,(([t,A])=>{this.img[t]=(s||"")+A})),f(A,(([t,A])=>{this.fonts[t]=A.file})),n&&Object.entries(this.css=n).filter((([t,A])=>"string"==typeof A)).forEach((t=>{$.css(t,s)})),this.script=i}},x=class{static init(){this.__LifeCycle={},m(this.setup)&&(this.__getDom=this.setup())}__callHook(t,A){return this.__LifeCycle[t]?this.__LifeCycle[t].reduce(((t,A)=>A(t)),A):A}};["create","mounted","update","dataChange","optsChange","destory"].forEach((t=>{[`onBefore${t=(t=>t.substring(0,1).toUpperCase()+t.substring(1))(t)}`,`onAfter${t}`].forEach((t=>{x.prototype[t]=function(A){m(A)&&(this.__LifeCycle[t]||(this.__LifeCycle[t]=[]),this.__LifeCycle[t].push(A))}}))}));var T=x,H=class{changeOptsToConfig(t=!0){if("complex"===this.type)return void this._componentInstances.forEach(((A,e)=>{A.changeOptsToConfig(t),this.updateConfig(A,e)}));if(!this.opts||!this._options.propertyPanel||"Array"!==Object.prototype.toString.call(this._options.propertyPanel).slice(8,-1))return;let A=e=>{if("group"===e.type)for(let t of e.children)A(t);else{if("string"!=typeof e.key||""===e.key)return;let A=e.key.split(".");A.length>=1&&A.shift();let n=this.opts,i=n,s="";for(s of A)if(i=n,n=n[s],void 0===n||isNaN(n)){n=void 0;break}(void 0!==n||!isNaN(n))&&(t?e.value=n:i[s]=e.value)}};for(let t of this._options.propertyPanel)A(t);t||this.setOption(this.opts)}changeConfigToOpts(){this.changeOptsToConfig(!1)}changeOptsToPropertyPanel(t){if("complex"===this.type)return void this._componentInstances.forEach(((t,A)=>{t.changeOptsToPropertyPanel(this.opts[A]),this.updateConfig(t,A)}));let A=this._options.propertyPanel||{},e=t||("echarts"===this.type?this.config:this.opts);function n(t,A,e){let i=A,s=e;"Object"===Object.prototype.toString.call(s[t]).slice(8,-1)?(s=s[t],i[t]&&i[t].children?i=i[t].children:i[t]&&i[t].default&&!i[t].children&&(i[t].default=s),Object.keys(s).forEach((t=>{n(t,i,s)}))):i[t]&&void 0!==i[t].default&&(i[t].default=s[t])}"Object"===Object.prototype.toString.call(e).slice(8,-1)?Object.keys(e).forEach((t=>{n(t,A,e)})):console.warn("opts需要是对象类型的数据")}changePropertyPanelToOpts(){if("complex"===this.type)return this._componentInstances.map(((t,A)=>{let e=t.changePropertyPanelToOpts();return this.updateConfig(t,A),e}));let t=this._options.propertyPanel||{},A="echarts"===this.type?this.config:this.opts;function e(t,A,n){let i=A,s=n;!i[t].default&&i[t].children&&s[t]?(s=s[t],i=i[t].children,Object.keys(i).forEach((t=>{e(t,i,s)}))):s.hasOwnProperty(t)&&(s[t]=i[t].default)}return Object.keys(t).forEach((n=>{e(n,t,A)})),this.setOption(A),A}changeProperty(t,A,e,n){this.setOption(e)}},O=o(l()),k={info:"background:#606060;color:#fff;",warn:"background:#E9A400;color:#fff;",error:"background:#EC3941;color:#fff;"};var N=new class{info(...t){this._recordLog("info",...t)}warn(...t){this._recordLog("warn",...t)}error(...t){this._recordLog("error",...t)}_recordLog(t,...A){var e;window.console[t](`%c [conch ${t}] %c ${function(){let t=new Date;return`${t.toLocaleDateString()} ${t.toLocaleTimeString()}`}()} `,...(e=t,[k[e],"background:#1375B2;color:#fff;"]),...A)}memory(){let{memory:t}=performance;if(t){let A=t=>t/1024/1024+"M",{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:i}=t;console.table({max:A(e),has:A(n),used:A(i)})}}},K=new _;_.init.call(K);var R,j,P=K,G=new WeakMap,V=class{static __richComp(t){let A=t.prototype,e=A.destroy;A.destroy=function(){this.__callHook("onBeforeDestory"),(m(e)?function(){this.__destroy(),e.call(this)}:this.__destroy).call(this),this.__callHook("onAfterDestory"),this._clearWaitAction(),this.$offAll()},A.render=A.__initRender;let n=A.setData;A.setData=function(t,...A){let e=this.__callHook("onBeforeDataChange",t);w(e)&&(t=e),n&&n.call(this,t,...A),this.__callHook("onAfterDataChange")};let i=A.setOption;A.setOption=function(t,...A){let e=this.__callHook("onBeforeOptsChange",t);w(e)&&(t=e),i&&i.call(this,t,...A),this.__callHook("onAfterOptsChange")}}static __use(t){!function(t,A){A.forEach((A=>{u(t.prototype,A.prototype)}))}(V,V.used=t)}constructor(t,A={}){for(this.cb=[],A.prefix||(A.prefix="");!A.fromComplex&&t.hasChildNodes();)t.removeChild(t.firstChild);if(A.fromComplex&&A.select){let e=A.select[A._id];e&&(t.style.border=e)}this.log=N,this._config=A,this.root=P;let e=this._config.prefix;this._registerImg&&this._registerImg(e),this.parentDom=t,Object.assign(t.style,{transformOrigin:"0 0",display:"flex",flexDirection:"column"});let n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.boxSizing="border-box";let{key:i,width:s,height:r}=this.__richConfig;this.size={width:s,height:r},this._key=i,this.__setClassName(),Array.isArray(V.used)&&V.used.forEach((t=>t.init&&t.init.call(this))),this.__initResource(),t.appendChild(this.dom=n)}get instance(){return G.get(this)}set instance(t){t&&G.set(this,t)}show(){if(this.parent)return this.parent.show();this.parentDom.style.display="block"}hide(){if(this.parent)return this.parent.hidden();this.parentDom.style.display="none"}hidden(){return this.hide()}toJSON(){return{data:this.data,opts:"echarts"===this.type?this.config:this.opts,theme:this.theme,padding:this.padding,events:this.events}}__setClassName(){this.parentDom.classList.contains(this._key)||this.parentDom.classList.add(this._key)}async __initComp(){await Promise.resolve(),this.__callHook("onBeforeCreate"),O.globalVar.async?this.__initScript():await this.__initScript(),this.__initConfig(),this.__callHook("onAfterCreate"),this.created&&this.created(),this._isLoadingComp=!0,this.cb.forEach((t=>t())),this.cb=[]}__initConfig(){this._options&&(!this.data&&this._options.data&&(this.data=p(this._options.data)),!this.opts&&this._options.options&&(this.opts=p(this._options.options)));let{theme:t,padding:A,data:e,opts:n,events:i}=this._config.config||{};t&&(this.theme=t),A&&(this.padding=A),e&&(this.data=e),n&&("echarts"===this.type?this.config=n:this.opts=n)}__initRender(){return new Promise((t=>{let A=async()=>{try{this.__setClassName(),this.__updateTheme(),this.transformOptions&&this.transform(),this.__transform(),this.instance||this._instance?(this.__callHook("onBeforeUpdate"),this.__update(),this.__callHook("onAfterUpdate"),this.updated&&this.updated()):(this.__callHook("onBeforeMounted"),await this.__render(),this.__callHook("onAfterMounted"),this.mounted&&this.mounted())}catch(t){C({id:this._compId,instance:this,error:t})}finally{t()}};this._isLoadingComp?A():this.cb.push(A)}))}},z=V;((t,e,n)=>{e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(z,"symbol"!=typeof(R="used")?R+"":R,j),z.__use([Q,U,I,L,_,S,T,H]);var J=z;function Y(t,A){if(!1===t.enabled)return!0;switch(t.type){case"code":return function(t,A){return new Function("data",t)(A)}(t.filterCode,A);case"tree":return function(t,A){return W(t,(t=>W(t,(t=>function(t,A,e,n){let i=(t||{})[A];if(null==i||""===i)return!1;switch("eq"===e||"in"===e||"nin"===e?(i=i.toString(),n=n.toString()):(i*=1,n*=1),e){case"eq":return i===n;case"gt":return i>n;case"lt":return i<n;case"gte":return i>=n;case"lte":return i<=n;case"ne":return i!=n;case"in":return i.toString().includes(n.toString());case"nin":return!i.toString().includes(n.toString())}}(A,...t)))))}(t,A);default:return!0}}function W(t,A){let e=function(t){switch(t){case"OR":return Array.prototype.some;case"AND":return Array.prototype.every;default:return()=>!1}}(t.operator);return!t.expressions.length||e.call(t.expressions,A)}var X=class{constructor(t){this.instance=t||{},this.typeFnMapping={showOrHidden:this.__doShowOrHidden.bind(this),changeOptions:this.__doSetOptions.bind(this),callback:this.__doCallback.bind(this),secondFunction:this._doSecondFunction.bind(this),link:this.__doLink}}_registerType(t,A,e){if("function"!=typeof A)return;let n=e||this;this.typeFnMapping[t]=A.bind(n)}__run(t,A){for(let e,n=0;e=A[n];n++)t._waitAction(e.identified).done((t=>{if(Y(e.condition,t)){this._beforeRun&&this._beforeRun({events:e,data:t});for(let A,n=0;A=e.actions[n];n++)this.__runAction(A,t);this._afterRun&&this._afterRun({events:e,data:t})}}))}__runAction(t,A){let e=t.type;if(void 0!==e)return this.typeFnMapping[e]?this.typeFnMapping[e](t[e],A):void C({error:`事件动作${e}未注册`})}_query(t){return"function"!=typeof this.instance.query?null:Array.isArray(t)?t.map((t=>this.instance.query(t))):this.instance.query(t)}__doShowOrHidden(t){let{showComps:A,hiddenComps:e,type:n,showOptions:i,hiddenOptions:s}=t;return"group"===n&&(A=A.map((t=>t.split(","))).flat(),e=e.map((t=>t.split(","))).flat()),e.map((t=>{let A=this._query(t);A&&A.hidden(s)})),A.map((t=>{let A=this._query(t);A&&A.show(i)}))}__doSetOptions(t){let{comp:A,opts:e}=t,n=this._query(A);n&&n.setOption(e)}__doLink(t){!t.url||function(t){return!/(http|https):\/\/([\w.]+\/?)\S*/.test(t)}(t.url)||window.open(t.url)}__doCallback(){}_doSecondFunction(t){let{name:A,arg:e}=t;this.instance[A]&&this.instance[A](e)}},Z=/\/s-static(\/[\w-]+)+\.(bmp|gif|ico|tif|png|jpg|jpeg|webp|svg|mp4|webm|mp3|wav)/gi,q=({prefix:t,status:A})=>"component"===A?{js:`${t}/component-source`,def:`${t}/complex-group-def`}:{js:`${t}/component`,def:`${t}/complex-group-version-def`};function tt(t,A){return t&&JSON.parse(JSON.stringify(t).replace(Z,(t=>t.replace(/^(\/s-static)/,A))))}var At=class extends J{constructor(t,A){super(t,A),this.__initComp()}async __initComp(){this.customEvent=new X(this),this.useResizeScale=!(t=>"boolean"==typeof t)(this.useResizeScale)||this.useResizeScale,this._componentInstances=[],this._options=[];let t=function(t,{prefix:A}){let e=d(t,"scene.option.style")||{},n=[],i=[],s=[],r=[],o=[],a=[],l=[],c=[],u=[],h=t.scene.children[0],p=h.children||[],g=t.userData,f=[...p];if(!1!==h.option.visible)for(;f.length;){let t=f.shift();if(t.children)!1!==t.option.visible&&f.push(...t.children);else if(!1!==t.option.visible&&"Container"===t.type){let e=g[t.option.id],h=e.name.substr(1);l.push(h),c.push(t.option.id),i.push(tt(e.data,A)),s.push(tt(e.opts,A)),r.push(tt(e.theme,A)),a.push(e.padding),o.push(e.events);let d={title:t.option.name,id:h},p=t.option.style,f={width:p.width,height:p.height,top:p.top,left:p.left,backgroundColor:p.backgroundColor||"",rotate:p.rotate};n.push(f),p&&Object.assign(d,f),u.push(d)}}return{width:e.width||"",height:e.height||"",childStyle:n,datas:i,opts:s,component:l,container:c,simpleCompInfo:u,themes:r,paddings:a,events:o}}(await function(t,A){let e=t.indexOf("C")>-1?t.slice(1):t,n=q(A).def;return new Promise((t=>{fetch(`${n}/${e}.def`).then((t=>t.json())).then((A=>{t(A)})).catch((t=>C({error:`Request Failed, ${t}`})))}))}(this._compId,this._config),this._config);this.events=t.events||[],this.simpleCompInfo=t.simpleCompInfo,this.data=t.datas,this.opts=t.opts;let A=this.childStyle=t.childStyle,e=t.themes,n=t.paddings,i=t.container;(!this.size.width||!this.size.height)&&(this.size.width=t.width,this.size.height=t.height),this.parentDom.style.width=B(t.width),this.parentDom.style.height=B(t.height),this.dom.style.position="relative",this.resize();let s=q(this._config).js,r="component"===this._config.status?"src":"";await Promise.all(t.component.map((t=>$.script([`C${t}`,`${s}/${t}${r}.js`])))),t.component.forEach(((t,s)=>{let r=`C${t}`,o=document.createElement("div"),a=document.createElement("div");if(o.appendChild(a),this.dom.appendChild(o),A[s]){let t=A[s];Object.assign(a.style,{width:B(t.width),height:B(t.height)}),Object.assign(o.style,{position:"absolute",top:B(t.top),left:B(t.left),width:B(t.width),height:B(t.height),transform:`rotate(${t.rotate||0}deg)`,backgroundColor:t.backgroundColor})}this._config.config={theme:e[s],padding:n[s],data:this.data[s],opts:this.opts[s],events:this.events[s]};try{let A=new window.conch[r](a,{fromComplex:!0,_id:t,_ctId:i[s],...this._config});A._getParent=()=>this,this._componentInstances.push(A),this._options.push(A._options)}catch(A){C({error:A}),this.loadCompError({boundDom:o,graphDom:a,id:t,index:s})}})),this._config.config=null,await super.__initComp()}__render(){return Promise.all(this._componentInstances.map((async(t,A)=>{await t.render(),this.events[A]&&this.customEvent.__run(t,this.events[A])})))}__update(){this.eachInstance("__update")}__destroy(){this.eachInstance("destroy")}resize(){if(this.useResizeScale){let{width:t,height:A}=this.size,e=getComputedStyle(this.parentDom);this.parentDom.style.transform=`scale(${Math.min(parseInt(e.width)/t,parseInt(e.height)/A)})`,this.parentDom.style.width=B(t),this.parentDom.style.height=B(A)}}setData(t){this.eachInstance(((A,e)=>{let n=t[e];n&&A.setData(n)}))}setOption(t){this.eachInstance(((A,e)=>{let n=t[e];n&&A.setOption(n)}))}transform(){this.eachInstance("transform"),this.__transform()}__changeTitleDOM(t,A,e){super.__changeTitleDOM(t,A,e),this.__resizeParentHeight()}eachInstance(t){this._componentInstances.forEach(((A,e)=>{"string"==typeof t?this[t].call(A):t(A,e)}))}query(t){return t&&this._componentInstances.find((A=>A._config._id===t||A._config._ctId===t))}updateComponentStyle({width:t,height:A,backgroundColor:e,left:n,top:i,id:s,rotate:r}){let o=this.query(s);if(o){let s=o.dom.parentNode,a=s.parentNode;"number"==typeof t&&(s.style.width=a.style.width=B(t)),"number"==typeof A&&(s.style.height=a.style.height=B(A)),o.resize(),"number"==typeof r&&(a.style.transform=`rotate(${r}deg)`),"string"==typeof e&&(s.style.backgroundColor=e),"number"==typeof n&&(a.style.left=B(n)),"number"==typeof i&&(a.style.top=B(i))}}updateConfig(t,A){0===A&&(this._options=[]),this._options.push(t._options)}loadCompError(t){let{boundDom:A,graphDom:e,id:n,index:i}=t,s=this.childStyle[i];s&&(e.style.width=s.width,e.style.height=s.height,e.style.border="1px dashed red",A.style.position="absolute",A.style.top=s.top,A.style.left=s.left),e.innerHTML='<span style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); color: red">Error: 图表加载失败</span>'}},et=class extends J{constructor(t,A){super(t,A),this.__initComp()}__render(){this.instance=window.echarts.init(this.dom),this.__update()}__update(){this.instance.clear(),this.instance.setOption(this.opts)}__destroy(){this.instance&&window.echarts.dispose(this.instance)}resize(){this.instance&&this.instance.resize()}setOption(t){if(this.config&&"Object"===Object.prototype.toString.call(this.config).slice(8,-1))return this.config=t,void this.render();if(!this.instance)return;this.instance.setOption(t);let A={};Object.entries(this.instance._model._optionManager.mountOption()).forEach((([t,e])=>{if(null!=e){let n=JSON.stringify(e);if("{}"===n||"[]"===n)return;A[t]=e}})),this.opts=A}setData(t){if(this.config&&"object"==typeof this.config)return this.data=g(t,this.data),void this.render();if(t&&"object"==typeof t){let A=this.opts.series;if(Array.isArray(t)){if(0===t.length)return;let e;t[0].key&&t[0].value?(t=t.filter((t=>t.key&&t.value)),e=t=>A.find((A=>A.name===t))):e=(t,e)=>A[e],t.forEach((({key:t,value:A},n)=>{let i=e(t,n);i&&(i.data=A)}))}else Object.keys(t).forEach((e=>{let n=A.find((t=>t.name===e));n&&(n.data=t[e])}));this.data=g(t,this.data),this.render()}}transform(){this.opts=this.transformOptions()}},nt=class extends J{static __richComp(t){let A=t.prototype;A.__getDom=A.render,super.__richComp(t)}constructor(t,A){window.conch.registerVue(A.Vue),super(t,A),this.__initComp()}__render(){let t=(t=>{if(!t)throw new Error("找不到 vue 环境");return t})(window.conch.Vue||window.Vue),A=20,e=performance.now();this.instance=new t({el:this.dom,render:t=>{if(A<=0){let t="[conch error] 图表被重复渲染，请注意";throw C({error:error}),new Error(t)}return performance.now()-e<20?A-=1:A=20,this.$createElement=t,this.__getDom(t,this.data,this.opts)},parent:y(t)}),this.dom=this.instance.$el}__update(){this.instance.$forceUpdate()}__destroy(){this.instance.$destroy()}resize(){this.useResizeScale&&(this.parentDom.style.width="100%",this.parentDom.style.height="100%")}setData(t,A){this.data=g(t,this.data),this.instance&&this.render()}setOption(t,A){this.opts=g(t,this.opts),this.instance&&this.render()}transform(){this.transformOptions()}__changeTitleDOM(t,A,e){super.__changeTitleDOM(t,A,e),this.__resizeParentHeight()}},it={default:nt,echarts:et,complex:At},st=class extends J{static __richComp(t){let A=t.prototype;A.__getDom=A.render,A.render=A.__initRender;let e=A.destroy;A.destroy=function(){(m(e)?function(){this.__destroy(),e.call(this)}:this.__destroy).call(this)}}constructor(t,A={}){super(t,A),this.type=this.type||"default",window.conch.registerVue(this._config.Vue);let e=["setData","setOption"],n={};e=e.filter((t=>{let A="function"!=typeof this[t];return A&&(this[t]=function(A){n[t]=A}),A})),setTimeout((()=>{e.forEach((t=>{this[t]=null})),u(this,it[this.type].prototype,!1),"complex"===this.type?At.prototype.__initComp.call(this):this.__initComp(),Object.entries(n).forEach((([t,A])=>{this[t].call(this,A)}))}))}};function rt(t,A){if(!(this instanceof rt))return new rt(t,A);this.proto=t,this.target=A,this.methods=[],this.getters=[],this.setters=[],this.fluents=[]}rt.auto=function(t,A,e){for(var n=rt(t,e),i=Object.getOwnPropertyNames(A),s=0;s<i.length;s++){var r=i[s],o=Object.getOwnPropertyDescriptor(A,r);if(o.get&&n.getter(r),o.set&&n.setter(r),o.hasOwnProperty("value"))o.value instanceof Function?n.method(r):n.getter(r),o.writable&&n.setter(r)}},rt.prototype.method=function(t){var A=this.proto,e=this.target;return this.methods.push(t),A[t]=function(){return this[e][t].apply(this[e],arguments)},this},rt.prototype.access=function(t){return this.getter(t).setter(t)},rt.prototype.getter=function(t){var A=this.proto,e=this.target;return this.getters.push(t),A.__defineGetter__(t,(function(){return this[e][t]})),this},rt.prototype.setter=function(t){var A=this.proto,e=this.target;return this.setters.push(t),A.__defineSetter__(t,(function(A){return this[e][t]=A})),this},rt.prototype.fluent=function(t){var A=this.proto,e=this.target;return this.fluents.push(t),A[t]=function(A){return typeof A<"u"?(this[e][t]=A,this):this[e][t]},this};var ot=rt,at=["data","opts","config","parentDom","themes","themeIndex","type","useResizeScale","titleDom","subTitleDom","padding","theme","size","_config","_options","_isLoadingComp","_key","img","fonts","css","script","log"],lt=["setData","setOption","resize","render","$on","$once","$off","$emit","show","hide","transformOptions","getBlueprintNode","onExecute","onStop","query","updateComponentStyle","setTitle","openTitle","closeTitle","setSubTitle","openSubTitle","closeSubTitle","setCompBG","setPadding","setTheme","trigger"],ct=new Set(["resize"]),ut=new Set(["dom","instance"]),ht=new Set(["setData","setOption","setTheme"]),dt=class extends J{static __richComp(t){super.__richComp(t)}constructor(t,A){window.conch.registerVue(A.Vue),super(t,A),this.__initComp(),this.useResizeScale=!1,this.vmUseProtoMethods=new Set}__render(){let t=(t=>{if(!t)throw new Error("找不到 vue 环境");return t})(window.conch.Vue||window.Vue),A=this.__mergeVueInstData(),{data:e,mounted:n,...i}=this.vueInstConfig,s=this.__instanceKey,r="echarts"===this.type,o=this.__initChart.bind(this);this[s]=new t({el:this.dom,data:function(){return{...A}},mounted:this.__vueInstMounted(n,r&&o),...i,parent:y(t)});let a=this.render.bind(this);"echarts"===this.type?this[s].$watch("config",a):this[s].$watch("opts",a),this[s].$watch("theme",a),this[s].$watch("data",a),this[s].$watch("padding",a),this.dom=this[s].$el,this.__getMethodsFromProp(),this.render();let l=new ot(this,s);for(let t in this[s])ut.has(t)||!ht.has(t)&&!ct.has(t)&&(m(this[s][t])?l.method(t):l.access(t))}__update(){let t=this.__instanceKey;this[t]?.$forceUpdate(),"echarts"===this.type&&this.__updateChart(this.opts),this.__transform()}__destroy(){let t=this.__instanceKey;this[t]?.$destroy()}resize(){let t="echarts"===this.type,A=!this.vmUseProtoMethods.has("resize");t?A?this._instance?.resize&&this._instance.resize():this.instance&&this.instance.resize():A?this.instance?.resize&&this.instance.resize():this.useResizeScale&&(this.parentDom.style.width="100%",this.parentDom.style.height="100%")}setData(t){let A=this.__instanceKey;this[A]?(this.data=g(t,this[A].data),this[A].data=this.data,this[A]&&this.render()):this.data=g(t,this.data)}setOption(t){let A=this.__instanceKey,e="echarts"===this.type;if(!this[A])return e?void(this.config=opts):void(this.opts=t);e?this.config&&"Object"===Object.prototype.toString.call(this.config).slice(8,-1)&&(this.config={...this[A].config,...t},this[A].config=this.config):(this.opts={...this[A].opts,...t},this[A].opts=this.opts),this[A]&&this.render()}setTheme(t){let A=this.__instanceKey;this[A]?(this.theme={...this[A].theme,...t},this[A].theme=this.theme,this.render()):this.theme=t}transform(){"echarts"===this.type&&(this.opts=this.transformOptions())}__changeTitleDOM(t,A,e){super.__changeTitleDOM(t,A,e),this.__resizeParentHeight()}__mergeVueInstData(){let t=at,A={};for(let e in this){let n=m(this[e]);t.includes(e)&&!n&&(A[e]=this[e])}let{data:e}=this.vueInstConfig,n=m(e)?e():e,i={...n,...A,type:n?.type||"vueSFC"};Object.assign(this,i);let s="echarts"===i.type;return this.__instanceKey=(s?"_":"")+"instance",i}__initChart(t,A){if(1!==t.nodeType)throw new Error("echart 初始化缺少 element 节点");return this.opts=A,this.instance=window.echarts.init(t),this.__updateChart(A),this.instance}__updateChart(t){this.instance&&(this.instance.clear(),this.instance.setOption(t))}__vueInstMounted(t,A){let e=this.parent;return function(){if(A){let t;if(!this.transformOptions)throw new Error("echarts类组件需实现transformOptions方法");t=this.transformOptions(),this.instance||(this.instance=A(this.$refs.echarts||this.$el,t))}else this.instance=this;this.dom=this.$el,this.parent=e,t&&t.call(this)}}__getMethodsFromProp(){let t=this.__instanceKey;for(let A of lt)if(m(this[A]))if(w(this[t][A]))this[t][A]=this[A].bind(this),this.vmUseProtoMethods.add(A);else{if(ht.has(A)){let e=this[t][A],n=function(...t){e.apply(this,t)};this[t][A]=n.bind(this[t])}ct.has(A)||(this[A]=this[t][A].bind(this[t]))}}},pt={Default:nt,Complex:At,Echarts:et,OldBase:st,VueSFC:dt},gt=o(l());console.log("compile version is "+gt.version);var ft={version:gt.version,Vue:null,__globalVar:gt.globalVar,Base:pt.OldBase,CustomEvent:X,...pt,createCss:$.style,$on:P.$on.bind(P),$emit:P.$emit.bind(P),$off:P.$off.bind(P),install(t){this.Vue=t},register(t,A,e,n,i="default",s="1"){1===function(t,A){if("1.0.0"===t||"2"===t)return!0;let e=t.split("."),n=A.split("."),i=e.length,s=n.length,r=Math.min(i,s),o=0;for(;o<r;o++){let t=parseInt(e[o]),A=parseInt(n[o]);if(t>A)return 1;if(t<A)return-1}if(i>s){for(let t=o;t<i;t++)if(0!=parseInt(e[t]))return 1;return 0}if(i<s){for(let t=o;t<s;t++)if(0!=parseInt(n[t]))return-1;return 0}return 0}(s,gt.version)&&C({id:t,error:`当前组件${t}版本高于运行版本，需要升级组件运行环境`}),n&&this.registerVue(n),e.script&&(this.__globalVar.scripts=Object.assign(this.__globalVar.scripts,e.script)),A.prototype.version=s,A.prototype.__richConfig=e,A.prototype._compId=t,A.__richComp(A,t,e),this[t]=A},registerVue(t){t&&(!this.Vue&&(this.Vue=t),!window.Vue&&(window.Vue=t))},async loadAllScript(){this.__globalVar.async=!0;let t=Object.entries(this.__globalVar.scripts).filter((([t,A])=>"string"==typeof A));await Promise.all(t.map((t=>$.script(t,prefix))))}},Bt=new Set(Object.keys(ft));Bt.delete("__globalVar");var mt=new Proxy(ft,{set(t,A,e){return t[A]&&t[A]!==e&&Bt.has(A)?(C({error:`conch.${A}不支持修改`}),Reflect.set(t,A,t[A])):Reflect.set(...arguments)}});Object.defineProperty(window,"conch",{configurable:!0,value:mt,writable:!1})})(),function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";const t=(t,A)=>{t?(t=t.id,console.warn(t+" "+A)):console.warn(A)},A=(t,A)=>{console.error(A)},e=(t,A,e,i,s)=>{try{return A&&A.apply(e,i)}catch(A){n(t,A)}},n=(t,A,e,n=!0)=>{if(t?.root?.isEdit&&n)throw A;console.error(A)},i={createElement:(t="div",A=!1)=>document.createElement(t,A?{is:A}:void 0),insert:(t,A,e=null)=>{A.insertBefore(t,e)},setElementText:(t,A)=>{t.textContent=A},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,previousSibling:t=>t.previousSibling,remove:t=>{t.remove()},empty:t=>{for(;t.firstChild;)t.removeChild(t.firstChild)}};function s(t){var A,e={top:t.offsetTop||0,left:t.offsetLeft||0};return t.offsetParent&&(({top:t,left:A}=s(t.offsetParent)),e.top+=t,e.left+=A),e}const r=(t,A={})=>{for(const e in A)o(t,e,A[e])},o=(t,A,e,n)=>{t.style[A]=e},a=(t,A,e)=>{t.setAttribute(A,e)},l=(t,A)=>{for(const e in A)a(t,e,A[e])},c=Array.isArray,u=Math.round,h=Number.isFinite,d=t=>null==t,p=t=>null!=t,g=t=>"string"==typeof t,f=t=>"number"==typeof t;function B(t,A){return!d(t)&&!d(A)&&new RegExp(t).test(A)}function m(t){return t.charAt(0).toUpperCase()+t.slice(1)}function w(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}const y=(t,A)=>Object.hasOwn(t,A),C=t=>null!==t&&"object"==typeof t,Q=t=>"[object Object]"===(t=>Object.prototype.toString.call(t))(t);function v(t,A){return Object.prototype.toString.call(t).includes(A)}function b(t,A){var e,n;return t===A||(t&&A&&C(t)&&C(A)?(e=Object.keys(t),n=Object.keys(A),e.length===n.length&&e.every((e=>b(t[e],A[e])))):t===A)}const U=t=>{if(!t||"object"!=typeof t)return t;var A=t instanceof Array?[]:{};for(const e in t)A[e]=U(t[e]);return A},F=(t,A)=>{if(!C(t)||!C(A))return A;for(const i in A){var e=t[i],n=A[i];C(e)&&C(n)||c(e)&&c(n)?t[i]=F(e,n):t[i]=n}return t},I={create:(A,e=null)=>{var{ctx:n,root:i,type:s}=A;A.isBeforeCreated?t(A,"create方法已经执行过了"):(A.isBeforeCreated=!0,A.lifeCycle.call("beforeCreate"),n.emit("beforeCreate:"+s,n),i.ctx.emit("beforeCreate:"+s,n),n.emit("beforeCreate",n),i.ctx.emit("beforeCreate",n),e&&e(),A.isCreated=!0,A.lifeCycle.call("created"),n.emit("created:"+s,n),i.ctx.emit("created:"+s,n),n.emit("created",n),i.ctx.emit("created",n))},mount:(A,e=null)=>{var{ctx:n,root:i,type:s}=A;A.isCreated?A.isBeforeMounted?t(A,"mount方法已经执行过了"):(A.isBeforeMounted=!0,A.lifeCycle.call("beforeMount"),n.emit("beforeMount:"+s,n),i.ctx.emit("beforeMount:"+s,n),n.emit("beforeMount",n),i.ctx.emit("beforeMount",n),e&&e(),A.isBeforeUnmounted=!1,A.isUnmounted=!1,A.isMounted=!0,A.lifeCycle.call("mounted"),n.emit("mounted:"+s,n),i.ctx.emit("mounted:"+s,n),n.emit("mounted",n),i.ctx.emit("mounted",n)):t(A,"需要先执行完create方法")},moveToTarget:function(A,e,n){var s=A.isMounted,r=e.isMounted;return s?r?A!==e&&(p(n)&&!["before","after"].includes(n)?t(A,"type参数必须是before、after或者空"):(I.update(A,(()=>{!function(t,A,e){var{parent:n,el:s,root:r,ctx:o}=t,{parent:a,el:l,contentEl:c}=A,u=a.contentEl;o.emit("beforeMoveToTarget",o),r.ctx.emit("beforeMoveToTarget",o),G(t),t.parent=null,"before"===e?(P(t,a,A),i.insert(s,u,l),t.parent=a,t.ctx.parent=a.ctx):"after"===e?(P(t,a,l=A.getNextSibling()),i.insert(s,u,l?.el),t.parent=a,t.ctx.parent=a.ctx):(P(t,A),i.insert(s,c),t.parent=A,t.ctx.parent=A.ctx),n.contains(t.parent)||n.edge._updateGroup(),t.edge._updateGroup(),r.boundBox.update(),o.emit("movedToTarget",o),r.ctx.emit("movedToTarget",o)}(A,e,n)}),"moveToTarget",A,A),!0)):t(A,"目标还没执行mount方法，无法执行移动节点方法"):t(A,"自己还没执行mount方法，无法执行移动节点方法")},update:function(A,e=null,n,i,s){A.isBeforeMounted?(function(t,A){if(c(A))for(var{type:e}of A)Z(t,e);else Z(t,A)}(A,n),e&&e(),function(t,A,e,n){if(c(A))for(const{type:e,value:n,oldValue:i}of A)q(t,e,n,i);else q(t,A,e,n)}(A,n,i,s)):t(A,"节点还没挂载")},unmount:function(A,e=null){var{ctx:n,root:i,type:s}=A;A.isBeforeMounted?A.isBeforeUnmounted?t(A,"unmount方法已经执行过了"):(A.isBeforeUnmounted=!0,A.lifeCycle.call("beforeUnmount"),n.emit("beforeUnmount:"+s,n),i.ctx.emit("beforeUnmount:"+s,n),n.emit("beforeUnmount",n),i.ctx.emit("beforeUnmount",n),e&&e(),A.isBeforeMounted=!1,A.isMounted=!0,A.isUnmounted=!0,A.lifeCycle.call("unmounted"),n.emit("unmounted:"+s,n),i.ctx.emit("unmounted:"+s,n),n.emit("unmounted",n),i.ctx.emit("unmounted",n)):t(A,"节点还没挂载")},destroy:function(A,e=null){var{ctx:n,isCreated:i,root:s,type:r}=A;i?A.isBeforeDestroyed?t(A,"destroy方法已经执行过了"):(A.isBeforeDestroyed=!0,A.lifeCycle.call("beforeDestroy"),n.emit("beforeDestroy:"+r,n),s.ctx.emit("beforeDestroy:"+r,n),n.emit("beforeDestroy",n),s.ctx.emit("beforeDestroy",n),e&&e(),A.isDestroyed=!0,A.lifeCycle.call("destroyed"),n.emit("destroyed:"+r,n),s.ctx.emit("destroyed:"+r,n),n.emit("destroyed",n),s.ctx.emit("destroyed",n),function(t){var{ctx:A,lifeCycle:e}=t;e.destroy(),t.layoutManager=null,t.adapterManager=null,t.lifeCycle=null,t.lock=null,t.canvas=null,t.children=null,t.config=null,t.contentEl=null,t.contentElAttrs=null,t.contentElStyles=null,t.ctx=null,t.defaultConfig=null,t.defaultContentElAttrs=null,t.defaultContentElStyles=null,t.defaultElAttrs=null,t.defaultElStyles=null,t.defaultOptions=null,t.el=null,t.elAttrs=null,t.id=null,t.name=null,t.options=null,t.parent=null,t.root=null,t.status=null,t.style=null,t.transition=null,t.type=null,t.userData=null,t.visible=null,t.isSelected=null,A._instance=null,A.mask=null,A.canvas=null,A.parent=null,A.root=null,A.contentEl=null,A.el=null,A.animation=null,A.transition=null,A.$options=null,A._events=null,A._elEvents=null,A._elRealEvents=null}(A)):t(A,"节点还没创建")}};function E(t){var{type:A,options:e,root:i}=t;let s=e?.option?.id;return s?i.$nodeMap.has(s)&&(n(t,new Error(`id: ${s} 已存在`)),s=M(t,A)):s=M(t,A),s}function M(t,A){var e=D(A);return t.root.nodeMap.has(e)?M(t,A):e}const L=Math.random().toString(36).substr(-8);let _=Math.round(100*Math.random());function D(t="ui"){return t=t.toLowerCase()+"-"+(L+_),_++,t}const $=Promise.resolve();function S(t,A=null){return t?$.then(A?t.bind(A):t):$}const x=0,T=1,H=2,O=3,k=4;function N(A){var{root:e,style:n}=A,i=e.style,s=A.scaleMode;if(!e.isEdit)if(s===x)n.setStyle("transform",""),i.setStyle("overflow","auto");else{var e,{width:r,height:o}=A.edge,a=[(e=e.el.getBoundingClientRect()).width/r,e.height/o];switch(s){case T:n.setStyle("transformOrigin","0 0"),n.setStyle("transform.scale",a),i.setStyle("overflow","hidden");break;case H:n.setStyle("top",50,"%"),n.setStyle("left",0),n.setStyle("transformOrigin","0 0"),n.setStyle("transform.scaleX",a[0]),n.setStyle("transform.translateY",-50,"%"),i.setStyle("overflow","hidden");break;case O:n.setStyle("top",0),n.setStyle("left",50,"%"),n.setStyle("transformOrigin","0 0"),n.setStyle("transform.scaleY",a[1]),n.setStyle("transform.translateX",-50,"%"),i.setStyle("overflow","hidden");break;case k:n.setStyle("top",0),n.setStyle("left",0),n.setStyle("transformOrigin","0 0"),n.setStyle("transform.scaleX",a[0]),n.setStyle("overflow","hidden"),i.setStyle("overflow","");break;default:t(A,"画布缩放参数异常 "+s)}}}function K(t){var{children:t,adapter:A}=t;c(t)&&t.forEach((t=>K(t._instance))),A&&!A.isInsideResize&&A.resize()}function R(t,A,e){if(A){var{type:n,option:i,children:s}=A,r=("Container"===n&&i.adapter&&e&&(i.adapter=e[A.option.id]),j(t,A,{}));if(c(s))for(const t of s)R(r._instance,t,e);return r}}function j(t,A,e){var n=t.ctx;return t.layoutManager.createLayout(A.type,n,A.option,e).create().mount()}function P(A,e,n){var i;e=e?.children;e&&A&&(n?-1===(i=e.indexOf(n.ctx))?(t(n,"无法插入到这个节点的前面"),e.push(A.ctx)):e.splice(i,0,A.ctx):e.push(A.ctx))}function G(t){var A=t.parent?.children;t=t?.ctx;A&&t&&-1<(t=A.indexOf(t))&&A.splice(t,1)}function V(t,A){var e=t.length,n=A.location;let i=tt(t,n,0).startIndex,s=!1;for(;i<=e-1;i++)if(t[i].location>n){t.splice(i,0,A),s=!0;break}s||t.push(A)}function z(t){var{horizontal:A,vertical:e}=t.getParentLayer().locationMaps,{left:n,right:i,top:s,bottom:r,width:o,height:a}=t.edge;V(A,{location:n,instance:t,type:"left",getRealLocation:function(){return t.edge.getRealSize().left}}),V(A,{location:i,instance:t,type:"right",getRealLocation:function(){return t.edge.getRealSize().right}}),V(A,{location:n+o/2,instance:t,type:"hCenter",getRealLocation:function(){var{left:A,width:e}=t.edge.getRealSize();return A+e/2}}),V(e,{location:s,instance:t,type:"top",getRealLocation:function(){return t.edge.getRealSize().top}}),V(e,{location:r,instance:t,type:"bottom",getRealLocation:function(){return t.edge.getRealSize().bottom}}),V(e,{location:s+a/2,instance:t,type:"vCenter",getRealLocation:function(){var{top:A,height:e}=t.edge.getRealSize();return A+e/2}})}function J(t,A,e){let n=tt(t,e,0).endIndex;for(;0<=n;n--)if(t[n].instance===A){t.splice(n,1);break}}function Y(t){var A=t.edge,{left:A,right:e,top:n,bottom:i,width:s,height:r}=A,s=A+s/2,r=n+r/2,{horizontal:o,vertical:a}=t.getParentLayer().locationMaps;J(o,t,A),J(o,t,e),J(o,t,s),J(a,t,n),J(a,t,i),J(a,t,r)}function W(t){var{isGroup:A,children:e,parent:n}=t;Y(t),A&&function t(A){A.forEach((A=>{Y(A._instance),A.isGroup&&t(A.children)}))}(e),function t(A){A.isGroup&&(Y(A),A.parent)&&t(A.parent)}(n)}function X(t){var{isGroup:A,children:e,parent:n}=t;z(t),A&&function t(A){A.forEach((A=>{z(A._instance),A.isGroup&&t(A.children)}))}(e),function t(A){A.isGroup&&(z(A),A.parent)&&t(A.parent)}(n)}function Z(t,A){var{root:t,isUi:e,ctx:n}=t;n.emit("beforeUpdate",n,A),e||t.ctx.emit("beforeUpdate",n,A)}function q(t,A,e,n){var{root:t,isUi:i,ctx:s}=t;s.emit("updated",s,A,e,n),i||t.ctx.emit("updated",s,A,e,n)}function tt(t,A,e){let n,i,s=0,r=t.length-1,o=!1,a=!1;if(r<=3)return{startIndex:s,endIndex:r};for(;;)if(a||(!((n=s+Math.ceil((r-s)/2))>=r)&&(i=t[n].location,Math.abs(i-A)>e)?i>A?(r=n,a=!0):s=n:a=!0),o||(!((n=Math.floor((r-s)/2))<=s)&&(i=t[n].location,Math.abs(i-A)>e)?i>A?r=n:(s=n,o=!0):o=!0),o&&a)return{startIndex:s,endIndex:r}}function At(A,e){return A?!!e||(t("事件处理函数不能为空"),!1):(t("事件类型不能为空"),!1)}function et(t,A,e,n){At(A,e)&&(t._events[A]||(t._events[A]=[])).push([e,n])}function nt(t,A,e,n){if(d(A))t._events={};else if(d(e))t._events[A]=[];else{var i=t._events[A];if(c(i))for(let t=i.length-1;0<=t;t--){var[s,r]=i[t];if((s===e||s.fn===e)&&r===n){i.splice(t,1);break}}}}function it(t,A){var{type:A,options:e,listener:n}=A;t.addEventListener(A,n,e)}function st(t=[]){const A={stop:!1,capture:!1,self:!1,once:!1,prevent:!1,passive:!1,left:!1,right:!1,middle:!1,space:!1,enter:!1,delete:!1,esc:!1,tab:!1,up:!1,down:!1,shift:!1};return t.forEach((t=>{y(A,t)&&(A[t]=!0)})),A}const rt={space:!1,enter:!1,delete:!1,esc:!1,tab:!1,up:!1,down:!1,left:!1,right:!1};function ot(t,A,e){return t=t._elRealEvents,!!y(t,A)&&t[A].some((t=>b(t.options,e)))}function at(t,A,e,n){var i=(A=A.split(".")).shift();A=st(A);if(i=t._elEvents[i])return(i=i[(A.capture?"capture":"bubble")+(A.passive?"-passive":"")])&&-1!==(A=i.findIndex((t=>t.listener===e&&t.context===n)))&&i.splice(A,1),t}function lt(t,A,n,i){var s=A.split("."),r=s.shift();const o=st(s);y(t,"_elEvents")||(t._elEvents={}),y(t,"_elRealEvents")||(t._elRealEvents={}),s=t._elEvents[r]||(t._elEvents[r]={});let a=t=>{if(t instanceof MouseEvent){if(o.left&&0!==t.button)return;if(o.middle&&1!==t.button)return;if(o.right&&2!==t.button)return;if(o.ctrl&&!t.ctrlKey)return;if(o.shift&&!t.shiftKey)return;if(o.alt&&!t.altKey)return;if(o.meta&&!t.metaKey)return;if(o.space&&!rt.space)return;if(o.enter&&!rt.enter)return;if(o.delete&&!rt.delete)return;if(o.esc&&!rt.esc)return;if(o.tab&&!rt.tab)return}if(t instanceof KeyboardEvent){if(o.space&&!rt.space)return;if(o.enter&&!rt.enter)return;if(o.delete&&!rt.delete)return;if(o.esc&&!rt.esc)return;if(o.tab&&!rt.tab)return;if(o.up&&!rt.up)return;if(o.down&&!rt.down)return;if(o.left&&!rt.left)return;if(o.right&&!rt.right)return;if(o.ctrl&&!t.ctrlKey)return;if(o.shift&&!t.shiftKey)return;if(o.alt&&!t.altKey)return;if(o.meta&&!t.metaKey)return}o.stop&&t.stopPropagation(),o.prevent&&t.preventDefault(),e(null,n,i||null,[t])};if(o.once){const e=a;a=s=>{e(s),ct(t,A,n,i)}}var l=(o.capture?"capture":"bubble")+(o.passive?"-passive":"");const c=s[l]||(s[l]=[]);c.push({listener:n,_fn:a,context:i}),s={capture:o.capture,passive:o.passive},ot(t,r,s)||(l={type:r,options:s,listener:function(t){c.forEach((A=>{A._fn(t)}))}},(t._elRealEvents[r]||(t._elRealEvents[r]=[])).push(l),it(t,l))}function ct(t,A,e,n){var i=(A=A.split(".")).shift();A=st(A),i=t?._elEvents[i];if(i)return(i=i[(A.capture?"capture":"bubble")+(A.passive?"-passive":"")])&&-1!==(A=i.findIndex((t=>t.listener===e&&t.context===n)))&&i.splice(A,1),t}document.addEventListener("keydown",(t=>{switch(t.code){case"ArrowUp":rt.up=!0;break;case"ArrowDown":rt.down=!0;break;case"ArrowLeft":rt.left=!0;break;case"ArrowRight":rt.right=!0;break;case"Space":rt.space=!0;break;case"Enter":rt.enter=!0;break;case"Backspace":case"Delete":rt.delete=!0;break;case"Escape":rt.esc=!0;break;case"Tab":rt.tab=!0}}),!0),document.addEventListener("keyup",(t=>{switch(t.code){case"ArrowUp":rt.up=!1;break;case"ArrowDown":rt.down=!1;break;case"ArrowLeft":rt.left=!1;break;case"ArrowRight":rt.right=!1;break;case"Space":rt.space=!1;break;case"Enter":rt.enter=!1;break;case"Backspace":case"Delete":rt.delete=!1;break;case"Escape":rt.esc=!1;break;case"Tab":rt.tab=!1}}),!0);class ut{constructor(){this._events={},this._elEvents={},this._elRealEvents={}}init(){this._events={},this._elEvents={},this._elRealEvents={}}on(t,A,e){return et(this,t,A,e),this}once(t,A,e){return function(t,A,e,n){if(At(A,e)){const i=(...s)=>{nt(t,A,i),e.apply(n,s)};i.fn=e,et(t,A,i,n)}}(this,t,A,e),this}off(t,A,e){return nt(this,t,A,e),this}emit(t,...A){return function(t,A,n){if(A=t._events[A],c(A))for(const r of[...A]){var[i,s]=r;e(t,i,s,n)}}(this,t,A),this}addEventListener(A,n,i=void 0){if(this._instance.isBeforeMounted)return function(t,A,n,i){var s=A.split("."),r=s.shift();const o=st(s);s=t._elEvents[r]||(t._elEvents[r]={});let a=A=>{if(A instanceof MouseEvent){if(o.left&&0!==A.button)return;if(o.middle&&1!==A.button)return;if(o.right&&2!==A.button)return;if(o.ctrl&&!A.ctrlKey)return;if(o.shift&&!A.shiftKey)return;if(o.alt&&!A.altKey)return;if(o.meta&&!A.metaKey)return;if(o.space&&!rt.space)return;if(o.enter&&!rt.enter)return;if(o.delete&&!rt.delete)return;if(o.esc&&!rt.esc)return;if(o.tab&&!rt.tab)return}if(A instanceof KeyboardEvent){if(o.space&&!rt.space)return;if(o.enter&&!rt.enter)return;if(o.delete&&!rt.delete)return;if(o.esc&&!rt.esc)return;if(o.tab&&!rt.tab)return;if(o.up&&!rt.up)return;if(o.down&&!rt.down)return;if(o.left&&!rt.left)return;if(o.right&&!rt.right)return;if(o.ctrl&&!A.ctrlKey)return;if(o.shift&&!A.shiftKey)return;if(o.alt&&!A.altKey)return;if(o.meta&&!A.metaKey)return}o.stop&&A.stopPropagation(),o.prevent&&A.preventDefault(),e(t,n,i||null,[{event:A,ctx:t}])};if(o.once){const e=a;a=s=>{e(s),at(t,A,n,i)}}var l=(o.capture?"capture":"bubble")+(o.passive?"-passive":"");const c=s[l]||(s[l]=[]);c.push({listener:n,_fn:a,context:i}),s={capture:o.capture,passive:o.passive},ot(t,r,s)||(l={type:r,options:s,listener:function(t){for(const A of c)A._fn(t)}},(t._elRealEvents[r]||(t._elRealEvents[r]=[])).push(l),it(t._instance.el,l))}(this,A,n,i),this;t(this,"请在mounted后添加dom事件")}removeEventListener(t,A,e){return at(this,t,A,e),this}destroy(){this._events=null,this._elEvents=null,this._elRealEvents=null}}class ht{constructor(t){this._instance=t,this._list=null,this._map=null,this._running=null,this._isMultSelect=null,this._selectLayer=null}init(){return this._list=[],this._map=new Map,this._running=!0,this._isMultSelect=!1,this._selectLayer=null,lt(document,"keydown",Ut,this),lt(document,"keyup",Ft,this),this}select(...t){return this._running&&dt(this,It(t,!1)),this}unselect(...t){return this._running&&pt(this,It(t,!0)),this}clear(){return this._running&&bt(this),this}enableMultiSelect(){var{_running:t,_isMultSelect:A}=this;return t&&!A&&(this._isMultSelect=!0),this}disableMultiSelect(){var{_running:t,_isMultSelect:A}=this;return t&&A&&(this._isMultSelect=!1),this}enable(){return this._running||(this._running=!0),this}disable(){return this._running&&(this._running=!1),this}getSelectElements(){return this._list.map((t=>t.ctx))}getSelectLayer(){return this._selectLayer?.ctx}destroy(){ct(document,"keydown",Ut,this),ct(document,"keyup",Ft,this),bt(this),this._list=null,this._map=null,this._running=null,this._isMultSelect=null,this._instance=null}}function dt(t,A=[]){if(t._running){let e;A=function(t=[]){let A;var e=[];for(const i of t){var n=i.parent;A?A===n?e.push(i):(e.splice(0,e.length),A=n):(A=n,e.push(i))}return e}(A),t._isMultSelect||(e=ft(t)),A.forEach((A=>{var n=A.isLayer;n?function(t){var A=t.root,e=A.selector,{_selectLayer:n,_list:i}=e;if(n!==t)pt(e,i),e._selectLayer=null,n&&yt(n),e._selectLayer=t,A.guide.updateLocationMaps(t.locationMaps),mt(t)}(A):(n=function(t,A){var{selectLock:e,id:n}=A;return!e&&!t._map.get(n)&&t._selectLayer===A.getParentLayer()&&(t._list.push(A),t._map.set(n,A),mt(A),!0)}(t,A),!e&&n&&(e=n))})),e&&Ct(t)}}function pt(t,A=[]){if(t._running){let e;A.forEach((A=>{var n=A.isLayer;n?function(t){var{isSelected:A,root:e}=t,n=e.selector,i=n._selectLayer;A&&i===t&&(bt(n),n._selectLayer=null,e.guide.updateLocationMaps(),yt(t))}(A):(n=gt(t,A),!e&&n&&(e=n))})),e&&Ct(t)}}function gt(t,A){var{selectLock:e,id:n,isLayer:i}=A;return!e&&!i&&-1<t._list.indexOf(A)&&(t._list.splice(t._list.indexOf(A),1),t._map.delete(n),yt(A),!0)}function ft(t){var A=[...t._list];let e=!1;return A.forEach((A=>{A=gt(t,A),!e&&A&&(e=A)})),e}function Bt(t){var{root:A,ctx:e,parent:n,isLayer:i,isMounted:s,style:r}=t;r.setStyle("zIndex",1),A.boundBox.add(t).show(),t.isSelected=!0,Qt(n,t),s&&(i?(e.emit("selectLayer",e),A.ctx.emit("selectLayer",e)):(e.emit("select",e),A.ctx.emit("select",e)))}function mt(t){var{isMounted:A,isSelected:e}=t;A?I.update(t,(()=>{Bt(t)}),"isSelected",!0,e):Bt(t)}function wt(t){var{root:A,ctx:e,parent:n,isLayer:i,isMounted:s,style:r}=t;r.setStyle("zIndex",""),A.boundBox.remove(t),t.isSelected=!1,vt(n,t),s&&(i?(e.emit("unSelectLayer",e),A.ctx.emit("unSelectLayer",e)):(e.emit("unSelect",e),A.ctx.emit("unSelect",e)))}function yt(t){var{isMounted:A,isSelected:e}=t;A?I.update(t,(()=>{wt(t)}),"isSelected",!1,e):wt(t)}function Ct(t){t._instance.ctx.emit("selectElements",t.getSelectElements())}function Qt(t,A){t?.isGroup&&(t.selectChildren.push(A),Qt(t.parent,A))}function vt(t,A){var e;t?.isGroup&&(-1!==(e=t.selectChildren.findIndex((t=>t===A)))&&t.selectChildren.splice(e,1),vt(t.parent,A))}function bt(t){t._list.length&&(ft(t),Ct(t))}function Ut(t){t.shiftKey&&this.enableMultiSelect()}function Ft(t){t.shiftKey||this.disableMultiSelect()}function It(t=[],A){var e=[];for(const a of t){var n,i,s,r,o=(a||{})._instance;o&&(({isLayer:n,isContainer:i,isGroup:s,isSelected:r}=o),n||i||s)&&A===r&&e.push(o)}return e}var Et="2.0.9";const Mt={display:"none",position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"},Lt={"data-id":"mask"};class _t{constructor(t){this.instance=t,this.maskEl=null,this.defaultMaskElStyles=Object.freeze(Mt),this.defaultMaskElAttrs=Object.freeze(Lt),this.maskElStyles=null,this.maskElAttrs=null,this.running=!1,this.visible=!1}init(){}enable(){this.running&&(this.running=!0)}disable(){this.running||(this.hidden(),this.running=!1)}show(){var t;!this.running&&this.visible||(this.maskEl||(t=this.instance.config,this.maskElAttrs={...this.defaultMaskElAttrs,...t?.maskElAttrs||{}},this.maskElStyles={...this.defaultMaskElStyles,...t?.maskElStyles||{}},this.maskEl=i.createElement(),r(this.maskEl,this.maskElStyles),l(this.maskEl,this.maskElAttrs),this.instance.el.appendChild(this.maskEl)),o(this.maskEl,"display",""),this.visible=!0)}hidden(){(this.running||this.visible||this.maskEl)&&(o(this.maskEl,"display","none"),this.visible=!1)}updateStyles(t){this.maskElStyles={...this.maskElStyles,...t||{}},r(this.maskEl,this.maskElStyles)}destroy(){this.maskEl&&i.remove(this.maskEl),this.instance=null,this.maskEl=null,this.defaultMaskElStyles=null,this.defaultMaskElAttrs=null,this.maskElStyles=null,this.maskElAttrs=null,this.running=null,this.visible=null}}const Dt={display:"none",position:"absolute",top:"0px",left:"0px",width:"0px",height:"0px",backgroundColor:"rgba(0, 122, 255, 0.1)",border:"1px solid rgb(0, 122, 255)"},$t={"data-id":"regionSelect"};class St{constructor(t){this.instance=t,this.el=null,this.defaultElStyles=Object.freeze(Dt),this.defaultElAttrs=Object.freeze($t),this.elStyles=null,this.elAttrs=null,this.running=null,this.visible=null,this.eventStatus=null}init(){this.el=null,this.running=!0,this.visible=!1,Ht(this)}enable(){this.running||(this.running=!0)}disable(){this.running&&(this.running=!1)}_bindEvent(){this.eventStatus||Ht(this)}_unbindEvent(){this.eventStatus&&Ot(this)}destroy(){Ot(this),this.el&&i.remove(this.el),this.eventStatus=null,this.visible=null,this.running=null,this.elAttrs=null,this.elStyles=null,this.defaultElAttrs=null,this.defaultElStyles=null,this.el=null,this.instance=null}}function xt(t){!t.running&&t.visible||(t.el||function(t){var A=t.instance,e=A.config;t.elAttrs={...t.defaultElAttrs,...e?.elAttrs||{}},t.elStyles={...t.defaultElStyles,...e?.elStyles||{}},t.el=i.createElement(),r(t.el,t.elStyles),l(t.el,t.elAttrs),A.workspaceEl.appendChild(t.el)}(t),r(t.el,{top:"0px",left:"0px",width:"0px",height:"0px",display:""}),t.visible=!0)}function Tt({event:t}){const A=this;var e=A.instance,{clientX:t,clientY:n}=t;const{clientTop:i,clientLeft:s}=e.edge;let a=t,l=n,c=0,u=0;function h(t){var{movementX:t,movementY:e,clientX:n,clientY:o}=t,e=(t=(c+=t,u+=e,Math.min(a,n)-s),Math.min(l,o)-i),n=Math.abs(c),o=Math.abs(u);A.visible||xt(A),function(t,A,e,n,i){r(t.el,{top:e+"px",left:A+"px",width:n+"px",height:i+"px"})}(A,t,e,n,o),function(t,A,e,n,i){t=t.instance.root.selector;var s=t.getSelectLayer();const r=t.getSelectElements();if(s){const a=A+n,l=e+i,c=s.children.filter((t=>{var s,r,o,c,u;if(!t.lock)return({top:t,left:c,width:s,height:r,right:o,bottom:u}=t._instance.getRect()),o=Math.max(o,a),c=Math.min(c,A),u=Math.max(u,l),t=Math.min(t,e),o-c<=s+n&&u-t<=r+i||void 0}));s=r.filter((t=>!c.includes(t)));var o=c.filter((t=>!r.includes(t)));0<s.length&&pt(t,s.map((t=>t._instance))),0<o.length&&dt(t,o.map((t=>t._instance)))}}(A,t,e,n,o)}A.running&&(document.addEventListener("mousemove",h),document.addEventListener("mouseup",(function t(){(function(t){t.running&&t.visible&&t.el&&(o(t.el,"display","none"),t.visible=!1)})(A),A.instance.root.selector.disableMultiSelect(),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",t)})),A.instance.root.selector.enableMultiSelect())}function Ht(t){t.eventStatus||(t.instance.ctx.addEventListener("mousedown.left",Tt,t),t.eventStatus=!0)}function Ot(t){t.eventStatus&&(t.instance.ctx.removeEventListener("mousedown.left",Tt,t),t.eventStatus=!1)}class kt{constructor(t,A={}){this.instance=t,this.options=A,this.top=null,this.left=null,this.right=null,this.bottom=null,this.width=null,this.height=null,this.fullTop=null,this.fullLeft=null,this.fullRight=null,this.fullBottom=null,this.fullWidth=null,this.fullHeight=null,this.realTop=null,this.realLeft=null,this.realRight=null,this.realBottom=null,this.realWidth=null,this.realHeight=null}init(){var t,A,e,{options:n,instance:i}=this,{top:s,left:r}=i.parent.edge,{top:n=0,left:t=0,width:A=1,height:e=1}=n,n=Math.round(n)||0,o=(t=Math.round(t)||0)+(A=Math.round(A)||1),a=n+(e=Math.round(e)||1);this.top=n,this.left=t,this.width=A,this.height=e,this.right=o,this.bottom=a,this.fullTop=n,this.fullLeft=t,this.fullRight=o,this.fullBottom=a,this.fullWidth=A,this.fullHeight=e,i.style.setStyles({top:n-s,left:t-r,width:A,height:e})}setOffset(t,A,e,n){t>>=0,A>>=0,e>>=0,n>>=0,!this.instance.lock&&0<Math.abs(t)+Math.abs(A)+Math.abs(e)+Math.abs(n)&&Kt(this,Vt(this,t,A,e,n))}setWidth(t){t>>=0;var A,{instance:A,width:e}=this;(A=A.lock)||e===t||Kt(this,Vt(this,0,0,t-e,0))}setHeight(t){t>>=0;var A,{instance:A,height:e}=this;(A=A.lock)||e===t||Kt(this,Vt(this,0,0,0,t-e))}setTop(t){t>>=0;var A,{instance:A,top:e}=this;(A=A.lock)||e===t||Kt(this,Vt(this,0,t-e,0,0))}setLeft(t){t>>=0;var A,{instance:A,left:e}=this;(A=A.lock)||e===t||Kt(this,Vt(this,t-e,0,0,0))}setSize(t,A){t>>=0,A>>=0;var e,{instance:e,width:n,height:i}=this;(e=e.lock)||n===t&&i===A||Kt(this,Vt(this,0,0,t-n,A-i))}setPosition(t,A){t>>=0,A>>=0;var e,{instance:e,left:n,top:i}=this;(e=e.lock)||n===t&&i===A||Kt(this,Vt(this,t-n,A-i,0,0))}setRect(t,A,e,n){t>>=0,A>>=0,e>>=0,n>>=0;var i,{instance:i,left:s,top:r,width:o,height:a}=this;(i=i.lock)||s===t&&r===A&&o===e&&a===n||Kt(this,Vt(this,t,A,e,n,!1))}update(){Nt(this)}updateReal(){Pt(this)}_updateGroup(){!function(t){var{edge:A,isGroup:e,parent:n}=t;n.isGroup?(Yt(t,Vt(A,0,0,0,0)),Jt(n)):Nt(A),e&&Jt(t)}(this.instance)}_updateParentGroup(){zt(this.instance)}getRealSize(){return function(t){var{top:t,left:A,width:e,height:n,right:i,bottom:s,instance:r}=t,r=(r.canvas.scaleManage||{realRatio:1}).realRatio;return{top:t*r,left:A*r,right:i*r,bottom:s*r,width:e*r,height:n*r}}(this)}destroy(){this.realTop=null,this.realLeft=null,this.realRight=null,this.realBottom=null,this.realWidth=null,this.realHeight=null,this.top=null,this.left=null,this.right=null,this.bottom=null,this.width=null,this.height=null,this.options=null,this.instance=null}}function Nt(t){var A,e,n,i=t.instance;i.isGroup&&(({left:i,top:A,width:e,height:n}=jt(t)),Rt(t,Vt(t,i,A,e,n,!1))),Pt(t),Gt(t)}function Kt(t,A){var e=(e=t.instance).isGroup;Rt(t,A),e&&function(t,A){t=t.instance,t=t.children;var{fullWidth:A,fullHeight:e,offsetLeft:n,offsetTop:i,oldFullWidth:s,oldFullHeight:r,oldFullLeft:o,oldFullTop:a}=A,l=A/s,c=e/r;for(const A of t){var u=A._instance.edge,{fullLeft:h,fullTop:d,fullWidth:p,fullHeight:g}=u,h=(h=h-o)*l-h+n,d=(d=d-a)*c-d+i,p=p*l-p,g=g*c-g;if(0<Math.abs(h)+Math.abs(d)+Math.abs(p)+Math.abs(g)){Kt(u,Vt(u,h,d,p,g))}}}(t,A)}function Rt(t,A){const{fullLeft:e,fullTop:n,fullWidth:i,fullHeight:s}=A;var{instance:A,left:r,top:o,width:a,height:l}=t;const c=e!==r,h=n!==o,d=i!==a,p=s!==l;var g=[];c&&g.push({type:"left",value:u(e),oldValue:r}),h&&g.push({type:"top",value:u(n),oldValue:o}),d&&g.push({type:"width",value:u(i),oldValue:a}),p&&g.push({type:"height",value:u(s),oldValue:l}),I.update(A,(()=>{(c||h||d||p)&&function(t,A,e,n,i){var s=A+n,r=e+i;t.left=u(A),t.top=u(e),t.width=u(n),t.height=u(i),t.right=u(s),t.bottom=u(r),t.fullLeft=A,t.fullTop=e,t.fullRight=s,t.fullBottom=r,t.fullWidth=n,t.fullHeight=i}(t,e,n,i,s),Pt(t),Gt(t)}),g)}function jt(t,A){let e=1/0,n=1/0,i=-1/0,s=-1/0;if(0===(t=(t=t.instance).children).length)e=0,n=0,i=0,s=0;else for(const c of t){var r,o,a,l=c._instance;l!==A&&(({left:l,top:r,right:o,bottom:a}=l.edge),n=Math.min(n,l),e=Math.min(e,r),i=Math.max(i,o),s=Math.max(s,a))}return{top:e,left:n,right:i,bottom:s,width:i-n,height:s-e}}function Pt(t){var{top:A,left:e,width:n,height:i,right:s,bottom:r,instance:o}=t,o=(o.canvas.scaleManage||{realRatio:1}).realRatio;t.realTop=A*o,t.realLeft=e*o,t.realRight=s*o,t.realBottom=r*o,t.realWidth=n*o,t.realHeight=i*o}function Gt(t){const{instance:A,fullLeft:n,fullTop:i,fullWidth:s,fullHeight:r}=t;var{fullLeft:t,fullTop:o}=A.parent.edge,o=(t=n-t,i-o),a=(l=A.style).getStyleValue("width")!==s,l=l.getStyleValue("height")!==r;A.style.setStyles({top:o,left:t,width:s,height:r}),(a||l)&&A.adapter&&e(A,(()=>{A.adapter.resize()}),A,[])}function Vt(t,A=0,e=0,n=0,i=0,s=!0){var{left:t,top:r,width:o,height:a,right:l,bottom:c,fullLeft:u,fullTop:h,fullWidth:d,fullHeight:p,fullRight:g,fullBottom:f}=t;let B,m,w,y,C,Q,v,b,U,F,I,E;return E=s?(B=A,m=e,w=n,y=i,C=t+A,Q=r+e,v=o+n,b=a+i,U=u+A,F=h+e,I=d+n,p+i):(B=A-t,m=e-r,w=n-o,y=i-a,C=A,Q=e,v=n,b=i,U=A,F=e,I=n,i),{left:C,top:Q,right:s=C+v,bottom:A=Q+b,width:v,height:b,fullLeft:U,fullTop:F,fullRight:e=U+I,fullBottom:n=F+E,fullWidth:I,fullHeight:E,offsetLeft:B,offsetTop:m,offsetWidth:w,offsetHeight:y,oldLeft:t,oldTop:r,oldRight:l,oldBottom:c,oldWidth:o,oldHeight:a,oldFullLeft:u,oldFullTop:h,oldFullRight:g,oldFullBottom:f,oldFullWidth:d,oldFullHeight:p}}function zt(t){var{edge:A,parent:e}=t;e.isGroup&&(Yt(t,Vt(A,0,0,0,0)),Jt(e))}function Jt(t){t=t.children;for(const A of t)Nt(A._instance.edge)}function Yt(t,A){var e=t.parent,{left:A,top:n,right:i,bottom:s}=A,{left:t,top:r,right:o,bottom:a}=jt(e.edge,t),r=(t=Math.min(t,A),Math.min(r,n)),o=Math.max(o,i),a=Math.max(a,s),{offsetLeft:n,offsetTop:i}=(A=Vt(e.edge,t,r,o-t,a-r,!1),e.parent?.isGroup&&Yt(e,A),Rt(e.edge,A),A);0<Math.abs(n)+Math.abs(i)&&e.children.forEach((t=>{t._instance.edge.update()}))}const Wt={display:"none",position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",pointerEvents:"none"},Xt={"data-id":"bound-box"},Zt={position:"absolute",top:"calc(50% - 10px)",left:"calc(100% + 15px)",padding:"0 4px",lineHeight:"20px",backgroundColor:"rgb(0, 122, 255)",fontSize:"12px",color:"white",whiteSpace:"nowrap",borderRadius:"2px"},qt={"data-id":"text-label"},tA={position:"absolute",top:"-32px",left:"calc(50% - 8px)",width:"16px",height:"16px",pointerEvents:"all",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(0, 122, 255) rgb(0, 122, 255) transparent rgb(0, 122, 255)",borderRadius:"50%",boxSizing:"content-box",cursor:"pointer"},AA={"data-id":"rotate"},eA={position:"absolute",top:"12px",left:"8px",width:"0",height:"0",borderWidth:"4px",borderStyle:"solid",borderColor:"rgb(0, 122, 255) transparent transparent transparent",transform:"rotate(50deg)",boxSizing:"content-box"},nA={"data-id":"rotate-arrow"},iA={},sA={"data-id":"bound-borders"},rA={position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"1px solid rgb(0, 122, 255)",boxSizing:"border-box"},oA={"data-id":"border-collect"},aA={position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"1px solid rgb(0, 122, 255)",boxSizing:"border-box"},lA={"data-id":"border"},cA={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},uA={"data-id":"operates"},hA={position:"absolute",width:"7px",height:"7px",borderRadius:"50%",backgroundColor:"rgb(0, 122, 255)",pointerEvents:"all"},dA={"data-id":"operate"},pA=[{key:"top",attrs:{"data-id":"operate-top"},styles:{top:"-3px",left:"calc(50% - 3px)",cursor:"ns-resize"},on:{"mousedown.left.stop":function(){yA(this,((t,A)=>({moveTop:t.movementY/A,moveLeft:0,moveRight:0,moveBottom:0})))}}},{key:"topRight",attrs:{"data-id":"operate-topRight"},styles:{top:"-3px",right:"-3px",cursor:"nesw-resize"},on:{"mousedown.left.stop":function(){yA(this,((t,A)=>{var e=t.movementX/A;return{moveTop:t.movementY/A,moveLeft:0,moveRight:e,moveBottom:0}}))}}},{key:"right",attrs:{"data-id":"operate-right"},styles:{top:"calc(50% - 3px)",right:"-3px",cursor:"ew-resize"},on:{"mousedown.left.stop":function(){yA(this,((t,A)=>({moveTop:0,moveLeft:0,moveRight:t.movementX/A,moveBottom:0})))}}},{key:"bottomRight",attrs:{"data-id":"operate-bottomRight"},styles:{right:"-3px",bottom:"-3px",cursor:"nwse-resize"},on:{"mousedown.left.stop":function(){yA(this,((t,A)=>({moveTop:0,moveLeft:0,moveRight:t.movementX/A,moveBottom:t.movementY/A})))}}},{key:"bottom",attrs:{"data-id":"operate-bottom"},styles:{left:"calc(50% - 3px)",bottom:"-3px",cursor:"ns-resize"},on:{"mousedown.left.stop":function(){yA(this,((t,A)=>({moveTop:0,moveLeft:0,moveRight:0,moveBottom:t.movementY/A})))}}},{key:"bottomLeft",attrs:{"data-id":"operate-bottomLeft"},styles:{left:"-3px",bottom:"-3px",cursor:"nesw-resize"},on:{"mousedown.left.stop":function(){yA(this,((t,A)=>({moveTop:0,moveLeft:t.movementX/A,moveRight:0,moveBottom:t.movementY/A})))}}},{key:"left",attrs:{"data-id":"operate-left"},styles:{top:"calc(50% - 3px)",left:"-3px",cursor:"ew-resize"},on:{"mousedown.left.stop":function(){yA(this,((t,A)=>({moveTop:0,moveLeft:t.movementX/A,moveRight:0,moveBottom:0})))}}},{key:"topLeft",attrs:{"data-id":"operate-topLeft"},styles:{top:"-3px",left:"-3px",cursor:"nwse-resize"},on:{"mousedown.left.stop":function(){yA(this,((t,A)=>{var e=t.movementX/A;return{moveTop:t.movementY/A,moveLeft:e,moveRight:0,moveBottom:0}}))}}}];class gA{constructor(t){this.instance=t,this.styles=null,this.attrs=null,this.el=null,this.textEl=null,this.rotateEl=null,this.borderParentEl=null,this.borderCollectEl=null,this.borderList=null,this.showBorderList=null,this.operateParentEl=null,this.operates=null,this.visible=null,this.status=null,this.textStatus=null,this.borderStatus=null,this.operateStatus=null,this.instanceList=null,this.textContent=null,this.showBorderMap=null}init(){return this.status=!0,this.textStatus=!0,this.borderStatus=!0,this.operateStatus=!0,this.visible=!1,this.instanceList=[],this.borderList=new Map,this.showBorderMap=new Map,this.showBorderList=[],this.textContent=null,this.styles={el:{...Wt},rotate:{...tA},rotateArrow:{...eA},text:{...Zt},borderParent:{...iA},borderCollect:{...rA},border:{...aA},operateParent:{...cA},operate:{...hA}},this.attrs={el:{...Xt},rotate:{...AA},rotateArrow:{...nA},text:{...qt},borderParent:{...sA},borderCollect:{...oA},border:{...lA},operateParent:{...uA},operate:{...dA}},this.borderParentEl||(this.borderParentEl=fA(this),i.insert(this.borderParentEl,this.instance.workspaceEl)),this.operates=pA.map((t=>{var{styles:t,attrs:A,on:e}=t;return{el:null,styles:t,attrs:A,on:e}})),this}enable(){var{textStatus:t,status:A,borderStatus:e,operateStatus:n}=this;return A&&t&&e&&n||(this.status=!0,this.textStatus=!0,this.borderStatus=!0,this.operateStatus=!0,QA(this)),this}disable(){var{textStatus:t,status:A,borderStatus:e,operateStatus:n}=this;return(A||t||e||n)&&(this.status=!1,this.textStatus=!1,this.borderStatus=!1,this.operateStatus=!1,this.visible=!1,QA(this)),this}enableText(){return this.textStatus||(this.textStatus=!0,QA(this)),this}disableText(){return this.textStatus&&(this.textStatus=!1,QA(this)),this}enableBorder(){return this.borderStatus||(this.borderStatus=!0,QA(this)),this}disableBorder(){return this.borderStatus&&(this.borderStatus=!1,QA(this)),this}enableOperate(){return this.operateStatus||(this.operateStatus=!0,QA(this)),this}disableOperate(){return this.operateStatus&&(this.operateStatus=!1,QA(this)),this}show(){var{visible:t,status:A}=this;return A&&!t&&(this.visible=!0,QA(this)),this}hidden(){var{visible:t,status:A}=this;return A&&t&&(this.visible=!1,QA(this)),this}showBorder(t){var{showBorderList:A,status:e}=this;t=t?._instance;return e&&t&&function(t,A){var{showBorderList:t,instanceList:e,instance:n}=t;if(!(n.selector._selectLayer!==A.getParentLayer()||t.find((t=>t===A))||e.some((t=>vA(t,A)))||e.some((t=>vA(A,t)))||t.some((t=>vA(A,t)))))return!0}(this,t)&&(A.push(t),QA(this)),this}hiddenBorder(t){var{showBorderList:A,status:e}=this;return e&&(t?._instance?0<=(e=A.findIndex((A=>A===t._instance)))&&A.splice(e,1):A.splice(0,A.length),QA(this)),this}add(...t){var{instanceList:A,status:e}=this;if(e&&c(t)){for(const e of t)!e.isContainer&&!e.isGroup||A.find((t=>t===e))||(A.push(e),bA(this));QA(this)}return this}remove(...t){var{instanceList:A,status:e}=this;if(e&&c(t)){for(const e of t){var n=A.findIndex((t=>t===e));0<=n&&A.splice(n,1)}QA(this)}return this}update(){QA(this,!1)}clear(){var{instanceList:t,status:A}=this;return A&&0!==(A=t.length)&&(t.splice(0,A),QA(this)),this}destroy(){this.el&&(i.remove(el),this.el=null),this.instanceList=null,this.status=null,this.visible=null,this.operates=null,this.defaultStyles=null,this.textEl=null,this.rotateEl=null,this.borderEl=null,this.operateParentEl=null,this.operateElMap=null,this.showBorderList=null,this.instance=null}}function fA(t){var{styles:t,attrs:A}=t,e=i.createElement();return r(e,t.borderParent),l(e,A.borderParent),e}function BA(t){var{styles:t,attrs:A}=t,e=i.createElement();return r(e,t.border),l(e,A.border),e}function mA(t){const{styles:A,attrs:e,instance:n}=t;var s=i.createElement(),o=i.createElement();return r(s,A.rotate),l(s,e.rotate),r(o,A.rotateArrow),l(o,e.rotateArrow),s.appendChild(o),lt(s,"mousedown.left.stop",(function(A){var{canvas:e,root:i,ctx:s}=n,r=i.isEdit,e=e.scaleManage.mouseDownEventRunning;r&&e||(s.emit("graphRotateStart",s),i.ctx.emit("graphRotateStart",s),function(t,A){t=t.instanceList;const[e]=t,{root:n,ctx:i}=e;var{top:t,left:s,width:r,height:o}=e.getRect();const{top:a,left:l}=n.edge,c={x:s+r/2,y:t+o/2},u={x:A.clientX-l,y:A.clientY-a},h=e.style.getStyleValue("rotate");async function d(t){t={x:t.clientX-l,y:t.clientY-a},t=function(t,A,e){var n={},i={};return n.X=A.x-t.x,n.Y=A.y-t.y,i.X=e.x-t.x,i.Y=e.y-t.y,n=n.X*i.Y-n.Y*i.X,i=Math.sqrt(Math.pow(t.x-A.x,2)+Math.pow(t.y-A.y,2)),t=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),A=Math.sqrt(Math.pow(A.x-e.x,2)+Math.pow(A.y-e.y,2)),e=(Math.pow(i,2)+Math.pow(t,2)-Math.pow(A,2))/(2*i*t),A=Math.round(180*Math.acos(e)/Math.PI),n<0?-A:A}(c,u,t),t=(h+t+360)%360,e.style.setStyle("rotate",t),await S(),i.emit("graphRotating",i),n.ctx.emit("graphRotating",i)}lt(document,"mousemove",d),lt(document,"mouseup",(function t(){ct(document,"mousemove",d),ct(document,"mouseup",t),i.emit("graphRotateEnd",i),n.ctx.emit("graphRotateEnd",i)}))}(t,A))})),s}function wA(t,A){var{styles:e,attrs:n}=t,s=i.createElement(),{styles:A,attrs:o,on:a}=A;r(s,{...e.operate,...A}),l(s,{...n.operate,...o});for(const A in a)lt(s,A,a[A],t);return s}function yA(t,A){const{instance:e,instanceList:n}=t,{isEdit:i,ctx:s}=e.root,{realRatio:r,mouseDownEventRunning:o}=e.canvas.scaleManage;function a(e){var{moveTop:i,moveLeft:o,moveRight:a,moveBottom:l}=A(e,r);(function(t,A,e,n,i){const{sourceTop:s,sourceLeft:r,sourceRight:o,sourceBottom:a,sourceWidth:l,sourceHeight:c}=CA;CA.moveTop+=A,CA.moveLeft+=e,CA.moveRight+=n,CA.moveBottom+=i,n=CA.width+=n-e,e=CA.height+=i-A;const u=n/l,h=e/c;CA.compsArr.forEach((t=>{var A=t.sourceLeft-r,e=t.sourceTop-s,n=(A=A*u-A+CA.moveLeft,e=e*h-e+CA.moveTop,t.sourceWidth*u-t.sourceWidth),i=t.sourceHeight*h-t.sourceHeight;let l=t.sourceTop+e,c=t.sourceLeft+A,d=t.sourceWidth+n,p=t.sourceHeight+i;p<=1&&(l>=a?l=a:l<=s&&(l=s),p=1),d<=1&&(c>=o?c=o:c<=r&&(c=r),d=1);var{edge:e,root:A}=t.instance;W(t.instance),e.setRect(c,l,d,p),zt(t.instance),X(t.instance),A.boundBox.update()})),QA(t)})(t,i,o,a,l),s.emit("graphResizing",{event:e,elements:[...n]})}i&&o||(s.emit("graphResizeStart",{elements:[...n]}),lt(document,"mousemove",a),lt(document,"mouseup",(function t(){ct(document,"mousemove",a),ct(document,"mouseup",t),CA=null,s.emit("graphResizeEnd",[...n])})),function(t){let A=1/0,e=1/0,n=-1/0,i=-1/0;t=t.instanceList.map((t=>{var{top:s,left:r,width:o,height:a,right:l,bottom:c}=t.edge;return A=Math.min(A,s),e=Math.min(e,r),n=Math.max(n,l),i=Math.max(i,c),{instance:t,top:s,left:r,width:o,height:a,right:l,bottom:c,sourceTop:s,sourceLeft:r,sourceWidth:o,sourceHeight:a,sourceRight:l,sourceBottom:c}}));var s=n-e,r=i-A;CA={top:A,left:e,right:n,bottom:i,width:s,height:r,sourceTop:A,sourceLeft:e,sourceRight:n,sourceBottom:i,sourceWidth:s,sourceHeight:r,compsArr:t,moveTop:0,moveLeft:0,moveRight:0,moveBottom:0}}(t))}let CA;function QA(t,A=!0){var{instanceList:e,el:n,showBorderList:s,visible:a}=t,c=e.length,s=s.length;(n||A)&&(n=0<c,A=a&&(n||0<s),c=function(t){var A={top:1/0,left:1/0,width:0,height:0,right:-1/0,bottom:-1/0};for(const r of t){var{top:e,left:n,right:i,bottom:s}=r.getRect();A.top=Math.min(A.top,e),A.left=Math.min(A.left,n),A.right=Math.max(A.right,i),A.bottom=Math.max(A.bottom,s)}return A.width=A.right-A.left,A.height=A.bottom-A.top,A}(e),a=function(t){var A={top:1/0,left:1/0,width:0,height:0,right:-1/0,bottom:-1/0};for(const r of t){var{top:e,left:n,right:i,bottom:s}=r.edge;A.top=Math.min(A.top,e),A.left=Math.min(A.left,n),A.right=Math.max(A.right,i),A.bottom=Math.max(A.bottom,s)}return A.width=A.right-A.left,A.height=A.bottom-A.top,A}(e),function(t,A,e){let{borderParentEl:n,borderCollectEl:s,instance:a,instanceList:c,borderStatus:u,status:h}=t;var d,p=a.workspaceEl;e&&u&&h?(n||(n=fA(t),t.borderParentEl=n,i.insert(n,p)),s||(s=function(t){var{styles:t,attrs:A}=t,e=i.createElement();return r(e,t.borderCollect),l(e,A.borderCollect),e}(t),t.borderCollectEl=s,i.insert(s,n)),1<c.length?(({top:e,left:p,width:A,height:d}=A),r(s,{top:e+"px",left:p+"px",width:A+"px",height:d+"px",display:""})):o(s,"display","none"),function(t){var{showBorderList:A,borderList:e,borderParentEl:n,instanceList:s,showBorderMap:a}=t,l={};for(const o of[...A,...s]){var c=o.id,{left:u,top:h,width:d,height:p}=o.getRect();let A;l[c]=!0,e.has(c)?A=e.get(c):(A={id:c,borderEl:BA(t),instance:o},e.set(c,A),i.insert(A.borderEl,n)),r(A.borderEl,{top:h+"px",left:u+"px",width:d+"px",height:p+"px",display:""}),a.set(c,A)}for(const t of a.values())l[t.id]||o(t.borderEl,"display","none")}(t),o(n,"display","")):n&&o(n,"display","none")}(t,c,A),function(t,A,e){let{el:n,instance:s,status:a}=t;var c=s.workspaceEl;e?a?(n||(n=function(t){var{styles:t,attrs:A}=t,e=i.createElement();return r(e,t.el),l(e,A.el),e}(t),t.el=n,i.insert(n,c)),({top:e,left:t,width:c,height:A}=A),r(n,{top:e+"px",left:t+"px",width:c+"px",height:A+"px",display:""})):o(n,"display","none"):n&&o(n,"display","none")}(t,c,A),function(t,A,e){let{el:n,textEl:s,textStatus:a,status:c}=t;var{width:A,height:u}=A;e?a&&c?(s||(s=function(t){var{styles:t,attrs:A}=t,e=i.createElement();return r(e,t.text),l(e,A.text),e}(t),t.textEl=s,i.insert(s,n)),i.setElementText(s,Math.floor(A)+" x "+Math.floor(u)),o(s,"display","")):o(s,"display","none"):s&&o(s,"display","none")}(t,a,n),function(t,A){let{el:e,rotateEl:n,operateParentEl:s,operateStatus:a,status:c,instanceList:u}=t;A?a&&c?(s||(s=function(t){var{operates:A,styles:e,attrs:n}=t,s=i.createElement();r(s,e.operateParent),l(s,n.operateParent);for(const e of A)e.el=wA(t,e),s.appendChild(e.el);return s}(t),t.operateParentEl=s,i.insert(s,e)),n||(n=mA(t),t.rotateEl=n,i.insert(n,e)),1!==u.length||u[0].lock?o(n,"display","none"):o(n,"display",""),1===u.length&&u[0].lock?o(s,"display","none"):o(s,"display","")):(o(n,"display","none"),o(s,"display","none")):(n&&o(n,"display","none"),s&&o(s,"display","none"))}(t,n))}function vA(t,A){return!!(t=t.parent)&&(t===A||vA(t,A))}function bA(t){const{showBorderList:A,instanceList:e}=t;t.showBorderList=A.filter((t=>e.some((A=>vA(t,A)))))}class UA{constructor(t){this.instance=t,this.top=null,this.left=null,this.right=null,this.bottom=null,this.width=null,this.height=null,this.pageTop=null,this.pageLeft=null,this.pageRight=null,this.pageBottom=null,this.clientTop=null,this.clientLeft=null,this.clientRight=null,this.clientBottom=null}init(){FA(this)}update(){FA(this)}destroy(){this.top=null,this.left=null,this.right=null,this.bottom=null,this.width=null,this.height=null,this.instance=null}}function FA(t){var A=t.instance.el,{clientWidth:e,clientHeight:n}=A,{top:i,left:r}=s(A),{top:A,left:o,right:a,bottom:l}=A.getBoundingClientRect();t.top=0,t.left=0,t.width=e,t.height=n,t.right=e,t.bottom=n,t.pageTop=i,t.pageLeft=r,t.pageRight=r+e,t.pageBottom=i+n,t.clientTop=A,t.clientLeft=o,t.clientRight=a,t.clientBottom=l}const IA="Ui",EA="Canvas",MA="Layer",LA="Group",_A="Container",DA="DefaultContainer";var $A=new class{constructor(){this.layoutMap=new Map,this.nodeMap=new Map}getType(t){let A;var e,n;for([e,n]of this.layoutMap)if(t instanceof n){A=e;break}return A}register(t,A){return 2!==arguments.length?console.warn("注册需要的参数不对"):this.layoutMap.has(t)?console.warn(t+" 已经存在，无法注册"):(this.layoutMap.set(t,A),!0)}mixin(t,A){this.layoutMap.forEach(((e,n)=>{n.toUpperCase()===t.toUpperCase()&&function(t,A){Array.isArray(A)?A.forEach((A=>{SA(t,A)})):SA(t,A)}(e,A)}))}createLayout(t,A,e,n={}){if(this.layoutMap.has(t))return new(this.layoutMap.get(t))(A,e,n);throw new Error(t+" 还未注册，需要先注册后才能使用")}parseLayout(t,A,e){const n=this.createLayout(A.type,t,A.option,e);return A.children&&A.children.forEach((t=>{this.parseLayout(n,t,{inStack:!1})})),n}checkLayoutType(t,A){return v(A,"Array")?A.some((A=>(A=this.layoutMap.get(A),!d(A)&&t instanceof A))):(A=this.layoutMap.get(A),!d(A)&&t instanceof A)}};function SA(t,A){A=A.prototype||A,Object.getOwnPropertyNames(A).forEach((e=>{"constructor"!==e&&(t.prototype[e]=A[e])}))}var xA=new class{constructor(){this._map=new Map}getBaseAdapter(){return this._map.has("BaseAdapter")?this._map.get("BaseAdapter"):(console.warn("BaseAdapter还没有注册"),null)}register(t,A){if(this._map.has(t))console.warn("重复注册"+t);else{if(!A.factory)throw new Error("注册的对象缺失factory静态方法");this._map.set(t,A)}}creatComponent(t,A,e,n){if(!this._map.has(t))return console.warn(t+"尚未注册，请检查参数"),!1;try{return this._map.get(t).factory(A,e,n)}catch(A){console.warn(`创建${t}出错`+A)}}};class TA{constructor(t,A){this.instance=t,this.hooks=A;for(const t of this.hooks)this[t+"List"]=[]}tap(t,A){return!!this.getIncludes(t)&&("function"==typeof A&&(this[t+"List"]||(this[t+"List"]=[]),this[t+"List"].push(A.bind(this.instance,{instance:this.instance}))),!0)}call(t,...A){if(!this.getIncludes(t))return console.warn(t+" hook has not been registered"),!1;for(const e of this[t+"List"])try{e(...A)}catch(A){console.error(`Error in ${t} hook:`,A)}return!0}register(t,A){if("object"==typeof t&&null!==t)for(const A in t)this.register(A,t[A]);else this.getIncludes(t)?console.warn(t+" hook has been registered"):this.hooks.push(t),this.tap(t,A)}unregister(t){var A=this.getIndexOf(t);if(-1===A)throw new Error("this hook has been registered");delete this[t+"List"],this.hooks.splice(A,1)}destroy(){this.hooks.forEach((t=>delete this[t+"List"])),this.hooks=[],this.instance=null}getIncludes(t){return!!this.hooks.includes(t)}getIndexOf(t){return this.hooks.indexOf(t)}}const HA=["ui","canvas","layer","group","container"];class OA{constructor(t){this.instance=t,this.cache={},Object.entries(t).forEach((([t,A])=>{HA.includes(t)&&(this.cache[t]||(this.cache[t]={}),Object.entries(A).forEach((([A,e])=>{if("function"==typeof e){let n=this.cache[t][A];n||(this.cache[t][A]=n=new Set),n.add(e)}})))}))}inject(t,A){const e=this.cache[A.toLowerCase()];e&&Object.keys(e).forEach((A=>{e[A].forEach((e=>{t.tap(A,e)}))}))}}var kA=new class{constructor(){this.modules=new Map}mixin(t){Object.entries(t).forEach((([t,A])=>{HA.includes(t)&&$A.mixin(t,A)}))}register(t){if(!this.modules.has(t)){let A=t;"function"==typeof(A="function"==typeof t?t($n):A).setup&&(A.setup($n),delete A.setup),this.modules.set(t,new OA(A))}}remove(t){this.modules.delete(t)}inject(t,A){this.modules.forEach((e=>e.inject(t,A)))}};const NA=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeToJSON","beforeUnmount","unmounted","beforeDestroy","destroyed","beforeParseJSON","afterParseJSON"];function KA(t){var A=new TA(t,NA);return kA.inject(A,t.type||t.constructor.name),A}const RA={autoCreateCanvas:!0,autoResize:!1,autoCanvasCenter:!1,autoEmptyGroupToDestroy:!1,isEdit:!1,uiParentElStyles:null,uiParentElAttrs:null,uiElStyles:null,uiElAttrs:null,uiContentElStyles:null,uiContentElAttrs:null,uiWorkspaceElStyles:null,uiWorkspaceElAttrs:null,theme:{ruler:{border:"1px solid #000000",color:"#121314",width:21,lineStyle:{color:"#EAB2B3",activeColor:"#ED9692",width:1},tick:{textFont:"9px sans-serif",textColor:"#fff",lineWidth:1,lineColor:"#fff",lineLong:16,lineShort:4},iconColor:"#c1c1c1",icon:{color:"#c1c1c1",borderStyle:"solid",borderWidth:"0px 0px 1px 0px",borderColor:"#000000"}},alignmentLines:{color:"#ff3366",width:1,distanceStyle:{color:"#CCFF99",width:1}}},watermark:{enable:!0,src:""},autoEditLayerSize:!0},jA={position:"relative",width:"100%",height:"100%",lineHeight:1.5,fontSize:"12px",fontWeight:"normal",fontStyle:"normal",color:"white"},PA={},GA={},VA={position:"relative",width:"100%",height:"100%"},zA={},JA={position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",userSelect:"none"},YA={"data-id":"workspace"};function WA(t){var A=t.$options,e=function(t){return{...RA,...t}}(A.config);const n={ctx:t,type:$A.getType(t),id:D("ui"),rootEl:null,parentEl:null,parentElStyles:{...jA},parentElAttrs:{...PA},root:null,el:null,elAttrs:{...GA},contentEl:null,contentElStyles:{...VA},contentElAttrs:{...zA},workspaceEl:null,workspaceElStyles:{...JA},workspaceElAttrs:{...YA},canvas:null,options:U(A.options),config:e,isBeforeCreated:null,isCreated:null,isBeforeMounted:null,isMounted:null,isBeforeUnmounted:null,isUnmounted:null,isBeforeDestroyed:null,isDestroyed:null,lifeCycle:KA(t),layoutManager:$A,adapterManager:xA,mask:null,nodeMap:new Map,edge:null,selector:null,regionSelector:null,boundBox:null,ruler:null,guide:null,animationManager:null,style:null,isUi:!0,isEdit:e.isEdit,insidePreview:null,mouseDownClearSelectorStatus:!0,moveLockStatus:!1,dblclickLock:!1,watermark:null,update:function(){var{edge:t,canvas:A,boundBox:e,isEdit:i}=n;t.update(),A&&A.update(),i&&e.update()},contains:function(t){return n.nodeMap.has(t.id)}};return n.root=n}class XA{constructor(t){var{ruler:A}=t.config.theme;this.background=A.color,this.depth=A.width,this.lineColor=A.lineStyle.color,this.lineWidth=A.lineStyle.width,this.crossLine=A.border,this.iconBorderWidth=A.icon.borderWidth,this.iconBorderStyle=A.icon.borderStyle,this.iconBorderColor=A.icon.borderColor,this.iconColor=A.iconColor||A.icon.color,this.rulerLineWidth=5,this.svgShowLine='<svg t="1635145517567" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6078" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M512 344c-92.64 0-168 75.36-168 168s75.36 168 168 168 168-75.36 168-168-75.36-168-168-168z m0 272a104 104 0 1 1 104-104 104.11 104.11 0 0 1-104 104z m312.36-284.89c-43.68-34.92-90.48-62.9-139.1-83.16-57.67-24-116-36.23-173.26-36.23S396.39 224 338.66 248.25c-48.54 20.38-95.33 48.51-139.07 83.62-46.75 37.53-77 72.54-94.15 95.3C79.61 461.47 66.51 490 66.51 512s13.1 50.53 38.93 84.83c17.15 22.76 47.4 57.77 94.15 95.3 43.74 35.11 90.53 63.24 139.07 83.62 57.73 24.24 116 36.53 173.34 36.53s115.59-12.19 173.26-36.23c48.62-20.26 95.42-48.24 139.1-83.16C888.48 641.64 957.49 563.17 957.49 512s-69.01-129.64-133.13-180.89z m41.36 230.3c-21.37 28-51 57.48-83.39 83.14C733.39 683.29 633.2 748.28 512 748.28c-120.49 0-220.6-65-269.55-103.83-32.32-25.6-62-55.12-83.59-83.11s-27.78-45.11-28.33-49.34c0.55-4.23 6.63-21.2 28.33-49.34s51.27-57.51 83.59-83.11C291.4 340.77 391.51 275.72 512 275.72c121.2 0 221.39 65 270.33 103.73 32.41 25.66 62 55.18 83.39 83.14C887.43 491 893.13 508 893.48 512c-0.35 4-6.05 21-27.76 49.41z" fill="currentColor" p-id="6079"></path></svg>',this.svgHideLine='<svg t="1635143522523" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5772" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M824.36 331.11A615.73 615.73 0 0 0 774.27 295l124.48-124.49a32 32 0 0 0-45.25-45.26l-137 137q-15.5-7.7-31.24-14.25c-57.67-24-116-36.23-173.26-36.23S396.39 224 338.66 248.25c-48.54 20.38-95.33 48.51-139.07 83.62-46.75 37.53-77 72.54-94.15 95.3C79.61 461.47 66.51 490 66.51 512s13.1 50.53 38.93 84.83c17.15 22.76 47.4 57.77 94.15 95.3a621.85 621.85 0 0 0 50.48 36.55L125.25 853.5a32 32 0 0 0 45.26 45.25L307.7 761.56q15.35 7.61 31 14.19c57.73 24.24 116 36.53 173.34 36.53s115.59-12.19 173.26-36.23c48.62-20.26 95.42-48.24 139.1-83.16C888.48 641.64 957.49 563.17 957.49 512s-69.01-129.64-133.13-180.89zM242.45 644.45c-32.32-25.6-62-55.12-83.59-83.11s-27.78-45.11-28.33-49.34c0.55-4.23 6.63-21.2 28.33-49.34s51.27-57.51 83.59-83.11C291.4 340.77 391.51 275.72 512 275.72c58 0 111.25 14.91 156.33 34.69L606 372.79A167 167 0 0 0 512 344c-92.64 0-168 75.36-168 168a167 167 0 0 0 28.79 94l-76.24 76.24a548.79 548.79 0 0 1-54.1-37.79zM616 512a104 104 0 0 1-151.34 92.59l139.93-139.93A103.42 103.42 0 0 1 616 512z m-208 0a104 104 0 0 1 151.34-92.59L419.41 559.34A103.42 103.42 0 0 1 408 512z m457.72 49.41c-21.37 28-51 57.48-83.39 83.14C733.39 683.29 633.2 748.28 512 748.28c-57.88 0-111-15-156.11-34.91l62.16-62.16A167 167 0 0 0 512 680c92.64 0 168-75.36 168-168a167 167 0 0 0-28.79-93.95l76.56-76.57a545.78 545.78 0 0 1 54.56 38c32.41 25.66 62 55.18 83.39 83.14C887.43 491 893.13 508 893.48 512c-0.35 4-6.05 21-27.76 49.41z" fill="currentColor" p-id="5773"></path></svg>',this.createRuler(t)}createDom(t,A=!0){var e=i.createElement(t.canvas);return e.dataset.id=t.id,e.style.cssText=t.style,t.title&&(e.title=t.title),A&&t.parent.el.appendChild(e),e}createRuler(t){this.ruler=this.createDom({id:"ruler",parent:t},!1),r(this.ruler,{position:"absolute",top:0,left:0,width:"100%",pointerEvents:"all"}),t.workspaceEl.appendChild(this.ruler),this.createRulerFill(),this.createRulerTop(),this.createRulerLeft(),this.createCount(),this.createExpectionLine()}createRulerTop(){this.rulerTop=this.createDom({id:"ruler-top",parent:{el:this.ruler}}),r(this.rulerTop,{position:"absolute",top:0,left:0,width:"30000px",height:this.depth+"px",marginLeft:this.depth+"px",background:this.background,overflow:"hidden",zIndex:500,borderBottom:this.crossLine,boxSizing:"border-box"}),this.createTopBoard(),this.createTopCanvas()}createTopBoard(){this.rulerTopBoard=this.createDom({id:"ruler-top-board",style:"position: absolute;",parent:{el:this.rulerTop}})}createTopCanvas(){this.rulerTopCanvas=this.createDom({canvas:"canvas",id:"ruler-top-canvas",parent:{el:this.rulerTopBoard}}),r(this.rulerTopCanvas,{display:"inline-block",verticalAlign:"baseline"}),this.rulerTopCanvas.width=8e3,this.rulerTopCanvas.height=this.depth}createTopLine(t=0){var A=this.createDom({id:"ruler-top-line",title:"双击删除参考线",parent:{el:this.ruler}});return r(A,{width:this.rulerLineWidth+"px",height:"100vh",backgroundColor:"transparent",position:"absolute",cursor:"col-resize",zIndex:510,transform:`translateX(${t})`}),this.createTopLineItem(A),A}createTopLineItem(t){t=this.createDom({id:"ruler-top-line-item",parent:{el:t}}),r(t,{borderLeft:this.lineWidth+"px solid "+this.lineColor,height:"100%",marginLeft:"0px"})}createRulerLeft(){this.rulerLeft=this.createDom({id:"ruler-left",parent:{el:this.ruler}}),r(this.rulerLeft,{position:"absolute",top:0,left:0,width:"30000px",height:this.depth+"px",background:this.background,borderTop:this.crossLine,boxSizing:"border-box",overflow:"hidden",transform:"rotate(90deg) translateX(0px)",transformOrigin:"0 100% 0",zIndex:500}),this.createLeftBoard(),this.createLeftCanvas()}createLeftBoard(){this.rulerLeftBoard=this.createDom({id:"ruler-left-board",style:"position: absolute;",parent:{el:this.rulerLeft}})}createLeftCanvas(){this.rulerLeftCanvas=this.createDom({canvas:"canvas",id:"ruler-left-canvas",parent:{el:this.rulerLeftBoard}}),r(this.rulerLeftCanvas,{display:"inline-block",verticalAlign:"baseline"}),this.rulerLeftCanvas.width=8e3,this.rulerLeftCanvas.height=this.depth}createLeftLine(t){var A=this.createDom({id:"ruler-left-line",title:"双击删除参考线",parent:{el:this.ruler}});return r(A,{width:"100%",height:this.rulerLineWidth+"px",backgroundColor:"transparent",position:"absolute",cursor:"row-resize",zIndex:500,transform:`translateY(${t})`}),this.createLeftLineItem(A),A}createLeftLineItem(t){t=this.createDom({id:"ruler-left-line-item",parent:{el:t}}),r(t,{borderTop:this.lineWidth+"px solid "+this.lineColor,width:"100%",marginTop:0})}createCount(){this.rulerCount=this.createDom({id:"ruler-count",parent:{el:this.ruler}}),r(this.rulerCount,{position:"absolute",top:this.depth+2+"px",left:this.depth+2+"px",zIndex:500,padding:"0 5px",minWidth:"10px",height:"20px",backgroundColor:"#777",color:"azure",fontSize:"14px",userSelect:"none",display:"none"})}createExpectionLine(){this.createExpectionTopLine(),this.createExpectionLeftLine()}createExpectionTopLine(){this.expectionTopLine=this.createDom({id:"expection-top-line",parent:{el:this.ruler}}),r(this.expectionTopLine,{borderLeft:"1px dashed "+this.lineColor,height:"100vh",position:"absolute",left:0,topo:0,zIndex:510,pointerEvents:"none",display:"none"})}createExpectionLeftLine(){this.expectionLeftLine=this.createDom({id:"expection-left-line",parent:{el:this.ruler}}),r(this.expectionLeftLine,{borderTop:"1px dashed "+this.lineColor,width:"100%",position:"absolute",top:0,left:0,zIndex:510,pointerEvents:"none",display:"none"})}createRulerFill(){var t=this.guideLine=i.createElement("div");t.id="ruler-fill",r(t,{position:"absolute",top:0,left:0,width:this.depth+"px",height:this.depth+"px",background:this.background,zIndex:600,color:this.iconColor,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",borderColor:this.iconBorderColor,borderStyle:this.iconBorderStyle,borderWidth:this.iconBorderWidth,boxSizing:"border-box"}),t.innerHTML=this.svgShowLine,this.ruler.appendChild(t)}}const ZA={top:(t,A,e,n)=>({line:[[t,0],[t,A]],text:[e,n,A]}),left:(t,A,e,n,i)=>({line:[[t,i-A],[t,i]],text:[e,n,i-A]})},qA={top:"left",left:"top"},te={top:t=>`translateY(${t})`,left:t=>`translateX(${t})`};class Ae{constructor(t){t=t.config.theme.ruler;this.config={rulerWidth:0,interval:10,distance:0,rulerCont:{},rulerDistance:0,defaultDial:1e3,textFont:t.tick.textFont,textColor:t.tick.textColor,lineWidth:t.tick.lineWidth,lineColor:t.tick.lineColor,lineLong:t.tick.lineLong,lineShort:t.tick.lineShort,rulerDepth:t.width,rulerLineActiveColor:t.lineStyle.activeColor,rulerLineColor:t.lineStyle.color},this.adsorb=!1,this.targetSite={},this.adsorbDistance=15,this.adsorbLine=null,this.events={},this.bindEvents()}createDial(t,A){this._setInterval(t);t=Number((t*this.config.interval).toFixed(2));var e=parseFloat(t),n=(t=this.rulerCanvas).getContext("2d"),i=(this.handleFuzzy(t,n),n.clearRect(0,0,t.width,t.height),this.config.rulerWidth),s=this.config.rulerDepth,r=this.config.lineLong,o=this.config.lineShort;for(let t=0;t<i;t+=10){var a=t*e,l=t*this.config.interval-this.config.defaultDial,c=a+e/2,{line:l,text:c}=ZA[A](a,r,l,c,s);this.fillText(n,c,A),this.drawLine(n,l);for(let t=1;t<10;t+=1){var u=a+t*e;u=ZA[A](u,o,void 0,void 0,s).line;this.drawLine(n,u)}}}handleFuzzy(t,A){var e=this.getPixelRatio(A);t.style.width=this.config.rulerWidth+"px",t.style.height=this.config.rulerDepth+"px",t.width=this.config.rulerWidth*e,t.height=this.config.rulerDepth*e,A.scale(e,e)}getPixelRatio(t){return t=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,(window.devicePixelRatio||1)/t}fillText(t,A,e){t.font=this.config.textFont,t.fillStyle=this.config.textColor,"left"===e?(e=t.measureText(A[0]).width,t.save(),t.translate(A[1]+e,A[2]),t.rotate(180*Math.PI/180),t.fillText(A[0],0,0),t.restore()):t.fillText(A[0],A[1],A[2])}drawLine(t,A){t.beginPath(),t.moveTo(A[0][0],A[0][1]),t.lineTo(A[1][0],A[1][1]),t.lineWidth=this.config.lineWidth,t.strokeStyle=this.config.lineColor,t.stroke()}_setInterval(t){return!(d(t)||!v(t,"Number"))&&(1.3<(t=Number(t.toFixed(2)))?(this.config.interval=2,!0):1<t&&t<=1.3?(this.config.interval=5,!0):.5<t&&t<=1?(this.config.interval=10,!0):.2<t&&t<=.5?(this.config.interval=20,!0):.15<t&&t<=.2?(this.config.interval=50,!0):t<=.15?(this.config.interval=100,!0):void 0)}unmount(t){i.remove(t)}bindEvents(){["addRulerLine","showRulerCount","hideRulerCount","removeRulerLine","dragRulerLine"].forEach((t=>this.events[t]=this[t].bind(this)))}startRuler(t,A){this.zoom=A||this.zoom,this.config.distance=t||this.config.distance,this.config.rulerWidth=Math.max(parseInt(this.rulerCanvas.height),parseInt(this.rulerCanvas.width))+this.config.defaultDial,this.scaleDial(A,this.config.distance),this.addEvent()}addEvent(){var t=this.rulerDistance;t.addEventListener("click",this.events.addRulerLine),t.addEventListener("mousemove",this.events.showRulerCount),t.addEventListener("mouseleave",this.events.hideRulerCount)}removeEvent(){var t=this.rulerDistance;t.removeEventListener("click",this.events.addRulerLine),t.removeEventListener("mousemove",this.events.showRulerCount),t.removeEventListener("mouseleave",this.events.hideRulerCount)}addRulerLine(t,A){t.stopPropagation();t=qA[A];var e=this.config.rulerCont[t];(A=this.els[`create${m(A)}Line`](e)).dataset.cont=this.config.rulerCont.cont,A.style.transform=te[t](e),A.style.display=this.ruler.hideAllLine?"none":"block",this.bindLineEvents(A),this.root.ctx.emit("rulerChange",this.getRulerLines(),{topLines:this.getRulerLines("top"),leftLines:this.getRulerLines("left")})}parseRulerLine(t,A){var e=qA[t];(t=this.els[`create${m(t)}Line`]()).dataset.cont=A,t.style.transform=te[e](A),t.style.display=this.ruler.hideAllLine?"none":"block",this.bindLineEvents(t)}destroyRulerLine(t){this.rulerCountStatus(!1),this.unmount(t),this.removeLineEvents(t)}bindLineEvents(t){t.addEventListener("dblclick",this.events.removeRulerLine),t.addEventListener("mousedown",this.events.dragRulerLine),t.addEventListener("mousemove",this.events.showRulerCount),t.addEventListener("mouseleave",this.events.hideRulerCount)}removeRulerLine(t){t.stopPropagation(),t=t.currentTarget,this.rulerCountStatus(!1),this.unmount(t),this.removeLineEvents(t),this.root.ctx.emit("rulerChange",this.getRulerLines(),{topLines:this.getRulerLines("top"),leftLines:this.getRulerLines("left")})}removeLineEvents(t){t.removeEventListener("dblclick",this.events.removeRulerLine),t.removeEventListener("mousedown",this.events.dragRulerLine),t.removeEventListener("mousemove",this.events.showRulerCount),t.removeEventListener("mouseleave",this.events.hideRulerCount)}dragRulerLine(t,A="left"){var e=!1;this.rulerDistance.removeEventListener("mousemove",this.events.showRulerCount),this.rulerDistance.removeEventListener("mouseleave",this.events.hideRulerCount),t.stopPropagation();const n=t.currentTarget;n.removeEventListener("mousemove",this.events.showRulerCount),n.removeEventListener("mouseleave",this.events.hideRulerCount),document.onmousemove=t=>{t.stopPropagation(),document.body.style.cursor="col-resize";var i="left"===A?"clientX":"clientY",s=this.uiSite(),r=t[i];n[i]=r,n.style.transform=te[A](r-s[A]+"px"),n.dataset.cont=parseInt((r-this.els.depth-this.config.distance-s[A])/this.zoom),this.showRulerCount(t,A),e=e||!0},document.onmouseup=t=>{t.stopPropagation(),e&&this.root.ctx.emit("rulerChange",this.getRulerLines(),{topLines:this.getRulerLines("top"),leftLines:this.getRulerLines("left")}),e=!1,document.body.style.cursor="",document.onmousemove=null,document.onmouseup=null,this.rulerDistance.addEventListener("mousemove",this.events.showRulerCount),this.rulerDistance.addEventListener("mouseleave",this.events.hideRulerCount),n.addEventListener("mousemove",this.events.showRulerCount),n.addEventListener("mouseleave",this.events.hideRulerCount)}}getDial(t,A){return this.zoom=t,this.config.distance=parseInt(A),t=parseInt(this.config.defaultDial*this.zoom-this.config.distance),this.config.rulerDistance=0-t+"px",this.config.rulerDistance}setLineDial(t,A){S((()=>{this.getRulerLines(A).forEach((e=>{var n=this.config.rulerDepth,i=e.dataset.cont;e.style.transform=te[qA[A]](i*this.zoom+t+n+"px")}))}))}uiSite(){var{clientLeft:t,clientTop:A}=this.root.edge;return{top:A,left:t}}showRulerCount(t,A="left"){t.stopPropagation();var e=t.target===this.rulerCanvas,n=(this.rulerCountStatus(!0),e&&this.expectionLineStatus(!0),"left"===A?t.clientX:t.clientY),i=t.target.parentElement,s=(t=t.toElement,this.uiSite());i&&i.getAttribute("data-cont")||t&&t.getAttribute("data-cont")?this.config.rulerCont.cont=i.getAttribute("data-cont")||t.getAttribute("data-cont"):this.config.rulerCont.cont=parseInt((n-this.els.depth-this.config.distance-s[A])/this.zoom),this.config.rulerCont[A]=n-s[A]+"px",this.rulerCount.innerHTML=""+this.config.rulerCont.cont,this.rulerCount.style[A]=this.config.rulerCont[A],e&&(this.expectionLine.style[A]=n-s[A]+"px")}hideRulerCount(t){t.stopPropagation(),this.rulerCountStatus(!1),this.expectionLineStatus(!1),this.rulerCount.style.left=this.els.depth+2+"px",this.rulerCount.style.top=this.els.depth+2+"px",this.expectionLine.style.top="0px",this.expectionLine.style.left="0px"}rulerCountStatus(t){this.rulerCount.style.display=t?"":"none"}expectionLineStatus(t){this.expectionLine.style.display=t?"":"none"}getRulerLines(t){var A;return t?ee(t):(t=ee("top"),A=ee("left"),[...t,...A])}setRulerLineStyle(t,A,e){const n=this.adsorbDistance;t.forEach((t=>{var i=Number(t.dataset.cont);i>e-n&&i<e+n?(t.children[0].style[A]=this.config.rulerLineActiveColor,t.dataset.adsorb=!0):(t.children[0].style[A]=this.config.rulerLineColor,t.dataset.adsorb=!1)}))}restoreLine(t,A){t.forEach((t=>t.children[0].style[A]=this.config.rulerLineColor))}setAdsorbLine(t,A){A?(ne(this,t,this.adsorbLine),function(t,A,e){e&&(e.children[0].style[A]=t.config.rulerLineActiveColor)}(this,t,A),this.adsorbLine=A):this.adsorbLine&&(ne(this,t,this.adsorbLine),this.adsorbLine=null)}}function ee(t){return document.querySelectorAll(`[data-id=ruler-${t}-line]`)}function ne(t,A,e){e&&(e.children[0].style[A]=t.config.rulerLineColor)}class ie extends Ae{constructor(t,A,e){super(t),this.root=t,this.els=A,this.rulerDistance=A.rulerTop,this.rulerCanvas=A.rulerTopCanvas,this.rulerBoard=A.rulerTopBoard,this.rulerCount=A.rulerCount,this.expectionLine=A.expectionTopLine,this.zoom=e.zoom,this.ruler=e,this.startRuler(0,e.zoom)}scaleDial(t,A){this.createDial(t,"top"),this.moveDial(t,A)}moveDial(t,A){t=this.getDial(t,A),this.rulerBoard.style.transform=`translateX(${t})`,this.setLineDial(A,"top")}startRuler(t,A){super.startRuler(t,A)}addRulerLine(t){super.addRulerLine(t,"top")}doAdsorb(t){var A=this.getRulerLines("top");return this.setRulerLineStyle(A,"border-left-color",parseInt(t)),A}unAdsorb(){var t=this.getRulerLines("top");this.adsorb=!1,this.restoreLine(t,"border-left-color")}}class se extends Ae{constructor(t,A,e){super(t),this.root=t,this.els=A,this.rulerDistance=A.rulerLeft,this.rulerCanvas=A.rulerLeftCanvas,this.rulerBoard=A.rulerLeftBoard,this.rulerCount=A.rulerCount,this.expectionLine=A.expectionLeftLine,this.zoom=e.zoom,this.ruler=e,this.startRuler(0,e.zoom)}scaleDial(t,A){this.createDial(t,"left"),this.moveDial(t,A)}moveDial(t,A){t=this.getDial(t,A),this.rulerBoard.style.transform=`translateX(${t})`,this.setLineDial(A,"left")}startRuler(t,A){super.startRuler(t,A)}dragRulerLine(t){super.dragRulerLine(t,"top")}showRulerCount(t){super.showRulerCount(t,"top")}addRulerLine(t){super.addRulerLine(t,"left")}doAdsorb(t){var A=this.getRulerLines("left");return this.setRulerLineStyle(A,"border-top-color",parseInt(t)),A}unAdsorb(){var t=this.getRulerLines("left");this.adsorb=!1,this.restoreLine(t,"border-top-color")}}class re{constructor(t){var{ruler:A}=t.config.theme;return this.depth=A.width,this.parent=t,this.currentUI=t,this.zoom=1,this.hideAllLine=!1,this.render(),this.guideLineBind=this.guideLine.bind(this,this._elObject),this.bindEvent(),this.getInstance()}init(){this.zoom=this.parent.canvas.scaleManage.getZoom(),this.doCanvasZoom()}getInstance(){return re.instance||(re.instance=this),re.instance}render(){this._elObject=new XA(this.parent),this.rulerTop=new ie(this.parent,this._elObject,this),this.rulerLeft=new se(this.parent,this._elObject,this)}bindEvent(){this.parent.ctx.on("canvasZoom",this.doCanvasZoom,this),this.parent.ctx.on("graphMoving",this.doGraphMoving,this),this.parent.ctx.on("graphMoveEnd",this.doGraphMoveEnd,this),this.parent.ctx.on("moveCanvas",this.doMoveCanvas,this),this._elObject.guideLine.addEventListener("click",this.guideLineBind)}bindCurrentUIEvent(){this.currentUI.on("graphMoving",this.doGraphMoving,this),this.currentUI.on("graphMoveEnd",this.doGraphMoveEnd,this)}unbindCurrentUIEvent(){this.currentUI.off("graphMoving",this.doGraphMoving,this),this.currentUI.off("graphMoveEnd",this.doGraphMoveEnd,this)}destroyEvent(){this.parent.off("canvasZoom",this.doCanvasZoom,this),this.parent.off("graphMoving",this.doGraphMoving,this),this.parent.off("graphMoveEnd",this.doGraphMoveEnd,this),this.parent.off("moveCanvas",this.doMoveCanvas,this),this._elObject.guideLine.removeEventListener("click",this.guideLineBind)}guideLine(t){this._guideLine(t),this.parent.ctx.emit("rulerChange",this.getAllLines(),{hideAllLine:this.hideAllLine,isGuide:!0})}_guideLine(t){var A=document.querySelectorAll("div[data-id=ruler] > div[data-id^='ruler'][data-id$='-line']");this.hideAllLine?(A.forEach((t=>t.style.display="block")),this.hideAllLine=!1,t.guideLine.innerHTML=t.svgShowLine):(A.forEach((t=>t.style.display="none")),this.hideAllLine=!0,t.guideLine.innerHTML=t.svgHideLine)}getAllLines(){return this.rulerTop.getRulerLines()}doMoveCanvas(){this.rulerMove()}getSit(){var{rootCanvasSite:t,rootUiSite:A,canvasSite:e=0}=this.calculateSit();let n,i;return i=this.parent===this.currentUI?(n=t.left-A.left-this.depth,t.top-A.top-this.depth):(n=e.left-this.depth-A.left,e.top-this.depth-A.top),{canvasLeft:n,canvasTop:i}}rulerMove(){var{canvasLeft:t,canvasTop:A}=this.getSit();this.setRulerMove(t,A,this.zoom)}calculateSit(){var t=this.getBound(this.parent.canvas),A=this.getBound(this.parent);return this.parent!==this.currentUI?{rootCanvasSite:t,rootUiSite:A,canvasSite:this.currentUI?this.getBound(this.currentUI.canvas):{},uiSite:this.currentUI?this.getBound(this.currentUI):{}}:{rootCanvasSite:t,rootUiSite:A}}resize(){this.parent._updateBound(),this.doMoveCanvas()}doCanvasZoom(t){var{canvasLeft:A,canvasTop:e}=this.getSit();this.zoom=t||this.zoom,this.setRulerScale(A,e,this.zoom)}doGraphMoving({event:t}){const A=this;var[e]=ui.selector.getSelectElements();if(e){var n,{movementX:t,movementY:i}=t;{var s=t,r=(t=e._instance).edge.left,o=A.rulerTop.adsorbDistance,a=A.rulerTop.getRulerLines("top");let i;for(const t of a)Math.abs(t.dataset.cont-r)<=o&&(i?0<s?t.dataset.cont>i.dataset.cont&&(i=t):t.dataset.cont<i.dataset.cont&&(i=t):i=t);A.rulerTop.setAdsorbLine("border-left-color",i),i&&(({edge:a,root:n}=t),W(t),a.setLeft(+i.dataset.cont),zt(t),X(t),n.boundBox.update())}{var l=i,c=(a=e._instance).edge.top,u=A.rulerLeft.adsorbDistance;t=A.rulerLeft.getRulerLines("left");let s;for(const A of t)Math.abs(A.dataset.cont-c)<=u&&(s?0<l?A.dataset.cont>s.dataset.cont&&(s=A):A.dataset.cont<s.dataset.cont&&(s=A):s=A);A.rulerLeft.setAdsorbLine("border-top-color",s),s&&(({root:t,edge:n}=a),n.setTop(+s.dataset.cont),zt(a),t.boundBox.update())}}}doGraphMoveEnd(){this.rulerTop.setAdsorbLine("border-left-color"),this.rulerLeft.setAdsorbLine("border-top-color")}getBound(t){var A,e;return"Canvas"===t.type?(({left:A,top:e}=t.el.getBoundingClientRect()),{left:A,top:e}):t.parent&&"Group"===t.parent.type?(({left:A,top:e}=t.parent.bound.plainReal()),{left:A,top:e,isGroup:!0}):(({pageLeft:A,pageTop:e}=t.edge),{left:A,top:e})}setRulerMove(t,A,e){this.rulerTop.moveDial(e,t),this.rulerLeft.moveDial(e,A)}setRulerScale(t,A,e){cancelAnimationFrame(this.__requestAnimationFrameId),this.__requestAnimationFrameId=requestAnimationFrame((()=>{this.rulerTop.scaleDial(e,t),this.rulerLeft.scaleDial(e,A)}))}isAdsord({topLines:t,leftLines:A}){t.forEach((t=>{"true"===t.dataset.adsorb&&Number(t.dataset.cont)})),A.forEach((t=>{"true"===t.dataset.adsorb&&Number(t.dataset.cont)}))}disable(){document.querySelector("[data-id=ruler]")&&(this.destroyEvent(),this.rulerTop.removeEvent(),this.rulerLeft.removeEvent(),this.parent.el.removeChild(this._elObject.ruler))}enable(){document.querySelector("[data-id=ruler]")||(this.parent.el.appendChild(this._elObject.ruler),this.rulerTop.addEvent(),this.rulerLeft.addEvent(),this.bindEvent(),this.doCanvasZoom())}destroy(){this.disable(),this.zoom=null,this.parent=null,this._elObject=null,this.rulerTop=null,this.rulerLeft=null}parseRulerLines({lines:t,hideAllLine:A}){p(t)&&(this.removeLines(),this.addLines(t)),p(A)&&this.setGuideLine(A)}removeLines(){this.getAllLines().forEach((t=>{this["ruler"+m(t.getAttribute("data-id").split("-")[1])].destroyRulerLine(t)}))}addLines(t){t&&t.forEach((t=>{var A=t.option.type;t=t.option.cont;this["ruler"+m(A)].parseRulerLine(A,t)}))}setGuideLine(t){this.hideAllLine!==t&&this._guideLine(this._elObject)}getTopAndLeftLines(){return{topLines:this.rulerTop.getRulerLines("top"),leftLines:this.rulerLeft.getRulerLines("left")}}getLineInfo({lines:t}={}){var{topLines:t,leftLines:A}=t||this.getTopAndLeftLines();const e=[];return t.length&&t.forEach((t=>{e.push({type:"RulerTopLine",option:{type:"top",cont:t.dataset.cont}})})),A.length&&A.forEach((t=>{e.push({type:"RulerLeftLine",option:{type:"left",cont:t.dataset.cont}})})),e}}const oe=new Map;class ae{constructor(t){this.instance=t,this.map=null}init(){this.map=oe}register(A,e){return this.map.get(A)?t(this.instance,`动画${A}已经注册过了`):(this.map.set(A,e),!0)}unregister(t){return this.map.delete(t),!0}destroy(){this.map=null,this.instance=null}}var le=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return this.None(t)},Out:function(t){return this.None(t)},InOut:function(t){return this.None(t)}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(t){return 1===t?1:t*t*(2.70158*t-1.70158)},Out:function(t){return 0===t?0:--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var A=2.5949095;return(t*=2)<1?t*t*((1+A)*t-A)*.5:.5*((t-=2)*t*((1+A)*t+A)+2)}}),Bounce:Object.freeze({In:function(t){return 1-le.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*le.Bounce.In(2*t):.5*le.Bounce.Out(2*t-1)+.5}}),generatePow:function(t){return t=1e4<(t=(t=void 0===t?4:t)<Number.EPSILON?Number.EPSILON:t)?1e4:t,{In:function(A){return Math.pow(A,t)},Out:function(A){return 1-Math.pow(1-A,t)},InOut:function(A){return A<.5?Math.pow(2*A,t)/2:(1-Math.pow(2-2*A,t))/2+.5}}}}),ce=function(){return performance.now()},ue=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(A){return t._tweens[A]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,A){void 0===t&&(t=ce()),void 0===A&&(A=!1);var e=Object.keys(this._tweens);if(0===e.length)return!1;for(;0<e.length;){this._tweensAddedDuringUpdate={};for(var n=0;n<e.length;n++){var i=this._tweens[e[n]];i&&!1===i.update(t,!A)&&!A&&delete this._tweens[e[n]]}e=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),he={Linear:function(t,A){var e=t.length-1,n=e*A,i=Math.floor(n),s=he.Utils.Linear;return A<0?s(t[0],t[1],n):1<A?s(t[e],t[e-1],e-n):s(t[i],t[e<i+1?e:i+1],n-i)},Bezier:function(t,A){for(var e=0,n=t.length-1,i=Math.pow,s=he.Utils.Bernstein,r=0;r<=n;r++)e+=i(1-A,n-r)*i(A,r)*t[r]*s(n,r);return e},CatmullRom:function(t,A){var e=t.length-1,n=e*A,i=Math.floor(n),s=he.Utils.CatmullRom;return t[0]===t[e]?s(t[((i=A<0?Math.floor(n=e*(1+A)):i)-1+e)%e],t[i],t[(i+1)%e],t[(i+2)%e],n-i):A<0?t[0]-(s(t[0],t[0],t[1],t[1],-n)-t[0]):1<A?t[e]-(s(t[e],t[e],t[e-1],t[e-1],n-e)-t[e]):s(t[i?i-1:0],t[i],t[e<i+1?e:i+1],t[e<i+2?e:i+2],n-i)},Utils:{Linear:function(t,A,e){return(A-t)*e+t},Bernstein:function(t,A){var e=he.Utils.Factorial;return e(t)/e(A)/e(t-A)},Factorial:function(){var t=[1];return function(A){var e=1;if(t[A])return t[A];for(var n=A;1<n;n--)e*=n;return t[A]=e}}(),CatmullRom:function(t,A,e,n,i){var s=i*i;return(2*A-2*e+(t=.5*(e-t))+(n=.5*(n-A)))*(i*s)+(-3*A+3*e-2*t-n)*s+t*i+A}}},de=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),pe=new ue,ge=function(){function t(t,A){void 0===A&&(A=pe),this._object=t,this._group=A,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=le.Linear.None,this._interpolationFunction=he.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=de.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,A){if(void 0===A&&(A=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=A,this},t.prototype.duration=function(t){return this._duration=t=void 0===t?1e3:t,this},t.prototype.dynamic=function(t){return this._isDynamic=t=void 0!==t&&t,this},t.prototype.start=function(t,A){if(void 0===t&&(t=ce()),void 0===A&&(A=!1),!this._isPlaying){if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||A){if(this._propertiesAreSetUp=!0,!this._isDynamic){var n,i={};for(n in this._valuesEnd)i[n]=this._valuesEnd[n];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,A)}}return this},t.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},t.prototype._setupProperties=function(t,A,e,n,i){for(var s in e){var r=t[s],o=Array.isArray(r),a=o?"array":typeof r,l=!o&&Array.isArray(e[s]);if("undefined"!=a&&"function"!=a){if(l){if(0===(g=e[s]).length)continue;for(var c=[r],u=0,h=g.length;u<h;u+=1){var d=this._handleRelativeValue(r,g[u]);if(isNaN(d)){l=!1,console.warn("Found invalid interpolation list. Skipping.");break}c.push(d)}l&&(e[s]=c)}if("object"!=a&&!o||!r||l)void 0!==A[s]&&!i||(A[s]=r),o||(A[s]*=1),n[s]=l?e[s].slice().reverse():A[s]||0;else{A[s]=o?[]:{};var p=r;for(f in p)A[s][f]=p[f];n[s]=o?[]:{};var g=e[s];if(!this._isDynamic){var f,B={};for(f in g)B[f]=g[f];e[s]=g=B}this._setupProperties(p,A[s],g,n[s],i)}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback)&&this._onStopCallback(this._object),this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=ce()),!this._isPaused&&this._isPlaying&&(this._isPaused=!0,this._pauseStart=t,this._group)&&this._group.remove(this),this},t.prototype.resume=function(t){return void 0===t&&(t=ce()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group)&&this._group.add(this),this},t.prototype.stopChainedTweens=function(){for(var t=0,A=this._chainedTweens.length;t<A;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t=void 0===t?pe:t,this},t.prototype.delay=function(t){return this._delayTime=t=void 0===t?0:t,this},t.prototype.repeat=function(t){return this._initialRepeat=t=void 0===t?0:t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t=void 0!==t&&t,this},t.prototype.easing=function(t){return void 0===t&&(t=le.Linear.None),this._easingFunction=t,this},t.prototype.interpolation=function(t){return void 0===t&&(t=he.Linear),this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,A){if(void 0===t&&(t=ce()),void 0===A&&(A=!0),this._isPaused)return!0;var e,n=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(n<t)return!1;A&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;if(!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,A=this._easingFunction(n),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,A),this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1!=n)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[e]||(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo&&this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!(this._onEveryStartCallbackFired=!1)}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var i=0,s=this._chainedTweens.length;i<s;i++)this._chainedTweens[i].start(this._startTime+this._duration,!1);return this._isPlaying=!1},t.prototype._updateProperties=function(t,A,e,n){for(var i in e){var s,r,o,a;void 0!==A[i]&&(s=A[i]||0,r=e[i],o=Array.isArray(t[i]),a=Array.isArray(r),!o&&a?t[i]=this._interpolationFunction(r,n):"object"==typeof r&&r?this._updateProperties(t[i],s,r,n):"number"==typeof(r=this._handleRelativeValue(s,r))&&(t[i]=s+(r-s)*n))}},t.prototype._handleRelativeValue=function(t,A){return"string"!=typeof A?A:"+"===A.charAt(0)||"-"===A.charAt(0)?t+parseFloat(A):parseFloat(A)},t.prototype._swapEndStartRepeatValues=function(t){var A=this._valuesStartRepeat[t],e=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof e?this._valuesStartRepeat[t]+parseFloat(e):this._valuesEnd[t],this._valuesEnd[t]=A},t}(),fe=(de.nextId,pe),Be=(fe.getAll.bind(fe),fe.removeAll.bind(fe),fe.add.bind(fe),fe.remove.bind(fe)),me=fe.update.bind(fe);let we;function ye(t){we=requestAnimationFrame(ye),me(t)}const Ce={running:!1,list:[],addItem:function(t){this.list.filter((A=>A===t))[0]||(this.list.push(t),this.update())},removeItem:function(t){var A=this.list.findIndex((A=>A===t));~A&&(this.list.splice(A,1),this.update())},update:function(){0===this.list.length?(cancelAnimationFrame(we),this.running=!1):this.running||(this.running=!0,we=requestAnimationFrame(ye))}};function Qe(A,n,i={}){var s=function(t){return oe.get(t)}(n);if(s)return e(A,s.animationFn,null,[A.ctx,i]);t(A,`转场动画${n}未注册`)}const ve={startStyles:{},styles:{},completeStyles:{},animation:"",animationOptions:{},keyframes:[],duration:1e3,delay:0,start:null,update:null,complete:null,stop:null};function be(t,A){let n,i,s,{startStyles:r,styles:o,completeStyles:a,animation:l,animationOptions:c,duration:u,delay:h,start:d,update:p,complete:g,stop:f}=Object.assign({},ve,A);var B;l&&(B=Qe(t,l,c))&&(r=B.startStyles||{},o=B.styles,a=B.completeStyles),r={...Ue(t,o),...r};const m=new ge(r).to(o,u||1e3).delay(h||0).easing(le.Linear.None).onStart((A=>{n&&n(A,t),e(t,d,t.ctx,[A])})).onUpdate((A=>{t.style.setStyles(A),e(t,p,t.ctx,[A])})).onComplete((A=>{Ce.removeItem(m),a&&t.style.setStyles(a),i&&i(A),e(t,g,t.ctx,[A])})).onStop((A=>{s&&s(A),e(t,f,t.ctx,[A])}));return{tween:m,options:A,onStart:function(t){return n=t,this},onComplete:function(t){return i=t,this},onStop:function(t){return s=t,this},play:function(){return this.tween.isPlaying()?this.tween.isPaused()&&this.tween.start():(Ce.addItem(this.tween),this.tween.start()),this},stop:function(){return this.tween.isPlaying()&&this.tween.stop(),this},destroy:function(){this.stop(),this.tween&&(Be(this.tween),this.tween=null)}}}function Ue(t,A){var e=t.style,n={};for(const t in A)n[t]=e.getStyleValue(t);return n}class Fe{constructor(t){this.instance=t,this.enter=null,this.leave=null,this.enterAnimation=null,this.leaveAnimation=null,this.optionsEnterAnimation=null,this.optionsLeaveAnimation=null}init(){var t,A,e=this.instance,{isContainer:n,options:A}=e;return(A=A.transition)?(({enter:A,leave:t}=A),this.enter=U(A),this.leave=U(t),this.enterAnimation=Ie(this,"enter",this.enter),this.leaveAnimation=Ie(this,"leave",this.leave)):(this.enter=null,this.leave=null,n&&(A=function(t){var A;return t&&(t.isContainer||t.isGroup)?(A=t.options.animation,A?U(A):_e(t.parent)):null}(e))&&(({enter:t,leave:n}=A),this.enterAnimation=Ie(this,"enter",U(t)),this.leaveAnimation=Ie(this,"leave",U(n)))),this.optionsEnterAnimation=null,this.optionsLeaveAnimation=null,this}play(A,e){return["enter","leave"].includes(A)?Le(this,A,e):t(this.instance,`转场动画类型${A}不存在`),this}stop(t){return Me(this,t),this}set(A,e){var n;return"enter"===A?(n=U(e),this.enter=n,this.enterAnimation=Ie(this,"enter",n)):"leave"===A?(n=U(e),this.leave=n,this.leaveAnimation=Ie(this,"leave",n)):t(this.instance,A+" 类型不存在"),this}clear(){return this.enter=null,this.enterAnimation=null,this.leave=null,this.leaveAnimation=null,this}toJSON(){var{enter:t,leave:A}=this;return t||A?{enter:U(t),leave:U(A)}:null}destroy(){this.enterAnimation&&this.enterAnimation.destroy(),this.leaveAnimation&&this.leaveAnimation.destroy(),this.clear(),this.enterAnimation=null,this.leaveAnimation=null,this.optionsEnterAnimation=null,this.optionsLeaveAnimation=null,this.instance=null}}function Ie(t,A,e){const n=t.instance;let i;if(i=e?(c(e)?De:be)(n,e):i){const s={};function r(t,A){var e=t.id;A=function(t,A){var e=t.style,n={};for(const t in A)n[t]=e.getStyleValue(t);return n}(t,A);s[e]?s[e].styles={...A,...s[e].styles}:s[e]={instance:t,styles:A}}function o(){for(const A in s){var t=s[A];t.instance.style.setStyles(t.styles)}"leave"===A&&n.style.setStyle("display","none")}i.onStart(((t,e)=>{r(e,t),"enter"===A&&(e.style.setStyle("display",""),K(e))})).onComplete((()=>{o()})).onStop((()=>{o()})),i.isList&&i.onEveryStart(((t,A)=>{r(A,t)}))}return i}function Ee(t,A){var{enterAnimation:t,leaveAnimation:e,optionsEnterAnimation:n,optionsLeaveAnimation:i}=t;"enter"===A?(n&&n.stop(),t&&t.stop()):"leave"===A&&(i&&i.stop(),e)&&e.stop()}function Me(t,A){A?Ee(t,A):(Ee(t,"enter"),Ee(t,"leave"))}function Le(t,A,e){var{enterAnimation:n,leaveAnimation:i}=t;if(Me(t),e)return e=Ie(t,A,e),"enter"===A?t.optionsEnterAnimation=e:t.optionsLeaveAnimation=e,e&&e.play(),e;if("enter"===A){if(n)return n.play(),n}else if(i)return i.play(),i}function _e(t){if(t){var{isGroup:A,options:e}=t;if(A)return e.animation?U(e.animation):_e(t.parent)}return{}}function De(t,A){if(0<A.length)return function(t,A){const e=[];let n,i,s,r,o=0,a=0,l=!1,c=0;for(const d in A){var u=A[d];const p=[];for(const A in u){const e=u.length;var h=u[A];(h=(c++,be(t,h))).onStart((A=>{s&&s(A,t),0===o&&n&&n(A,t),o++})).onComplete((t=>{var n;a++,l&&(+A<e&&(n=p[+A+1])&&n.play(),c===a)&&(l=!1,i)&&i(t)})).onStop((t=>{a++,o===a&&r&&r(t)})),p.push(h)}e.push(p)}return{isList:!0,animationList:e,get isPlaying(){return l},get isPaused(){return!1},onEveryStart:function(t){return s=t,this},onStart:function(t){return n=t,this},onComplete:function(t){return i=t,this},onStop:function(t){return r=t,this},play:function(){if(!l){o=0,a=0,l=!0;for(const A of e){var t=A[0];t&&t.play()}}return this},stop:function(){if(l){l=!1;for(const t of e)for(const A of t)A.stop()}return this},destroy:function(){this.stop();for(const t of e)for(const A of t)A.destroy();this.animationList=null}}}(t,A)}const $e={translate:{getValue:function(t){var{translateX:t,translateY:A}=t.parent.subProperties;return[t.value,A.value]},setValue:function(t,A){var{translateX:t,translateY:e}=t.parent.subProperties;let n,i;c(A)?(n=+A[0],i=+A[1]):p(A)&&(n=+A,i=+A),ke(t,n),ke(e,i)},getStyle:function(t){var{translateX:t,translateY:A}=t.parent.subProperties,e=He(t),n=He(A);return e?n?`translate(${t.value+t.unit}, ${A.value+A.unit})`:e:n}},translateX:{default:{value:0,unit:"px"},getStyle:function(t){var{value:t,unit:A}=t;return t?`translateX(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},translateY:{default:{value:0,unit:"px"},getStyle:function(t){var{value:t,unit:A}=t;return t?`translateY(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},scale:{getValue:function(t){var{scaleX:t,scaleY:A}=t.parent.subProperties;return[t.value,A.value]},setValue:function(t,A){var{scaleX:t,scaleY:e}=t.parent.subProperties;let n,i;c(A)?i=1===A.length?(n=A[0],A[0]):(n=A[0],A[1]):p(A)&&(n=A,i=A),ke(t,n),ke(e,i)},getStyle:function(t){var{scaleX:t,scaleY:A}=t.parent.subProperties,e=He(t),n=He(A);return e?n?`scale(${t.value+t.unit}, ${A.value+A.unit})`:e:n}},scaleX:{default:{value:1,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return t&&1!==t?`scaleX(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},scaleY:{default:{value:1,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return t&&1!==t?`scaleY(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},rotate:{default:{value:0,unit:"deg"},getStyle:function(t){var{value:t,unit:A}=t;return t?`rotate(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},rotateX:{default:{value:0,unit:"deg"},getStyle:function(t){var{value:t,unit:A}=t;return t?`rotateX(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},rotateY:{default:{value:0,unit:"deg"},getStyle:function(t){var{value:t,unit:A}=t;return t?`rotateY(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},skew:{getValue:function(t){var{skewX:t,skewY:A}=t.parent.subProperties;return[t.value,A.value]},setValue:function(t,A){var{skewX:t,skewY:e}=t.parent.subProperties;let n,i;c(A)?(n=A[0],i=A[1]):p(A)&&(n=+A),ke(t,n),ke(e,i)},getStyle:function(t){var{skewX:t,skewY:A}=t.parent.subProperties,e=t.getStyle(t),n=A.getStyle(A);return e?n?`skew(${t.value+t.unit}, ${A.value+A.unit})`:e:n}},skewX:{default:{value:0,unit:"deg"},getStyle:function(t){var{value:t,unit:A}=t;return t?`skewX(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},skewY:{default:{value:0,unit:"deg"},getStyle:function(t){var{value:t,unit:A}=t;return t?`skewY(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}}},Se={blur:{default:{value:0,unit:"px"},getStyle:function(t){var{value:t,unit:A}=t;return t?`blur(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},brightness:{default:{value:1,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return""!==t&&1!==t?`brightness(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},contrast:{default:{value:1,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return""!==t&&1!==t?`contrast(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},dropShadow:{default:{value:"",unit:""},getStyle:function(t){return t.value?`drop-shadow(${t.value})`:""}},grayscale:{default:{value:1,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return""!==t&&1!==t?`grayscale(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},hueRotate:{default:{value:0,unit:"deg"},getStyle:function(t){var{value:t,unit:A}=t;return t?`hue-rotate(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},invert:{default:{value:0,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return t?`invert(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},opacity:{default:{value:1,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return""!==t&&1!==t?`opacity(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},saturate:{default:{value:1,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return""!==t&&1!==t?`saturate(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}},sepia:{default:{value:0,unit:""},getStyle:function(t){var{value:t,unit:A}=t;return t?`sepia(${t+A})`:""},setValue:function(t,A,e){h(A=+A)&&(this.value=A,p(e))&&(this.unit=e)}}},xe={position:{default:{value:"",unit:""}},top:{default:{value:0,unit:"px"}},left:{default:{value:0,unit:"px"}},right:{default:{value:0,unit:"px"}},bottom:{default:{value:0,unit:"px"}},width:{default:{value:0,unit:"px"}},height:{default:{value:0,unit:"px"}},backgroundColor:{default:{value:"",unit:""}},backgroundImage:{default:{value:"",unit:""},getStyle:function(t){return t.value?`url(${t.value})`:""}},backgroundPosition:{default:{value:"",unit:""}},backgroundRepeat:{default:{value:"",unit:""}},backgroundSize:{default:{value:"",unit:""}},display:{default:{value:"",unit:""}},opacity:{default:{value:"",unit:""}},zIndex:{default:{value:"",unit:""}},pointerEvents:{default:{value:"",unit:""}},cursor:{default:{value:"",unit:""}},overflow:{default:{value:"",unit:""}},transformOrigin:{default:{value:"",unit:""}},transform:{subProperties:$e,getValue:function(t){var{translate:t,scale:A,rotate:e,rotateX:n,rotateY:i,skew:s}=t.subProperties,A=(t=Ne(t),Ne(A)),e=Ne(e),n=Ne(n),i=Ne(i),s=Ne(s),r={};return t&&(r.translate=t),A&&(r.scale=A),e&&(r.rotate=e),n&&(r.rotateX=n),i&&(r.rotateY=i),s&&(r.skew=s),r},setValue:function(t,A){var{translate:t,translateX:e,translateY:n,scale:i,scaleX:s,scaleY:r,rotate:o,rotateX:a,rotateY:l,skew:c,skewX:u,skewY:h}=t.subProperties,{translate:A,translateX:d,translateY:p,scale:g,scaleX:f,scaleY:B,rotate:m,rotateX:w,rotateY:y,skew:C,skewX:Q,skewY:v}=A;Ke(t),Ke(e),Ke(n),Ke(i),Ke(s),Ke(r),Ke(c),Ke(u),Ke(h),Ke(o),Ke(a),Ke(l),ke(t,A),ke(e,d),ke(n,p),ke(i,g),ke(s,f),ke(r,B),ke(c,C),ke(u,Q),ke(h,v),ke(o,m),ke(a,w),ke(l,y)},getStyle:function(t){var A,e,n,i,s,{translate:t,scale:A,rotate:e,rotateX:n,rotateY:i,skew:s}=t.subProperties;let r="";return(t=He(t))&&(r+=t),(A=He(A))&&(r+=" "+A),(e=He(e))&&(r+=" "+e),(n=He(n))&&(r+=" "+n),(i=He(i))&&(r+=" "+i),(s=He(s))&&(r+=" "+s),r.trim()}},filter:{subProperties:Se,getValue:function(t){var A={},e=t.subProperties;for(const t in e)A[t]=e[t].value;return A},setValue:function(t,A){var{blur:t,brightness:e,contrast:n,dropShadow:i,grayscale:s,hueRotate:r,invert:o,opacity:a,saturate:l,sepia:c}=t.subProperties;if(A){const{blur:u,brightness:h,contrast:d,dropShadow:p,grayscale:g,hueRotate:f,invert:B,opacity:m,saturate:w,sepia:y}=A;t.value=u,e.value=h,n.value=d,i.value=p,s.value=g,r.value=f,o.value=B,a.value=m,l.value=w,c.value=y}else t.value=0,e.value=1,n.value=1,i.value="",s.value=1,r.value=0,o.value=0,a.value=1,l.value=1,c.value=0;Ke(t),ke(t,blurValue)},getStyle:function(t){let A="";var e=t.subProperties;for(const t in e){var n=e[t];const i=n.getStyle(n);i&&(A+=i+"")}return A.trim()}},userSelect:{default:{value:"",unit:""}}};class Te{constructor(t){this.instance=t,this.properties=null,this.specialProperties=null,this.styleMap=null}init(){var t=Oe(xe);this.properties=t,this.specialProperties=t.transform.subProperties,this.styleMap={}}setStyles(t={}){for(const A in t)this.setStyle(A,t[A])}setStyle(A,e,n){var{instance:i,styleMap:s}=this,r=i.el;let a=function(t,A,e,n){if(t=t.properties,t=function(t,A){let e=t[A.shift()];for(const t of A){if(!e)return e;e=e.subProperties[t]}return e}(t,A.split(".")),t)return ke(t,e,n),t.parent||t}(this,A,e,n);(a=a||function(t,A,e,n){if(t=t.specialProperties,t=t[A],t)return ke(t,U(e),n),t.parent}(this,A,e,n))?(e=He(a),s[a.name]=e,r&&o(r,a.name,e)):t(i,A+" 样式属性不存在")}getStyleValue(t){return function(t,A){var{properties:t,specialProperties:e}=t;t=t[A];return t||(t=e[A])?Ne(t):void 0}(this,t)}update(){!function(t){var{instance:t,styleMap:A}=t;(t=t.el)&&r(t,A)}(this)}destroy(){this.styleMap=null,this.properties=null,this.instance=null}}function He(t){var{value:A,getStyle:e,unit:n,getValue:i}=t;return e?e(t):i?i(t):""!==A?A+n:""}function Oe(t,A){var e={};for(const s in t){var n=t[s],i={name:s,...n};Ke(i),n.subProperties&&(n=Oe(n.subProperties,i),i.subProperties=n),A&&(i.parent=A),e[s]=i}return e}function ke(t,A,e){t.setValue?t.setValue(t,A,e):(t.value=U(A),p(e)&&(t.unit=e))}function Ne(t){var{value:A,getValue:e}=t;return e?e(t):A}function Ke(t){var A,e;t.default&&(({value:A,unit:e}=t.default),t.value=A,t.unit=e)}class Re extends ut{constructor(t,A={},e={}){if(super(),!t)throw new Error("parent 参数不能为空");this.$options={parent:t,options:A,config:e},this._instance=null,this.transition=null}create(){var{parent:t,options:e,config:n}=this.$options,t=t._instance,i=this._instance,s=i.root.ctx.isEdit,r=i.root.nodeMap,o={},e=(F(o,U(i.defaultOptions)),F(o,U(e)),{});F(e,U(i.defaultConfig)),F(e,U(n)),i.isGroup&&delete o.style,i.options=o,i.config=e;let a=o.id;d(a)?(a=E(i),A(0,"id不能为空, 已自动生成id: "+a)):r.has(a)&&(a=E(i),A(0,`id为${o.id}的组件已存在, 已自动修改为`+a)),i.id=a,i.root.nodeMap.set(i.id,this),i.name=o.name||"",i.lock=!!o.lock,i.visible=!!o.visible,i.isSelected=!!o.isSelected,i.style=new Te(i),i.style.init(),i.children=[];var l,c,n={display:o.visible?"":"none"};return o.style&&(({backgroundColor:r,backgroundImage:l,rotate:c}=o.style),l&&(n.backgroundImage=l),r&&(n.backgroundColor=r),c)&&(n.rotate=c),i.style.setStyles({display:"",rotate:0,backgroundImage:"",backgroundColor:"",zIndex:"",...i.defaultElStyles,...n}),i.canvas=t.canvas,i.ctx.canvas=i.canvas.ctx,i.edge=new kt(i,o.style),i.edge.init(),i.transition=new Fe(i),i.ctx.transition=i.transition,i.elAttrs={"data-id":i.id,...i.defaultElAttrs,...e.elAttrs||{}},i.contentElAttrs={...i.defaultContentElAttrs,...e.contentElAttrs||{}},i.contentElStyles={...i.defaultContentElStyles,...e.contentElStyles||{}},i.userData=U(o.userData||{}),P(i,t),s&&(i.mask=new _t(i),i.ctx.mask=i.mask),this}mount(){var t=this._instance,{parent:A,root:e,ctx:n}=t;return t.el||(t.el=i.createElement(),l(t.el,t.elAttrs),n.el=t.el),t.contentEl||(t.contentEl=i.createElement(),r(t.contentEl,t.contentElStyles),l(t.contentEl,t.contentElAttrs),n.contentEl=t.contentEl),t.style.update(),t.el.appendChild(t.contentEl),A.contentEl.appendChild(t.el),t.edge.updateReal(),t.transition.init(),e.ctx.isEdit&&(t.mask.init(),t.isSelected)&&dt(e.selector,[t]),this}moveToTarget(t,A){return this._instance&&t?._instance&&I.moveToTarget(this._instance,t._instance,A),this}update(){var t=this._instance;return t&&t.update(),this}animate(t){!function(t,A){be(t,A).play()}(this._instance,t)}get id(){return this._instance?.id}get isSelected(){return this._instance?.isSelected}get children(){return this._instance?.children.slice()}get visible(){return this._instance?.visible}get type(){return this._instance?.type}get top(){return this._instance?.edge.top}set top(t){t=+t;const A=this._instance;if(A&&isFinite(t)){const{edge:n,root:i}=A;var e=n.top;if(t!==e)return I.update(A,(()=>{W(A),n.setTop(t),zt(A),X(A),i.boundBox.update()}),"top",t,e),!0}return!1}get left(){return this._instance?.edge.left}set left(t){t=+t;const A=this._instance;if(A&&isFinite(t)){const{edge:n,root:i}=A;var e=n.left;if(t!==e)return I.update(A,(()=>{W(A),n.setLeft(t),zt(A),X(A),i.boundBox.update()}),"left",t,e),!0}return!1}get width(){return this._instance?.edge.width}set width(t){t=+t;const A=this._instance;if(A&&isFinite(t)){const{edge:n,root:i}=A;t<1&&(t=1);var e=n.width;if(t!==e)return I.update(A,(()=>{W(A),n.setWidth(t),zt(A),X(A),i.boundBox.update()}),"width",t,e),!0}return!1}get height(){return this._instance?.edge.height}set height(t){t=+t;const A=this._instance;if(A&&isFinite(t)){const{edge:n,root:i}=A;t<1&&(t=1);var e=n.height;if(t!==e)return I.update(A,(()=>{W(A),n.setHeight(t),zt(A),X(A),i.boundBox.update()}),"height",t,e),!0}return!1}get lock(){return this._instance?.lock}set lock(t){const A=this._instance;if(t=!!t,A){var e=A.lock;if(t!==e)return I.update(A,(()=>{A.lock=t}),"lock",t,e),!0}return!1}get backgroundColor(){return this._instance?.style.getStyleValue("backgroundColor")}set backgroundColor(t){const A=this._instance;if(A&&g(t)){var e=A.style.getStyleValue("backgroundColor");if(t!==e)return I.update(A,(()=>{A.style.setStyle("backgroundColor",t)}),"backgroundColor",t,e),!0}return!1}get backgroundImage(){return this._instance?.style.getStyleValue("backgroundImage")}set backgroundImage(t){const A=this._instance;if(A&&g(t)){var e=A.style.getStyleValue("backgroundImage");if(t!==e)return I.update(A,(()=>{A.style.setStyle("backgroundImage",t)}),"backgroundImage",t,e),!0}return!1}get rotate(){return this._instance?.style.getStyleValue("rotate")}set rotate(t){const A=this._instance;if(A&&isFinite(t)){var e=A.style.getStyleValue("rotate");if(t!==e)return I.update(A,(()=>{A.style.setStyle("rotate",t)}),"rotate",t,e),!0}return!1}setRotate(t){const A=this._instance;if(A&&isFinite(t)){var e=A.style.getStyleValue("rotate");if(t!==e)return I.update(A,(()=>{A.style.setStyle("rotate",t)}),"rotate",t,e),!0}return!1}get name(){return this._instance?.name}set name(t){const A=this._instance;if(A&&g(t)){var e=A.name;if(t!==e)return I.update(A,(()=>{A.name=t}),"name",t,e),!0}return!1}get groups(){var t=this._instance;return t?t.getGroups().map((t=>t.ctx)):[]}get containers(){var t=this._instance;return t?t.getContainers().map((t=>t.ctx)):[]}show(t){const A=this._instance;if(A){const{transition:e,visible:n}=A,i=(t||{}).transition;n||I.update(A,(()=>{this.root.isPlayMode()&&(e.enterAnimation||i)?Le(e,"enter",i):(A.style.setStyle("display",""),K(A)),A.visible=!0}),"visible",!0,n)}}hidden(t){const A=this._instance;if(A){const{transition:e,visible:n}=A,i=(t||{}).transition;n&&I.update(A,(()=>{this.root.isPlayMode()&&(e.leaveAnimation||i)?Le(e,"leave",i):A.style.setStyle("display","none"),A.visible=!1}),"visible",!1,n)}}prev(){var t=this._instance;return(t=t&&t.getPrevSibling())?t.ctx:null}next(){var t=this._instance;return(t=t&&t.getNextSibling())?t.ctx:null}siblings(){var t=this._instance;return t?t.getSiblings().map((t=>t.ctx)):[]}select(){var t,A,e=this._instance;return e&&(({isSelected:t,root:A}=e),A.isEdit)&&!t&&dt(A.selector,[e]),this}unselect(){var t,A,e=this._instance;return e&&(({isSelected:t,root:A}=e),A.isEdit)&&t&&pt(A.selector,[e]),this}getTopSelect(){var t=this._instance;return(t=t&&t.getTopSelect())?t.ctx:null}setUserData(t,A){var e=this._instance;e&&g(t)&&(e.userData[t]=U(A))}getAllUserData(){var t=this._instance;return U(t?.userData)}getUserData(t){var A=this._instance;return A&&g(t)?U(A.userData[t]):null}toJSON(){var t,A,e,n,i,s,r,o,a,l,c,u,h=this._instance;let d={};return h&&(({id:l,name:c,lock:t,visible:u,type:a,children:A,edge:i,transition:e,userData:n}=h),({width:i,height:s,top:r,left:o}=i),d={type:a,option:{id:l,name:c,visible:u,style:{top:r,left:o,width:i,height:s}}},a=h.style.getStyleValue("rotate"),l=h.style.getStyleValue("backgroundColor"),c=h.style.getStyleValue("backgroundImage"),u=e.toJSON(),0<Object.keys(n).length&&(d.option.userData=U(n)),a&&(d.option.style.rotate=a),l&&(d.option.style.backgroundColor=l),c&&(d.option.style.backgroundImage=c),u&&(d.option.transition=u),t&&(d.option.isLock=t),0<A.length&&(d.children=A.map((t=>t.toJSON()))),h.lifeCycle.call("beforeToJSON",d)),d}unmount(){var t=this._instance,A=t.root;return A.ctx.isEdit&&pt(A.selector,[t]),i.remove(t.contentEl),i.remove(t.el),this}destroy(){var t=this._instance,{ctx:A,isMounted:e,children:n,parent:i,root:s,id:r}=t;[...n].forEach((t=>{t.destroy()})),e&&A.unmount(),G(t),s.isEdit&&(t.mask.destroy(),t.mask=null,t.edge.destroy(),t.edge=null,s.boundBox.update()),t.style.destroy(),s.nodeMap.delete(r),i.isBeforeDestroyed||(i.edge.update(),i.edge._updateGroup())}}function je(t,A){return $A.checkLayoutType(t,A)}const{ENTER:Pe,LEAVE:Ge}={ENTER:"enter",LEAVE:"leave"};class Ve{constructor(t){this.root=t,this.target=null,this.type="",this.resolve=null,this.animations=new Map,this.cbMap=new Map}execute(t,A,e=null){if(!this.root.isPlayMode()||!A||!A.length)return!1;let n=!1;if(A&&A.length){e&&this.root.animation._registerCallback(e,t);try{A.forEach((A=>{A.reduce(((A,e)=>A.run(e,null,t)),this.root.animation)})),n=!0}catch(A){n=!1,console.error(A)}}return n}dispense(t,A,e,n){switch(this.target=t,this.type=A,this.resolve=e,n&&this.cbMap.set(t,n),A){case Pe:this.show();break;case Ge:this.hidden()}}async show(){var t,{target:A,type:e,resolve:n}=this;je(A,_A)?(t=this.getExecuteFn(A,null,{type:e,resolve:n}),A._visible=!0,t()||(A._setVisible(!0),n(A))):(je(A,LA)||je(A,MA))&&(A._visible=!0,A._setVisible(!0),this.root.isPlayMode()&&await Promise.all(this.getPromiseList(A,e)),n(A))}async hidden(){var{target:t,type:A,resolve:e}=this;if(je(t,_A)){var n=this.getExecuteFn(t,null,{type:A,resolve:e});t._visible=!1,n()||(t.__setVisible(!1),e(t))}else if(je(t,LA)||je(t,MA)){if(t._visible=!1,this.root.isPlayMode()){let e=[];await Promise.all(this.getPromiseList(t,A,(t=>{e.push(t)}))),t.__setVisible(!1),this.cbMap.get(t)&&this.cbMap.get(t)(e),this.cbMap.delete(t),e=[]}else t.__setVisible(!1);e(t)}}getExecuteFn(t,A,e){var n=new Function("","return false");if(this.getCtVisible(t)){if(p(A))return({animation:A,cb:i}=A),this.execute.bind(this,t,A,i);if(p(e)){var{type:A,resolve:i,fn:e}=e;if(!this.root.isPlayMode())return n;var s=this.animations.get(t);return s?(this.root.animation._end(t),e&&e(t),e=s.animation[A],this.execute.bind(this,t,e,t._animationEndCb.bind(t,i))):n}}return n}convert(t,A){if(A=A||t,je(t.parent,LA))return this.convert(t.parent,A);if(je(t,LA)){if(t.animation&&Object.keys(t.animation).length)return t.animation}else if(A.animation&&Object.keys(A.animation).length)return A.animation;return null}getPromiseList(t,A,e){return t.containers?t.containers.map((async t=>await this.asyncExecute(t,A,e))):[]}asyncExecute(t,A,e){return new Promise((n=>{this.getExecuteFn(t,null,{type:A,resolve:n,fn:e})()||n(this)}))}getCtVisible(t,A){return A=A||t,je(t.parent,LA)?!!t.parent.visible&&this.getCtVisible(t.parent,A):A.visible}clear(){this.animations.clear()}destroy(){this.ui=null,this.target=null,this.type="",this.resolve=null,this.clear()}}class ze{constructor(){this.totalTick=[],this.totalCallbacks=[],this.callbacks=[],this.ticks=[],this._ticks=[],this._tier=0,this._callback=null,this._ranTicks=[]}addTicks(t,A,e){c(t)&&(this._ticks=t,this._tier=A,this._callback=e,this.add())}add(){this.ticks.length?this.handleRunningTicks():this.handleTotalTick()}handleRunningTicks(){var{_ticks:t,_tier:A,_callback:e}=this;1===A||this.isEveryInfinite(t)?(this.ticks.push(t),this.callbacks.push(e),this.totalTick.push([]),this.totalCallbacks.push([])):1<A&&this.handleTotalTick()}handleTotalTick(){var{_ticks:t,_tier:A,_callback:e}=this;1===A?(this.totalTick.push([t]),this.totalCallbacks.push([e])):this.totalTick.length&&(this.totalTick[this.totalTick.length-1].push(t),this.totalCallbacks[this.totalCallbacks.length-1].push(e))}isFinish(){return this.totalTick.flat().length<1&&this.ticks.flat().filter((t=>p(t))).length<1}getCurrentTicks(){var t=this.isEveryInfinite(),A=this.getRunEndTicks();return!this.ticks.length||A.length||t?(this.totalTick.length&&(this.ticks.length?A.forEach((t=>{this.totalTick[t]&&(this.ticks[t]=this.totalTick[t].shift(),this.callbacks[t]=this.totalCallbacks[t].shift())})):this.totalTick.forEach(((t,A)=>{this.ticks.push(t.shift()),this.totalCallbacks[A]&&this.callbacks.push(this.totalCallbacks[A].shift())}))),this._filterSameAnimation()):this._filterSameAnimation(),this.ticks}isEveryInfinite(t){return(t=t||this.ticks.flat().filter((t=>p(t)))).length&&t.every((t=>t.infinite))}getRunEndTicks(){const t=[];return this.ticks.forEach(((A,e)=>{A&&A.every((t=>d(t)))&&t.push(e)})),t}endAnimation(){this.ticks.forEach((t=>{t&&t.forEach((t=>{p(t)&&t._after(!0)}))})),this._ranTicks.forEach((t=>{t._after(!0)})),this.totalTick=[],this.ticks=[],this.totalCallbacks=[],this.callbacks=[],this._ranTicks=[],this._ticks=[],this._tier=0,this._callback=null}_recordRanTick(t){this._ranTicks.push(t)}_endAnimation(t){let A=!1;return this.ticks.forEach((e=>{e&&e.forEach((e=>{p(e)&&e.target.id===t.id&&(A=!0,e._after(!0))}))})),this._ranTicks.forEach((A=>{A.target.id===t.id&&A._after(!0)})),this.totalTick=this.totalTick.filter((A=>A[0]&&A[0][0].target.id!==t.id)),this.ticks=this.ticks.filter((A=>A&&A[0]&&A[0].target.id!==t.id)),this._ranTicks=[],A}_filterSameAnimation(){this.ticks.length&&this.ticks.reduce(((t,A,e,n)=>(t&&A&&t.concat(A).reduce(((t,A,i)=>(t&&A&&t.type===A.type&&t.target===A.target&&(n[e-1][i-1]=null),A))),A)))}}const Je={fromTop:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[1]:e,{translate:[0,(t.bottom-A.top)/e]}),fromLeft:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[0]:e,{translate:[(t.right-A.left)/e,0]}),fromRight:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[0]:e,{translate:[(-A.right+t.left)/e,0]}),fromBottom:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[1]:e,{translate:[0,(-A.bottom+t.top)/e]}),toTop:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[1]:e,{translate:[0,(-t.bottom+A.top)/e]}),toLeft:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[0]:e,{translate:[(-t.right+A.left)/e,0]}),toRight:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[0]:e,{translate:[(A.right-t.left)/e,0]}),toBottom:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[1]:e,{translate:[0,(A.bottom-t.top)/e]})},Ye={fromFlyTop:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[1]:e,{translate:[0,(t.bottom-A.top)/e]}),fromFlyLeft:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[0]:e,{translate:[(t.right-A.left)/e,0]}),fromFlyRight:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[0]:e,{translate:[(-A.right+t.left)/e,0]}),fromFlyBottom:({t:t,c:A,r:e})=>(e=v(e,"Array")?e[1]:e,{translate:[0,(-A.bottom+t.top)/e]}),toFlyTop:({b:t,r:A})=>(v(A,"Array")&&A[1],{translate:[0,-t.height]}),toFlyLeft:({b:t,r:A})=>(v(A,"Array")&&A[0],{translate:[-t.width,0]}),toFlyRight:({b:t,r:A})=>(v(A,"Array")&&A[0],{translate:[t.width,0]}),toFlyBottom:({b:t,r:A})=>(v(A,"Array")&&A[1],{translate:[0,t.height]})},We=({s:t})=>({scale:t}),Xe={fromZoomInVer:We,fromZoomInHor:We,fromZoomIn:We,fromZoomOutVer:We,fromZoomOutHor:We,fromZoomOut:We,toZoomInVer:({s:t})=>({scale:[t[0],1.5*t[1]]}),toZoomInHor:({s:t})=>({scale:[1.5*t[0],t[1]]}),toZoomIn:({s:t})=>({scale:[1.5*t[0],1.5*t[1]]}),toZoomOutVer:({s:t})=>({scale:[t[0],.5*t[1]]}),toZoomOutHor:({s:t})=>({scale:[.5*t[0],t[1]]}),toZoomOut:({s:t})=>({scale:[.5*t[0],.5*t[1]]})},Ze={fadeOut:t=>({opacity:0}),fadeIn:t=>({opacity:t.style.opacity||1})},qe={...Je,...Ye,...Xe,...Ze};let tn,An;function en(t){return je(t,IA)}var nn=new class{constructor(){this.UIMap=new Map,this.stack=[]}get currentUI(){return tn}set currentUI(t){en(t)&&(An&&An.emit("beforeUpdateCurrentUI",t),tn=t,this.stack.includes(t)&&(this.stack=this.stack.slice(0,this.stack.indexOf(t))),this.stack.push(t),An?An.emit("afterUpdateCurrentUI",tn):An=tn)}get rootUI(){return An}set rootUI(t){!An&&en(t)&&(An=t)}get prev(){return this.stack[this.stack.length-2]}_getUI(t){return t?this.UIMap.get(t.id):Array.from(this.UIMap).map((t=>t[1]))}_setUI(t){en(t)&&this.UIMap.set(t.id,t)}destory(t){this.UIMap.has(t.id)&&(this.UIMap.delete(t.id),this.stack.includes(t))&&this.stack.splice(this.stack.indexOf(t),1),this.currentUI==t&&(this.currentUI=this.rootUI),this.rootUI===t&&(this.UIMap=new Map,tn=null,An=null,this.stack=[])}exit(t){let A=!1;var e;"number"!=typeof t&&(e=t,t=this.stack.length-this.stack.indexOf(e)-1);for(let e=0;e<t;e++)this.currentUI!==this.rootUI&&this.prev.containers.forEach((t=>{t.adapter&&t.adapter.isEnter&&(A=t.adapter.exitEdit())}));return A}};class sn{constructor(){this.param={},this.typeCache=null,this.defaultTypes=Object.keys(Je).concat(Object.keys(Ye)).concat(Object.keys(Xe)).concat(Object.keys(Ze))}animator(t){return this._dealAnimation(t),{...t,animation:this.param,typeCache:this.typeCache}}registAnimation({name:t,animation:A}){return this._isDefaultType(t)||["fadeIn","fadeOut"].includes(t)?(console.warn(`Warn Animation: custom type '${t}' can not be one of ${this.defaultTypes},fadeIn,fadeOut`),!1):(v(t,"String")&&v(A,"Function")&&(qe[t]=A),!0)}_getTranslate(t,A){var e,n;return B("^toFly.*$",A)?this._getFlyToExecution(t,A):B("^(fromZoom)|(toZoom).*$",A)?this._getZoomExecution(t,A):B("^fade.*$",A)?this._getFadeExecution(t,A):(e=t.el.getBoundingClientRect(),t=t.root.canvas.el.getBoundingClientRect(),n=nn.rootUI.canvas.getZoom(!0),qe[A]({t:e,c:t,r:n}))}_getFlyToExecution(t,A){t=t.bound;var e=nn.rootUI.canvas.getZoom(!0);return qe[A]({b:t,r:e})}_getZoomExecution(t,A){return t=t.style.scale||[1,1],qe[A]({s:t})}_getFadeExecution(t,A){return qe[A](t)}_dealAnimation(t){var{target:A,animation:e}=t;if(v(e,"Array"))return e.map((A=>{this._dealAnimation({...t,animation:A})})),!0;if(v(e,"Object")&&(this._isDefaultType(e.type)?this.param={...this.param,...e.animation}:this.param={...this.param,...e}),this._isDefaultType(e))return this.param={...this.param,...this._getTranslate(A,e)},this.typeCache=e,!0;if(Object.keys(qe).includes(e)){try{v(qe[e](A),"Object")&&(this.param={...this.param,...qe[e](A)})}catch(A){console.error(A)}return!0}return v(e,"String")&&!Object.keys(qe).includes(e)&&console.warn(`Warn Animation: '${e}' type has not been registered`),{}}_isDefaultType(t){return this.defaultTypes.includes(t)}}class rn{constructor(t){this.typeCache=t.typeCache,this.type=t.type,this.value=t.endValue,this.target=t.target,this.callback=t.callback,this.duration=t.duration||0,this.delay=t.delay||0,this.infinite=t.infinite||!1,this.easingType=t.easing||"linear",this.animation=t.animation,this.startTime=0,this.endTime=0,this.doneTime=0,this.doingTime=0,this.startValue=null,this.currentValue=null,this.endValue=null,this.isResume=!1,this.stopped=!1,this.ended=!1,this.record={delay:this.delay},this.easing={linear:(t,A,e,n)=>e*(t/n)+A,easeOut:(t,A,e,n)=>-e*(Math.pow(t/n-1,4)-1)+A},this.defaultValue={translate:[0,0],scale:[1,1],skew:[0,0],opacity:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0}}init(){if(!this.stopped){this.startTime=this.startTime||this._getNow();var t=this._getNow();if(t===this.startTime&&this._before(),this._getNow()-this.startTime<this.delay)return!0;if(!((this.endTime||this.startTime+this.duration+this.delay)<t))return this._run(),!0;this.ended=!0,this._after(),this.infinite&&(this.startTime=0,this.endTime=0,this.delay=this.record.delay,this.isResume=!1),this.callback&&v(this.callback,"Function")&&this.callback(this.target)}return!1}pause(){this.stopped=!0,this.doneTime=this._getNow()-this.startTime-this.delay}resume(){return!(!this.stopped||(this.isResume=!0,this.record.delay=this.delay,this.delay=0,this.startTime=this._getNow(),this.endTime=this.duration-this.doneTime+this._getNow(),this.stopped=!1))}_before(){var t=this.typeCache;t&&(B("^toZoom.*$",t)?this.target.style.transformOrigin="top left":B("^(from)|(fadeIn).*$",t)&&("translate"===this.type&&(this._setFromFlyValue(),t=this._getValue(this.type),this.target.style.translate=[-this.value[0]+t[0],-this.value[1]+t[1]]),"scale"===this.type&&this._setFromZoomValue(),"opacity"===this.type)&&(this.target.style.opacity=0))}_after(t=!1){this.target._instance.style.setStyle(this.type,this.endValue);var A=this.typeCache;A&&(B("^fromZoom.*$",A)?this.target.style.transformOrigin="":B("^(to)|(fadeOut).*$",A)&&(t||this.target.__setVisible(!1),"translate"===this.type&&(this.target.style.translate=this.startValue),"opacity"===this.type&&(this.target.style.opacity=this.startValue),"scale"===this.type)&&(this.target.style.scale=this.startValue,this.target.style.transformOrigin=""))}_run(){if(!this.target)return!1;this.startValue=this.startValue||this._getValue(this.type),this.endValue=this.endValue||this._getEndValue(this.value);var t=this._getNow();return this.isResume?this.doingTime=t-this.startTime+this.doneTime:this.doingTime=t-this.startTime-this.delay,this.currentValue=v(this.endValue,"Array")?this.endValue.map(((t,A)=>this.easing[this.easingType](this.doingTime,this.startValue[A],t-this.startValue[A],this.duration))):this.easing[this.easingType](this.doingTime,this.startValue,this.endValue-this.startValue,this.duration),this.target._instance.style.setStyle(this.type,this.currentValue),!0}_getValue(t){var A=function(t,A){return t._instance.style.getStyleValue(A)}(this.target,t);return p(A)?A:this.defaultValue[t]}_getEndValue(t){var A={"[object Array]":t,"[object String]":[Number(t),Number(t)],"[object Number]":[t,t]};let e=t;return["translate","scale","skew"].includes(this.type)&&(e=A[Object.prototype.toString.call(t)]),"translate"===this.type?e.map(((t,A)=>t+this.startValue[A])):e}_getNow(){return Date.now()}_setFromFlyValue(){if(B("^fromFly.*$",this.typeCache)){var t=this.target.width,A=this.target.height;switch(this.typeCache){case"fromFlyTop":this.value=[0,A];break;case"fromFlyBottom":this.value=[0,-A];break;case"fromFlyLeft":this.value=[t,0];break;case"fromFlyRight":this.value=[-t,0]}}}_setFromZoomValue(){var t=this.typeCache;if(B("^fromZoom.*$",t)){var A=this._getValue(this.type);let e=[];switch(t){case"fromZoomInVer":e=[1,.5];break;case"fromZoomInHor":e=[.5,1];break;case"fromZoomIn":e=[.5,.5];break;case"fromZoomOutVer":e=[1,1.5];break;case"fromZoomOutHor":e=[1.5,1];break;case"fromZoomOut":e=[1.5,1.5]}this.target.style.transformOrigin="top left",this.target.style.scale=[e[0]*A[0],e[1]*A[1]]}}}class on{constructor(t,A){this.opts=t,this.target=A,this.tweens=[],this.init()}init(){v(this.opts,"Array")?this.opts.forEach((t=>{this._dealTarget(t)})):this._dealTarget(this.opts)}_dealTarget(t){let A=t.target;d(A)&&(A=this.target,t[A]=this.target),c(A)?A.forEach((A=>{this._dealGroup(A,t)})):this._dealGroup(A,t)}_dealGroup(t,A){je(t,LA)?t.containers.forEach((t=>{this._dealAnimation({...A,target:t})})):this._dealAnimation({...A,target:t})}_dealAnimation(t){v(t.animation,"Object")?this._createTick(t):this._createTick((new sn).animator(t))}_createTick(t){const A=Object.keys(t.animation);A.forEach(((e,n)=>{this.tweens=[...this.tweens,new rn({...t,type:e,endValue:t.animation[e],callback:n===A.length-1?t.callback:null})]}))}}class an{constructor(t,A){this.sequence=A||new ze,this._running=t||!1,this._tier=1,this._instance=null,this._callbacks=[]}run(t,A,e){return this.sequence.addTicks(new on(t,e).tweens,this._tier,A),this._startLoop(),this.initRunner(),this._instance}initRunner(){this._instance=new an(this._running,this.sequence),this._instance._tier=this._tier+1,this._instance._callbacks=this._callbacks}end(){if(!this._running)return!1;this._running=!1,this._callbacks=[],this.sequence.endAnimation()}pause(){if(d(this.ticks))return!1;this._running=!1,this.ticks.flat().forEach((t=>t&&t.pause()))}resume(){if(d(this.ticks))return!1;this.ticks.flat().forEach((t=>t&&t.resume())),this._startLoop()}getCallback(){return this.sequence.totalCallbacks}register({name:t,animation:A}){(new sn).registAnimation({name:t,animation:A})}_startLoop(){if(this._running)return!1;const t=this;return t._running=!0,window.requestAnimationFrame((function A(){t._running&&(window.requestAnimationFrame(A),t._flush())})),!0}_flush(){const t=this.sequence.callbacks;if(this.ticks=this.sequence.getCurrentTicks(),this.ticks.forEach(((A,e)=>{A&&A.forEach(((n,i)=>{!p(n)||n.init()||n.infinite||(this.sequence._recordRanTick(n),A.splice(i,1,null)),A.every((t=>d(t)))&&(t[e]&&v(t[e],"Function")&&t[e](),t[e]=null)}))})),this.sequence.isFinish()){this._running=!1;var A=this._callbacks.length;for(let t=0;t<A;t++){var[e,,]=this._callbacks.shift();v(e,"Function")&&e()}}}_registerCallback(t,A){v(t,"Function")&&this._callbacks.push([t.bind(t=A||this),t])}_destroyCallback(){this._callbacks=[]}_end(t){return!!this._running&&(this._callbacks.length&&(this._callbacks=this._callbacks.filter((([,A])=>A&&A.id!==t.id))),this.sequence._endAnimation(t))}}class ln{constructor(t,A={}){this.instance=t,this.config=A,this.pNode=null,this.watermarkUrl=null,this.markNode=null,this.bgImg=null,this.observerMap=null}init(){return this.config.enable&&(this.watermarkUrl=this.config.src||"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e%3csvg width='481px' height='323px' viewBox='0 0 481 323' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e %3ctitle%3e%e6%b0%b4%e5%8d%b0%3c/title%3e %3cdefs%3e %3cpath d='M9.4901397%2c61.3055244 L9.4901397%2c46.6537786 L14.3797419%2c46.6537786 L14.3797419%2c44.4296482 L2.00927364%2c44.4296482 L2.00927364%2c46.6537786 L6.87634313%2c46.6537786 L6.87634313%2c61.3055244 L9.4901397%2c61.3055244 Z M19.5848023%2c61.3055244 L19.5848023%2c52.3631443 C20.6889061%2c51.2396145 21.4775516%2c50.6434559 22.6267208%2c50.6434559 C24.0913482%2c50.6434559 24.7222646%2c51.5147647 24.7222646%2c53.6930368 L24.7222646%2c61.3055244 L27.3135284%2c61.3055244 L27.3135284%2c53.3720282 C27.3135284%2c50.1619431 26.1418265%2c48.3734671 23.5054972%2c48.3734671 C21.8155425%2c48.3734671 20.5762424%2c49.3135634 19.4946714%2c50.3683057 L19.5848023%2c47.8690251 L19.5848023%2c43.0309682 L17.0160712%2c43.0309682 L17.0160712%2c61.3055244 L19.5848023%2c61.3055244 Z M32.2932616%2c46.3327701 C33.2396362%2c46.3327701 33.9606835%2c45.690753 33.9606835%2c44.7735859 C33.9606835%2c43.8334895 33.2396362%2c43.2144016 32.2932616%2c43.2144016 C31.3468869%2c43.2144016 30.6483723%2c43.8334895 30.6483723%2c44.7735859 C30.6483723%2c45.690753 31.3468869%2c46.3327701 32.2932616%2c46.3327701 Z M33.5776271%2c61.3055244 L33.5776271%2c48.6944756 L31.008896%2c48.6944756 L31.008896%2c61.3055244 L33.5776271%2c61.3055244 Z M40.0445204%2c61.3055244 L40.0445204%2c52.3631443 C41.1486241%2c51.2396145 41.9372696%2c50.6434559 43.0864388%2c50.6434559 C44.5510662%2c50.6434559 45.1819826%2c51.5147647 45.1819826%2c53.6930368 L45.1819826%2c61.3055244 L47.7732464%2c61.3055244 L47.7732464%2c53.3720282 C47.7732464%2c50.1619431 46.6015445%2c48.3734671 43.9652152%2c48.3734671 C42.2752605%2c48.3734671 41.0134277%2c49.3135634 39.8642585%2c50.4370932 L39.7966603%2c50.4370932 L39.5938658%2c48.6944756 L37.4757892%2c48.6944756 L37.4757892%2c61.3055244 L40.0445204%2c61.3055244 Z M55.7723653%2c66.9690318 C59.7381256%2c66.9690318 62.2617913%2c64.9971223 62.2617913%2c62.5666293 C62.2617913%2c60.4112864 60.7295657%2c59.4941192 57.8003109%2c59.4941192 L55.5245053%2c59.4941192 C53.9472142%2c59.4941192 53.4514942%2c59.0126064 53.4514942%2c58.2559435 C53.4514942%2c57.6597848 53.7218869%2c57.292918 54.1274761%2c56.9260511 C54.6682616%2c57.1782721 55.299178%2c57.3158471 55.8624962%2c57.3158471 C58.45376%2c57.3158471 60.5042384%2c55.7337337 60.5042384%2c52.9822322 C60.5042384%2c52.0192066 60.1662475%2c51.170827 59.6930601%2c50.666385 L62.0589967%2c50.666385 L62.0589967%2c48.6944756 L57.6651145%2c48.6944756 C57.1919272%2c48.5110421 56.5610108%2c48.3734671 55.8624962%2c48.3734671 C53.2937651%2c48.3734671 51.0630249%2c50.0472972 51.0630249%2c52.9134446 C51.0630249%2c54.4038413 51.8516704%2c55.5961587 52.6853814%2c56.2611049 L52.6853814%2c56.3528216 C52.0093995%2c56.8572636 51.3108849%2c57.7056432 51.3108849%2c58.6915979 C51.3108849%2c59.723411 51.806605%2c60.3883572 52.4375214%2c60.7781533 L52.4375214%2c60.8927992 C51.2883522%2c61.6036037 50.634903%2c62.5895585 50.634903%2c63.6443007 C50.634903%2c65.845502 52.798045%2c66.9690318 55.7723653%2c66.9690318 Z M55.8624962%2c55.6190879 C54.5781306%2c55.6190879 53.5190924%2c54.5872748 53.5190924%2c52.9134446 C53.5190924%2c51.1937562 54.5555979%2c50.2307306 55.8624962%2c50.2307306 C57.1693945%2c50.2307306 58.2059%2c51.2166854 58.2059%2c52.9134446 C58.2059%2c54.5872748 57.1468618%2c55.6190879 55.8624962%2c55.6190879 Z M56.1554217%2c65.2264141 C54.1049433%2c65.2264141 52.8431105%2c64.4926804 52.8431105%2c63.2545047 C52.8431105%2c62.6124877 53.1585687%2c61.9704706 53.9021488%2c61.4201703 C54.4204015%2c61.5348162 54.9837198%2c61.6036037 55.5695707%2c61.6036037 L57.4397872%2c61.6036037 C58.9494801%2c61.6036037 59.7606583%2c61.9246123 59.7606583%2c62.9793545 C59.7606583%2c64.1487427 58.3185637%2c65.2264141 56.1554217%2c65.2264141 Z M68.0752354%2c61.6036037 C71.4551447%2c61.6036037 72.8972394%2c59.1731107 72.8972394%2c56.146459 L72.8972394%2c44.4296482 L70.2834428%2c44.4296482 L70.2834428%2c55.894238 C70.2834428%2c58.3705894 69.4497318%2c59.2877566 67.7823099%2c59.2877566 C66.7007389%2c59.2877566 65.7994297%2c58.7603855 65.1009151%2c57.4534222 L63.2757641%2c58.8062438 C64.3122696%2c60.6635074 65.8444952%2c61.6036037 68.0752354%2c61.6036037 Z M81.910331%2c61.6036037 C85.5381004%2c61.6036037 87.7463079%2c59.4024025 87.7463079%2c56.6967593 C87.7463079%2c54.2204079 86.3267459%2c52.9822322 84.3663985%2c52.1338525 L82.0905929%2c51.1478978 C80.7386291%2c50.5975975 79.4091981%2c50.0472972 79.4091981%2c48.6027589 C79.4091981%2c47.2499373 80.5133018%2c46.4244868 82.2032565%2c46.4244868 C83.6678839%2c46.4244868 84.8170531%2c46.9977163 85.8535586%2c47.9378127 L87.2280551%2c46.2410534 C85.9662223%2c44.9340901 84.1410712%2c44.1086396 82.2032565%2c44.1086396 C79.0486744%2c44.1086396 76.7503361%2c46.1034783 76.7503361%2c48.7632631 C76.7503361%2c51.2166854 78.5304217%2c52.5007194 80.1302454%2c53.1885948 L82.4285838%2c54.1974787 C83.9608094%2c54.8853541 85.0874458%2c55.3668669 85.0874458%2c56.9031219 C85.0874458%2c58.3247311 83.9608094%2c59.2877566 81.9553965%2c59.2877566 C80.3555727%2c59.2877566 78.7332162%2c58.5081645 77.5389816%2c57.292918 L76.006756%2c59.1272523 C77.5164489%2c60.6864366 79.6345254%2c61.6036037 81.910331%2c61.6036037 Z M101.491273%2c61.6036037 C104.285331%2c61.6036037 106.831529%2c59.1272523 106.831529%2c54.7936374 C106.831529%2c50.918606 105.051444%2c48.3734671 101.919394%2c48.3734671 C100.612496%2c48.3734671 99.2830652%2c49.0842716 98.2240269%2c50.024368 L98.2916251%2c47.8690251 L98.2916251%2c43.0309682 L95.722894%2c43.0309682 L95.722894%2c61.3055244 L97.7508396%2c61.3055244 L97.9986996%2c59.9985612 L98.0662978%2c59.9985612 C99.1253361%2c61.0303743 100.364636%2c61.6036037 101.491273%2c61.6036037 Z M100.995553%2c59.4253317 C100.22944%2c59.4253317 99.2379997%2c59.1272523 98.2916251%2c58.2788727 L98.2916251%2c52.1109234 C99.3281306%2c51.0791103 100.274505%2c50.5746683 101.243413%2c50.5746683 C103.316424%2c50.5746683 104.150135%2c52.2026401 104.150135%2c54.8394957 C104.150135%2c57.7973599 102.798171%2c59.4253317 100.995553%2c59.4253317 Z M110.459299%2c66.5792357 C113.073095%2c66.5792357 114.379994%2c64.7678305 115.348901%2c62.0621873 L119.900512%2c48.6944756 L117.376847%2c48.6944756 L115.393966%2c55.1834334 L114.425059%2c58.7374563 L114.312395%2c58.7374563 C113.929339%2c57.5680681 113.546283%2c56.3069632 113.185759%2c55.1834334 L110.887421%2c48.6944756 L108.228559%2c48.6944756 L113.140694%2c61.2138077 L112.892834%2c62.0851165 C112.442179%2c63.4379381 111.653533%2c64.446822 110.30157%2c64.446822 C110.064976%2c64.446822 109.803033%2c64.3823337 109.591789%2c64.3210698 L109.400261%2c64.2633886 L109.400261%2c64.2633886 L108.904541%2c66.3270148 C109.332662%2c66.487519 109.828382%2c66.5792357 110.459299%2c66.5792357 Z M133.532813%2c61.6036037 C137.205648%2c61.6036037 139.684248%2c59.5629068 139.684248%2c54.0599036 L139.684248%2c44.4296482 L137.160583%2c44.4296482 L137.160583%2c54.2433371 C137.160583%2c58.0495809 135.628357%2c59.2877566 133.532813%2c59.2877566 C131.459802%2c59.2877566 129.972642%2c58.0495809 129.972642%2c54.2433371 L129.972642%2c44.4296482 L127.358846%2c44.4296482 L127.358846%2c54.0599036 C127.358846%2c59.5629068 129.859979%2c61.6036037 133.532813%2c61.6036037 Z M146.579264%2c61.3055244 L146.579264%2c44.4296482 L143.965467%2c44.4296482 L143.965467%2c61.3055244 L146.579264%2c61.3055244 Z M153.40668%2c61.3055244 L153.40668%2c53.3490991 C153.40668%2c51.5147647 153.203886%2c49.5657844 153.06869%2c47.8231668 L153.181353%2c47.8231668 L154.916373%2c51.3542604 L160.414359%2c61.3055244 L163.095754%2c61.3055244 L163.095754%2c44.4296482 L160.617154%2c44.4296482 L160.617154%2c52.2943568 C160.617154%2c54.1286912 160.819948%2c56.1693882 160.955145%2c57.9120058 L160.842481%2c57.9120058 L159.107461%2c54.3350538 L153.609475%2c44.4296482 L150.92808%2c44.4296482 L150.92808%2c61.3055244 L153.40668%2c61.3055244 Z M173.776268%2c61.6036037 C178.034953%2c61.6036037 181.009274%2c58.2330143 181.009274%2c52.7987988 C181.009274%2c47.3645832 178.034953%2c44.1086396 173.776268%2c44.1086396 C169.517582%2c44.1086396 166.565794%2c47.3645832 166.565794%2c52.7987988 C166.565794%2c58.2330143 169.517582%2c61.6036037 173.776268%2c61.6036037 Z M173.776268%2c59.2877566 C171.027275%2c59.2877566 169.247189%2c56.7655468 169.247189%2c52.7987988 C169.247189%2c48.8320507 171.027275%2c46.4244868 173.776268%2c46.4244868 C176.525261%2c46.4244868 178.327879%2c48.8320507 178.327879%2c52.7987988 C178.327879%2c56.7655468 176.525261%2c59.2877566 173.776268%2c59.2877566 Z' id='path-1'%3e%3c/path%3e %3cfilter x='-1.4%25' y='-14.6%25' width='105.6%25' height='137.6%25' filterUnits='objectBoundingBox' id='filter-2'%3e %3cfeOffset dx='3' dy='1' in='SourceAlpha' result='shadowOffsetOuter1'%3e%3c/feOffset%3e %3cfeGaussianBlur stdDeviation='1' in='shadowOffsetOuter1' result='shadowBlurOuter1'%3e%3c/feGaussianBlur%3e %3cfeColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' type='matrix' in='shadowBlurOuter1'%3e%3c/feColorMatrix%3e %3c/filter%3e %3c/defs%3e %3cg id='%e6%b0%b4%e5%8d%b0' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e %3cg id='%e7%bc%96%e7%bb%84' transform='translate(150.000000%2c 107.000000)'%3e %3crect id='%e7%9f%a9%e5%bd%a2' x='0' y='0' width='182' height='109.716125'%3e%3c/rect%3e %3cg id='ThingJSbyUINO' opacity='0.05' fill-rule='nonzero' transform='translate(91.509274%2c 55.000000) rotate(-30.000000) translate(-91.509274%2c -55.000000) '%3e %3cuse fill='black' fill-opacity='1' filter='url(%23filter-2)' xlink:href='%23path-1'%3e%3c/use%3e %3cuse fill='white' xlink:href='%23path-1'%3e%3c/use%3e %3c/g%3e %3c/g%3e %3c/g%3e%3c/svg%3e",this.markNode=document.createElement("div"),this.pNode=this.instance.el,this.bgImg=new Image,this.bgImg.src=this.watermarkUrl,this.bgImg.onerror=t=>{console.error("水印图片资源错误",t),this.remove()},this.observerMap=new Map,this.add()),this}add(){return this.__addMarker(),this.__addBrothersObserver(),this.__addMarkerObserver(),this.__addPNodeObserver(),this}remove(){for(const t of this.observerMap.values())t&&t.disconnect();return this.__removeMarker(),this}__observerReset(t=(()=>{}),{observer:A,node:e,options:n}){A.disconnect(),t(),A.observe(e,n)}__resetPNodeStyle(){var t;"static"===getComputedStyle(this.pNode).position&&(t=this.pNode.getAttribute("style"),this.pNode.setAttribute("style","position:relative;"+(t||"")))}__resetMarkStyle(){var t=this.markNode;cn(t,"position","absolute","important"),cn(t,"top",0,"important"),cn(t,"left",0,"important"),cn(t,"bottom",0,"important"),cn(t,"right",0,"important"),cn(t,"pointer-events","none"),cn(t,"z-index",1,"important"),cn(t,"background",`url("${this.watermarkUrl}")`,"important")}__addMarker(){this.__resetPNodeStyle(),this.__resetMarkStyle(),this.pNode.appendChild(this.markNode)}__removeMarker(){this.pNode.contains(this.markNode)&&this.pNode.removeChild(this.markNode)}__addMarkerObserver(){var t=this.markNode;this.__addNodeObserver({node:t,options:{childList:!0,attributes:!0,subtree:!0,attributesOldValue:!0,characterData:!0,characterDataOldValue:!0},callback:{conditionExp:t=>"attributes"===t.type&&"style"===t.attributeName,reset:()=>this.__resetMarkStyle()}})}__addPNodeObserver(){const t=this.pNode;this.__addNodeObserver({node:t,options:{childList:!0},callback:{conditionExp:t=>"childList"===t.type,reset:()=>{this.pNode.contains(this.markNode)?this.__resetMarkStyle():t.appendChild(this.markNode)}}})}__addBrothersObserver(){var t={attributes:!0,attributeFilter:["style"]};for(const A of this.pNode.children)A!==this.markNode&&this.__addNodeObserver({node:A,options:t,callback:{conditionExp:t=>"attributes"===t.type&&"style"===t.attributeName,reset:()=>this.__resetMarkStyle()}})}__addNodeObserver({node:t,options:A,callback:{conditionExp:e,reset:n}}){var i=new MutationObserver((i=>{i=i[0],e(i)&&this.__observerReset(n,{observer:this.observerMap.get(t),node:t,options:A})}));this.observerMap.set(t,i),i.observe(t,A)}__getMarkIndex(t){var A,e=[1];for(const n of t.children)n!==this.markNode&&(A=getComputedStyle(n).zIndex,e.push(Number(A)));return Math.max(...e.filter(Boolean))+1}destroy(){this.remove(),this.pNode=null,this.watermarkUrl=null,this.markNode=null,this.bgImg=null,this.observerMap=null,this.config=null,this.instance=null}}const cn=(t,A,e,n)=>{t.style.setProperty(A,e,n)},un={},hn={"data-id":"guide"},dn={display:"none",position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",backgroundColor:"#FF4D4F",pointerEvents:"none"},pn={width:"1px"},gn={width:"1px"},fn={width:"1px"},Bn={height:"1px"},mn={height:"1px"},wn={height:"1px"},yn={"data-id":"guide-line"};class Cn{constructor(t){this.instance=t,this.parentEl=null,this.showInstances=null,this.styles=null,this.attrs=null,this.locationMaps=null,this.globalLocationMaps=null,this.adsorptionDistance=5,this.lineEls=null}init(){this.styles={parentEl:un,lineEl:dn},this.attrs={parentEl:hn,lineEl:yn},this.showInstances=null,this.locationMaps=null,this.globalLocationMaps=null,this.parentEl||(this.parentEl=function(t){var{styles:t,attrs:A}=t,e=i.createElement();return r(e,t.parentEl),l(e,A.parentEl),e}(this)),this.lineEls||(this.lineEls=function(t){var A=t.parentEl,e=Qn(t,pn),n=Qn(t,gn),s=Qn(t,fn),r=Qn(t,Bn),o=Qn(t,mn);t=Qn(t,wn);return i.insert(e,A),i.insert(n,A),i.insert(s,A),i.insert(r,A),i.insert(o,A),i.insert(t,A),{left:e,right:n,hCenter:s,top:r,bottom:o,vCenter:t}}(this)),this.parentEl.parentNode||i.insert(this.parentEl,this.instance.workspaceEl)}updateLocationMaps(t){this.locationMaps=t}updateGlobalLocations(t){var{left:A,right:e,top:n,bottom:i,width:s,height:r}=t.edge;this.globalLocationMaps={horizontal:[{global:!0,location:A,type:"left",instance:t,getRealLocation:function(){return t.edge.getRealSize().left}},{global:!0,location:e,type:"right",instance:t,getRealLocation:function(){return t.edge.getRealSize().right}},{global:!0,location:A+s/2,type:"hCenter",instance:t,getRealLocation:function(){var{left:A,width:e}=t.edge.getRealSize();return A+e/2}}],vertical:[{global:!0,location:n,type:"top",instance:t,getRealLocation:function(){return t.edge.getRealSize().top}},{global:!0,location:i,type:"bottom",instance:t,getRealLocation:function(){return t.edge.getRealSize().bottom}},{global:!0,location:n+r/2,type:"vCenter",instance:t,getRealLocation:function(){var{top:A,height:e}=t.edge.getRealSize();return A+e/2}}]}}update(t=[]){var{globalLocationMaps:A,locationMaps:e}=this;(0<(this.showInstances=t).length&&A&&e?bn:Fn)(this)}destroy(){this.parentEl&&i.remove(this.parentEl),this.parentEl=null,this.styles=null,this.attrs=null,this.showInstances=null,this.locationMaps=null,this.globalLocationMaps=null,this.instance=null}}function Qn(t,A){var{styles:t,attrs:e}=t,n=i.createElement();return r(n,{...t.lineEl,...A}),l(n,e.lineEl),n}function vn(t){let A=1/0,e=1/0,n=-1/0,i=-1/0,s=1/0,r=1/0,o=-1/0,a=-1/0;for(const B of t){var{top:l,left:c,right:u,bottom:h,realTop:d,realLeft:p,realRight:g,realBottom:f}=B.edge;A=Math.min(l,A),e=Math.min(c,e),n=Math.max(u,n),i=Math.max(h,i),s=Math.min(d,s),r=Math.min(p,r),o=Math.max(g,o),a=Math.max(f,a)}return{top:A,left:e,bottom:i,right:n,width:n-e,height:i-A,realTop:s,realLeft:r,realBottom:a,realRight:o,realWidth:o-r,realHeight:a-s}}function bn(t){var{showInstances:A,adsorptionDistance:e}=t,n=vn(A);In(t,function(t,A,e,n){var{globalLocationMaps:t,locationMaps:i}=t,{realLeft:A,realRight:s,realTop:r,realBottom:o,realWidth:a,realHeight:l}=A,{horizontal:t,vertical:c}=t,{horizontal:i,vertical:u}=i,a=A+a/2,l=r+l/2;return{left:Un(t,A,[],n)||Un(i,A,e,n),right:Un(t,s,[],n)||Un(i,s,e,n),hCenter:Un(t,a,[],n)||Un(i,a,e,n),top:Un(c,r,[],n)||Un(u,r,e,n),bottom:Un(c,o,[],n)||Un(u,o,e,n),vCenter:Un(c,l,[],n)||Un(u,l,e,n)}}(t,n,function(t){var A=[];for(const e of t)A.push(e,...e.getGroups(),...e.getContainers());return A}(A),e),n)}function Un(t,A,e,n){return function(t,A,e){let n,i,s=0,r=t.length-1,o=!1,a=!1;if(r<=3)return t;for(;;)if(a||(!((n=s+Math.ceil((r-s)/2))>=r)&&(i=t[n].getRealLocation(),Math.abs(i-A)>e)?i>A?(r=n,a=!0):s=n:a=!0),o||(!((n=Math.floor((r-s)/2))<=s)&&(i=t[n].getRealLocation(),Math.abs(i-A)>e)?i>A?r=n:(s=n,o=!0):o=!0),o&&a)return t.slice(s,r)}(t,A,n).find((t=>{const i=t.instance;var s;return!(!i||!i.getRealVisible())&&(!e.includes(i)&&e.every((t=>!i.isGroup||!i.contains(t)))?(s=t.getRealLocation(),t.realLocation=s,Math.abs(s-A)<n):void 0)}))}function Fn(t){In(t)}function In(t,A,e){var{lineEls:n,instance:i,showInstances:s}=t,[a,l]=i.canvas.scaleManage.location,a={x:a,y:l},{left:l,right:n,hCenter:c,top:u,bottom:h,vCenter:d}=n,p={};if(A){var g,{left:f,right:B,top:m,bottom:w,width:y,height:C}=e;let n=1/0,r=[];A.left&&(g=A.left.location-f,n=Math.abs(n)>Math.abs(g)?g:n,r.push({offset:n,hitItem:A.left,type:"left"})),A.right&&(g=A.right.location-B,n=Math.abs(n)>Math.abs(g)?g:n,0<r.length&&n!==r[0].offset?n<r[0].offset&&(r=[{offset:n,hitItem:A.right,type:"right"}]):r.push({offset:n,hitItem:A.right,type:"right"})),A.hCenter&&(B=A.hCenter.location-(f+y/2),n=Math.abs(n)>Math.abs(B)?B:n,0<r.length&&n!==r[0].offset?n<r[0].offset&&(r=[{offset:n,hitItem:A.hCenter,type:"hCenter"}]):r.push({offset:n,hitItem:A.hCenter,type:"hCenter"}));for(const t of r)p[t.type]=t.hitItem,n=t.offset;let o=1/0,a=[];A.top&&(g=A.top.location-m,o=Math.abs(o)>Math.abs(g)?g:o,a.push({offset:o,hitItem:A.top,type:"top"})),A.bottom&&(f=A.bottom.location-w,o=Math.abs(o)>Math.abs(f)?f:o,0<a.length&&o!==a[0].offset?o<a[0].offset&&(a=[{offset:o,hitItem:A.bottom,type:"bottom"}]):a.push({offset:o,hitItem:A.bottom,type:"bottom"})),A.vCenter&&(y=A.vCenter.location-(m+C/2),o=Math.abs(o)>Math.abs(y)?y:o,0<a.length&&o!==a[0].offset?o<a[0].offset&&(a=[{offset:o,hitItem:A.vCenter,type:"vCenter"}]):a.push({offset:o,hitItem:A.vCenter,type:"vCenter"}));for(const t of a)p[t.type]=t.hitItem,o=t.offset;let l=!1;isFinite(o)&&(En(t,"top",o),l=!0),isFinite(n)&&(En(t,"left",n),l=!0),l&&(e=vn(s),i.root.boundBox.update())}p.left&&Ln("left",p.left,e)?r(l,{display:"",...Mn("left",p.left,e,a)}):o(l,"display","none"),p.right&&Ln("right",p.right,e)?r(n,{display:"",...Mn("right",p.right,e,a)}):o(n,"display","none"),p.hCenter&&Ln("hCenter",p.hCenter,e)?r(c,{display:"",...Mn("hCenter",p.hCenter,e,a)}):o(c,"display","none"),p.top&&Ln("top",p.top,e)?r(u,{display:"",...Mn("top",p.top,e,a)}):o(u,"display","none"),p.bottom&&Ln("bottom",p.bottom,e)?r(h,{display:"",...Mn("bottom",p.bottom,e,a)}):o(h,"display","none"),p.vCenter&&Ln("vCenter",p.vCenter,e)?r(d,{display:"",...Mn("vCenter",p.vCenter,e,a)}):o(d,"display","none")}function En(t,A,e){t=t.showInstances;let n=0,i=0;"left"===A?n=e:"top"===A&&(i=e);for(const A of t){A.edge.setOffset(n,i,0,0)}}function Mn(t,A,e,n){var{realTop:e,realLeft:i,realRight:s,realBottom:r}=e,{type:A,instance:o}=A,o=o.edge.getRealSize(),{top:a,left:l,right:c,bottom:u}=o,{x:n,y:h}=n,d={},a=(e=Math.min(e,a),Math.min(i,l)),i=Math.max(s,c)-a,l=Math.max(r,u)-e,s=function(t,A){return"left"===t?A.left:"right"===t?A.right:"hCenter"===t?A.left+A.width/2:"top"===t?A.top:"bottom"===t?A.bottom:"vCenter"===t?A.top+A.height/2:void 0}(A,o);return"left"===t||"right"===t||"hCenter"===t?(d.top=e+h+"px",d.left=s+n+"px",d.height=l+"px"):"top"!==t&&"bottom"!==t&&"vCenter"!==t||(d.left=a+n+"px",d.top=s+h+"px",d.width=i+"px"),d}function Ln(t,A,e){var{type:A,instance:n}=A,n=n.edge;let i,s;return"left"===t?i=e.left:"right"===t?i=e.right:"hCenter"===t?i=e.left+e.width/2:"top"===t?i=e.top:"bottom"===t?i=e.bottom:"vCenter"===t&&(i=e.top+e.height/2),"left"===A?s=n.left:"right"===A?s=n.right:"hCenter"===A?s=n.left+n.width/2:"top"===A?s=n.top:"bottom"===A?s=n.bottom:"vCenter"===A&&(s=n.top+n.height/2),Math.abs(i-s)<1}const _n={SCROLL:0,SCALEALL:1,SCALEWIDTH:2,SCALEHEIGHT:3,FLOWHEIGHT:4},Dn={position:"absolute",top:0,left:0,overflow:"hidden"};class $n extends ut{static registerAnimation(A,e){return function(A,e){return g(A)?oe.get(A)?(t(null,`动画${A}已经注册过了`),!1):(oe.set(A,e),!0):(t(null,`动画${A}参数不是字符串类型`),!1)}(A,e)}static unregisterAnimation(t){return function(t){return oe.delete(t),!0}(t)}static version=Et;constructor(t,A={},e={}){super(),this.$options={dom:t,options:A,config:e},t=WA(this),this._instance=t,this.selector=null,this.rootEl=null,this.isEdit=t.isEdit,this.type=t.type,this.id=t.id,(this.root=this).canvas=null,this.animationManager=null,this.el=null,this.insidePreview=null,this.isUi=!0,this.parentEl=null,this.mask=null,this.canvasMode=null,this.CANVASMODE=null,this.version=Et,this.create().mount()}create(){var A,e,i,s,r=this._instance;return r.isBeforeCreated?t(this,"create方法已经执行过了"):(({ctx:A,config:e,isEdit:s}=r),r.isBeforeCreated=!0,r.lifeCycle.call("beforeCreate"),r.rootEl=function(t,A){if(A){if(w(A))return A;if(g(A)&&w(A=document.querySelector(A)))return A}else n(t,new Error("没有dom参数"));n(t,new Error("获取不到dom节点"))}(r,this.$options.dom),A.rootEl=r.rootEl,r.edge=new UA(r),r.animationManager=new ae(r),A.animationManager=r.animationManager,i=new Te(r),r.style=i,r.style.init(),A.animation=new an,A.transAnimation=new Ve(this),Object.assign(r.parentElStyles,e.uiParentElStyles),Object.assign(r.parentElAttrs,e.uiParentElAttrs),Object.assign(r.elAttrs,e.uiElAttrs),Object.assign(r.contentElStyles,e.uiContentElStyles),Object.assign(r.contentElAttrs,e.uiContentElAttrs),Object.assign(r.workspaceElStyles,e.uiWorkspaceElStyles),Object.assign(r.workspaceElAttrs,e.uiWorkspaceElAttrs),i.setStyles(Dn),e.uiElStyles&&i.setStyles(e.uiElStyles),i.setStyle("width",100,"%"),i.setStyle("height",100,"%"),r.watermark=new ln(r,e.watermark),s&&(r.mask=new _t(r),r.mask.init(),A.mask=r.mask,r.selector=new ht(r),r.selector.init(),A.selector=r.selector,r.regionSelector=new St(r),A.regionSelector=r.regionSelector,r.boundBox=new gA(r),A.boundBox=r.boundBox,r.guide=new Cn(r),i.setStyle("userSelect","none")),e.autoCreateCanvas&&(s=r.layoutManager.createLayout(EA,this,{id:M(r,EA)},{}).init().create(),r.canvas=s._instance,r.ctx.canvas=s),r.isCreated=!0,r.lifeCycle.call("created")),this}mount(){var A,e,n,s,o=this._instance;return o.isBeforeMounted?t(this,"mount方法已经执行过了"):(({config:A,rootEl:e,ctx:n,isEdit:s}=o),o.isBeforeMounted=!0,o.lifeCycle.call("beforeMount"),i.empty(e),o.parentEl||(o.parentEl=i.createElement()),r(o.parentEl,o.parentElStyles),e.appendChild(o.parentEl),n.parentEl=o.parentEl,o.el||(o.el=i.createElement()),o.style.update(),l(o.el,o.elAttrs),o.el.dataset.id=o.id,o.parentEl.appendChild(o.el),n.el=o.el,o.contentEl||(o.contentEl=i.createElement()),r(o.contentEl,o.contentElStyles),l(o.contentEl,o.contentElAttrs),n.contentEl=o.contentEl,o.el.appendChild(o.contentEl),o.edge.init(),o.animationManager.init(),s&&(o.workspaceEl||(o.workspaceEl=i.createElement()),r(o.workspaceEl,o.workspaceElStyles),l(o.workspaceEl,o.workspaceElAttrs),n.workspaceEl=o.workspaceEl,o.el.appendChild(o.workspaceEl),o.regionSelector.init(),o.boundBox.init(),o.ruler=new re(o),o.guide.init(),o.ctx.addEventListener("mousedown.left",Hn,o)),o.watermark.init(),A.autoResize&&lt(window,"resize",On,o),A.autoCreateCanvas&&o.canvas.ctx.mount(),o.isBeforeUnmounted=!1,o.isUnmounted=!1,o.isMounted=!0,o.lifeCycle.call("mounted")),this}update(){var t=this._instance;return t&&t.update(),this}resize(){var t=this._instance;return t&&t.update(),this}get layers(){return this.canvas?this.canvas.layers:[]}get groups(){return this.canvas?this.canvas.groups:[]}get containers(){return this.canvas?this.canvas.containers:[]}query(t){var A,e=[...(A=(A=this._instance).nodeMap).values()];if(t){var n=t.substring(0,1);const i=t.substring(1);return"#"===n?A.get(i):"."===n?"Canvas"===i?e.filter((t=>t._instance.type===i))[0]:e.filter((t=>t._instance.type===i)):e.filter((A=>A._instance.name===t))}return e}alignTo(A,e){return function(A,e,n){return Sn[e]?c(n)?n.length<2?t(null,"alignTo对齐元素数量不足"):(Sn[e](n),A.boundBox.update(),!0):t(null,"alignTo对齐元素不是数组"):t(null,`alignTo没有这个${e}对齐类型`)}(this._instance,A,e)}equidistant(A,e){return function(A,e,n){return Tn[e]?c(n)?n.length<3?t(null,"equidistant对齐元素数量不足"):(Tn[e](n),A.boundBox.update(),!0):t(null,"equidistant对齐元素不是数组"):t(null,`equidistant没有这个${e}类型`)}(this._instance,A,e)}createCanvas(A,e){var n=this._instance;if(n)return n.canvas?(t(n,"已经存在一个画布了"),n.canvas.ctx):j(n,{type:EA,option:A},e)}toJSON(t=!1){if(!this.canvas)return"";const A={};var e=this.canvas.toJSON(),n={version:"1.0.1",scene:e,userData:A};return function t(e){var n=e.option.adapter;n&&(A[e.option.id]=n,e.option.adapter=n.type||"ConchAdapter"),e.children&&e.children.forEach((A=>{t(A)}))}(e),t?n:JSON.stringify(n)}parseJSON(A){var e=this._instance;return e&&(Q(A)?(this.canvas&&(this.canvas.destroy(),this.canvas=null),function(t,A){R(t,A.scene,A.userData)}(e,U(A))):t(e,"定义文件异常")),this}clear(){return this.canvas&&(this.canvas.destroy(),this.canvas=null),this}getScaleMode(){var t=this._instance;if(t)return t.canvas?.scaleMode}setScaleMode(A){var e=this._instance;if(e){var{isEdit:n,canvas:i}=e;if(n){if(i&&A!==i.scaleMode){if(n=Object.entries(_n).find((t=>t[1]===A)),n)return i.scaleMode=_n[n[0]],!0;t(e,"没有这个缩放模式")}}else t(e,"预览模式下，无法设置画布缩放模式")}return!1}isPlayMode(){return!this._instance.isEdit}unmount(){var A=this._instance,{isEdit:e,isMounted:n,ctx:s,config:r}=A;n?(A.isBeforeUnmounted=!0,A.lifeCycle.call("beforeUnmount"),s.emit("beforeUnmount",s),r.autoResize&&ct(window,"resize",On,A),e&&(A.ctx.removeEventListener("mousedown.left",Hn,A),i.remove(A.workspaceEl)),i.remove(A.contentEl),i.remove(A.el),i.remove(A.parentEl),A.isBeforeMounted=!1,A.isMounted=!1,A.isUnmounted=!0,A.lifeCycle.call("unmounted"),s.emit("unmounted",s)):t(A,"节点还没挂载")}destroy(){var A,e,n,i,s=this._instance;s&&s.isCreated?(({canvas:A,isBeforeDestroyed:e,ctx:n,isEdit:i}=s),e?t(s,"destroy方法已经执行过了"):(s.isBeforeDestroyed=!0,s.lifeCycle.call("beforeDestroy"),n.emit("beforeDestroy",n),this.unmount(),A&&A.ctx.destroy(),s.ctx.removeEventListener("mousedown.left",Hn,s),i&&(s.mask.destroy(),s.regionSelector.destroy(),s.selector.destroy(),s.boundBox.destroy(),s.ruler.destroy()),s.watermark.destroy(),s.style.destroy(),s.animationManager.destroy(),s.isDestroyed=!0,s.lifeCycle.call("destroyed"),n.emit("destroyed",n),super.destroy(),this._instance=null,this.boundBox=null,this.regionSelector=null,this.selector=null,this.mask=null,this.animationManager=null,this.id=null,this.canvas=null,this.root=null,this.contentEl=null,this.workspaceEl=null,this.parentEl=null,this.rootEl=null,this.el=null,this.animation=null,this.$options=null,this.type=null,this.isEdit=null,this.isUi=null)):t(s,"节点还没创建")}}const Sn={top:function(t){var A=Math.min(...t.map((t=>t._instance.edge.top)));for(const i of t){var e=i._instance,n=e.edge;W(e),n.setTop(A),zt(e),X(e)}},left:function(t){var A=Math.min(...t.map((t=>t._instance.edge.left)));for(const i of t){var e=i._instance,n=e.edge;W(e),n.setLeft(A),zt(e),X(e)}},right:function(t){var A=Math.max(...t.map((t=>t._instance.edge.right)));for(const i of t){var e=i._instance,n=e.edge;W(e),n.setLeft(A-n.width),zt(e),X(e)}},bottom:function(t){var A=Math.max(...t.map((t=>t._instance.edge.bottom)));for(const i of t){var e=i._instance,n=e.edge;W(e),n.setTop(A-n.height),zt(e),X(e)}},horizontal:function(t){var A=Math.min(...t.map((t=>t._instance.edge.left))),e=A+(Math.max(...t.map((t=>t._instance.edge.right)))-A)/2;for(const A of t){var n=A._instance,i=n.edge;W(n),i.setLeft(e-i.width/2),zt(n),X(n)}},vertical:function(t){var A=Math.min(...t.map((t=>t._instance.edge.top))),e=A+(Math.max(...t.map((t=>t._instance.edge.bottom)))-A)/2;for(const A of t){var n=A._instance,i=n.edge;W(n),i.setTop(e-i.height/2),zt(n),X(n)}}};function xn(t,A){const e={top:"height",left:"width"};var{minTypeValue:n,maxValue:i,maxSizeValue:s,allSizeValue:r}=t.reduce(((t,n)=>{var i=(n=n._instance.edge)[A],s=i+(n=n[e[A]]);return(null===t.minTypeValue||i<t.minTypeValue)&&(t.minTypeValue=i),(null===t.maxValue||s>t.maxValue)&&(t.maxValue=s),t.maxSizeValue<n&&(t.maxSizeValue=n),t.allSizeValue+=n,t}),{minTypeValue:null,maxValue:null,maxSizeValue:0,allSizeValue:0});if(s<i-n)return(i-n-r)/(t.length-1)}const Tn={vertical:function(t){var A,e,n=xn(t,"left");let i;t.sort(((t,A)=>t._instance.edge.left-A._instance.edge.left));for(const s of t)i&&(e=(A=s._instance).edge,W(A),e.setLeft(i.left+i.width+n),zt(A),X(A)),i=s},horizontal:function(t){var A,e,n=xn(t,"top");let i;t.sort(((t,A)=>t._instance.edge.top-A._instance.edge.top));for(const s of t)i&&(e=(A=s._instance).edge,W(A),e.setTop(i.top+i.height+n),zt(A),X(A)),i=s}};function Hn(){var{isEdit:t,mouseDownClearSelectorStatus:A,canvas:e}=this,e=e.scaleManage.mouseDownEventRunning;t&&(e||!A)||this.root.selector.clear()}function On(){this.ctx.update()}const kn=-1<window.navigator.userAgent.indexOf("Mac OS X");class Nn{constructor(t){this.instance=t,this.ratio=null,this.realRatio=null,this.location=[],this.running=!0,this.minRatio=.15,this.maxRatio=4,this.xPadding=40,this.yPadding=40,this.origin=null,this.width=null,this.height=null,this._oldLocation=null,this._oldRatio=null,this._oldOrigin=null,this.mouseDownEventRunning=null}init(){var t=(t=this.instance).parent;this.mouseDownEventRunning=!1,this.origin=[0,0],this._oldOrigin=[0,0],Vn(this),zn(this),t.ctx.addEventListener("wheel.prevent",Pn,this),t.ctx.addEventListener("mousedown.right",jn,this),t.ctx.addEventListener("mousedown.left.space.capture",jn,this),t.ctx.addEventListener("contextmenu.prevent",null,this)}enable(){return this.running||(this.running=!0),this}disable(){return this.running&&(this.running=!1),this}setOrigin(A,e){return A=+A,e=+e,this.running&&(isFinite(A)&&isFinite(e)?this.origin=[A,e]:t(this.instance,"参数不是数值")),this}getOrigin(){return[...this.origin]}zoomAvailCenter(){return this.running&&(Vn(this),zn(this)),this}setZoom(A){var e;return A=+A,this.running&&(isFinite(A)?(e=this.realRatio,Gn(this,A)!==e&&(Kn(this),zn(this))):t(this.instance,"setZoom value必须是个数字")),this}getZoom(){return this.ratio}move(A,e){return A=+A,e=+e,this.running&&(isFinite(A)&&isFinite(e)?(this.location=[A,e],zn(this)):t(this.instance,"参数异常")),this}destroy(){var t=this.instance.parent;t.ctx.removeEventListener("wheel.prevent",Pn,this),t.ctx.removeEventListener("mousedown.right",jn,this),t.ctx.removeEventListener("mousedown.left.space.capture",jn,this),t.ctx.removeEventListener("contextmenu.prevent",null,this),this.instance=null,this.ratio=null,this.height=null,this.width=null,this.yPadding=null,this.xPadding=null,this.maxRatio=null,this.minRatio=null,this.running=null,this.location=null}}function Kn(t,A){var e,{instance:n,origin:i}=t,{width:s,height:r}=n.edge,{location:o,realRatio:a,width:l,height:c}=t,{clientTop:n,clientLeft:u,width:h,height:d}=n.root.edge,[o,p]=o;A?(({top:A,left:e}=A),({width:e,height:u,top:A,left:n}=function(t,A,e,n,i,s,r,o,a){return{width:o*=i,height:a*=i,top:A-(A-r)/e*o,left:t-(t-s)/n*a}}(e-u,A-n,l,c,a,o,p,s,r)),t.width=e,t.height=u,t.location=[n,A]):(({width:l,height:c,top:o,left:p}=function(t,A,e,n,i,s,r){return{width:e*=i,height:n*=i,top:(r+A-n)/2,left:(s+t-e)/2}}(i[0],i[1],s,r,a,h,d)),t.width=l,t.height=c,t.location=[p,o])}function Rn(t,A,e){0===A&&0===e||(t.location[0]+=A,t.location[1]+=e,zn(t))}function jn(){const t=this;var A=t.instance;const{root:e,ctx:n}=A;function i(A){Rn(t,A.movementX,A.movementY)}t.mouseDownEventRunning=!0,e.regionSelector._unbindEvent(),n.emit("beforeMoveCanvas"),e.ctx.emit("beforeMoveCanvas"),t.running&&(document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function A(){t.mouseDownEventRunning=!1,e.regionSelector._bindEvent(),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",A),n.emit("movedCanvas"),e.ctx.emit("movedCanvas")})))}function Pn({event:t}){const A=this;var e,n;A.running&&(kn&&"Control"!==t.key&&"Meta"!==t.key?(n=-t.deltaY*A.realRatio,e=-t.deltaX*A.realRatio,Rn(A,e,n)):function(t){let e=A.realRatio;0<t.deltaY?e-=.02:e+=.02,Gn(A,e),Kn(A,{left:t.clientX,top:t.clientY}),zn(A)}(t))}function Gn(t,A){var{minRatio:e,maxRatio:n}=t;return t.realRatio=A=A<=e||n<A?A<=e?e:n:A,t.ratio=Number(A.toFixed(2)),A}function Vn(t){var{width:A,height:e}=t.instance.edge,{xPadding:n,yPadding:i,origin:s}=t,{width:r,height:o}=t.instance.root.edge,r=(r+s[0]-2*n)/A,n=(o+s[1]-2*i)/e;Gn(t,Math.min(r,n)),Kn(t)}function zn(t){const{location:A,instance:e,_oldRatio:n,_oldLocation:i,_oldOrigin:s,realRatio:r,origin:o}=t,a=r!==n,l=!b(A,i),c=!b(o,s);if(a||l||c){var u=[];const h={transformOrigin:"0 0"};a&&(p(n)&&u.push({type:"ratio",value:r,oldValue:n}),h.scaleX=r,h.scaleY=r),l&&(p(i)&&u.push({type:"location",value:A,oldValue:i}),h.translateX=A[0],h.translateY=A[1]),c&&p(s)&&u.push({type:"origin",value:o,oldValue:s}),I.update(e,(()=>{var{root:i,ctx:s}=e;e.style.setStyles(h),i.boundBox.update(),a&&(t._oldRatio=r,n)&&(s.emit("canvasZoom",r),i.ctx.emit("canvasZoom",r)),(l||c)&&(l&&(t._oldLocation=[...A]),c&&(t._oldOrigin=[...o]),s.emit("moveCanvas"),i.ctx.emit("moveCanvas"))}),u)}}const Jn={brightness:1,contrast:1,hueRotate:0,opacity:1,saturate:1};class Yn{constructor(t){this.instance=t,this.filters=null}init(){var t=this.instance;t.options.filters&&(this.filters={...Jn,...t.options.filters},Wn(this))}update(A,e){f(e)?((this.filters||(this.filters={...Jn}))[A]=e,Wn(this)):t(this.instance,e+"格式不对")}reset(){this.filters={...Jn},Wn(this)}toJSON(){return this.filters?{...this.filters}:null}clear(){this.filters=null,Wn(this)}destroy(){this.filters=null,Wn(this),this.instance=null}}function Wn(t){var A,e,n,{instance:t,filters:i}=t;i?(({hueRotate:i,contrast:A,opacity:e,brightness:n}=i),t.style.setStyles({"filter.hueRotate":i,"filter.contrast":A,"filter.opacity":e,"filter.brightness":n})):t.style.setStyle("filter","")}const Xn={position:"relative",width:"100%",height:"100%"},Zn={"data-id":"content"},qn={},ti={boundBox:{status:!0}},Ai={},ei={};function ni(t,A,e={}){var n=A.root||A;const i=e.updateFn,s={options:null,config:null,parent:A,root:n,canvas:n.canvas||null,ctx:t,type:A.layoutManager.getType(t),id:null,name:"",children:null,defaultOptions:U(qn),defaultConfig:U(ti),el:null,contentEl:null,defaultContentElStyles:Xn,defaultContentElAttrs:Zn,contentElStyles:null,contentElAttrs:null,defaultElStyles:U(ei),defaultElAttrs:U(Ai),elAttrs:null,isBeforeCreated:null,isCreated:null,isBeforeMounted:null,isMounted:null,visible:null,lifeCycle:KA(t),layoutManager:A.layoutManager,adapterManager:A.adapterManager,mask:null,edge:null,isSelected:null,isGroup:null,isCanvas:null,isLayer:null,isContainer:null,transition:null,style:null,lock:null,status:{move:!0,boundBox:!0,boundBoxText:!0,boundBoxOperate:!0,boundBoxBorder:!0},userData:null,showTransition:null,hiddenTransition:null,getRect:function(){var{canvas:t,root:A,edge:e}=s,{top:e,left:n,width:i,height:r}=e.getRealSize(),{pageTop:A,pageLeft:o,clientTop:a,clientLeft:l}=A.edge;let c=0,u=0;(t=t.scaleManage)&&(c=(t=t.location)[0],u=t[1]);var e,n,A,o,a,l,t=e+u,h=(o=o+(e=n+c))+i;return{top:t,left:e,right:n=e+i,bottom:t+r,width:i,height:r,pageTop:A=A+t,pageLeft:o,pageRight:h,pageBottom:h+r,clientTop:a=a+t,clientLeft:l=l+e,clientRight:l+i,clientBottom:a+r}},getTopSelect:function(){return ii(s)},getTopGroup:function(){return si(s)},getParentsGroup:function(){return ri(s.parent)},getSiblings:function(){return s.parent.children.filter((t=>t!==s.ctx)).map((t=>t._instance))},getParentLayer:function(){return oi(s)},getGroups:function(){return ai(s.children.map((t=>t._instance)),LA)},getContainers:function(){return ai(s.children.map((t=>t._instance)),_A)},getRealVisible:function(){return li(s)},getNextSibling:function(){return function(t){var A=t.parent.children;t=A.indexOf(t.ctx),A=A[t+1];return A?A._instance:null}(s)},getPrevSibling:function(){return function(t){var A=t.parent.children;t=A.indexOf(t.ctx),A=A[t-1];return A?A._instance:null}(s)},update:function(){var{edge:t,children:A}=s;if(i)i(s);else{t.update();for(const t of A)t._instance.update()}},contains:function(t){var{isGroup:A,isContainer:e}=t;return s===t||(A?-1<s.getGroups().indexOf(t):!!e&&-1<s.getContainers().indexOf(t))}};return t.parent=A.ctx,t.root=A.root.ctx,s}function ii(t){return t?t.isSelected?t:ii(t.parent):null}function si(t){let A=null;return t&&(t.isGroup&&(A=t),t=si(t.parent))?t:A}function ri(t){var A=[];return t&&(t.isGroup&&A.push(t),A.push(...ri(t.parent))),A}function oi(t){return t?t.isLayer?t:oi(t.parent):null}function ai(t,A){var e=[];if(t)for(const n of t)n&&(A&&n.type!==A||e.push(n),n.children)&&e.push(...ai(n.children.map((t=>t._instance)),A));return e}function li(t){var{visible:t,parent:A}=t;return!!t&&(!A||!!A.isUi||li(A))}const ci={},hi={position:"relative",backgroundColor:"#282a2e"},di={visible:!0,style:{width:1920,height:1080,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}},pi={};class gi extends Re{static factory(t,A){return new gi(t,A)}static factoryConfig(t,A,e){return new gi(t,A,e)}constructor(t,A,e){if(!t)throw new Error("parent参数不能为空");if(!je(t,IA))throw new Error(`parent参数必须是${IA}实例`);t._instance.canvas&&t._instance.canvas.ctx.destroy(),super(t,A,e),A=ni(this,t._instance,{updateFn:function(t){var{edge:A,root:e,scaleManage:n,children:i}=t;A.update(),e.isEdit?e.config.autoCanvasCenter&&n.zoomAvailCenter():N(t);for(const t of i)t._instance.update()}}),(this._instance=A).scaleManage=null,this.scaleManage=null,A.scaleMode=null,A.filter=null,this.filter=null,t._instance.canvas||(t._instance.canvas=A,t.canvas=this),A.isCanvas=!0,this.isCanvas=!0,A.status.rightMove=!0,A.status.spaceMove=!0,Object.assign(A.defaultElStyles,U(hi)),Object.assign(A.defaultElAttrs,U(ci)),Object.assign(A.defaultOptions,U(di)),Object.assign(A.defaultConfig,U(pi)),A.scaleMode=T}create(){const t=this._instance,A=t.root;return I.create(t,(()=>{super.create();var e=t.options;t.filter=new Yn(t),t.filter.init(),t.ctx.filter=t.filter,isFinite(e.scaleMode)&&(t.scaleMode=e.scaleMode),A.isEdit&&(t.scaleManage=new Nn(t),t.ctx.scaleManage=t.scaleManage,A.guide.updateGlobalLocations(t)),t.style.setStyles({backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"})})),this}mount(){const t=this._instance;return I.mount(t,(()=>{super.mount(),t.root.isEdit?(t.scaleManage.init(),t.root.ruler.init()):N(t)})),this}createLayer(t,A){var e=this._instance;if(e)return e.layoutManager.createLayout(MA,this,t,A).create().mount()}get layers(){var t=this._instance;return t?t.children.slice():[]}clear(){this._instance.children.forEach((t=>{t.destroy()}))}setCenter(A){var e=this._instance;return e.root.isEdit?c(A)?e.scaleManage.setOrigin(A[0],A[1]):t(e,A+" 必须是数组类型"):t(e,"预览模式下，无法设置中间坐标值")}getCenter(){var A=this._instance;return A.root.isEdit?A.scaleManage.getOrigin():t(A,"预览模式下，无法获取中间坐标值")}setZoom(A){var e=this._instance;return e.root.isEdit?e.scaleManage.setZoom(A):t(e,"预览模式下，无法设置缩放比例")}getZoom(){var A=this._instance;return A.root.isEdit?A.scaleManage.getZoom():t(A,"预览模式下，无法获取缩放比例")}zoomAvailCenter(){var A=this._instance;return A.root.isEdit?A.scaleManage.zoomAvailCenter():t(A,"预览模式下，缩放画布到可视区域位置")}getZoomState(){return this._instance.scaleManage.running}setZoomState(t){t!==this._instance.scaleManage.running&&(this._instance.scaleManage.running=t)}get width(){return this._instance?.edge.width}set width(t){if(f(t)){t<1&&(t=1);var A=this._instance,{root:e,edge:n,children:i}=A;if(t!==n.width&&(n.setWidth(t),e.boundBox.update(),e.guide.updateGlobalLocations(A),e.config.autoEditLayerSize))for(const A of i)A.width=t;return!0}return!1}get height(){return this._instance?.edge.height}set height(t){if(f(t)){t<1&&(t=1);var{_instance:A,children:e}=this,{root:n,edge:i}=A;if(t!==i.height&&(i.setHeight(t),n.boundBox.update(),n.guide.updateGlobalLocations(A),n.config.autoEditLayerSize))for(const A of e)A.height=t;return!0}return!1}prev(){return null}next(){return null}toJSON(){var t=this._instance,A=super.toJSON(),e=t.filter.toJSON();return delete A.option.style.top,delete A.option.style.left,A.option.scaleMode=t.scaleMode,e&&(A.option.filters=e),A}parseJSON(A){var e=this._instance;return e&&(Q(A)?function(t,A){for(const e of A=c(A)?A:[A])R(t,e)}(e,A):t(e,"定义文件异常")),this}unmount(){var t=this._instance;return I.unmount(t,(()=>{super.unmount()})),this}destroy(){const t=this._instance,A=t.root;I.destroy(t,(()=>{t.filter.destroy(),t.filter=null,t.ctx.filter=null,super.destroy(),t.scaleMode=null,A.isEdit&&(t.scaleManage.destroy(),t.scaleManage=null),t.parent.canvas=null,t.parent.ctx.canvas=null,this.isCanvas=null}))}}const fi={},Bi={position:"absolute",top:0,left:0,width:1920,height:1080},mi={id:null,visible:!0,style:{width:1920,height:1080},isSelected:!1},wi={boundBox:{status:!1}};class yi extends Re{static factory(t,A){return new yi(t,A)}static factoryConfig(t,A,e){return new yi(t,A,e)}constructor(t,A,e){if(!t)throw new Error("parent参数不能为空");if(!je(t,EA))throw new Error(`parent参数必须是${EA}实例`);super(t,A,e),A=ni(this,t._instance),(this._instance=A).isLayer=!0,this.isLayer=!0,A.locationMaps={horizontal:[],vertical:[]},Object.assign(A.defaultElStyles,U(Bi)),Object.assign(A.defaultElAttrs,U(fi)),Object.assign(A.defaultOptions,U(mi)),Object.assign(A.defaultConfig,U(wi))}create(){const t=this._instance,A=t.root.ctx.isEdit;return I.create(t,(()=>{super.create(),A||t.style.setStyles({pointerEvents:"none"})})),this}mount(){var t=this._instance;return I.mount(t,(()=>{super.mount()})),this}createGroup(t,A){var e=this._instance;if(e)return e.layoutManager.createLayout(LA,this,t,A).create().mount()}createContainer(t,A){var e=this._instance;if(e)return e.layoutManager.createLayout(_A,this,t,A).create().mount()}moveToTarget(t,A){var e=this._instance;if(e){if(t===this)return warn(e,"target不能是自己"),this;if(!t._instance)return warn(e,"target参数无效"),this;if(!A||!je(t,MA)||t===this)return warn("图层移动只能以其他图层为目标，不能移动到内部"),this;super.moveToTarget(t,A)}return this}toJSON(){var t=(t=this._instance).isSelected,A=super.toJSON();return t&&(A.option.isSelected=!0),delete A.option.style.top,delete A.option.style.left,A}parsseJSON(t){var A=this._instance;return A&&(Q(t)?function(t,A){for(const e of A=c(A)?A:[A])R(t,e)}(A,t):warn(A,"定义文件异常")),this}clear(){var t=this.children;if(t)for(let A=t.length-1;0<=A;A--)t[A].destroy();return this}unmount(){var t=this._instance;return I.unmount(t,(()=>{super.unmount()})),this}destroy(){var t=this._instance;I.destroy(t,(()=>{super.destroy(),this.isLayer=null}))}}function Ci(){const t=this,{ctx:A,canvas:e,root:n,status:i}=t,s=e.scaleManage;let r=0,o=0,a=0;let l,c,u;var h=t.parent,{isEdit:d,moveLockStatus:p,selector:g}=n;function f(t){var{movementX:e,movementY:i}=t,h=s.realRatio;l.length<=0||(r+=Math.abs(e)+Math.abs(i),o+=e/h,a+=i/h,r<5)||l.some((t=>t.instance.lock))||(n.boundBox.disableOperate().disableText(),l.forEach((({instance:t,left:A,top:e})=>{t.edge.setPosition(A+o,e+a)})),n.guide.update(c),n.boundBox.update(),A.emit("graphMoving",{event:t,elements:u,moving:!0}),A.root.emit("graphMoving",{event:t,elements:u,moving:!0}))}c=[],!d||g._selectLayer!==t.getParentLayer()||e.scaleManage.mouseDownEventRunning||p||i&&!i.move||(n.moveLockStatus=!0,n.regionSelector._unbindEvent(),n.mouseDownClearSelectorStatus=!1,r=0,o=0,a=0,t.isSelected?g._isMultSelect&&1<g.getSelectElements().length&&pt(g,[t]):!(d=t.getTopSelect())||d.isLayer?h.isGroup?(p=Ui(t))&&dt(g,[p]):dt(g,(h=t.getTopGroup())?[h]:[t]):g._isMultSelect&&1<g.getSelectElements().length&&pt(g,[d]),u=n.selector.getSelectElements(),(l=u.map((t=>{t=t._instance;var{left:A,top:e}=t.edge;return c.push(t),W(t),{instance:t,top:e,left:A}}))).length<=0)||(A.emit("graphMoveStart",{elements:u}),A.root.emit("graphMoveStart",{elements:u}),lt(document,"mousemove",f,t),lt(document,"mouseup",(function e(){ct(document,"mousemove",f,t),ct(document,"mouseup",e,t),n.regionSelector._bindEvent(),n.mouseDownClearSelectorStatus=!0,n.moveLockStatus=!1,n.boundBox.enableOperate().enableText(),n.guide.update();for(const t of l){const A=t.instance;zt(A),X(A)}l.length<=0||(A.emit("graphMoveEnd",{elements:l}),n.ctx.emit("graphMoveEnd",{elements:l}))}),t))}function Qi(){var{root:t,ctx:A}=this;t.boundBox.showBorder(A)}function vi(){var{root:t,ctx:A}=this;t.boundBox.hiddenBorder(A)}function bi(){var t=this;const A=t.root;var e,n=A.selector;A.dblclickLock||(A.dblclickLock=!0,setTimeout((()=>{A.dblclickLock=!1}),10),t.isSelected)||(!(e=t.getTopSelect())||e.isLayer?dt(n,(e=t.getTopGroup())?[e]:[t]):dt(n,(e=function(t){let A=null;for(const e of t.getParentsGroup()){if(e.isSelected)break;A=e}return A}(t))?[e]:[t]))}function Ui(t){if(t)return!t.parent.isGroup||0<t.parent.selectChildren.length?t:Ui(t.parent)}const Fi={},Ii={position:"absolute"},Ei={visible:!0,style:{width:0,height:0}},Mi={};class Li extends Re{static factory(t,A){return new Li(t,A)}static factoryConfig(t,A,e){return new Li(t,A,e)}constructor(t,A,e={}){if(!t)throw new Error("parent参数不能为空");if(!je(t,[MA,LA]))throw new Error("编组创建的参数必须是图层或者编组");super(t,A,e),A=ni(this,t._instance,{updateFn:function(t){var{children:t,edge:A}=t;for(const A of t)A._instance.update();A.update()}}),(this._instance=A).isGroup=!0,this.isGroup=!0,A.selectChildren=[],Object.assign(A.defaultElStyles,U(Ii)),Object.assign(A.defaultElAttrs,U(Fi)),Object.assign(A.defaultOptions,U(Ei)),Object.assign(A.defaultConfig,U(Mi))}create(){const t=this._instance,A=t.root.isEdit;return I.create(t,(()=>{super.create(),A||t.style.setStyles({pointerEvents:"none"})})),this}mount(){const t=this._instance;return I.mount(t,(()=>{super.mount(),t.root.isEdit&&(z(t),this.addEventListener("mousedown.left",Ci,t),this.addEventListener("dblclick.left",bi,t),this.addEventListener("mouseenter.left",Qi,t),this.addEventListener("mouseleave.left",vi,t))})),this}createGroup(t,A){var e=this._instance;if(e)return e.layoutManager.createLayout(LA,this,t,A).create().mount()}createContainer(t,A){var e=this._instance;if(e)return e.layoutManager.createLayout(_A,this,t,A).create().mount()}get lock(){var t=this._instance;if(t){let A=!1;return 0<t.children.length&&(A=t.children.every((t=>t._instance.lock))),t.lock=A}}set lock(t){var A=this._instance;if(t=!!t,A){var{children:e,lock:n,root:i}=A;if(t!==n){for(const A of e)A.lock=t;return A.lock=t,i.boundBox.update(),!0}}return!1}add(A){var e=this._instance,n=A._instance;return A===this?t(e,"不能添加自己"):n&&je(A,[_A,LA])?(I.moveToTarget(n,e),this):t(e,"编组只能添加其他编组和容器")}moveToTarget(A,e){var n=this._instance;return A===this?t(n,"target不能是自己"):e||je(A,[MA,LA])?e&&!je(A,[_A,LA])?t(n,"编组只能移动到容器或者其他编组旁边"):super.moveToTarget(A,e):t(n,"编组只能移动到图层或者其他编组里面")}getParentLayer(){var t=this._instance.getParentLayer();return t?t.ctx:null}getTopGroup(){var t=this._instance.getTopGroup();return t?t.ctx:null}toJSON(){var t=super.toJSON();return delete t.option.style,t}parseJSON(A){var e=this._instance;return e&&(Q(A)?function(t,A){for(const e of A=c(A)?A:[A])R(t,e)}(e,A):t(e,"定义文件异常")),this}clear(){var t=this.children;if(t)for(let A=t.length-1;0<=A;A--)t[A].destroy();return this}dismiss(){var t=this._instance;if(t){var A=[...t.children];t.root.isEdit&&Y(t);for(const t of A)t.moveToTarget(this,"before");this.destroy()}}unmount(){const t=this._instance;return I.unmount(t,(()=>{t.root.isEdit&&(Y(t),this.removeEventListener("mousedown.left",Ci,t),this.removeEventListener("dblclick.left",bi,t),this.removeEventListener("mouseenter.left",Qi,t),this.removeEventListener("mouseleave.left",vi,t)),super.unmount()})),this}destroy(){const t=this._instance;I.destroy(t,(()=>{super.destroy(),this.isGroup=null,t.selectChildren=null}))}}const _i={},Di={position:"absolute",top:0,left:0,width:200,height:200},$i={visible:!0,style:{width:200,height:200},transition:null},Si={};class xi extends Re{static factory(t,A){return new xi(t,A)}static factoryConfig(t,A,e){return new xi(t,A,e)}constructor(t,A,e){if(!t)throw new Error("parent参数不能为空");if(!je(t,[MA,LA]))throw new Error(`parent参数必须是${MA}或者${LA}实例`);super(t,A,e),A=ni(this,t._instance,{updateFn:function(t){var{edge:t,adapter:A}=t;t.update(),A&&A.resize()}}),(this._instance=A).isInsidePreview=null,this.isInsidePreview=null,A.penetrateOnplay=null,A.adapter=null,this.adapter=null,A.isContainer=!0,this.isContainer=!0,Object.assign(A.defaultElStyles,U(Di)),Object.assign(A.defaultElAttrs,U(_i)),Object.assign(A.defaultOptions,U($i)),Object.assign(A.defaultConfig,U(Si))}create(){const t=this._instance,A=t.root.ctx.isEdit;return I.create(t,(()=>{super.create(),t.penetrateOnplay=!!t.options.penetrateOnplay,A||t.style.setStyles({pointerEvents:t.penetrateOnplay?"":"all"})})),this}mount(){const t=this._instance;const A=(t.options||{}).adapter;return I.mount(t,(()=>{super.mount(),A&&(t.adapter=t.adapterManager.creatComponent(A.type,A.name,this,A),this.adapter=t.adapter,t.adapter._initComponent()),W(t),zt(t),t.root.isEdit&&(X(t),t.mask.show(),this.addEventListener("mousedown.left",Ci,t),this.addEventListener("dblclick.left",bi,t),this.addEventListener("mouseenter.left",Qi,t),this.addEventListener("mouseleave.left",vi,t))})),this}createAdapter(A){var e=this._instance;if(e){if(!e.adapter)return A=e.adapterManager.creatComponent(A.type,A.name,this,A),e.adapter=A,e.ctx.adapter=A,e.adapter._initComponent(),A;t(e,"容器已经存在适配器了")}}removeAdapter(){var t=this._instance;return t&&t.adapter&&(t.adapter.destroy(),t.adapter=null,t.ctx.adapter=null),this}moveToTarget(A,e){var n=this._instance;if(n){if(A===this)return t(n,"target不能是自己"),this;if(!A._instance)return t(n,"target参数无效"),this;if(e&&!je(A,[LA,_A]))return t(n,"容器只能移动到编组或者其他容器旁边"),this;if(!e&&!je(A,[MA,LA]))return t(n,"容器只能移动到图层或者编组里面"),this;super.moveToTarget(A,e)}return this}enterInsidePreview(){var t,A,e,n=this._instance;n&&(({root:t,mask:A,isInsidePreview:e}=n),e||t.insidePreview||(n.isInsidePreview=!0,this.isInsidePreview=!0,t.insidePreview=n,t.ctx.insidePreview=n.ctx,this.removeEventListener("mousedown.left",Ci,n),this.removeEventListener("dblclick.left",bi,n),A.hidden(),t.regionSelector.disable(),t.boundBox.disableText().disableOperate(),t.selector.disable()))}leaveInsidePreview(){var t,A,e,n=this._instance;n&&(({root:t,mask:A,isInsidePreview:e}=n),e)&&(n.isInsidePreview=!1,this.isInsidePreview=!1,t.insidePreview=null,t.ctx.insidePreview=null,this.addEventListener("mousedown.left",Ci,n),this.addEventListener("dblclick.left",bi,n),A.show(),t.regionSelector.enable(),t.boundBox.enableText().enableOperate(),t.selector.enable())}get penetrateOnplay(){return this._instance?.penetrateOnplay}set penetrateOnplay(t){t=!!t;const A=this._instance;var e;return!!A&&(e=A.penetrateOnplay,t!==e&&I.update(A,(()=>{A.penetrateOnplay=t}),"penetrateOnplay",t,e),!0)}getParentLayer(){var t=this._instance.getParentLayer();return t?t.ctx:null}getTopGroup(){var t=this._instance.getTopGroup();return t?t.ctx:null}get app(){return this.adapter?.componentInstance}toJSON(){var t=this._instance,{edge:A,penetrateOnplay:e}=t,{top:A,left:n}=A,i=super.toJSON();return delete i.children,i.option.style.top=A,i.option.style.left=n,t.adapter&&(i.option.adapter=t.adapter.toJSON()),e&&(i.option.penetrateOnplay=e),i}unmount(){const t=this._instance;return I.unmount(t,(()=>{t.root.isEdit&&(Y(t),this.removeEventListener("mousedown.left",Ci,t),this.removeEventListener("dblclick.left",bi,t),this.removeEventListener("mouseenter.left",Qi,t),this.removeEventListener("mouseleave.left",vi,t)),super.unmount();var A=t.getTopGroup();A&&A.update()})),this}destroy(){const t=this._instance;I.destroy(t,(()=>{super.destroy(),t.adapter&&(t.adapter.destroy(),t.adapter=null),t.penetrateOnplay=null,this.isContainer=null}))}}class Ti extends xi{static factory(t,A){return new Ti(t,A)}static factoryConfig(t,A,e){return new Ti(t,A,e)}constructor(t,A,e){super(t,A,e),this.isDefaultContainer=!0}}class Hi{constructor(t,A,e=0){if(t&&je(t,_A))return t.adapter?n(t,new Error("父节点已经存在adapter，不允许重复创建")):(t.adapter=xA.creatComponent(A.type,A.name,t,A),t._instance.adapter=t.adapter,t.adapter&&t.adapter._initComponent(A),t.adapter);throw new Error("父节点必须是Container")}}class Oi{static factory(t,A,e){}constructor(t,A,e={}){this.parent=A,this.name=t,this.type=null,this.componentInstance=null,this.config=e,this.dom=null,this.complete=!1,this.isInsideResize=null,this.initDom()}beforeMount(){}mounted(){this.complete=!0}beforeUpdate(){}updated(){}beforeDestroy(){}destroyed(){}initDom(){this.dom=i.createElement(),this.dom.style.width=this.parent.width+"px",this.dom.style.height=this.parent.height+"px"}init(){this.beforeMount(),this._initComponent(),this.mounted()}update(){this.beforeUpdate(),this._updateComponent(),this.updated()}setConfig(t,A){A?this.config[A]=t:this.config=t}getConfig(t){return t?this.config[t]:this.config}getComponentInstance(){return this.componentInstance}destroy(){this.beforeDestroy(),this._destroyComponent(),this.destroyed()}resize(){var t=this.parent.width,A=this.parent.height;this.parent.contentEl.style.width=t+"px",this.parent.contentEl.style.height=A+"px",this.dom.style.width=t+"px",this.dom.style.height=A+"px",this.complete&&this.componentInstance&&this.componentInstance.resize&&this.componentInstance.resize()}toJSON(){}_initComponent(){}_updateComponent(){}_destroyComponent(){this.parent.loadEmptyStyle&&this.parent.loadEmptyStyle()}_componentComplete(){this.parent.loadEmptyStyle&&this.parent.loadEmptyStyle(),this.parent.root.emit("componentComplete",{parent:this.parent,adapter:this})}}let ki;class Ni extends Oi{static factory(t,A,e){if(ki||Ni._loadConch(),ki&&ki[t])return new Ni(t,A,e);throw new Error(`Conch没有加载或Conch中没有ID为${t}的组件`)}static _loadConch(){return window.conch?ki=window.conch:(console.warn("请先加载spray-conch，否则组件将无法使用"),!1)}constructor(t,A,e){super(t,A,e),this.type="ConchAdapter"}setOption(t){t&&(this.config.opts=t,this.componentInstance)&&this.componentInstance.setOption(this.config.opts)}setData(t){this.config.data=t,this.componentInstance&&this.componentInstance.setData(this.config.data)}toJSON(){this.config.type=this.type,this.config.name=this.name;var t=this.componentInstance;if(t)if(v(t.toJSON,"Function")){var A=t.toJSON();for(const t in A)A[t]&&(this.config[t]=A[t])}else this.oldtoJSON(t);return this.config}oldtoJSON(t){"echarts"===t.type&&t.config?this.config.opts=t.config:this.config.opts=t.opts}async _initComponent(){var t=this.parent.root._instance.config,A=this.config;t={prefix:(t.prefix||"")+"/s-static",...A,prefix:A.option.prefix};if(Ni._loadConch(),!ki[t.name])throw new Error(`组件${t.name}未检测到，请先下载对应的组件包`);this.parent.contentEl&&this.parent.contentEl.appendChild(this.dom);try{this.parent&&!this.componentInstance&&this.dom&&(this.componentInstance=new ki[this.name](this.dom,t)),this.componentInstance&&(this.componentInstance.parent=this.parent),await this.componentInstance.render(),this._resolve?"function"==typeof this._resolve&&this._resolve():this._resolve=!0}catch(t){this.error=t}try{Reflect.has(this.config,"data")&&this.setData(this.config.data),Reflect.has(this.config,"opts")&&this.setOption(this.config.opts)}catch(t){console.warn(t)}return this.isInsideResize=!!this.dom.offsetParent,this.complete=!0,this._componentComplete(),!0}async _initComponent1(t){var A={prefix:(this.parent.root.config.prefix||"")+"/s-static"};if(this.config.option=F(A,t||{}),Ni._loadConch(),!ki[this.name])throw new Error(`组件${this.name}未检测到，请先到spray-conch中下载对应的组件包`);this.parent.contentEl&&this.parent.contentEl.appendChild(this.dom);try{var e={theme:this.config.theme,padding:this.config.padding};this.parent&&!this.componentInstance&&this.dom&&(this.componentInstance=new ki[this.name](this.dom,{config:e,...this.config.option})),this.componentInstance&&(this.componentInstance.parent=this.parent),await this.componentInstance.render(),this._resolve?"function"==typeof this._resolve&&this._resolve():this._resolve=!0}catch(t){this.error=t}try{Reflect.has(this.config,"data")&&this.setData(this.config.data),Reflect.has(this.config,"opts")&&this.setOption(this.config.opts)}catch(t){console.warn(t)}return this.complete=!0,this.parent.root.config.enableContainerPreview&&(this.parent.previewModeLock=!1),this._componentComplete(),!0}_updateComponent(){this.complete=!1,this.componentInstance&&this._initComponent(),this.complete=!0}_destroyComponent(){try{this.componentInstance&&this.componentInstance.destroy()}catch(A){t(this.parent,"图表销毁失败")}this.config=null,this.dom&&this.dom.remove(),this.parent.adapter=null,this.parent.previewModeLock=!0,this.parent=null,this.componentInstance=null}}function Ki(t,A,e,n,i){const{elements:s}=t.$events,r=e.bind(i);return s[A]?s[A].push({fn:e,_fn:r,context:i}):s[A]=[{fn:e,_fn:r,context:i}],t.$el.addEventListener(A,r,n),t}function Ri(t,A,e,n,i){const{elements:s}=t.$events,r=s[A];if(r){const s=r.findIndex((t=>t.fn===e&&t.context===i));if(-1!==s){const e=r[s];r.splice(s,1),t.$el.removeEventListener(A,e._fn,n)}}return t}function ji(t,A,e,n){const{events:i}=t.$events;return i[A]||(i[A]=[]),i[A].push({fn:e,context:n}),t}function Pi(t,A,e,n){return ji(t,A,(function i(){Gi(t,A,i),e.apply(n||t,arguments)}),n)}function Gi(t,A,e,n){const{events:i}=t.$events,s=i[A];if(e){if(s){let t=s.length;for(;t--;){const A=s[t];if(A.fn===e&&A.context===n){s.splice(t,1);break}}}}else i[A]=null;return t}function Vi(t,A,e){return[...t.$events.events["hook:"+A]||[],...t.$events.events[A]||[]].forEach((t=>{!function(t,A,e){try{t.apply(A,e)}catch(t){console.error(t.message)}}(t.fn,t.context,e)})),t}async function zi(t,A,e){const n=[...t.$events.events["hook:"+A]||[],...t.$events.events[A]||[]];if(n)for(let t=0,A=n.length;t<A;t++){const A=n[t];await Ji(A.fn,A.context,e)}return t}async function Ji(t,A,e){try{await t.apply(A,e)}catch(t){console.error(t.message)}}async function Yi(t,A=[],e={},n={}){const i={type:"Group",option:e},s=t.$root.$options.manager.create(t,i,{newCreate:!0});await s.init(),A.forEach((t=>{t.moveToTarget(s)}));return["width","height","left","top"].forEach((t=>s.$updateUiAttr(t))),n.select&&s.select(!0),s}function Wi(t){return t===+t}$A.register(IA,$n),$A.register(EA,gi),$A.register(MA,yi),$A.register(LA,Li),$A.register(_A,xi),$A.register(DA,Ti),$n.Canvas=function(...t){return $A.createLayout(EA,...t).create().mount()},$n.Layer=function(...t){return $A.createLayout(MA,...t).create().mount()},$n.Group=function(...t){return $A.createLayout(LA,...t).create().mount()},$n.Container=function(...t){return $A.createLayout(_A,...t).create().mount()},$n.DefaultContainer=function(...t){return $A.createLayout(DA,...t).create().mount()},$n.Adapter=function(...t){return new Hi(...t)},$n.use=kA.register.bind(kA),$n.mixin=kA.mixin.bind(kA),$n.adapterManager=xA,$n.adapterManager.register("BaseAdapter",Oi),$n.adapterManager.register("ConchAdapter",Ni),$n.UIManager=nn,$n.layoutManager=$A;const Xi=t=>{if(!t||"object"!=typeof t)return t;const A=t instanceof Array?[]:{};for(const e in t)A[e]=Xi(t[e]);return A},Zi=t=>null==t,qi=t=>new Promise(((A,e)=>{const n=new Image;n.onload=t=>{A(t)},n.onerror=t=>{e(t)},n.src=t})),ts=document.head,As=async(t,A)=>{if(Array.from(window.document.fonts.values()).filter((A=>A.family===t))[0])return;const e=new window.FontFace(t,A);await e.load(),window.document.fonts.add(e)},es=(t,A,e)=>new Promise(((n,i)=>{if(!A&&!e)return i(new Error("script url or content is empty"));const s="script"+t;let r=ts.querySelector("#"+s);if(r){if(!r.errorFlag)return n(r);r.remove()}r=document.createElement("script"),r.id=s,r.onload=function(t){n(t)},r.onerror=function(t){i(t),r.errorFlag=!0},A?r.src=A:(r.appendChild(document.createTextNode(e)),n(r)),ts.appendChild(r)}));function ns(t,A={}){if(A.prefix){const e=typeof A.prefix;if("string"===e)return A.prefix+t;if("function"===e)return A.prefix(t)}return t}function is(t,A,e,n,i=[]){e.push(es(A,ns(`/s-static/component/${A}.js`,t)).catch((t=>{A.endsWith("runtime")?i.push(A.replace(/runtime$/,"")):(n.push(A),console.error(A+" 组件资源加载失败",t))})))}async function ss(t={},A={}){const{component:e,img:n,fonts:i}=t,s=[],r=[],o=[];if(Array.isArray(e)&&await async function(t,A,e,n){const i=[],s=[],{mode:r,compJSRuntime:o}=t,a="preview"===r&&o;for(const e of A)is(t,a?e+"runtime":e,i,n,s);e.concat(i),await Promise.all(i);const l=[];for(const A of s)is(t,A,l,n);await Promise.all(l),e.concat(l)}(A,e,s,r),n)for(const t in n)s.push(qi(ns(n[t],A)).catch((A=>{o.push(t),console.error(n[t]+" 图片资源加载失败",A)})));if(i){const{fontOptimize:t=!0}=A;for(const e in i){const n=t?i[e].replace(/\.(ttf|otf)/i,".woff2"):i[e];As(e,`url(${ns("/s-static/fonts/"+n,A)})`).catch((t=>{console.error("字体加载失败",e,t)}))}}return await Promise.all(s),r.length+o.length&&{errorComponentList:r,errorImgList:o}}class rs{constructor(t){this.ui=t,this.dataManager=t.$dataManager,this.conchEvent=null,this.callbackFields=null,this.init()}init(){this.callbackFields={},this.initConchCustomEvent(),this.ui.$options.isEdit||(this.ui.$topUi.$on("mounted:Container",this.mountedContainer,this),this.ui.$topUi.$on("mounted:Canvas",this.mountedCanvas,this),this.ui.$topUi.$on("adapterCompleted",this.adapterCompleted,this))}initConchCustomEvent(){const t=this;class A extends window.conch.CustomEvent{_query(A){return t.getUiComp(A)}__doSetOptions(A){const{comp:e,opts:n}=A,i=t.getUiComp(e);i&&i.app.setOption(Xi(n))}_afterRun(A){const{events:e,data:n}=A,i=e.actions.filter((t=>"callback"===t.type&&t.callback)).map((t=>{const{callback:A}=t;return{param:(n||{})[A.value],key:A.callback}}));t._doCallback(i)}}const e=this.conchEvent=new A;e._registerType("blueprintEvent",(t=>{this._doBlueprintEvent(t)})),e._registerType("thingJsCamera",(t=>{this._doThingJsCamera(t)})),e._registerType("secondFunction",((t,A)=>{this._doSecondFunction(t,A)})),e._registerType("iframePostMsg",((t,A)=>{this._doIframePostMsg(t,A)}))}initFilterCallback(){this.dataManager.filterManager.filterList.forEach((t=>{t.callbackArgs.forEach((A=>{t.list.forEach((e=>{e.enabled&&e.filterList.find((A=>A.filter===t&&A.enabled))&&this._addCallbackFields(A,e.parent.parent)}))}))}))}_addCallbackFields(t,A){this.callbackFields[t]||(this.callbackFields[t]=[]),this.callbackFields[t].includes(A)||this.callbackFields[t].push(A)}mountedContainer(t){if("ConchAdapter"===t.adapter?.type){const A=t.adapter.events;this.conchEvent.__run(t.$uiApp,Xi(A))}}mountedCanvas(){this.initFilterCallback()}adapterCompleted(t){if(!t.isUIAdapter){const A=t.$data.dataSource;"restData"===A.dataType&&A.typeMap[A.dataType].options.callbackArgs?.forEach((A=>{this._addCallbackFields(A,t)}))}}_getUiComp(t){return this.ui.$ui.query("#"+t)}getUiComp(t){let A;const e=[];if(Array.isArray(t))A=[],t.forEach((t=>{const n=this._getUiComp(t);n?A.push(n):e.push(t)}));else{const n=this._getUiComp(t);n?A=n:e.push(t)}return e.length&&console.error("画布中没有找到图表，编号为",e.join()),A}_doCallback(t){let A=[];for(const e of t){const{param:t,key:n}=e;this.dataManager.filterArgs[n]=t,A.push(...this.callbackFields[n]||[])}A=A.filter(((t,e)=>A.indexOf(t)===e)),A.forEach((t=>{t.$data.refresh()}))}_doBlueprintEvent(t){const A=this.ui.$bluePrint.blueprint,{name:e,arg:n}=t;A&&e&&A.triggerEvent(e,n)}_doThingJsCamera(t){const{uuid:A,position:e,target:n}=t,i=this.ui.$queryById(t.compId);i?.adapter&&(A?i.adapter.fly(A,e,n):i.adapter.earthFly(e,n))}_doSecondFunction(t,A){const{name:e,arg:n}=t,i=this.ui.$jsCode.kunpengApi;if(i[e])try{i[e](n,A)}catch(t){console.warn(` ${e} 这个代码二开的方法执行失败`,t)}else console.warn(`没有找到 ${e} 这个代码二开的方法`)}_doIframePostMsg(t,A){const{targetComp:e,origin:n,targetType:i,args:{type:s,json:r,code:o}}=t,a=this._getIframeWindow(i,e);if(!a)return;let l;if("json"===s)l=r?JSON.parse(r):"";else{l=new Function("data, callbackArgs",o)(A,this.dataManager.filterArgs)}a.postMessage(l,n)}_getIframeWindow(t,A){let e;if("child"===t){const t=this._getUiComp(A),n=t&&t.el.querySelector("iframe");e=n&&n.contentWindow}else{e=window.parent!==window&&window.parent}return e}destroy(){this.ui.$topUi.$off("mounted:Container",this.mountedContainer,this),this.ui.$topUi.$off("mounted:Canvas",this.mountedCanvas,this),this.ui.$topUi.$off("adapterCompleted",this.adapterCompleted,this),this.callbackFields=null,this.conchEvent=null,this.dataManager=null,this.ui=null}}function os(t,A){if(!ls(t))return t;A||(A=[]);const e=Array.isArray(t)?[]:{},n=function(t,A){for(const e of t)if(e.source===A)return e;return null}(A,t);if(n)return n.target;A.push({source:t,target:e});for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(ls(t[n])?e[n]=os(t[n],A):e[n]=t[n]);return e}function as(t,A){return Object.prototype.toString.call(t).includes(A)}function ls(t){return as(t,"Object")}function cs(t,A){return Reflect.has(t,A)}function us(t,A){if(!ls(t)||!ls(A))return A;for(const e in A)Object.prototype.hasOwnProperty.call(A,e)&&(t[e]=us(t[e],A[e]));return t}function hs(...t){let A=t.shift();ls(A)||(A={});for(const e of t)if(ls(e))for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=us(A[t],os(e[t])));return A}const ds=(t=>{const A={};return t.forEach((t=>{A[t]=!0})),A})(["width","height","backgroundColor","backgroundImage","backgroundSize","opacity"]);function ps(t,A,e){return function A(n){const i=t.children[n];if(i)return"ThingJSAdapter"!==i.option.adapter?i:A(n+e)}(A+e)}var gs=new class{constructor(){this.canvasSize={width:null,height:null},this.groupMap={},this.userData={}}transform(t){if(as(t,"String"))try{t=JSON.parse(t)}catch(t){return console.warn("定义文件异常"),!1}if(!as(t,"Object"))return console.warn("定义文件不符合要求"),!1;t=os(t);const A=this.toCanvas(t);this.toConch(t.conchOptions,t.dataOptions);const e=this.userData;return this.canvasSize.width=null,this.canvasSize.height=null,this.groupMap={},{scene:A,userData:e,version:1}}toCanvas(t){const A={type:"Canvas"};if("Canvas"===t.type){const e=A.option=this.toOptions(t.option);this.canvasSize.width=e.style.width,this.canvasSize.height=e.style.height,delete e.style.top,delete e.style.left,as(t.children,"Array")&&(A.children=t.children.map((t=>this.toLayer(t)))),this.toThingJs(A)}return A}toThingJs(t){if(!t.children)return!1;const A=[];t.children.forEach(((e,n)=>{"ThingJSAdapter"===e.option.adapter&&A.push({index:n,thingJSContainer:e,prev:ps(t,n,-1),next:ps(t,n,1)})}));let e=A.length-1;for(;e>=0;e--){const n=A[e];t.children.splice(n.index,1);const i=hs(n.thingJSContainer,{type:"DefaultContainer",option:{adapter:null}});n.prev?n.prev.children.push(i):n.next?n.next.children.splice(0,0,i):t.children.push({type:"Layer",option:{id:"layer-"+i.option.id,lock:!0,name:"",style:{width:0,height:0,top:0,left:0}},children:[i]})}}toLayer(t){const A={type:"Layer"};if("Layer"!==t.type)return null;const e=A.option=this.toOptions(t.option),n=e.style;return cs(n,"backgroundColor")||cs(n,"backgroundImage")||"ThingJSAdapter"===e.adapter?(cs(n,"width")&&"inherit"!==n.width||(n.width=this.canvasSize.width),cs(n,"height")&&"inherit"!==n.height||(n.height=this.canvasSize.height)):(n.width=0,n.height=0),!cs(n,"top")&&(n.top=0),!cs(n,"left")&&(n.left=0),as(t.children,"Array")&&t.children.forEach((t=>{A.children=this.toFree(t)})),A}toFree(t){let A;return"Free"===t.type&&(A=this.toChildren(t.children)),A}toChildren(t){const A=[];return as(t,"Array")&&t.forEach((t=>{let e;"Group"===t.type&&(e=this.toGroup(t)),"FreeContainer"===t.type&&(e=this.toContainer(t)),e&&(t.option.groupId?this.groupMap[t.option.groupId].children.push(e):A.push(e))})),A}toGroup(t){const A=t.option.id,e={type:"Group",option:{id:A,name:t.option.name},children:[]};return this.groupMap[A]=e,e}toContainer(t){return{type:"Container",option:this.toOptions(t.option)}}toOptions(t){const A={id:t.id,name:t.name,lock:!0};if(t.sceneAnimator){A.animation={};const e=t.sceneAnimator.enter,n=t.sceneAnimator.leave;e&&(A.animation.enter=[e.name,e.duration]),n&&(A.animation.leave=[n.name,n.duration])}return t.style&&(A.style=this.toStyle(t.style),A.style.top=t.top||0,A.style.left=t.left||0),t.adapter&&t.adapter.type&&(A.adapter=this.toAdapter(t.adapter,t.id)),A}toAdapter(t,A){let e={};return"ConchAdapter"===t.type&&(e={type:"ConchAdapter",name:t.name,option:t.option}),"ThingJSAdapter"===t.type||(this.userData[A]=e),t.type}toStyle(t){const A={};return Object.entries(t).forEach((t=>{ds[t[0]]&&(A[t[0]]=t[1])})),A}toConch(t={},A={}){Object.entries(t).forEach((t=>{const A=this.userData[t[0]];if(A&&"ConchAdapter"===A.type)try{A.opts=JSON.parse(t[1])}catch(A){console.warn(`${t[0]} 的数据异常`)}})),Object.entries(A).forEach((t=>{const A=this.userData[t[0]];if(A&&"ConchAdapter"===A.type)try{A.data=JSON.parse(t[1].staticData)}catch(A){console.warn(`${t[0]} 的数据异常`)}}))}};function fs(t,A={}){let e=Xi(A);const n=A.kpVersion||0;if(n>2&&console.warn(`您使用的${n}版本的大屏文件高于当前版本2；如果遇到功能丢失或者渲染异常，请联系管理员升级。`),!Reflect.has(e,"version")&&"Canvas"===e.type)try{e=gs.transform(e)}catch(t){console.warn("定义文件转换失败")}return e.kpVersion&&1!==e.kpVersion||(e=function(t){const A=Xi(t),e={};function n(t){const{option:A,children:i}=t;e[A.id]=t,i&&i.forEach((t=>{n(t)}))}return n(A.scene),function(t,A){Object.values(A).forEach((t=>{const A=t.option.animation;A&&(A.enter&&null===A.enter[0]&&delete A.enter,A.leave&&null===A.leave[0]&&delete A.leave)}))}(0,e),function(t){Object.entries(t.userData).forEach((([A,e])=>{e.events||(t.kpUserData[A]?.adapter?.events?e.events=t.kpUserData[A]?.adapter?.events:e.events=[]),e.events.forEach((t=>{t&&t.actions&&(t.actions=t.actions.map(Bs))}))}))}(A),function(t){Object.entries(t.userData).forEach((([A,e])=>{!function(t,A){if(Reflect.has(t,"data")){const A=t.data;A?.source&&A.dataType&&Reflect.has(A,"close")&&Reflect.has(A,"time")&&Reflect.has(A.source,"staticData")&&(t.data=A.source.staticData)}else A?.data?.source&&(t.data=A.data.source.staticData);A&&(!Reflect.has(t,"opts")&&Reflect.has(A,"opts")&&(t.opts=A.opts),!Reflect.has(t,"events")&&Reflect.has(A,"events")&&(t.events=A.events),!Reflect.has(t,"padding")&&Reflect.has(A,"padding")&&(t.padding=A.padding),!Reflect.has(t,"theme")&&Reflect.has(A,"theme")&&(t.theme=A.theme))}(e,t.kpUserData[A]?.adapter)}))}(A),function(t){Object.entries(t.kpUserData).forEach((([,t])=>{t.adapter&&!Reflect.has(t.adapter,"kpData")&&t.adapter.data&&Reflect.has(t.adapter.data,"source")&&Reflect.has(t.adapter.data.source,"staticData")&&Reflect.has(t.adapter.data,"dataType")&&Reflect.has(t.adapter.data,"close")&&Reflect.has(t.adapter.data,"time")&&(t.adapter.kpData=t.adapter.data)}))}(A),A}(e)),e}function Bs(t){const{type:A,name:e}=t;if("chart"===A||"layer"===A){const e=t[A];return e?"show"===e.action?{type:"showOrHidden",showOrHidden:{type:t.type,showComps:e.comps,hiddenComps:[]}}:"hidden"===e.action?{type:"showOrHidden",showOrHidden:{type:t.type,showComps:[],hiddenComps:e.comps}}:"changeOptions"===e.action?{type:"changeOptions",changeOptions:{comp:e.comps[0],opts:e.options}}:{}:{}}return{name:e,type:A,[A]:t[A]}}function ms(t,A={}){if(!t)return t;const e=Xi(t),n={};return function t(A,e){const{option:i,children:s}=A;i.adapter&&(i.adapter=e.userData[i.id],"UIAdapter"===i.adapter.type&&(e.kpUserData[i.id]?.adapter?.isOnlineUIAdapter||(i.adapter.opts.kpUserData=e.kpUserData[i.id].adapter.kpUserData,t(i.adapter.opts.scene,i.adapter.opts)))),A.kpOption=e.kpUserData[i.id],n[i.id]=A,s&&s.forEach((A=>{t(A,e)}))}(e.scene,e),function(t,A=[]){Object.entries(t).forEach((t=>{for(const e of A)try{e&&e(t[1])}catch(t){console.warn("定义文件转换异常",t)}}))}(n,[t=>{const{kpOption:A,option:e}=t,n=e.userData||{};A&&(A._kp3DLayer&&(t.type="ThingJSLayer"),A._kpClip&&(n.clip=!0)),e.userData=n},t=>{t.kpOption?.adapter?.thingType&&(t.type="DefaultContainer")},t=>{"Layer"===t.type&&t.kpOption&&(t.option.isSelected=t.kpOption._kpSelected)}]),e}class ws{constructor(t){this.ui=t,this.kunpengApi=null,this.code=null}init(t){this.kunpengApi={},this.code=t,this.ui.$on("hook:mounted:Ui",this.run,this)}run(){if(!this.ui.$options.isEdit&&this.code&&this.code.trim())try{new Function("ui",`${this.code}`).bind(this.kunpengApi)(this.ui.$ui)}catch(t){console.error("代码二开执行错误",t.message)}}toJSON(){return this.code}destroy(){this.ui.$off("hook:mounted:Ui",this.run,this),this.ui=null,this.kunpengApi=null,this.code=null}}function ys(){const{BaseNode:t}=lh();return class A extends t{static config={icon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE0cHgiIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDE0IDE1IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT7liIfniYc8L3RpdGxlPg0KICAgIDxnIGlkPSLmlbDmja4v5Lqk5LqS6Z2i5p2/77yIMzMwLea3se+8iSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSLok53lm77oioLngrkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04MDIuMDAwMDAwLCAtNjIuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0i57yW57uELTPlpIfku70tMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzkyLjAwMDAwMCwgNTcuNTAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hOWkh+S7vSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4wMDAwMDAsIDAuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uX+iTneWbvuiEmuacrCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDAwMDAsIDUuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiB4PSIwLjMxNDA5NzgxOCIgeT0iMC4zMTQwOTc4MTgiIHdpZHRoPSIxMy4zNzE4MDQ0IiBoZWlnaHQ9IjEzLjM3MTgwNDQiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy4yMDY3NTE5LDguMzY5NzgwOTcgTDEzLjIwMTA3NTUsOC4zNjgzNjU2OSBMMTMuMTg4NTA0Miw4LjQzMjQyNDA0IEMxMy4xMTg1OTg4LDguNzU0NTkxMTEgMTIuOTU3Mzc1OCw5LjE5NzE0MTA5IDEyLjcwNDgzNTEsOS43NjAwNzQwNyBMMTAuOTI1MDYzMyw3LjE3NTAxMjQ1IEwxMi4zNzk3NjgyLDcuMjE1MDgwOTggQzEyLjU2NTAzMDgsNC42Njg3OTkzNyAxMC44OTk1NTU2LDIuMjgyMDY2ODEgOC4zMzc3ODc2MywxLjY0MzM0NjMgQzUuOTUxMjg0OTMsMS4wNDgzMjQzNSAzLjQ5MDc0NTAyLDIuMTU5NDMyOTkgMi4zNDIwNzk4Nyw0LjI4MDE1MDAyIEwyLjI0Njg2Nzk0LDQuNDY0MzgyMDQgTDEuMzQ3MTc0NDQsNC4wMjEyODk5NiBDMi42NTc5MDgxLDEuMzU5ODU5OTkgNS42NjUzMTgxMSwtMC4wNTY1NjI0NzA3IDguNTgwNDA3NTQsMC42NzAyNTA5NTUgQzExLjkxNzM2NDYsMS41MDIyNDc4IDEzLjk3MzY0OTUsNC44MzE4OTk2MSAxMy4yNTMzMTU5LDguMTY5NTMzMyBMMTMuMjA2NzUxOSw4LjM2OTc4MDk3IFoiIGlkPSLlvaLnirYiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLjQ2MjY1NjIsMTIuMTI4OTQzOCBMMTIuNDU2OTc5OCwxMi4xMjc1Mjg1IEwxMi40NDQ0MDg1LDEyLjE5MTU4NjggQzEyLjM3NDUwMzEsMTIuNTEzNzUzOSAxMi4yMTMyODAxLDEyLjk1NjMwMzkgMTEuOTYwNzM5NCwxMy41MTkyMzY5IEwxMC4xODA5Njc2LDEwLjkzNDE3NTIgTDExLjYzNTY3MjUsMTAuOTc0MjQzOCBDMTEuODIwOTM1MSw4LjQyNzk2MjE2IDEwLjE1NTQ1OTksNi4wNDEyMjk2IDcuNTkzNjkxOTQsNS40MDI1MDkxIEM1LjIwNzE4OTI0LDQuODA3NDg3MTQgMi43NDY2NDkzMyw1LjkxODU5NTc4IDEuNTk3OTg0MTgsOC4wMzkzMTI4MiBMMS41MDI3NzIyNSw4LjIyMzU0NDgzIEwwLjYwMzA3ODc1MSw3Ljc4MDQ1Mjc1IEMxLjkxMzgxMjQxLDUuMTE5MDIyNzggNC45MjEyMjI0MiwzLjcwMjYwMDMyIDcuODM2MzExODUsNC40Mjk0MTM3NSBDMTEuMTczMjY4OSw1LjI2MTQxMDU5IDEzLjIyOTU1MzgsOC41OTEwNjI0MSAxMi41MDkyMjAyLDExLjkyODY5NjEgTDEyLjQ2MjY1NjIsMTIuMTI4OTQzOCBaIiBpZD0i5b2i54q25aSH5Lu9IiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYuNjI3OTUyLCA4Ljg3OTU4MSkgc2NhbGUoLTEsIC0xKSB0cmFuc2xhdGUoLTYuNjI3OTUyLCAtOC44Nzk1ODEpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNjY5MDI0Myw3LjM1MDUyMzEgTDUuNjY5MDI0Myw3LjgzNDYwMjA1IEw5Ljc0ODA0MDIxLDcuODM0NjAyMDUgTDkuNzQ4MDQwMjEsOC44MzQ2MDIwNSBMNS42NjkwMjQzLDguODM0NjAyMDUgTDUuNjY5MDI0Myw5LjE3NzcyNzkzIEw0LjI1MTk1OTc5LDguMjY0MTI1NTEgTDUuNjY5MDI0Myw3LjM1MDUyMzEgWiBNOC4zMzA5NzU3LDQuODIyMjcyMDcgTDkuNzQ4MDQwMjEsNS43MzU4NzQ0OSBMOC4zMzA5NzU3LDYuNjQ5NDc2OSBMOC4zMzA5NzU3LDYuMzA2MzUxMDMgTDQuMjUxOTU5NzksNi4zMDYzNTEwMyBMNC4yNTE5NTk3OSw1LjMwNjM1MTAzIEw4LjMzMDk3NTcsNS4zMDYzNTEwMyBMOC4zMzA5NzU3LDQuODIyMjcyMDcgWiIgaWQ9IuW9oueKtue7k+WQiCIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4=",name:"DataProcess",inputs:[{name:"code",type:"string",visible:!1,value:"return ''"},{name:"argLength",type:"number",visible:!1}],outputs:[{name:"result",type:"unknown"}],dynamic:{inputOrOutput:"input",type:"any",label:"数据 [index]",length:1}};isDynamicInputs(){return!0}static isDynamicInput=t=>new RegExp(`^${this.config.name}.{2}\\d+$`,"i").test(t);static getDynamicInputIndex=t=>parseInt(t.substring(this.config.name.length+2));static getArgNameByIndex=t=>`data${t+1}`;onExecute(t,e,n){const{code:i="return => arg1"}=e,s=Object.keys(e).reduce(((t,n)=>{if(A.isDynamicInput(n)){t[A.getDynamicInputIndex(n)]=e[n]}return t}),[]),r=e.argLength||1,o=`function (${new Array(r).fill("").map(((t,e)=>A.getArgNameByIndex(e))).join(",")}){${i}}`;try{const t=new Function("return "+o)();n.result=t(...s)}catch(t){console.warn(`（${this._execName}）蓝图执行错误`,t),n.result={type:"error",message:"执行错误"}}}}}var Cs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Qs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vs=function(){this.__data__=[],this.size=0};var bs=function(t,A){return t===A||t!=t&&A!=A},Us=bs;var Fs=function(t,A){for(var e=t.length;e--;)if(Us(t[e][0],A))return e;return-1},Is=Fs,Es=Array.prototype.splice;var Ms=Fs;var Ls=Fs;var _s=Fs;var Ds=vs,$s=function(t){var A=this.__data__,e=Is(A,t);return!(e<0)&&(e==A.length-1?A.pop():Es.call(A,e,1),--this.size,!0)},Ss=function(t){var A=this.__data__,e=Ms(A,t);return e<0?void 0:A[e][1]},xs=function(t){return Ls(this.__data__,t)>-1},Ts=function(t,A){var e=this.__data__,n=_s(e,t);return n<0?(++this.size,e.push([t,A])):e[n][1]=A,this};function Hs(t){var A=-1,e=null==t?0:t.length;for(this.clear();++A<e;){var n=t[A];this.set(n[0],n[1])}}Hs.prototype.clear=Ds,Hs.prototype.delete=$s,Hs.prototype.get=Ss,Hs.prototype.has=xs,Hs.prototype.set=Ts;var Os=Hs,ks=Os;var Ns=function(){this.__data__=new ks,this.size=0};var Ks=function(t){var A=this.__data__,e=A.delete(t);return this.size=A.size,e};var Rs=function(t){return this.__data__.get(t)};var js=function(t){return this.__data__.has(t)},Ps="object"==typeof Cs&&Cs&&Cs.Object===Object&&Cs,Gs=Ps,Vs="object"==typeof self&&self&&self.Object===Object&&self,zs=Gs||Vs||Function("return this")(),Js=zs.Symbol,Ys=Js,Ws=Object.prototype,Xs=Ws.hasOwnProperty,Zs=Ws.toString,qs=Ys?Ys.toStringTag:void 0;var tr=function(t){var A=Xs.call(t,qs),e=t[qs];try{t[qs]=void 0;var n=!0}catch(t){}var i=Zs.call(t);return n&&(A?t[qs]=e:delete t[qs]),i},Ar=Object.prototype.toString;var er=tr,nr=function(t){return Ar.call(t)},ir=Js?Js.toStringTag:void 0;var sr=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ir&&ir in Object(t)?er(t):nr(t)};var rr=function(t){var A=typeof t;return null!=t&&("object"==A||"function"==A)},or=sr,ar=rr;var lr,cr=function(t){if(!ar(t))return!1;var A=or(t);return"[object Function]"==A||"[object GeneratorFunction]"==A||"[object AsyncFunction]"==A||"[object Proxy]"==A},ur=zs["__core-js_shared__"],hr=(lr=/[^.]+$/.exec(ur&&ur.keys&&ur.keys.IE_PROTO||""))?"Symbol(src)_1."+lr:"";var dr=function(t){return!!hr&&hr in t},pr=Function.prototype.toString;var gr=function(t){if(null!=t){try{return pr.call(t)}catch(t){}try{return t+""}catch(t){}}return""},fr=cr,Br=dr,mr=rr,wr=gr,yr=/^\[object .+?Constructor\]$/,Cr=Function.prototype,Qr=Object.prototype,vr=Cr.toString,br=Qr.hasOwnProperty,Ur=RegExp("^"+vr.call(br).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Fr=function(t){return!(!mr(t)||Br(t))&&(fr(t)?Ur:yr).test(wr(t))},Ir=function(t,A){return null==t?void 0:t[A]};var Er=function(t,A){var e=Ir(t,A);return Fr(e)?e:void 0},Mr=Er(zs,"Map"),Lr=Er(Object,"create"),_r=Lr;var Dr=function(){this.__data__=_r?_r(null):{},this.size=0};var $r=function(t){var A=this.has(t)&&delete this.__data__[t];return this.size-=A?1:0,A},Sr=Lr,xr=Object.prototype.hasOwnProperty;var Tr=function(t){var A=this.__data__;if(Sr){var e=A[t];return"__lodash_hash_undefined__"===e?void 0:e}return xr.call(A,t)?A[t]:void 0},Hr=Lr,Or=Object.prototype.hasOwnProperty;var kr=Lr;var Nr=Dr,Kr=$r,Rr=Tr,jr=function(t){var A=this.__data__;return Hr?void 0!==A[t]:Or.call(A,t)},Pr=function(t,A){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=kr&&void 0===A?"__lodash_hash_undefined__":A,this};function Gr(t){var A=-1,e=null==t?0:t.length;for(this.clear();++A<e;){var n=t[A];this.set(n[0],n[1])}}Gr.prototype.clear=Nr,Gr.prototype.delete=Kr,Gr.prototype.get=Rr,Gr.prototype.has=jr,Gr.prototype.set=Pr;var Vr=Gr,zr=Os,Jr=Mr;var Yr=function(t){var A=typeof t;return"string"==A||"number"==A||"symbol"==A||"boolean"==A?"__proto__"!==t:null===t};var Wr=function(t,A){var e=t.__data__;return Yr(A)?e["string"==typeof A?"string":"hash"]:e.map},Xr=Wr;var Zr=Wr;var qr=Wr;var to=Wr;var Ao=function(){this.size=0,this.__data__={hash:new Vr,map:new(Jr||zr),string:new Vr}},eo=function(t){var A=Xr(this,t).delete(t);return this.size-=A?1:0,A},no=function(t){return Zr(this,t).get(t)},io=function(t){return qr(this,t).has(t)},so=function(t,A){var e=to(this,t),n=e.size;return e.set(t,A),this.size+=e.size==n?0:1,this};function ro(t){var A=-1,e=null==t?0:t.length;for(this.clear();++A<e;){var n=t[A];this.set(n[0],n[1])}}ro.prototype.clear=Ao,ro.prototype.delete=eo,ro.prototype.get=no,ro.prototype.has=io,ro.prototype.set=so;var oo=ro,ao=Os,lo=Mr,co=oo;var uo=Os,ho=Ns,po=Ks,go=Rs,fo=js,Bo=function(t,A){var e=this.__data__;if(e instanceof ao){var n=e.__data__;if(!lo||n.length<199)return n.push([t,A]),this.size=++e.size,this;e=this.__data__=new co(n)}return e.set(t,A),this.size=e.size,this};function mo(t){var A=this.__data__=new uo(t);this.size=A.size}mo.prototype.clear=ho,mo.prototype.delete=po,mo.prototype.get=go,mo.prototype.has=fo,mo.prototype.set=Bo;var wo=mo;var yo=function(t,A){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==A(t[e],e,t););return t},Co=Er,Qo=function(){try{var t=Co(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var vo=function(t,A,e){"__proto__"==A&&Qo?Qo(t,A,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[A]=e},bo=vo,Uo=bs,Fo=Object.prototype.hasOwnProperty;var Io=function(t,A,e){var n=t[A];Fo.call(t,A)&&Uo(n,e)&&(void 0!==e||A in t)||bo(t,A,e)},Eo=Io,Mo=vo;var Lo=function(t,A,e,n){var i=!e;e||(e={});for(var s=-1,r=A.length;++s<r;){var o=A[s],a=n?n(e[o],t[o],o,e,t):void 0;void 0===a&&(a=t[o]),i?Mo(e,o,a):Eo(e,o,a)}return e};var _o=function(t,A){for(var e=-1,n=Array(t);++e<t;)n[e]=A(e);return n};var Do=function(t){return null!=t&&"object"==typeof t},$o=sr,So=Do;var xo=function(t){return So(t)&&"[object Arguments]"==$o(t)},To=Do,Ho=Object.prototype,Oo=Ho.hasOwnProperty,ko=Ho.propertyIsEnumerable,No=xo(function(){return arguments}())?xo:function(t){return To(t)&&Oo.call(t,"callee")&&!ko.call(t,"callee")},Ko=No,Ro=Array.isArray,jo={exports:{}};var Po=function(){return!1};!function(t,A){var e=zs,n=Po,i=A&&!A.nodeType&&A,s=i&&t&&!t.nodeType&&t,r=s&&s.exports===i?e.Buffer:void 0,o=(r?r.isBuffer:void 0)||n;t.exports=o}(jo,jo.exports);var Go=jo.exports,Vo=/^(?:0|[1-9]\d*)$/;var zo=function(t,A){var e=typeof t;return!!(A=null==A?9007199254740991:A)&&("number"==e||"symbol"!=e&&Vo.test(t))&&t>-1&&t%1==0&&t<A};var Jo=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Yo=sr,Wo=Jo,Xo=Do,Zo={};Zo["[object Float32Array]"]=Zo["[object Float64Array]"]=Zo["[object Int8Array]"]=Zo["[object Int16Array]"]=Zo["[object Int32Array]"]=Zo["[object Uint8Array]"]=Zo["[object Uint8ClampedArray]"]=Zo["[object Uint16Array]"]=Zo["[object Uint32Array]"]=!0,Zo["[object Arguments]"]=Zo["[object Array]"]=Zo["[object ArrayBuffer]"]=Zo["[object Boolean]"]=Zo["[object DataView]"]=Zo["[object Date]"]=Zo["[object Error]"]=Zo["[object Function]"]=Zo["[object Map]"]=Zo["[object Number]"]=Zo["[object Object]"]=Zo["[object RegExp]"]=Zo["[object Set]"]=Zo["[object String]"]=Zo["[object WeakMap]"]=!1;var qo=function(t){return Xo(t)&&Wo(t.length)&&!!Zo[Yo(t)]};var ta=function(t){return function(A){return t(A)}},Aa={exports:{}};!function(t,A){var e=Ps,n=A&&!A.nodeType&&A,i=n&&t&&!t.nodeType&&t,s=i&&i.exports===n&&e.process,r=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=r}(Aa,Aa.exports);var ea=Aa.exports,na=qo,ia=ta,sa=ea&&ea.isTypedArray,ra=sa?ia(sa):na,oa=_o,aa=Ko,la=Ro,ca=Go,ua=zo,ha=ra,da=Object.prototype.hasOwnProperty;var pa=function(t,A){var e=la(t),n=!e&&aa(t),i=!e&&!n&&ca(t),s=!e&&!n&&!i&&ha(t),r=e||n||i||s,o=r?oa(t.length,String):[],a=o.length;for(var l in t)!A&&!da.call(t,l)||r&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ua(l,a))||o.push(l);return o},ga=Object.prototype;var fa=function(t){var A=t&&t.constructor;return t===("function"==typeof A&&A.prototype||ga)};var Ba=function(t,A){return function(e){return t(A(e))}},ma=Ba(Object.keys,Object),wa=fa,ya=ma,Ca=Object.prototype.hasOwnProperty;var Qa=cr,va=Jo;var ba=function(t){return null!=t&&va(t.length)&&!Qa(t)},Ua=pa,Fa=function(t){if(!wa(t))return ya(t);var A=[];for(var e in Object(t))Ca.call(t,e)&&"constructor"!=e&&A.push(e);return A},Ia=ba;var Ea=function(t){return Ia(t)?Ua(t):Fa(t)},Ma=Lo,La=Ea;var _a=function(t,A){return t&&Ma(A,La(A),t)};var Da=rr,$a=fa,Sa=function(t){var A=[];if(null!=t)for(var e in Object(t))A.push(e);return A},xa=Object.prototype.hasOwnProperty;var Ta=pa,Ha=function(t){if(!Da(t))return Sa(t);var A=$a(t),e=[];for(var n in t)("constructor"!=n||!A&&xa.call(t,n))&&e.push(n);return e},Oa=ba;var ka=function(t){return Oa(t)?Ta(t,!0):Ha(t)},Na=Lo,Ka=ka;var Ra=function(t,A){return t&&Na(A,Ka(A),t)},ja={exports:{}};!function(t,A){var e=zs,n=A&&!A.nodeType&&A,i=n&&t&&!t.nodeType&&t,s=i&&i.exports===n?e.Buffer:void 0,r=s?s.allocUnsafe:void 0;t.exports=function(t,A){if(A)return t.slice();var e=t.length,n=r?r(e):new t.constructor(e);return t.copy(n),n}}(ja,ja.exports);var Pa=ja.exports;var Ga=function(t,A){var e=-1,n=t.length;for(A||(A=Array(n));++e<n;)A[e]=t[e];return A};var Va=function(){return[]},za=function(t,A){for(var e=-1,n=null==t?0:t.length,i=0,s=[];++e<n;){var r=t[e];A(r,e,t)&&(s[i++]=r)}return s},Ja=Va,Ya=Object.prototype.propertyIsEnumerable,Wa=Object.getOwnPropertySymbols,Xa=Wa?function(t){return null==t?[]:(t=Object(t),za(Wa(t),(function(A){return Ya.call(t,A)})))}:Ja,Za=Lo,qa=Xa;var tl=function(t,A){return Za(t,qa(t),A)};var Al=function(t,A){for(var e=-1,n=A.length,i=t.length;++e<n;)t[i+e]=A[e];return t},nl=Ba(Object.getPrototypeOf,Object),il=Al,sl=nl,rl=Xa,ol=Va,al=Object.getOwnPropertySymbols?function(t){for(var A=[];t;)il(A,rl(t)),t=sl(t);return A}:ol,ll=Lo,cl=al;var ul=function(t,A){return ll(t,cl(t),A)},hl=Al,dl=Ro;var pl=function(t,A,e){var n=A(t);return dl(t)?n:hl(n,e(t))},gl=pl,fl=Xa,Bl=Ea;var ml=function(t){return gl(t,Bl,fl)},wl=pl,yl=al,Cl=ka;var Ql=function(t){return wl(t,Cl,yl)},vl=Er(zs,"DataView"),bl=Mr,Ul=Er(zs,"Promise"),Fl=Er(zs,"Set"),Il=Er(zs,"WeakMap"),El=sr,Ml=gr,Ll="[object Map]",_l="[object Promise]",Dl="[object Set]",$l="[object WeakMap]",Sl="[object DataView]",xl=Ml(vl),Tl=Ml(bl),Hl=Ml(Ul),Ol=Ml(Fl),kl=Ml(Il),Nl=El;(vl&&Nl(new vl(new ArrayBuffer(1)))!=Sl||bl&&Nl(new bl)!=Ll||Ul&&Nl(Ul.resolve())!=_l||Fl&&Nl(new Fl)!=Dl||Il&&Nl(new Il)!=$l)&&(Nl=function(t){var A=El(t),e="[object Object]"==A?t.constructor:void 0,n=e?Ml(e):"";if(n)switch(n){case xl:return Sl;case Tl:return Ll;case Hl:return _l;case Ol:return Dl;case kl:return $l}return A});var Kl=Nl,Rl=Object.prototype.hasOwnProperty;var jl=function(t){var A=t.length,e=new t.constructor(A);return A&&"string"==typeof t[0]&&Rl.call(t,"index")&&(e.index=t.index,e.input=t.input),e},Pl=zs.Uint8Array,Gl=Pl;var Vl=function(t){var A=new t.constructor(t.byteLength);return new Gl(A).set(new Gl(t)),A},zl=Vl;var Jl=function(t,A){var e=A?zl(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)},Yl=/\w*$/;var Wl=function(t){var A=new t.constructor(t.source,Yl.exec(t));return A.lastIndex=t.lastIndex,A},Xl=Js?Js.prototype:void 0,Zl=Xl?Xl.valueOf:void 0;var ql=Vl;var tc=Vl,Ac=Jl,ec=Wl,nc=function(t){return Zl?Object(Zl.call(t)):{}},ic=function(t,A){var e=A?ql(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)};var sc=function(t,A,e){var n=t.constructor;switch(A){case"[object ArrayBuffer]":return tc(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Ac(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ic(t,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return ec(t);case"[object Symbol]":return nc(t)}},rc=rr,oc=Object.create,ac=function(){function t(){}return function(A){if(!rc(A))return{};if(oc)return oc(A);t.prototype=A;var e=new t;return t.prototype=void 0,e}}(),lc=nl,cc=fa;var uc=function(t){return"function"!=typeof t.constructor||cc(t)?{}:ac(lc(t))},hc=Kl,dc=Do;var pc=function(t){return dc(t)&&"[object Map]"==hc(t)},gc=ta,fc=ea&&ea.isMap,Bc=fc?gc(fc):pc,mc=Kl,wc=Do;var yc=function(t){return wc(t)&&"[object Set]"==mc(t)},Cc=ta,Qc=ea&&ea.isSet,vc=Qc?Cc(Qc):yc,bc=wo,Uc=yo,Fc=Io,Ic=_a,Ec=Ra,Mc=Pa,Lc=Ga,_c=tl,Dc=ul,$c=ml,Sc=Ql,xc=Kl,Tc=jl,Hc=sc,Oc=uc,kc=Ro,Nc=Go,Kc=Bc,Rc=rr,jc=vc,Pc=Ea,Gc=ka,Vc="[object Arguments]",zc="[object Function]",Jc="[object Object]",Yc={};Yc[Vc]=Yc["[object Array]"]=Yc["[object ArrayBuffer]"]=Yc["[object DataView]"]=Yc["[object Boolean]"]=Yc["[object Date]"]=Yc["[object Float32Array]"]=Yc["[object Float64Array]"]=Yc["[object Int8Array]"]=Yc["[object Int16Array]"]=Yc["[object Int32Array]"]=Yc["[object Map]"]=Yc["[object Number]"]=Yc[Jc]=Yc["[object RegExp]"]=Yc["[object Set]"]=Yc["[object String]"]=Yc["[object Symbol]"]=Yc["[object Uint8Array]"]=Yc["[object Uint8ClampedArray]"]=Yc["[object Uint16Array]"]=Yc["[object Uint32Array]"]=!0,Yc["[object Error]"]=Yc[zc]=Yc["[object WeakMap]"]=!1;var Wc=function t(A,e,n,i,s,r){var o,a=1&e,l=2&e,c=4&e;if(n&&(o=s?n(A,i,s,r):n(A)),void 0!==o)return o;if(!Rc(A))return A;var u=kc(A);if(u){if(o=Tc(A),!a)return Lc(A,o)}else{var h=xc(A),d=h==zc||"[object GeneratorFunction]"==h;if(Nc(A))return Mc(A,a);if(h==Jc||h==Vc||d&&!s){if(o=l||d?{}:Oc(A),!a)return l?Dc(A,Ec(o,A)):_c(A,Ic(o,A))}else{if(!Yc[h])return s?A:{};o=Hc(A,h,a)}}r||(r=new bc);var p=r.get(A);if(p)return p;r.set(A,o),jc(A)?A.forEach((function(i){o.add(t(i,e,n,i,A,r))})):Kc(A)&&A.forEach((function(i,s){o.set(s,t(i,e,n,s,A,r))}));var g=u?void 0:(c?l?Sc:$c:l?Gc:Pc)(A);return Uc(g||A,(function(i,s){g&&(i=A[s=i]),Fc(o,s,t(i,e,n,s,A,r))})),o},Xc=Wc;var Zc=Qs((function(t,A){return Xc(t,5,A="function"==typeof A?A:void 0)}));function qc(){const{BaseNode:t}=lh();return class extends t{static config={name:"Timer",data:[{name:"interval",type:"number",value:3e3}],outputs:[{name:"next",type:"callback"}]};isEntrance(){return!0}onStop(){this._timer&&(clearInterval(this._timer),this._timer=null)}onExecute(t,A,e){const n=t.interval;n&&(this._timer=setInterval((()=>{this.run("next")}),n))}}}function tu(){const{BaseNode:t}=lh();return class extends t{static config={name:"GetItemFromArray",inputs:[{name:"array",type:"array"},{name:"index",type:"number"}],outputs:[{name:"data",type:"conch"}]};onExecute(t,A,e){e.data=A.array?A.array[parseInt(A.index)]:void 0}}}function Au(){const{BaseNode:t}=lh();return class extends t{static config={name:"ForEachLoop",inputs:[{name:"exec",type:"exec"},{name:"array",type:"array"}],outputs:[{name:"loop",type:"callback"},{name:"element",type:"unknown"},{name:"index",type:"number"},{name:"completed",type:"callback"}]};onExecute(t,A,e){const n=A.array||[];for(let t=0;t<n.length;t++)e.element=n[t],e.index=t,this.run("loop",e);this.run("callback",e)}}}function eu(){const{BaseNode:t}=lh();return class extends t{static config={name:"Visibility",inputs:[{name:"show",type:"exec"},{name:"hide",type:"exec"},{name:"visibleToggle",type:"exec"},{name:"conch",type:["conch","layer"]}],outputs:[{name:"next",type:"callback"}]};async onExecute(t,A,e){const n=A.conch;n?"show"===this.curExecName?await n.$uiComp.show():"hide"===this.curExecName?await n.$uiComp.hidden():"visibleToggle"===this.curExecName&&(n.visible?await n.$uiComp.hidden():await n.$uiComp.show()):console.warn("蓝图：动画显隐没有目标无法执行"),this.run("next")}}}const nu=document.head,iu=(t,A,e)=>new Promise(((n,i)=>{if(!A&&!e)return i(new Error("script url or content is empty"));const s="script"+t;let r=nu.querySelector("#"+s);if(r){if(!r.errorFlag)return n(r);r.remove()}r=document.createElement("script"),r.id=s,r.onload=function(t){n(t)},r.onerror=function(t){i(t),r.errorFlag=!0},A?r.src=A:(r.appendChild(document.createTextNode(e)),n(r)),nu.appendChild(r)})),su=t=>null==t,ru=(t,A)=>Object.prototype.toString.call(t).includes(A),ou=t=>{if(!t||"object"!=typeof t)return t;const A=t instanceof Array?[]:{};for(const e in t)A[e]=ou(t[e]);return A};navigator.userAgent.includes("Mac OS X");const au=[{name:"匀速",key:"linear"},{name:"慢速结束",key:"easeOut"}],lu=au.map((t=>t.name));function cu(){const{BaseNode:t}=lh();return class extends t{static config={name:"Translate",inputs:[{name:"exec",type:"exec"},{name:"conch",type:"conch"},{name:"x",type:"number"},{name:"y",type:"number"},{name:"easing",type:"select",value:lu},{name:"duration",type:"number",value:1e3},{name:"delay",type:"number",value:0}],outputs:[{name:"next",type:"callback"}]};onExecute(t,A,e){const n=A.conch,i={translate:[+A.x||0,+A.y||0]},s=au.filter((t=>t.name===A.easing))[0];s&&Object.assign(A,{easing:s.key}),n?n.$ui.animation.run({target:n.$uiComp,animation:i,...A},(()=>{this.run("next")})):(console.warn("蓝图：动画移动没有目标无法执行"),this.run("next"))}}}function uu(){const{BaseNode:t}=lh();return class extends t{static config={name:"LayersCarousel",inputs:[{name:"start",type:"exec"},{name:"stop",type:"exec"},{name:"interval",type:"number",value:1e3},{name:"layers",type:"array"}],outputs:[]};onExecute(t,A,e){const n=parseInt(A.interval),i=A.layers||[];"start"===this.curExecName?(clearInterval(this.inervalId),this.inervalId=setInterval((()=>{this.index=hu.initializeIndex(this.index);for(let t=0;t<i.length;t++){const A=hu.getVisibleName(t,this.index);i[t][A]()}this.index=hu.getIndex(this.index,i.length)}),hu.getInterval(n))):"stop"===this.curExecName&&clearInterval(this.inervalId)}}}const hu={initializeIndex:t=>t??0,getIndex:(t,A)=>t>=A-1?0:t+1,getInterval:t=>Number.isNaN(t)?1e3:t,getVisibleName:(t,A)=>t===A?"show":"hidden"};var du=oo,pu=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},gu=function(t){return this.__data__.has(t)};function fu(t){var A=-1,e=null==t?0:t.length;for(this.__data__=new du;++A<e;)this.add(t[A])}fu.prototype.add=fu.prototype.push=pu,fu.prototype.has=gu;var Bu=fu,mu=function(t,A){for(var e=-1,n=null==t?0:t.length;++e<n;)if(A(t[e],e,t))return!0;return!1},wu=function(t,A){return t.has(A)};var yu=function(t,A,e,n,i,s){var r=1&e,o=t.length,a=A.length;if(o!=a&&!(r&&a>o))return!1;var l=s.get(t),c=s.get(A);if(l&&c)return l==A&&c==t;var u=-1,h=!0,d=2&e?new Bu:void 0;for(s.set(t,A),s.set(A,t);++u<o;){var p=t[u],g=A[u];if(n)var f=r?n(g,p,u,A,t,s):n(p,g,u,t,A,s);if(void 0!==f){if(f)continue;h=!1;break}if(d){if(!mu(A,(function(t,A){if(!wu(d,A)&&(p===t||i(p,t,e,n,s)))return d.push(A)}))){h=!1;break}}else if(p!==g&&!i(p,g,e,n,s)){h=!1;break}}return s.delete(t),s.delete(A),h};var Cu=Pl,Qu=bs,vu=yu,bu=function(t){var A=-1,e=Array(t.size);return t.forEach((function(t,n){e[++A]=[n,t]})),e},Uu=function(t){var A=-1,e=Array(t.size);return t.forEach((function(t){e[++A]=t})),e},Fu=Js?Js.prototype:void 0,Iu=Fu?Fu.valueOf:void 0;var Eu=function(t,A,e,n,i,s,r){switch(e){case"[object DataView]":if(t.byteLength!=A.byteLength||t.byteOffset!=A.byteOffset)return!1;t=t.buffer,A=A.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=A.byteLength||!s(new Cu(t),new Cu(A)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Qu(+t,+A);case"[object Error]":return t.name==A.name&&t.message==A.message;case"[object RegExp]":case"[object String]":return t==A+"";case"[object Map]":var o=bu;case"[object Set]":var a=1&n;if(o||(o=Uu),t.size!=A.size&&!a)return!1;var l=r.get(t);if(l)return l==A;n|=2,r.set(t,A);var c=vu(o(t),o(A),n,i,s,r);return r.delete(t),c;case"[object Symbol]":if(Iu)return Iu.call(t)==Iu.call(A)}return!1},Mu=ml,Lu=Object.prototype.hasOwnProperty;var _u=wo,Du=yu,$u=Eu,Su=function(t,A,e,n,i,s){var r=1&e,o=Mu(t),a=o.length;if(a!=Mu(A).length&&!r)return!1;for(var l=a;l--;){var c=o[l];if(!(r?c in A:Lu.call(A,c)))return!1}var u=s.get(t),h=s.get(A);if(u&&h)return u==A&&h==t;var d=!0;s.set(t,A),s.set(A,t);for(var p=r;++l<a;){var g=t[c=o[l]],f=A[c];if(n)var B=r?n(f,g,c,A,t,s):n(g,f,c,t,A,s);if(!(void 0===B?g===f||i(g,f,e,n,s):B)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var m=t.constructor,w=A.constructor;m==w||!("constructor"in t)||!("constructor"in A)||"function"==typeof m&&m instanceof m&&"function"==typeof w&&w instanceof w||(d=!1)}return s.delete(t),s.delete(A),d},xu=Kl,Tu=Ro,Hu=Go,Ou=ra,ku="[object Arguments]",Nu="[object Array]",Ku="[object Object]",Ru=Object.prototype.hasOwnProperty;var ju=function(t,A,e,n,i,s){var r=Tu(t),o=Tu(A),a=r?Nu:xu(t),l=o?Nu:xu(A),c=(a=a==ku?Ku:a)==Ku,u=(l=l==ku?Ku:l)==Ku,h=a==l;if(h&&Hu(t)){if(!Hu(A))return!1;r=!0,c=!1}if(h&&!c)return s||(s=new _u),r||Ou(t)?Du(t,A,e,n,i,s):$u(t,A,a,e,n,i,s);if(!(1&e)){var d=c&&Ru.call(t,"__wrapped__"),p=u&&Ru.call(A,"__wrapped__");if(d||p){var g=d?t.value():t,f=p?A.value():A;return s||(s=new _u),i(g,f,e,n,s)}}return!!h&&(s||(s=new _u),Su(t,A,e,n,i,s))},Pu=Do;var Gu=function t(A,e,n,i,s){return A===e||(null==A||null==e||!Pu(A)&&!Pu(e)?A!=A&&e!=e:ju(A,e,n,i,t,s))},Vu=Gu;var zu=Qs((function(t,A){return Vu(t,A)}));function Ju(){const{BaseNode:t}=lh();return class extends t{static config={name:"DeepEqualTo",inputs:[{name:"A",type:"any"},{name:"B",type:"any"}],outputs:[{name:"result",type:"boolean"}]};onExecute(t,A,e){"string"==typeof A.A||"string"==typeof A.B?e.result=String(A.A)===String(A.B):e.result=zu(A.A,A.B)}}}function Yu(){const{BaseNode:t}=lh();return class extends t{static config={name:"GreaterThanOrEqualTo",inputs:[{name:"A",type:"number",value:0},{name:"B",type:"number",value:0}],outputs:[{name:"result",type:"boolean"}]};onExecute(t,A,e){e.result=A.A>=A.B}}}function Wu(){const{BaseNode:t}=lh();return class extends t{static config={name:"LessThanOrEqualTo",inputs:[{name:"A",type:"number",value:0},{name:"B",type:"number",value:0}],outputs:[{name:"result",type:"boolean"}]};onExecute(t,A,e){e.result=A.A<=A.B}}}class Xu{constructor(t){this.BlueprintModules=t,this.conchNodes=[],this.layerNodes=[],this.animationNodeList=[eu(),cu(),uu()],this.folderStructure={children:[{foldername:"动画",nodes:this.animationNodeList},{foldername:"图层",nodes:this.layerNodes},{foldername:"图表",nodes:this.conchNodes},{foldername:"工具",nodes:[ys(),this.BlueprintModules.ArrayNode,this.BlueprintModules.PrintNode,tu(),Au()],children:[{foldername:"流程控制",nodes:[this.BlueprintModules.BeginNode,this.BlueprintModules.BranchNode,this.BlueprintModules.SequenceNode,qc()]},{foldername:"判断",nodes:[Ju(),Yu(),Wu()]}]}]},this.styleStructure=[{style:{headerColor:"rgba(63, 167, 88, .9)",bodyColor:"rgba(41, 44, 47, 0.9)"},nodes:this._getNodesFormFolder(this.folderStructure.children[0])},{style:{headerColor:"rgba(198, 140, 65, 1)",bodyColor:"rgba(41, 44, 47, 0.9)"},nodes:this.layerNodes},{style:{headerColor:"rgba(48, 103, 205, .9)",bodyColor:"rgba(41, 44, 47, 0.9)"},nodes:this.conchNodes},{style:{headerColor:"rgba(58, 165, 167, .9)",bodyColor:"rgba(41, 44, 47, 0.9)"},nodes:this._getNodesFormFolder(this.folderStructure.children[3])}]}_getNodesFormFolder(t){const A=[],e=[t];for(;e.length;){const t=e.shift();t.nodes&&A.push(...t.nodes),t.children&&e.push(...t.children)}return A}_getStyleAndFolderData(){const t=t=>{if("function"==typeof t&&t.prototype instanceof this.BlueprintModules.BaseNode)return t.config.name},A=Zc(this.folderStructure,t),e=Zc(this.styleStructure,t),n=this.conchNodes.filter((t=>t.config.__conchData)).map((t=>t.config.name));return e.push({style:{headerColor:"rgba(108, 81, 184, .9)",bodyColor:"rgba(41, 44, 47, 0.9)"},nodes:n}),{folder:A,style:e}}getStyleAndFolderData(){return this._getStyleAndFolderData()}addLayerNode(t){this.animationNodeList.push(t)}addConchNodes(...t){return this.conchNodes.push(...t),this.conchNodes.sort(),this._getStyleAndFolderData()}removeConchNode(t){const A=this.conchNodes.findIndex((A=>A.config.name===t));return this.conchNodes.splice(A,1),this._getStyleAndFolderData()}addLayerNodes(...t){return this.layerNodes.push(...t),this.layerNodes.sort(),this._getStyleAndFolderData()}removeLayerNode(t){const A=this.layerNodes.findIndex((A=>A.config.name===t));return this.layerNodes.splice(A,1),this._getStyleAndFolderData()}getAllNodes(){return this._getNodesFormFolder(this.folderStructure)}}const Zu="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgdHJhbnNmb3JtPSJzY2FsZSguOSkiIHdpZHRoPSIxNHB4IiBoZWlnaHQ9IjE1cHgiIHZpZXdCb3g9IjAgMCAxNCAxNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8dGl0bGU+5YiH54mHPC90aXRsZT4NCiAgICA8ZyBpZD0i5pWw5o2uL+S6pOS6kumdouadv++8iDMzMC3mt7HvvIkiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0i6JOd5Zu+6IqC54K5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTIuMDAwMDAwLCAtNDQuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0i57yW57uELTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQyLjAwMDAwMCwgMzkuNTAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4wMDAwMDAsIDAuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSLnvJbnu4QiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCA1LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgeD0iMCIgeT0iMCIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS45MTc5NDcxLDEuNzUgTDEuOTE3OTQ3MSwxMC45Mzc1IEMxLjkxNzk0NzEsMTEuMzM4OTY4NiAyLjIxODM2NjY4LDExLjY3MDI3MDMgMi42MDY2NjQ3OCwxMS43MTg4NjQyIEwyLjcwNTQ0NzEsMTEuNzI1IEwxMy4xMjUsMTEuNzI1IEwxMy4xMjUsMTIuNzc1IEwyLjcwNTQ0NzEsMTIuNzc1IEMxLjczNDc0NjYyLDEyLjc3NSAwLjkzOTg0NzQ0LDEyLjAyMjMwNTIgMC44NzI1NjA3NDIsMTEuMDY4NzI2NyBMMC44Njc5NDcxMDIsMTAuOTM3NSBMMC44Njc5NDcxMDIsMS43NSBMMS45MTc5NDcxLDEuNzUgWiBNNS4xNjI1LDYuNTYyNSBMNS4xNjI1LDEwLjA2MjUgTDQuMTEyNSwxMC4wNjI1IEw0LjExMjUsNi41NjI1IEw1LjE2MjUsNi41NjI1IFogTTEyLjE2MjUsMi4xODc1IEwxMi4xNjI1LDEwLjA2MjUgTDExLjExMjUsMTAuMDYyNSBMMTEuMTEyNSwyLjE4NzUgTDEyLjE2MjUsMi4xODc1IFogTTguNjYyNSw0Ljc5NTEwMTQgTDguNjYyNSwxMC4wNjI1IEw3LjYxMjUsMTAuMDYyNSBMNy42MTI1LDQuNzk1MTAxNCBMOC42NjI1LDQuNzk1MTAxNCBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==";function qu(t){const A={},e=t.id,n=t.adapter.version,{actions:i=[]}=t.$uiApp?._options||{};i.forEach((({identified:t,label:n})=>{A[e+"/"+t]=n||t,A[`${e}/${t}.arg`]=`${n||t}数据`}));const s=function(t,A,e,n=[]){const{BaseNode:i}=lh(),s=t.$uiApp,r=!su(s?.data),o=["data","updateData"],a={__conchChart:!0,icon:Zu,name:A,version:e,inputs:[{name:"updateData",type:"exec",advanced:!0},{name:"data",type:"array",advanced:!0},{name:"updateOpts",type:"exec",advanced:!0},{name:"opts",type:"object",visible:!1}],outputs:[{name:"self",type:"conch"},{name:"data",type:"array",advanced:!0}]};r||(a.inputs=a.inputs.filter((t=>!o.includes(t.name))),a.outputs=a.outputs.filter((t=>!o.includes(t.name))));return n.forEach((({identified:t})=>{a.outputs.push({name:t,type:"callback",advanced:!0}),a.outputs.push({name:t+".arg",type:"unknown",advanced:!0})})),class extends i{static config=a;isEntrance(){return!0}onStop(){super.onStop(),s._clearWaitAction()}onExecute(A,e,i){if(i.self=t,i.data=s.data,this.curExecName||n.forEach((({identified:t})=>{s._waitAction(t).done((A=>{i[t+".arg"]=A,this.run(t,i)}))})),"updateData"===this.curExecName&&e.data){try{s.setData(e.data)}catch(t){console.warn("图表设置数据异常",t)}i.data=e.data}else if("updateOpts"===this.curExecName&&e.opts)try{s.setOption(e.opts)}catch(t){console.warn("图表设置属性异常",t)}}}}(t,e,n,i);return{local:A,node:s}}const th="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE0cHgiIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDE0IDE1IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT7liIfniYc8L3RpdGxlPg0KICAgIDxnIGlkPSLmlbDmja4v5Lqk5LqS6Z2i5p2/77yIMzMwLea3se+8iSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSLok53lm77oioLngrkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01MC4wMDAwMDAsIC0xODQuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0i57yW57uE5aSH5Lu9IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0Mi4wMDAwMDAsIDE3OS41MDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvbl/ok53lm77ohJrmnKwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguMDAwMDAwLCA1LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiB4PSIwLjMxNDA5NzgxOCIgeT0iMC4zMTQwOTc4MTgiIHdpZHRoPSIxMy4zNzE4MDQ0IiBoZWlnaHQ9IjEzLjM3MTgwNDQiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjIwNjc1MTksOC4zNjk3ODA5NyBMMTMuMjAxMDc1NSw4LjM2ODM2NTY5IEwxMy4xODg1MDQyLDguNDMyNDI0MDQgQzEzLjExODU5ODgsOC43NTQ1OTExMSAxMi45NTczNzU4LDkuMTk3MTQxMDkgMTIuNzA0ODM1MSw5Ljc2MDA3NDA3IEwxMC45MjUwNjMzLDcuMTc1MDEyNDUgTDEyLjM3OTc2ODIsNy4yMTUwODA5OCBDMTIuNTY1MDMwOCw0LjY2ODc5OTM3IDEwLjg5OTU1NTYsMi4yODIwNjY4MSA4LjMzNzc4NzYzLDEuNjQzMzQ2MyBDNS45NTEyODQ5MywxLjA0ODMyNDM1IDMuNDkwNzQ1MDIsMi4xNTk0MzI5OSAyLjM0MjA3OTg3LDQuMjgwMTUwMDIgTDIuMjQ2ODY3OTQsNC40NjQzODIwNCBMMS4zNDcxNzQ0NCw0LjAyMTI4OTk2IEMyLjY1NzkwODEsMS4zNTk4NTk5OSA1LjY2NTMxODExLC0wLjA1NjU2MjQ3MDcgOC41ODA0MDc1NCwwLjY3MDI1MDk1NSBDMTEuOTE3MzY0NiwxLjUwMjI0NzggMTMuOTczNjQ5NSw0LjgzMTg5OTYxIDEzLjI1MzMxNTksOC4xNjk1MzMzIEwxMy4yMDY3NTE5LDguMzY5NzgwOTcgWiIgaWQ9IuW9oueKtiIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40NjI2NTYyLDEyLjEyODk0MzggTDEyLjQ1Njk3OTgsMTIuMTI3NTI4NSBMMTIuNDQ0NDA4NSwxMi4xOTE1ODY4IEMxMi4zNzQ1MDMxLDEyLjUxMzc1MzkgMTIuMjEzMjgwMSwxMi45NTYzMDM5IDExLjk2MDczOTQsMTMuNTE5MjM2OSBMMTAuMTgwOTY3NiwxMC45MzQxNzUyIEwxMS42MzU2NzI1LDEwLjk3NDI0MzggQzExLjgyMDkzNTEsOC40Mjc5NjIxNiAxMC4xNTU0NTk5LDYuMDQxMjI5NiA3LjU5MzY5MTk0LDUuNDAyNTA5MSBDNS4yMDcxODkyNCw0LjgwNzQ4NzE0IDIuNzQ2NjQ5MzMsNS45MTg1OTU3OCAxLjU5Nzk4NDE4LDguMDM5MzEyODIgTDEuNTAyNzcyMjUsOC4yMjM1NDQ4MyBMMC42MDMwNzg3NTEsNy43ODA0NTI3NSBDMS45MTM4MTI0MSw1LjExOTAyMjc4IDQuOTIxMjIyNDIsMy43MDI2MDAzMiA3LjgzNjMxMTg1LDQuNDI5NDEzNzUgQzExLjE3MzI2ODksNS4yNjE0MTA1OSAxMy4yMjk1NTM4LDguNTkxMDYyNDEgMTIuNTA5MjIwMiwxMS45Mjg2OTYxIEwxMi40NjI2NTYyLDEyLjEyODk0MzggWiIgaWQ9IuW9oueKtuWkh+S7vSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjYyNzk1MiwgOC44Nzk1ODEpIHNjYWxlKC0xLCAtMSkgdHJhbnNsYXRlKC02LjYyNzk1MiwgLTguODc5NTgxKSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNjY5MDI0Myw3LjM1MDUyMzEgTDUuNjY5MDI0Myw3LjgzNDYwMjA1IEw5Ljc0ODA0MDIxLDcuODM0NjAyMDUgTDkuNzQ4MDQwMjEsOC44MzQ2MDIwNSBMNS42NjkwMjQzLDguODM0NjAyMDUgTDUuNjY5MDI0Myw5LjE3NzcyNzkzIEw0LjI1MTk1OTc5LDguMjY0MTI1NTEgTDUuNjY5MDI0Myw3LjM1MDUyMzEgWiBNOC4zMzA5NzU3LDQuODIyMjcyMDcgTDkuNzQ4MDQwMjEsNS43MzU4NzQ0OSBMOC4zMzA5NzU3LDYuNjQ5NDc2OSBMOC4zMzA5NzU3LDYuMzA2MzUxMDMgTDQuMjUxOTU5NzksNi4zMDYzNTEwMyBMNC4yNTE5NTk3OSw1LjMwNjM1MTAzIEw4LjMzMDk3NTcsNS4zMDYzNTEwMyBMOC4zMzA5NzU3LDQuODIyMjcyMDcgWiIgaWQ9IuW9oueKtue7k+WQiCIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+";function Ah(t){const A={};A[t.id]=t.name;const{node:e,local:n={}}=function(t){return t.adapter.$dataAdapter}(t)?function(t){const{BaseNode:A}=lh(),e=t.id;return{node:class extends A{static config={__conchData:!0,icon:th,name:e,inputs:[],outputs:[{name:"data",type:"array"}]};onExecute(A,e,n){n.data=t.$uiApp.data}}}}(t):qu(t);return{local:{...A,...n},node:e}}function eh(t=[]){const{BaseNode:A}=lh(),e={},n=[];t.forEach((t=>{const{name:A}=t;e[A]=t,n.push(A)}));return{node:class extends A{static config={name:"Layers",inputs:[{name:"switch",type:"exec"},{name:"layer",type:"select",value:n}],outputs:[{name:"next",type:"exec"}]};onExecute(t,A,n){e[A.layer].select()}}}}const nh="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjE0cHgiIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDE0IDE1IiB2ZXJzaW9uPSIxLjEiIHRyYW5zZm9ybT0ic2NhbGUoLjg4KSI+DQogIDx0aXRsZT5pY29uX+WbvuWxgjwvdGl0bGU+DQogIDxnIGlkPSLmlbDmja4v5Lqk5LqS6Z2i5p2/77yIMzMwLea3se+8iSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgPGcgaWQ9IuiTneWbvuiKgueCuSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQyNi4wMDAwMDAsIC0xODQuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgIDxnIGlkPSLnvJbnu4QtNOWkh+S7vSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDE2LjAwMDAwMCwgMTc5LjUwMDAwMCkiPg0KICAgICAgICA8ZyBpZD0i57yW57uE5aSH5Lu9LTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMDAwMDAwLCAwLjAwMDAwMCkiPg0KICAgICAgICAgIDxnIGlkPSJpY29uX+WbvuWxgiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDAwMDAsIDUuMDAwMDAwKSI+DQogICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjwvcmVjdD4NCiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjIwMTM3NSw5LjMxNjYwOTIyIEw2LjQzMzc2NjcyLDEyLjE1NTUyMDIgQzYuNzQ1NTkyMDcsMTIuMzI0Njc3NSA3LjExNjM3OTgxLDEyLjM0NDQ2MyA3LjQ0MzU4NTc3LDEyLjIxMDgwOTUgTDcuNTU5MDEwOTUsMTIuMTU2MDY0MyBMMTIuNzUzMTI1LDkuMzE3NDg0MjIgTDEzLjI5ODI1LDEwLjMxNTg1OTIgTDguMTA4NzYxMjgsMTMuMTUyMDY1MiBDNy40Njk0MTUyNiwxMy41MDEzNjk1IDYuNzAzNzczNCwxMy41Mjk0OTcgNi4wNDE3MDc5NCwxMy4yMzAwMzU3IEw1Ljg4ODU2NTgxLDEzLjE1MzkxOTkgTDAuNjU4ODc1LDEwLjMxNjczNDIgTDEuMjAxMzc1LDkuMzE2NjA5MjIgWiBNMS4yMDEzNzUsNi41MDg3MzQyMiBMNi40MzM3NjY3Miw5LjM0ODM4Njk2IEM2Ljc0NTU5MjA3LDkuNTE3NTQ0MzMgNy4xMTYzNzk4MSw5LjUzNzMyOTgzIDcuNDQzNTg1NzcsOS40MDM2NzYzNCBMNy41NTkwMTA5NSw5LjM0ODkzMTA3IEwxMi43NTMxMjUsNi41MTA0ODQyMiBMMTMuMjk4MjUsNy41MDg4NTkyMiBMOC4xMDg3NjEyOCwxMC4zNDQ5MzIgQzcuNDY5NDE1MjYsMTAuNjk0MjM2MyA2LjcwMzc3MzQsMTAuNzIyMzYzOCA2LjA0MTcwNzk0LDEwLjQyMjkwMjUgTDUuODg4NTY1ODEsMTAuMzQ2Nzg2NyBMMC42NTgsNy41MDg4NTkyMiBMMS4yMDEzNzUsNi41MDg3MzQyMiBaIE03Ljg1NTE3MDUxLDAuNjc3NTkzNzcyIEw3Ljk4NTM0MjQzLDAuNzQ0NDQ1OTI3IEwxMi41Mzc4MjYsMy4zMDM0NzU4OCBMMTIuNjI1Nzc5NiwzLjM1OTQwNjkgQzEyLjk4OTIzMDIsMy42MTk0NzU1NyAxMy4xMjA3Nzk2LDQuMTAyMTc3NCAxMi45NDA3NDI0LDQuNTE1ODQ1MTYgTDEyLjg5MzYyOCw0LjYwOTk0ODc0IEwxMi44MjE0MjEsNC43MTkwNDc0MiBDMTIuNzY4NjE5Niw0Ljc4ODI0NTE4IDEyLjcwNjc3MzQsNC44NTAwOTEzNiAxMi42Mzc1NzU2LDQuOTAyODkyOCBMMTIuNTI4NDc2OSw0Ljk3NTA5OTc3IEw3Ljk0ODk2NzQ5LDcuNTgxOTA1MTggTDcuODE4MDUwMzYsNy42NTAxNDUwOSBDNy4yODcwNzE0NSw3LjkwMjM1NzE0IDYuNjczMDU2OTMsNy45MDU1NzU2NyA2LjE0NDgyOTQ5LDcuNjU4OTg2MjYgTDYuMDE0NjU3NTcsNy41OTIxMzQxMSBMMS40NjIxNzM5OSw1LjAzMzEwNDE2IEwxLjM3NDIyMDQ1LDQuOTc3MTczMTQgQzAuOTgyODEyMDg1LDQuNjk3MDk5MTkgMC44NjAzNTQyMTMsNC4xNTg4MjM0NiAxLjEwNjM3MjAyLDMuNzI2NjMxMyBDMS4xNzEzNzIxNSwzLjYxMjQ0MjIxIDEuMjU4NjI3NzMsMy41MTI4ODk0IDEuMzYyNDI0MzcsMy40MzM2ODcyMyBMMS40NzE1MjMwNSwzLjM2MTQ4MDI2IEw2LjA1MTAzMjUxLDAuNzU0Njc0ODUgTDYuMTgxOTQ5NjQsMC42ODY0MzQ5NDQgQzYuNzEyOTI4NTUsMC40MzQyMjI4OTQgNy4zMjY5NDMwNywwLjQzMTAwNDM2OCA3Ljg1NTE3MDUxLDAuNjc3NTkzNzcyIFogTTYuNzU4OTQyMDcsMS41ODE1ODExOCBMNi42NjcyODIzMiwxLjYxNzUzNzYxIEw2LjU3MDQ2Njk4LDEuNjY3MTkyMTYgTDIuMTIxMDg2NDQsNC4xOTg5MjU5MyBMNi41MjkxNjU3OCw2LjY3NjgzMDE3IEM2Ljc1MjU5NDQ5LDYuODAyNDIzMzIgNy4wMTk5NjE0Nyw2LjgyNTU2ODcxIDcuMjQxMDU3OTMsNi43NTQ5OTg4NSBMNy4zMzI3MTc2OCw2LjcxOTA0MjQyIEw3LjQyOTUzMzAyLDYuNjY5Mzg3ODggTDExLjg3ODg5NDksNC4xMzY0MzUzNyBMNy40NzA4MzQyMiwxLjY1OTc0OTg2IEM3LjI0NzQwNTUxLDEuNTM0MTU2NzEgNi45ODAwMzg1MywxLjUxMTAxMTMyIDYuNzU4OTQyMDcsMS41ODE1ODExOCBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+DQogICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgICA8L2c+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg==";function ih(t){return{node:sh(t),local:{[t.id]:t.name}}}function sh(t){const{BaseNode:A}=lh(),e={name:t.id,icon:nh,outputs:[{name:"self",type:"layer"}]};return class extends A{static config=e;isEntrance(){return!0}onExecute(A,e,n){n.self=t}}}const rh={Visibility:"显隐",Translate:"移动",Layers:"图层切换",Rotate:"旋转",GetData:"获取data",GetOpts:"获取配置",DataProcess:"数据处理",LayersCarousel:"图层轮播",conch:"目标",show:"显示",hide:"隐藏",toggle:"切换",visibleToggle:"显隐切换",duration:"时长",easing:"速率",delay:"延时",animationType:"动画类型",clicked:"点击",done:"完成",array:"数组",layers:"图层数组",stop:"停止"},oh={GreaterThanOrEqualTo:"A>=B",LessThanOrEqualTo:"A<=B",DeepEqualTo:"A==B","DeepEqualTo/result":"","GreaterThanOrEqualTo/result":"","LessThanOrEqualTo/result":"","StrictEqualTo/result":""},ah={};function lh(){return ah}class ch{constructor(t,A,e){this.ui=t,this.root=t.$root,this.Blueprint=A,this.BlueprintModules=e,ah.Blueprint=A,ah.BlueprintModules=e,ah.BaseNode=e?.BaseNode,this.blueprint=null,this.editor=null,this.nodeCollections=null,this._running=A&&e,this.data=null}init(t){if(!this._running)return void console.warn("无法初始化蓝图，需要蓝图");this.data=t,this.blueprint=new this.Blueprint,this.nodeCollections=new Xu(this.BlueprintModules);const{node:A}=eh();this.nodeCollections.addLayerNode(A),this.blueprint.registerNode(this.nodeCollections.getAllNodes()),this.ui.$topUi.$options.isEdit&&(this.editor=this.blueprint.getEditor(),this.editor.loadLocalData({Print:"打印",String:"字符串",Begin:"开始",start:"开始",value:"值",exec:"执行",next:"下一步",result:"结果",Array:"数组",GetItemFromArray:"获取数组项",index:"索引",Sequence:"序列",sequenceInput:"",Timer:"定时器",interval:"每隔（毫秒）",Branch:"分支",condition:"条件",ForEachLoop:"迭代数组",element:"元素",loop:"迭代",completed:"迭代完成",...rh,...oh})),this.root.$on("mounted:Canvas",this.mountedCanvasEvent,this),this.root.$on("beforeDestroy:Canvas",this.beforeDestroyCanvasEvent,this),this.root.$on("hook:mounted:Ui",this.run,this)}mountedCanvasEvent(t){this.initNodes(t),this.updateLayer(),this.editor&&(this.root.$on("adapterCompleted",this.chartCreate,this),this.root.$on("beforeDestroyAdapter",this.chartDestroy,this),this.root.$on("updatedAdapter",this.chartUpgrade,this),this.root.$on("mounted:Layer",this.layerCreate,this),this.root.$on("beforeDestroy:Layer",this.layerDestroy,this),this.root.$on("update",this.updateEvent,this))}beforeDestroyCanvasEvent(t){this.editor&&(this.root.$off("adapterCompleted",this.chartCreate,this),this.root.$off("beforeDestroyAdapter",this.chartDestroy,this),this.root.$off("updatedAdapter",this.chartUpgrade,this),this.root.$off("mounted:Layer",this.layerCreate,this),this.root.$off("beforeDestroy:Layer",this.layerDestroy,this),this.root.$off("update",this.updateEvent,this)),this._destroyNodes(t)}initNodes(t){const A=t.containers,e=t.layers,{nodes:n,locals:i}=function(t=[]){const A=[],e={dataUpdate:"数据更新",updateData:"更新数据",updateOpts:"更新配置项",dataChanged:"请求完成或数据变化",opts:"配置项",data:"数据",self:"实例"};for(const n of t)if(n.adapter){const{node:t,local:i}=Ah(n);A.push(t),Object.assign(e,i)}return{nodes:A,locals:e}}(A),{nodes:s,locals:r}=function(t=[]){const A=[],e={self:"实例"};for(const n of t){const{node:t,local:i}=ih(n);A.push(t),Object.assign(e,i)}return{nodes:A,locals:e}}(e),{style:o,folder:a}=this.nodeCollections.addConchNodes(...n),{folder:l,style:c}=this.nodeCollections.addLayerNodes(...s);this.blueprint.registerNode([...n,...s]),this.editor&&(this.editor.loadStyle([...o,...c]),this.editor.loadFolder({...a,...l}),this.editor.loadLocalData({...i,...r}))}_destroyNodes(t){const A=t.containers,e=t.layers;if(A.forEach((t=>{this.blueprint.unregisterNode(t.id),this.nodeCollections.removeConchNode(t.id)})),e.forEach((t=>{this.blueprint.unregisterNode(t.id),this.nodeCollections.removeLayerNode(t.id)})),this.editor){const{folder:t,style:A}=this.nodeCollections.getStyleAndFolderData();this.editor.loadStyle(A),this.editor.loadFolder(t)}}chartCreate(t){t&&this.createBlueprintNode({comp:t.$parent,createFn:Ah,addFn:"addConchNodes"})}chartUpgrade(t){const A=Ah(t);if(A){const{node:t,local:e}=A;this.blueprint.updateNode(t),this.editor.loadLocalData(e)}}chartDestroy(t){this.destroyBlueprintNode({comp:t.$parent,fn:"removeConchNode"})}addToBluePrint(t){this.editor.addNode(t.id)}addLayerToBluePrint(t){this.editor.addNode(t.id)}updateLayer(){const t=eh(this.ui.$canvas.children);t&&this.blueprint.updateNode(t.node)}layerCreate(t){this.createBlueprintNode({comp:t,createFn:ih,addFn:"addLayerNodes"}),this.updateLayer()}containerChangeName(t,A){this.editor.loadLocalData({[t.id]:A})}layerChangeName(t,A){this.editor.loadLocalData({[t.id]:A}),this.updateLayer()}updateEvent(t,A,e){if("name"===A)switch(t.type){case"Container":this.containerChangeName(t,e);break;case"Layer":this.layerChangeName(t,e)}}layerDestroy(t){this.destroyBlueprintNode({comp:t,fn:"removeLayerNode"}),this.updateLayer()}createBlueprintNode(t){const{createFn:A,addFn:e,comp:n}=t,i=A(n);if(i){const{node:t,local:A}=i;this.blueprint.registerNode(t),this.editor.loadLocalData(A);const{folder:n,style:s}=this.nodeCollections[e](t);this.editor.loadStyle(s),this.editor.loadFolder(n)}}destroyBlueprintNode(t){const{fn:A,comp:e}=t;this.blueprint.unregisterNode(e.id);const{folder:n,style:i}=this.nodeCollections[A](e.id);this.editor.loadStyle(i),this.editor.loadFolder(n)}run(){if(!this.ui.$options.isEdit&&this._running&&this.data)try{const t=JSON.parse(this.data);t&&Object.keys(t).length&&this.blueprint.run(t)}catch(t){console.warn("蓝图运行异常",t)}}toJSON(){if(this.editor)try{return this.editor.toJson()}catch(t){console.error("蓝图导出定义文件失败",t)}return null}destroy(){this.root.$off("hook:mounted:Ui",this.run,this),this.ui=null,this.topUi=null,this.Blueprint=null,this.BlueprintModules=null,ah.Blueprint=null,ah.BlueprintModules=null,ah.BaseNode=null,this.blueprint=null,this.editor=null,this.nodeCollections=null,this._running=null,this.data=null}}class uh{constructor(t,A={}){this.options=A,this.params=null}async asyncExec(){try{const{result:t,params:A}=await this.options.exec();return this.params=A,t}catch(t){console.error("异步运行命令执行错误",t)}}exec(){try{const{result:t,params:A}=this.options.exec();return this.params=A,t}catch(t){console.error("运行命令执行错误",t)}}async undo(t){try{await this.options.undo(t,ou(this.params))}catch(t){console.error("撤销命令执行错误",t)}return this}async redo(t){try{await this.options.redo(t,ou(this.params))}catch(t){console.error("恢复命令执行错误",t)}return this}destroy(){return this.params=null,this.options=null,this}}class hh{constructor(t,A={}){this.parent=t,this.options=A,this.state=null,this.index=null,this.isAdd=null,this._execRunning=null,this._undoRunning=null,this._redoRunning=null,this.running=null,this.canExecute=null}init(){return this.state=[],this.index=0,this.canExecute=!1,this.isAdd=!0,this._execRunning=!0,this._undoRunning=!0,this._redoRunning=!0,this.running=!this.options.disable,this}start(){return this.canExecute=!0,!0}pause(){return this.canExecute=!1,!0}_addState(t){this.running&&(this.index<this.state.length&&this.state.splice(this.index,this.state.length-this.index),this.state.push(t),this.index++)}async asyncAdd(t){const A=new uh(this.parent,t);let e;return this._execRunning=!1,this.running&&this.parent.$emit("CommandBeforeExec",A),this.canExecute&&this.isAdd&&!t.noAdd?(this.isAdd=!1,this._addState(A),e=await A.asyncExec(),this.running&&this.parent.$emit("commandAdd",A),this.isAdd=!0):e=await A.asyncExec(),this._execRunning=!0,this.running&&this.parent.$emit("CommandExec",A),e}add(t){const A=new uh(this.parent,t);let e;return this._execRunning=!1,this.running&&this.parent.$emit("CommandBeforeExec",A),this.canExecute&&this.isAdd&&!t.noAdd?(this.isAdd=!1,this._addState(A),e=A.exec(),this.running&&this.parent.$emit("commandAdd",A),this.isAdd=!0):e=A.exec(),this._execRunning=!0,this.running&&this.parent.$emit("CommandExec",A),e}async undo(){if(this.canUndo()){this.isAdd=!1,this._undoRunning=!1,this.index--;const t=this.state[this.index];this.parent.$emit("commandBeforeUndo",t),await t.undo(this.parent),this._undoRunning=!0,this.isAdd=!0,this.parent.$emit("commandUndo",t)}return this}async redo(){if(this.canRedo()){this.isAdd=!1,this._redoRunning=!1;const t=this.state[this.index];this.parent.$emit("commandBeforeRedo",t),await t.redo(this.parent),this.index++,this._redoRunning=!0,this.isAdd=!0,this.parent.$emit("commandRedo",t)}return this}canAdd(){return this.canExecute&&this._execRunning}canUndo(){return this.canExecute&&this.running&&this._undoRunning&&!!this.index&&this._execRunning}canRedo(){return this.canExecute&&this.running&&this._redoRunning&&this.index!==this.state.length&&this._execRunning}clearCommand(){this.state.forEach((t=>t.destroy())),this.state=[],this.index=0}toLog(){return this.state.map((t=>ou(t.options.args)))}toLogStr(){return JSON.stringify(this.toLog(),((t,A)=>"handler"===t?A+"":A))}async recover(t=[],A=500){const e=this;console.log("恢复开始"),await async function n(i){const s=t[i];s&&await s.handler(e.parent,s),t[i+1]&&(await async function(t){return new Promise((A=>{setTimeout((()=>A(!0)),t)}))}(A),await n(i+1))}(0),console.log("恢复完成")}async recoverByStr(t){await this.recover(JSON.parse(t,((t,A)=>"handler"===t?new Function(`return ${A}`)():A)))}clear(){return this.clearCommand(),this.parent.$emit("commandClear"),this}destroy(){return this.clearCommand(),this.running=null,this._redoRunning=null,this._undoRunning=null,this._execRunning=null,this.isAdd=null,this.index=null,this.state=null,this.parent=null,this.options=null,this}}let dh=0;function ph(){return dh++}class gh{constructor(t){this.parent=t,this.module=t.module,this.compMap=new Map,this.uiCompMap=new Map,this.compUidMap=new Map}getCompById(t){return this.compMap.get(t)}getCompByGlobalId(t){return this.compUidMap.get(t)}getUiCompById(t){return this.uiCompMap.get(t)}addComp(t){this.compMap.set(t.$options.id,t)}addUiComp(t,A){this.uiCompMap.set(t.$options.id,A),this.compUidMap.set(t.$options.globalId,t)}removeComp(t){this.compMap.delete(t.$options.id)}removeUiComp(t){this.uiCompMap.delete(t.$options.id),this.compUidMap.delete(t.$options.globalId)}create(t,A={},e={},n={}){const i=A.type,s=this.module.getElement(i);if(s){const i=new s(t,A,e,n);return this.addComp(i),i}console.error(i+"没有注册方法")}createAdapter(t,A,e,n){const i=function(t,A){switch(A?.thingType){case"Campus":return"CampusAdapter";case"LowCode":return"LowCodeAdapter";case"Map":return"MapAdapter";case"Topology":return"TopologyAdapter";default:return t.type}}(A,e),s=this.module.getAdapter(i);if(s)return new s(t,A,e,n);console.error(i+"没有注册")}getType(t){return this.module.getElementType(t)}getAdapterType(t){return this.module.getAdapterType(t)}addCompUi(t,A){this.compUidMap.set(t,A)}destroy(){this.compMap.clear(),this.uiCompMap.clear(),this.compUidMap.clear(),this.parent=null,this.module=null}}class fh{constructor(t){this.parent=t,this.globalManager=t.$options.globalManager,this.compMap=new Map,this.uiCompMap=new Map,this.compUidMap=new Map}getCompById(t){return this.compMap.get(t)}getCompByUid(t){return this.compUidMap.get(t)}getUiCompById(t){return this.uiCompMap.get(t)}addComp(t){this.compMap.set(t.$options.id,t),this.globalManager.addComp(t)}addUiComp(t,A){this.uiCompMap.set(t.$options.id,A),this.compUidMap.set(A.id,t),this.globalManager.addUiComp(t,A)}removeComp(t){this.compMap.delete(t.$options.id),this.globalManager.removeComp(t)}removeUiComp(t,A){this.uiCompMap.delete(t.$options.id),this.compUidMap.delete(t.id),this.globalManager.removeUiComp(t,A)}create(t,A,e,n){const i=this.globalManager.create(t,A,e,n);return this.addComp(i),i}createAdapter(t,A,e,n){return this.globalManager.createAdapter(t,A,e,n)}getType(t){return this.globalManager.getType(t)}getAdapterType(t){return this.globalManager.getAdapterType(t)}addCompUi(t,A){this.compUidMap.set(t,A),this.globalManager.addCompUi(t,A)}getAllChildren(t,A){const e=[];return function t(n=[]){n.forEach((n=>{t(n.children),A?(Array.isArray(A)||(A=[A]),A.includes(n.type)&&e.push(n)):e.push(n)}))}(t.children),e}destroy(){this.compMap.clear(),this.uiCompMap.clear(),this.compUidMap.clear(),this.parent=null,this.globalManager=null}}const Bh={style:{width:1920,height:1080,backgroundColor:"rgba(40, 42, 46, 1)",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"100% 100%"}},mh={isEdit:!0,autoResize:!1,autoCreateCanvas:!1,notSelectLayer:!0,theme:{ruler:{color:"#121314",width:21,lineStyle:{color:"#FF4D4F",width:1,activeColor:"#ED9692"},tick:{textColor:"rgba(255, 255, 255, 0.3)",lineWidth:1,lineColor:"rgba(255, 255, 255, 0.16)",lineLong:16,lineShort:4},iconColor:"",border:"none",icon:{borderColor:"transparent"}},alignmentLines:{color:"#FF4D4F",width:1,distanceStyle:{color:"#FF4D4F",width:1}}},watermark:{enable:!1}};class wh{constructor(t,A={}){this.parent=t,this.root=t.root,this.dataManager=t.parent,this.options=Xi(A),this.list=[],this.name=A.name,this.code=A.code,this.callbackArgs=Xi(A.callbackArgs)}addUse(t){this.list.find((A=>A===t))||this.list.push(t)}removeUse(t){const A=this.list.findIndex((A=>A===t));if(~A){this.list.splice(A,1)[0].remove(this.name)}}updateName(t){this.name=t}updateData(t,A){this.code=t,this.callbackArgs=A,this.list.forEach((t=>{t.parent.refresh()}))}execute(t){return this.parent.execute(this,t)}get(){const{options:t,name:A,list:e}=this;return{options:Xi(t),name:A,useCount:e.length}}clear(){[...this.list].forEach((t=>t.remove(this))),this.list=[]}destroy(){this.clear(),this.name=null,this.code=null,this.callbackArgs=null,this.list=null,this.options=null,this.dataManager=null,this.root=null,this.parent=null}}class yh{constructor(t){this.parent=t,this.root=t.root,this.filterList=null,this.options=null}init(){this.filterList=[],this.options=null}addFilterList(t={}){this.options=t;const A=t.dataFilters||[];this.filterList=A.map((t=>new wh(this,t))),this.filterList.forEach((t=>{this.root._update("data:filterAdd",t,null)}))}add(t={},A=null){let e=this.getFilterByName(t.name);return e||(e=new wh(this,t),Wi(A)?this.filterList.splice(A,0,e):this.filterList.push(e),this.root._update("data:filterAdd",e,null)),e}getFilterByName(t){return this.filterList.find((A=>A.name===t))}getFilterIndex(t){return this.filterList.findIndex((A=>A===t))}toJSON(){return this.filterList.map((t=>({name:t.name,code:t.code,callbackArgs:Xi(t.callbackArgs)})))}updateName(t,A){return!(!t||!A||this.getFilterByName(A))&&(t.updateName(A),!0)}updateData(t,A,e=[]){return t.updateData(A,e),this}execute(t,A){const e={};let n;t.callbackArgs.forEach((t=>{e[t]=this.parent.filterArgs[t]}));try{n=new Function("data","callbackArgs",t.code)(Xi(A),e)}catch(t){n=t.message}return n}test(t,A){return this.execute(t,A)}remove(t){t.destroy();const A=this.filterList.findIndex((A=>A===t));if(~A)return this.filterList.splice(A,1),this.root._update("data:filterRemove",null,{name:t.name,code:t.code,callbackArgs:Xi(t.callbackArgs)}),t}clear(){[...this.filterList].forEach((t=>{t.destroy()})),this.filterList=[]}destroy(){this.clear(),this.options=null,this.filterList=null,this.root=null,this.parent=null}}class Ch{constructor(t){this.parent=null,this.root=null,this.restDataManager=null,this.globalDataManager=null,this.config=null,this.filterManager=null,this.started=null,this.dataList=null,this.filterArgs=null,this._begin(t)}_begin(t){return this.parent=t,this.root=t,this.globalDataManager=t.$options.globalDataManager,this.config=this.globalDataManager.config,this.restDataManager=this.globalDataManager.restDataManager,this.filterManager=new yh(this),this.started=null,this.dataList=null,this.filterArgs=null,this.globalDataManager.addManager(this),this.parent.$on("hook:beforeCreate:Canvas",this.beforeCreateCanvas,this),this.parent.$on("hook:mounted:Ui",this.start,this),this}init(){return this.started=!1,this.dataList=[],this.filterManager.init(),this.filterArgs={},this}beforeCreateCanvas(t){return this.filterManager.addFilterList({dataFilters:Xi(t.$options?.kpOption?.dataFilters||[])}),this}_add(t){return this.dataList.find((A=>A===t))?console.warn("数据节点已经添加过了"):this.dataList.push(t),this}start(){if(!this.started){this.started=!0;const t=[];this.dataList.forEach((A=>{A.subscriber.subscriberList.length?t.push(A):A.start()})),t.forEach((t=>t.start()))}return this}stop(){return this.started&&(this.started=!1),this}remove(t){const A=this.dataList.findIndex((A=>A===t));return~A?this.dataList.splice(A,1):console.warn("没有数据节点需要删除"),this}clear(){const t=[...this.dataList];t.forEach((t=>t.destroy())),this.dataList=[],this.filterManager.clear();for(const A of t)if(A.parent){const t=A.parent.$parentUi.isTopUi?A.parent.$parent.id:`${A.parent.$parentUi.$parent.$parent.id}/${A.parent.$parent.id}`;this.restDataManager.removeQueueById(t)}return this.filterArgs={},this}toJSON(){const{dataList:t}=this,A={};for(const e in t){const n=t[e];A[e]=n.toJSON()}return A.global=this.filterManager.toJSON(),A}destroy(){return this.globalDataManager.removeManager(this),this.parent.$off("hook:beforeCreate:Canvas",this.beforeCreateCanvas,this),this.parent.$off("hook:mounted:Ui",this.start,this),this.clear(),this.globalDataManager=null,this.restDataManager=null,this.filterManager=null,this.config=null,this.dataList=null,this.started=null,this.filterArgs=null,this}}let Qh;function vh(t="div",A={}){const e=document.createElement(t);return bh(e,A),e}function bh(t,A={}){Object.keys(A).forEach((e=>{t.style[e]=A[e]}))}class Uh{constructor(t){this.$ui=t,this.$canvas=null,this.$parentUi=null,this.$parentCanvas=null,this.$parentTransitionC=null,this.$topUi=null,this.$topCanvas=null,this.enterRootDom=null,this.enterParentDom=null,this.uiStyle=null,this.topCanvasContentStyle=null,this.isLeaveTopUi=null,this.isTopUi=null}init(){this.$canvas=this.$ui.$canvas,this.$parentUi=this.$ui.$parentUi,this.$parentCanvas=this.$ui.$parentUi?.$canvas,this.$parentTransitionC=this.$ui.$parentUi?.$options.transitionC,this.$topUi=this.$ui.$topUi,this.$topCanvas=this.$ui.$topUi.$canvas,this.isTopUi=this.$ui.isTopUi,this.uiStyle=null,this.topCanvasContentStyle=null,this.isLeaveTopUi=this.$parentUi===this.$topUi,Qh||(Qh=vh("div",{display:"none",position:"relative",width:"100%",height:"100%",backgroundColor:"#282A2E"}),this.$topCanvas.$el.appendChild(Qh)),this.enterRootDom=Qh,this.isTopUi||this.enterParentDom||(this.enterParentDom=vh("div",{display:"none",position:"relative",width:"100%",height:"100%"}))}_initTopCanvas(){this._setTopCanvasProps({lock:!1,width:this.$canvas.width,height:this.$canvas.height,style:{backgroundColor:"transparent",backgroundImage:""}})}_setTopCanvasProps(t={}){for(const A in t){const e=this.$topCanvas.$uiComp,n=t[A];if("object"==typeof n){const t=e[A];for(const A in n)t[A]=n[A]}else e[A]=n}}enter(){if(this.isSelected||!this.$parentUi.isSelected||this.isTopUi)return!1;const t=this.$topUi.$ui.UIManager;if(t.currentUI===this.$ui.$ui||!this.$ui.$ui)return!1;this.$ui.$emit("beforeEnterUi",this.$ui);const A=t.currentUI;return t.rootUI.emit("beforeEnterSubUI",{currentUI:A}),t.currentUI.selector.clear(),t.currentUI=this.$ui.$ui,this.uiStyle={overflow:this.$ui.$el.style.overflow},this.$ui.$el.style.overflow="",this.isLeaveTopUi&&this._enterFirst(),this._initTopCanvas(),this.$parentTransitionC.enterParentDom&&(this.$parentTransitionC.enterParentDom.style.display="none"),this.enterParentDom.appendChild(this.$ui.$el.parentNode),this.enterRootDom.appendChild(this.enterParentDom),this.enterParentDom.style.display="",this.$topCanvas.updateCanvasCenter(),this.isSelected=!0,this.$ui._updateSelect(),this.$ui.$canvas?._updateLayerSelect(),t.rootUI.emit("afterEnterSubUI",{currentUI:t.currentUI,prevUI:A}),this.$topUi._updateSelectUi(this.$ui),this.$ui.$emit("enteredUi",this.$ui),!0}_enterFirst(){this.topCanvasContentStyle={display:this.$topCanvas.$uiComp.contentEl.style.display},this.$topCanvas.$uiComp.contentEl.style.display="none",this.enterRootDom.style.display=""}exit(){if(!this.isSelected||this.isTopUi)return!1;this.$ui.$emit("beforeExitedUi",this.$ui);const t=this.$topUi.$ui.UIManager,A=t.currentUI;t.rootUI.emit("beforeExitSubUI",{currentUI:A}),t.currentUI.selector.clear(),t.currentUI.canvas.operation.hideSubRect(),this.$ui.$options.dynamicPanelList.forEach((t=>t.$ui.exit()));const e=t.stack.indexOf((t=>t===this));~e&&t.stack.splice(e,1),t.currentUI=this.$parentUi.$ui,this.isLeaveTopUi?this._exitFirst():(bh(this.$parentTransitionC.enterParentDom,{display:""}),this.$parentTransitionC._initTopCanvas()),bh(this.$ui.$el,this.uiStyle),this.uiStyle={},this.$ui.$uiComp.rootEl.appendChild(this.$ui.$uiComp.el.parentNode),this.enterParentDom.remove(),this.$topCanvas.updateCanvasCenter(),this.isSelected=!1,t.rootUI.emit("afterExitSubUI",{currentUI:t.currentUI,prevUI:A}),this.$topUi._updateSelectUi(this.$parentUi),this.$ui?.$parentUi.$canvas?._updateLayerSelect(),this.$ui.$emit("exitedUi",this.$ui),this.$ui.$parentContainer.select(!0)}_exitFirst(){bh(this.$topCanvas.$uiComp.contentEl,this.topCanvasContentStyle),this.topCanvasContentStyle=null,bh(this.enterRootDom,{display:"none"}),this._setTopCanvasProps({lock:this.$parentCanvas.lock,width:this.$parentCanvas.width,height:this.$parentCanvas.height,style:{backgroundColor:this.$parentCanvas.backgroundColor,backgroundImage:this.$parentCanvas.backgroundImage}})}destroy(){this.isTopUi&&(this.enterRootDom.remove(),Qh=null),this.enterParentDom.remove(),this.isTopUi=null,this.isLeaveTopUi=null,this.topCanvasContentStyle=null,this.uiStyle=null,this.enterParentDom=null,this.enterRootDom=null,this.$topCanvas=null,this.$topUi=null,this.$parentTransitionC=null,this.$parentCanvas=null,this.$parentUi=null,this.$canvas=null,this.$ui=null}get isSelected(){return this.$ui?.isSelected}set isSelected(t){this.$ui.isSelected=t}}const Fh=t=>{if(THING&&THING.CODELESS&&THING.CODELESS.BaseNode){class A extends THING.CODELESS.BaseNode{isEntrance(){return!0}onExecute(A,e,n){t.onExecute(A,e,n,this)}onStop(){t.onStop(this)}}return A.config={name:t.name,id:t.id,group:"THING-UI",inputs:[{name:"显示",type:"exec"},{name:"隐藏",type:"exec"},{name:"数据",type:"any"}],outputs:[]},A}return console.warn("请先加载蓝图类"),null};class Ih{constructor(t,A={},e={}){this.$events={elements:{},events:{}},this.$topUi=null,this.$parentUi=null,this.$parentContainer=null,this.$parent=null,this.$root=null,this.$manager=null,this.$adapterManager=null,this.$dataManager=null,this.$command=null,this.$canvas=null,this.$selectComponent=null,this.$selectLayer=null,this.$options={id:ph(),parentGlobalId:null,globalId:null,type:null,root:null,topUi:null,canvas:null,dom:null,globalManager:null,manager:null,dataManager:null,globalDataManager:null,status:null,isSelect:!0,isEdit:null,events:{element:{},events:{}},def:null,defOptions:null,options:null,kpOption:null,config:null,rootConfig:null,scene:null,sceneId:null,dynamicPanelList:null,citePanelList:null,enableBluePrint:null,enableTwin:null,transitionC:null,twinAdapterList:null},this.canvasRadio=null,this.isUi=!0,this.isTopUi=null,this.isSelected=null,this.mouseEvent=null,this.$mutual=null,this.rulerVisible=null,this.alignmentVisible=null,this.$jsCode=null,this.$bluePrint=null,this.moveCanvasEndTime=null,this.$manager=null,this.$adapterManager=null,this.$complete=null,this._beforeInit(),this._initBegin(t,A,e),this.$on("hook:selectLayer",this._updateSelectLayer,this)}_beforeInit(){return this}_initBegin(t,A={},e={}){window.conch&&window.conch?.__globalVar?.resource&&(window.conch.__globalVar.resource.fontOptimize=!!t.$options.rootConfig.fontOptimize);let n="";return this.$options.root=this,this.$parent=t,this.$options.topUi=t.$options.topUi||this,this.$topUi=this.$options.topUi,this.$root=this.$options.root,this.$parentUi=this.$parent.$root,t.$parent&&(this.$parentContainer=t.$parent.$parent,n=this.$parentContainer.$options.globalId),this.$options.rootConfig=t.$options.rootConfig,this.$adapterManager=null,this.$options.options=A,this.$options.scene=A.option,this.$options.sceneId=A.option?.id,this.$options.dynamicPanelList=[],this.$options.citePanelList=[],this.$options.enableBluePrint=!e.disableBluePrint,this.$options.enableTwin=!e.disableTwin,this.$options.canvas=null,this.$options.config=e,this.$options.config=e,this.$options.parentGlobalId=n,this.$options.globalId="",this.$options.globalManager=t.$options.globalManager,this.$options.type=t.$options.globalManager.getType(this),this.$options.manager=new fh(this),this.$options.isEdit=t.$options.isEdit,this.$options.globalDataManager=t.$options.globalDataManager,this.$options.dom=e.dom,this.$selectComponent=[],this.$selectLayer=null,this.rulerVisible=null,this.alignmentVisible=null,this.$mutual=null,this.$jsCode=null,this.$command=null,this.$bluePrint=null,this.$manager=this.$options.manager,this.$complete=!1,this.$options.isEdit&&(this.$options.transitionC=new Uh(this)),this.$options.twinAdapterList=[],this}async _create(){const t=this.$options.rootConfig;await this._load(),this.$options.dataManager=this.$dataManager=new Ch(this);const A=this.$options.def.scene;return this.$canvas=this.$options.canvas=this.$manager.create(this,A,A.kpOption,{}),this.$mutual=new rs(this),this.$jsCode=new ws(this),this.$command=new hh(this,{disable:!!this.$options.config.disableCommand}),this.$dataManager.init(),this.$command.init(),this.$jsCode.init(this.$options.scene.jsCode),this.$options.enableBluePrint&&(this.$bluePrint=new ch(this,t.Blueprint,t.BlueprintModules),this.$bluePrint.init(this.$options.scene.bluePrint)),this}async _load(){const t=this.getDef(this.$options.scene);t?(this.$options.def=t,await this.loadConfig()):this.$options.def=this.getDefaultDef(),this.loadUiParams()}getDef(t={}){let A=null;if(t.def){if("object"==typeof t.def)return t.def;try{A=ms(this.transformDef(JSON.parse(t.def)),{isEdit:this.$options.isEdit})}catch(t){console.error("解析定义文件失败",t)}}return A}getDefaultDef(){return{scene:{type:"Canvas",option:{id:this.getUid("Canvas"),name:"",visible:!0,isLock:!1,scaleMode:1,style:Bh.style}}}}async _mount(){return await this._initComp(),this.$options.events=this._initEvent(),await this._mountCanvas(),this.$options.isEdit&&this.$options.transitionC.init(),this.$complete=!0,this}loadUiParams(){const t=this.$options.config,A=t.uiParams||{},e=this.$options.def,n=Xi(e.kpUiOption)||{},i=Xi(e.scene.option),s=Xi(mh);s.isEdit=A.isEdit,s.autoResize=!s.isEdit,t.enableWatermark&&(s.watermark.enable=!0),A.option&&s.assign(i,A.option),A.config&&s.assign(t,A.config),s.prefix=t.prefix||"",this.$options.uiOption=Object.assign(i,n),this.$options.uiConfig=s}async loadConfig(){const t=this.$options.scene;let A=null;if(t.config){if("object"==typeof t.config)A=t.config;else try{A=JSON.parse(t.config)}catch(t){console.error("资源解析失败",t.message),this.$emit("parseConfigError",A,t)}if(A){A.topology&&A.topology.length&&window.go&&delete window.go;const t=await ss(A,this.$options.rootConfig);t&&(t.errorComponentList.length&&console.error("组件加载失败",t.errorComponentList),t.errorImgList.length&&console.error("图片加载失败",t.errorImgList)),this.$emit("configLoaded",A,t)}}return this}async _mountCanvas(){await this.$canvas.init()}async _initComp(){const t=await this._initCompCreateUi();if(!t)throw new Error("没有ui实例");return this._initGlobalId(t.id),this.$options.manager.addUiComp(this,t),t.__DIAGRAM__=this,this.$emit("elementMounted",this),this.$emit("elementMounted:"+this.$options.type,this),this}_initGlobalId(t){const A=this.$options.parentGlobalId;return this.$options.globalId=A?A+"/"+t:t,this}_initCompCreateUi(){const{uiOption:t,uiConfig:A,dom:e}=this.$options;try{return new $n(e,Xi(t),Xi(A))}catch(t){console.warn("THING.UI new UI报错",t)}}_initEnd(){return this}async init(){return this.$options.status||(this.$options.status=!0,this.$emit("beforeCreate",this),this.$emit("beforeCreate:Ui",this),await this._create(),this.$emit("created",this),this.$emit("created:Ui",this),await this._mount(),this.$emit("mounted",this),this.$emit("mounted:Ui",this),this._initEnd()),this}_update(t,A,e){return this.$emit("update",this,t,A,e),this}_updateContextmenu(t,A){this.$emit("updateContextmenu",t,A)}_updateSelectLayer(t){this.$selectLayer=t}toSceneJSON(){const t=this.toJSON(),{width:A,height:e}=t.scene.option.style,n={width:A,height:e},i=this.getSceneConfigByDef(t),s=this.$jsCode.toJSON(),r=this.$bluePrint&&this.$bluePrint.toJSON(),o={def:JSON.stringify(t),config:JSON.stringify(i),props:JSON.stringify(n),jsCode:s};return this.$options.enableBluePrint&&(o.bluePrint=r?JSON.stringify(r):""),o}toJSON(){const t=JSON.parse(this.$uiComp.toJSON()),A=this.$canvas.toJSON(),e={},n={};return function t(A){const{children:i,option:s,kpOption:r}=A;s.adapter&&(e[s.id]=s.adapter,s.adapter=s.adapter.type),r&&(n[s.id]=r,delete A.kpOption),i&&i.forEach((A=>{t(A)}))}(A),Zi(t.scene.hideAllLine)||(A.hideAllLine=t.scene.hideAllLine),Zi(t.scene.lines)||(A.lines=t.scene.lines),{scene:A,userData:e,kpUserData:n,kpUiOption:{uid:this.$uiComp.id},version:t.version,kpVersion:2}}getSceneConfigByDef(t){const A=this._getDefConfig(JSON.stringify(t)),{component:e,kpUserTopology:n,campusEffect:i,twinConfig:s,scenes:r}=this._getConfigData(t);return{component:Array.from(e),scenes:Array.from(r),img:A.imageList,fonts:A.fontList,material:A.material,...s,topology:Array.from(n),campusEffect:i,num:t.scene.children.length}}_getDefConfig(t){const A=this.$topUi.$parent.$options.regs.font,e=this.$topUi.$parent.$options.regs.image,n=this.$topUi.$parent.$options.regs.material,i=this.$topUi.$parent.$options.fontList,s={},r={},o=[],a=t.match(e);a&&Array.from(new Set(a)).forEach(((t,A)=>{s[A]=t}));const l=t.match(n);l&&Array.from(new Set(l)).forEach((t=>{o.push(t)}));const c=A&&t.match(A);return c&&Array.from(new Set(c)).forEach((t=>{t&&(r[t]=i.find((A=>A.psName===t)).file)})),{imageList:s,fontList:r,material:o}}_getConfigData(t){const A={Map:{type:"map",value:"id"},Campus:{type:"campus",value:"code"},LowCode:{type:"lowCode",value:"name"}},e=new Set,n=new Set,i=new Set,s={},r={map:[],campus:[],lowCode:[]};return function t(o){const a=Object.entries(o.kpUserData).map((t=>({adapter:o.userData[t[0]],kpUserData:t[1]})));a.filter((t=>"ConchAdapter"===t.adapter?.type)).forEach((t=>{const{isThing:n,thingType:o,thingOpts:a,effectTheme:l}=t?.kpUserData.adapter;if(e.add(t.adapter.name.substr(1)),n)if("Topology"===o)i.add(a.resourceId);else{const{type:t,value:e}=A[o];r[t]?.push(a[e]);const{example:n,templateId:i}=l||{};"Campus"===o&&l&&i&&Object.assign(s,{example:n,templateId:i})}})),a.filter((t=>"OnlineUIAdapter"===t.adapter?.type)).map((t=>t.kpUserData.adapter.opts?.id)).forEach((t=>{n.add(t)})),a.filter((t=>"UIAdapter"===t.adapter?.type&&!t.kpUserData?.adapter?.isOnlineUIAdapter)).map((t=>t.adapter.opts)).forEach((A=>{t(A)}))}(t),{component:e,kpUserTopology:i,campusEffect:s,twinConfig:r,scenes:n}}updateCompsAttrs(t=[]){t.forEach((t=>t.comp.updateAttrs(t.attrs)))}async updateAdapters(t=[],A={}){const e=[],n=[];return t.forEach((t=>{t.comp.adapter?n.push(t):e.push(t.comp.id)})),e.length&&console.warn("空图表无法更新适配器 ",e.join(",")),Promise.all(n.map((({comp:t,option:A,kpOption:e,config:n})=>t.updateAdapter(A,e,n))))}dismissGroups(t=[]){const A=[],e=[];return t.forEach((t=>{"Group"===t.type?e.push(t):A.push(t)})),A.length&&console.warn("非编组无法解散 "+A.join(",")),e.forEach((t=>t.dismiss())),this}destroyComps(t=[]){return t.forEach((t=>t.destroy())),this}_updateSelect(){if(!this.$options.isSelect)return;document.activeElement!==document.body&&document.activeElement.blur();const t=this.$ui.selector.getSelectElements();!t.length&&this.$canvas&&t.push(this.$canvas.$uiComp),this.__updateSelect(t.map((t=>t.__DIAGRAM__)))}__updateSelect(t=[]){this.$selectComponent=t,this.$emit("updateSelectComponent",t)}select(t){if(Array.isArray(t)||(t=[t]),t.length){const A=t.filter((t=>"Canvas"===t.type))[0];A?A.select():this.$ui.selector.select(...t.map((t=>t.$uiComp)))}else console.warn("没有需要选择的节点");return this}unSelect(t){Array.isArray(t)||(t=[t]),this.$ui.selector.unselect(t.map((t=>t.$uiComp)))}alignTo(t,A){this.$ui.alignTo(t,A.map((t=>t.$uiComp))),A.forEach((t=>{t.$updateUiAttr("top").$updateUiAttr("left")}))}equidistant(t,A){this.$ui.equidistant(t,A.map((t=>t.$uiComp))),A.forEach((t=>{t.$updateUiAttr("top").$updateUiAttr("left")}))}enter(){return!!this.$options.isEdit&&this.$options.transitionC.enter()}exit(){if(this.$options.isEdit)return this.$options.transitionC.exit()}containerResize(){this.$canvas.containers.forEach((t=>t.$uiComp.adapterResize()))}getUid(t){const A=t.toLowerCase()+"-"+window.Math.random().toString(24).slice(-10);return this.$ui?.query("#"+A)?this.getUid(t):A}queryById(t){return this.$options.manager.getCompByUid(t)}$queryById(t){return this.queryById(t)}$addEventListener(t,A,e,n){return Ki(this,t,A,e,n)}$removeEventListener(t,A,e,n){return Ri(this,t,A,e,n)}$on(t,A,e){return ji(this,t,A,e)}$once(t,A,e){return Pi(this,t,A,e)}$off(t,A,e){return Gi(this,t,A,e)}$emit(t,...A){return Vi(this,t,A),this.$topUi.$parent.$emit(t,...A),this.isSelected&&this.$topUi.$parent.$emit("now:"+t,...A),this.$topUi===this&&this.$parent.$emit("top:"+t,...A),this}async $syncEmit(t,...A){return await zi(this,t,A),this.isSelected&&await this.$topUi.$parent.$syncEmit(t,...A),this.$topUi===this&&await zi(this,"top:"+t,A),this}enterInsidePreview(t){this.$ui.enterInsidePreview(t.$uiComp)}exitInsidePreview(){this.$ui.exitInsidePreview()}_initEvent(){const t=this,A=this.$ui,e=t=>{const{isContainer:A,isGroup:e,isLayer:n}=t;t.bound={width:t.width,height:t.height},(A||e||n)&&function(t){t.toBlueprintNode=Eh,t.onExecute=Mh,t.onStop=Lh}(t)},n=()=>{this._updateSelect()},i=t=>{const A=t.__DIAGRAM__;A&&(A.isSelected=!0,this.$emit("select",A))},s=t=>{const A=t.__DIAGRAM__;A&&(A.isSelected=!1,this.$emit("unSelect",A))},r=t=>{const A=t.__DIAGRAM__;A&&(A.isSelected=!0,this.$emit("selectLayer",A))},o=t=>{const A=t.__DIAGRAM__;A&&(A.isSelected=!1,this.$emit("unSelectLayer",A))},a=t=>{this.$emit("enterInsidePreview",t.__DIAGRAM__)},l=()=>{this.$emit("exitInsidePreview")};let c=null,u=!1;const h=()=>{u=!1,c=new Map;const t=t=>{c.has(t.id)||c.set(t.id,{comp:t,top:t.top,left:t.left})};this.$selectComponent.forEach((A=>{"Group"===A.type&&A.containers.forEach(t),t(A)}))},d=t=>{t.$updateUiAttr("top"),t.$updateUiAttr("left")},p=()=>{u=!0,this.$selectComponent.forEach(d)},g=()=>{if(!u)return;u=!1;const t=new Map;this.$selectComponent.forEach((A=>{"Group"===A.type?(A.groups.forEach(d),A.containers.forEach(d)):"Group"===A.$parent.type&&d(A.$parent),d(A),function(A){if(t.has(A.id))return;const e=c.get(A.id);t.set(A.id,{comp:A,attrs:[{name:"top",value:A.top,oldValue:e.top},{name:"left",value:A.left,oldValue:e.left}]})}(A)})),this.updateCompsAttrs(Array.from(t.values())),t.clear(),c=null};let f=null;const B=()=>{function t(t){f.has(t.id)||f.set(t.id,{comp:t,width:t.width,height:t.height,left:t.left,top:t.top})}f=new Map,this.$selectComponent.forEach((A=>{"Group"===A.type?A.containers.forEach(t):t(A)}))},m=t=>{t.$updateUiAttr("width"),t.$updateUiAttr("height"),t.$updateUiAttr("top"),t.$updateUiAttr("left")},w=()=>{this.$selectComponent.forEach(m)},y=()=>{const t=new Map;function A(A){if(t.has(A.id))return;const e=f.get(A.id);t.set(A.id,{comp:A,attrs:[{name:"top",value:A.top,oldValue:e.top},{name:"left",value:A.left,oldValue:e.left},{name:"width",value:A.width,oldValue:e.width},{name:"height",value:A.height,oldValue:e.height}]})}this.$selectComponent.forEach((t=>{"Group"===t.type?(t.containers.forEach((t=>{m(t),A(t)})),t.groups.forEach(m),m(t)):(m(t),A(t))})),this.updateCompsAttrs(Array.from(t.values())),f=null,t.clear()},C=()=>{const t=[];this.$selectComponent.forEach((A=>{const e=A.rotate;A.$updateUiAttr("rotate"),t.push({comp:A,attrs:[{name:"rotate",value:A.rotate,oldValue:e}]})})),this.updateCompsAttrs(t)},Q=t=>{t.__DIAGRAM__&&t.__DIAGRAM__.$updateUiAttr("visible")},v=t=>{t.__DIAGRAM__&&t.__DIAGRAM__.$updateUiAttr("visible")},b=t=>{t.currentTarget===A.el?this.mouseEvent=t:this.mouseEvent=null},U=()=>{this.mouseEvent=null},F=({parent:t})=>{const A=t.__DIAGRAM__;A&&this.$emit("componentComplete",A)};let I=!1;const E=()=>{I=!1},M=()=>{I=!0},L=()=>{t.moveCanvasEndTime=I?null:Date.now()};return A.on("created",e),A.on("selectElements",n),A.on("select",i),A.on("unSelect",s),A.on("selectLayer",r),A.on("unSelectLayer",o),A.on("enterInsidePreview",a),A.on("exitInsidePreview",l),A.on("graphMoveStart",h),A.on("graphMoving",p),A.on("graphMoveEnd",g),A.on("graphResizeStart",B),A.on("graphResizing",w),A.on("graphResizeEnd",y),A.on("graphRotateEnd",C),A.on("afterShow",Q),A.on("afterHidden",v),A.on("componentComplete",F),A.on("beforeMoveCanvas",E),A.on("moveCanvas",M),A.on("movedCanvas",L),A.el.addEventListener("mousemove",b),A.el.addEventListener("mouseleave",U),()=>{A.off("created",e),A.off("selectElements",n),A.off("select",i),A.off("unSelect",s),A.off("selectLayer",r),A.off("unSelectLayer",o),A.off("enterInsidePreview",a),A.off("exitInsidePreview",l),A.off("graphMoveStart",h),A.off("graphMoving",p),A.off("graphMoveEnd",g),A.off("graphResizeStart",B),A.off("graphResizing",w),A.off("graphResizeEnd",y),A.off("graphRotateEnd",C),A.off("afterShow",Q),A.off("afterHidden",v),A.el.removeEventListener("mousemove",b),A.el.removeEventListener("mouseleave",U),A.off("componentComplete",F),A.off("beforeMoveCanvas",E),A.off("moveCanvas",M),A.off("movedCanvas",L)}}transformDef(t){return fs(this.$ui,t)}_destroyBegin(){return this}_destroyComp(){const t=this.$uiComp;this.$options.manager.removeUiComp(this,t),delete t.__DIAGRAM__;try{t.destroy()}catch(t){console.warn("ui实例销毁失败",t)}return this}_destroyEvent(){return this.$options.events(),this}_destroy(){this.$canvas&&this.$canvas.destroy(),this._destroyEvent(),this.$dataManager.destroy(),this._destroyComp(),this.$options.manager.removeComp(this)}_destroyEnd(){return this.$options.manager.destroy(),this.$jsCode=null,this.$bluePrint=null,this.$mutual=null,this.moveCanvasEndTime=null,this.$dataManager=null,this.alignmentVisible=null,this.rulerVisible=null,this.$selectLayer=null,this.$selectComponent=null,this.$adapterManager=null,this.$manager=null,this.$parent=null,this.$parentContainer=null,this.$options.rootConfig=null,this.$options.manager=null,this.$options.dynamicPanelList=null,this.$options.citePanelList=null,this.$options.enableBluePrint=null,this.$options.enableTwin=null,this.$options.transitionC=null,this.$options.twinAdapterList=null,this.$options.parentGlobalId=null,this.$options.globalId=null,this.$options.topUi=null,this.$options.root=null,this.$options.parent=null,this.$options.kpOption=null,this.$options.config=null,this.$options.options=null,this.$options.dataManager=null,this.$options.globalDataManager=null,this.$options.type=null,this.$options.isDestroyed=null,this.$options.isEdit=null,this.$options.children=null,this}destroy(){return this._destroyBegin(),this._destroy(),this._destroyEnd(),this}get $ui(){return this.$options.manager?.getUiCompById(this.$options.id)}get $uiComp(){return this.$options.manager?.getUiCompById(this.$options.id)}get $el(){return this.$uiComp.el}}function Eh(){return Fh(this)}function Mh(t,A,e,n){const i=n.curExecName;"显示"===i?this.show():"隐藏"===i&&this.hidden()}function Lh(){}class _h extends Ih{_beforeInit(){return super._beforeInit(),this.isTopUi=!0,this.$selectUi=null,this}_initBegin(t,A,e){const n=t.config;return this.$topUi=this,this.$parentUi=this,this.$selectUi=this,this.isSelected=!0,this.$options.rootConfig=n,this.$options.dataManager=null,super._initBegin(t,A,e),this}async _create(){return await super._create(),this.$dataManager.init(),this}_initCompCreateUi(){const{uiOption:t,uiConfig:A}=this.$options;try{return new $n(this.$parent.dom,Xi(t),Xi(A))}catch(t){console.warn("THING.UI new UI报错",t)}}_initEvent(){const t=this.$ui,A=()=>{this.$canvas&&this.$parent.state.enableCanvasZoom&&this.$emit("uiCanvasZoom")},e=()=>{this.$emit("rulerChange")},n=()=>{setTimeout((()=>{this._updateTwinAdapters()}),0),this.$emit("resize",this)},i=()=>{},s=()=>{};t.on("canvasZoom",A),t.on("rulerChange",e),t.on("afterEnterSubUI",i),t.on("afterExitSubUI",s),window.addEventListener("resize",n);const r=super._initEvent();return()=>{r(),t.off("canvasZoom",A),t.off("rulerChange",e),t.off("afterEnterSubUI",i),t.off("afterExitSubUI",s),window.removeEventListener("resize",n)}}_initEnd(){this.$options.isEdit&&(this._updateRulerState(),this._updateAlignmentState()),this.$command.clear()}_updateTwinAdapters(){(this.$options.twinAdapterList||[]).forEach((t=>t&&t._initStyle()))}play(t){return this.$ui.play(t),setTimeout((()=>{this._updateTwinAdapters()}),0),this}edit(){return this.$ui.edit(),setTimeout((()=>{this._updateTwinAdapters()}),0),this}enter(){return!1}exit(){return!1}async parseJSON(t){this.$complete=!1,this.$emit("beforeParseJSON",this,t),this.$options.options=t,this.$options.scene=t,this.$options.sceneId=t?.id,await this._load(),this.$canvas.destroy(),this.$jsCode.destroy(),this.$mutual.destroy();const A=this.$options.def.scene;this.$canvas=this.$options.canvas=this.$manager.create(this,A,A.kpOption,{}),this.$mutual=new rs(this),this.$jsCode=new ws(this),this.$jsCode.init(this.$options.scene.jsCode),await this.$canvas.init(),this.$complete=!0,this.$emit("parseJSONed",this)}_updateSelectUi(t){this.$selectUi=t}_updateRulerState(){try{const t=this.$topUi.$uiComp;this.rulerVisible=t.el.contains(t._instance.ruler._elObject.ruler)}catch(t){console.warn("更新标尺状态错误",t)}}enableRuler(){try{this.$ui.ruler.enable()}catch(t){console.warn("启用标尺错误",t)}return this._updateRulerState(),this}disableRuler(){try{this.$ui.ruler.disable()}catch(t){console.warn("禁用标尺错误",t)}return this._updateRulerState(),this}_updateAlignmentState(){try{this.alignmentVisible=!!Array.from(this.$ui.canvas.el.children).find((t=>t.dataset&&"alignment"===t.dataset.id))}catch(t){console.warn("更新对齐线状态错误",t)}}enableAlignment(){try{this.$ui.enableAlignment()}catch(t){console.warn("启用对齐线错误",t)}return this._updateAlignmentState(),this}disableAlignment(){try{this.$ui.disableAlignment()}catch(t){console.warn("禁用对齐线错误",t)}return this._updateAlignmentState(),this}$startSelect(){return this.$options.isSelect=!0,this}$pauseSelect(){return this.$options.isSelect=!1,this}}
/*!
   * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
   * Released under MIT License
   */
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Dh=function(t,A){return Dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,A){t.__proto__=A}||function(t,A){for(var e in A)Object.prototype.hasOwnProperty.call(A,e)&&(t[e]=A[e])},Dh(t,A)};function $h(t,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function e(){this.constructor=t}Dh(t,A),t.prototype=null===A?Object.create(A):(e.prototype=A.prototype,new e)}var Sh=function(){return Sh=Object.assign||function(t){for(var A,e=1,n=arguments.length;e<n;e++)for(var i in A=arguments[e])Object.prototype.hasOwnProperty.call(A,i)&&(t[i]=A[i]);return t},Sh.apply(this,arguments)};function xh(t,A,e,n){return new(e||(e=Promise))((function(i,s){function r(t){try{a(n.next(t))}catch(t){s(t)}}function o(t){try{a(n.throw(t))}catch(t){s(t)}}function a(t){var A;t.done?i(t.value):(A=t.value,A instanceof e?A:new e((function(t){t(A)}))).then(r,o)}a((n=n.apply(t,A||[])).next())}))}function Th(t,A){var e,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=A.call(t,r)}catch(t){s=[6,t],n=0}finally{e=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function Hh(t,A,e){if(e||2===arguments.length)for(var n,i=0,s=A.length;i<s;i++)!n&&i in A||(n||(n=Array.prototype.slice.call(A,0,i)),n[i]=A[i]);return t.concat(n||A)}for(var Oh=function(){function t(t,A,e,n){this.left=t,this.top=A,this.width=e,this.height=n}return t.prototype.add=function(A,e,n,i){return new t(this.left+A,this.top+e,this.width+n,this.height+i)},t.fromClientRect=function(A,e){return new t(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height)},t.fromDOMRectList=function(A,e){var n=Array.from(e).find((function(t){return 0!==t.width}));return n?new t(n.left+A.windowBounds.left,n.top+A.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),kh=function(t,A){return Oh.fromClientRect(t,A.getBoundingClientRect())},Nh=function(t){for(var A=[],e=0,n=t.length;e<n;){var i=t.charCodeAt(e++);if(i>=55296&&i<=56319&&e<n){var s=t.charCodeAt(e++);56320==(64512&s)?A.push(((1023&i)<<10)+(1023&s)+65536):(A.push(i),e--)}else A.push(i)}return A},Kh=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var e=t.length;if(!e)return"";for(var n=[],i=-1,s="";++i<e;){var r=t[i];r<=65535?n.push(r):(r-=65536,n.push(55296+(r>>10),r%1024+56320)),(i+1===e||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Rh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jh="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ph=0;Ph<64;Ph++)jh[Rh.charCodeAt(Ph)]=Ph;for(var Gh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vh="undefined"==typeof Uint8Array?[]:new Uint8Array(256),zh=0;zh<64;zh++)Vh[Gh.charCodeAt(zh)]=zh;for(var Jh=function(t,A,e){return t.slice?t.slice(A,e):new Uint16Array(Array.prototype.slice.call(t,A,e))},Yh=function(){function t(t,A,e,n,i,s){this.initialValue=t,this.errorValue=A,this.highStart=e,this.highValueIndex=n,this.index=i,this.data=s}return t.prototype.get=function(t){var A;if(t>=0){if(t<55296||t>56319&&t<=65535)return A=((A=this.index[t>>5])<<2)+(31&t),this.data[A];if(t<=65535)return A=((A=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[A];if(t<this.highStart)return A=2080+(t>>11),A=this.index[A],A+=t>>5&63,A=((A=this.index[A])<<2)+(31&t),this.data[A];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Wh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xh="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Zh=0;Zh<64;Zh++)Xh[Wh.charCodeAt(Zh)]=Zh;var qh=10,td=13,Ad=15,ed=17,nd=18,id=19,sd=20,rd=21,od=22,ad=24,ld=25,cd=26,ud=27,hd=28,dd=30,pd=32,gd=33,fd=34,Bd=35,md=37,wd=38,yd=39,Cd=40,Qd=42,vd=[9001,65288],bd="×",Ud="÷",Fd=function(t,A){var e,n,i,s=function(t){var A,e,n,i,s,r=.75*t.length,o=t.length,a=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(r):new Array(r),c=Array.isArray(l)?l:new Uint8Array(l);for(A=0;A<o;A+=4)e=Vh[t.charCodeAt(A)],n=Vh[t.charCodeAt(A+1)],i=Vh[t.charCodeAt(A+2)],s=Vh[t.charCodeAt(A+3)],c[a++]=e<<2|n>>4,c[a++]=(15&n)<<4|i>>2,c[a++]=(3&i)<<6|63&s;return l}(t),r=Array.isArray(s)?function(t){for(var A=t.length,e=[],n=0;n<A;n+=4)e.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return e}(s):new Uint32Array(s),o=Array.isArray(s)?function(t){for(var A=t.length,e=[],n=0;n<A;n+=2)e.push(t[n+1]<<8|t[n]);return e}(s):new Uint16Array(s),a=Jh(o,12,r[4]/2),l=2===r[5]?Jh(o,(24+r[4])/2):(e=r,n=Math.ceil((24+r[4])/4),e.slice?e.slice(n,i):new Uint32Array(Array.prototype.slice.call(e,n,i)));return new Yh(r[0],r[1],r[2],r[3],a,l)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Id=[dd,36],Ed=[1,2,3,5],Md=[qh,8],Ld=[ud,cd],_d=Ed.concat(Md),Dd=[wd,yd,Cd,fd,Bd],$d=[Ad,td],Sd=function(t,A,e,n){var i=n[e];if(Array.isArray(t)?-1!==t.indexOf(i):t===i)for(var s=e;s<=n.length;){if((a=n[++s])===A)return!0;if(a!==qh)break}if(i===qh)for(s=e;s>0;){var r=n[--s];if(Array.isArray(t)?-1!==t.indexOf(r):t===r)for(var o=e;o<=n.length;){var a;if((a=n[++o])===A)return!0;if(a!==qh)break}if(r!==qh)break}return!1},xd=function(t,A){for(var e=t;e>=0;){var n=A[e];if(n!==qh)return n;e--}return 0},Td=function(t,A,e,n,i){if(0===e[n])return bd;var s=n-1;if(Array.isArray(i)&&!0===i[s])return bd;var r=s-1,o=s+1,a=A[s],l=r>=0?A[r]:0,c=A[o];if(2===a&&3===c)return bd;if(-1!==Ed.indexOf(a))return"!";if(-1!==Ed.indexOf(c))return bd;if(-1!==Md.indexOf(c))return bd;if(8===xd(s,A))return Ud;if(11===Fd.get(t[s]))return bd;if((a===pd||a===gd)&&11===Fd.get(t[o]))return bd;if(7===a||7===c)return bd;if(9===a)return bd;if(-1===[qh,td,Ad].indexOf(a)&&9===c)return bd;if(-1!==[ed,nd,id,ad,hd].indexOf(c))return bd;if(xd(s,A)===od)return bd;if(Sd(23,od,s,A))return bd;if(Sd([ed,nd],rd,s,A))return bd;if(Sd(12,12,s,A))return bd;if(a===qh)return Ud;if(23===a||23===c)return bd;if(16===c||16===a)return Ud;if(-1!==[td,Ad,rd].indexOf(c)||14===a)return bd;if(36===l&&-1!==$d.indexOf(a))return bd;if(a===hd&&36===c)return bd;if(c===sd)return bd;if(-1!==Id.indexOf(c)&&a===ld||-1!==Id.indexOf(a)&&c===ld)return bd;if(a===ud&&-1!==[md,pd,gd].indexOf(c)||-1!==[md,pd,gd].indexOf(a)&&c===cd)return bd;if(-1!==Id.indexOf(a)&&-1!==Ld.indexOf(c)||-1!==Ld.indexOf(a)&&-1!==Id.indexOf(c))return bd;if(-1!==[ud,cd].indexOf(a)&&(c===ld||-1!==[od,Ad].indexOf(c)&&A[o+1]===ld)||-1!==[od,Ad].indexOf(a)&&c===ld||a===ld&&-1!==[ld,hd,ad].indexOf(c))return bd;if(-1!==[ld,hd,ad,ed,nd].indexOf(c))for(var u=s;u>=0;){if((h=A[u])===ld)return bd;if(-1===[hd,ad].indexOf(h))break;u--}if(-1!==[ud,cd].indexOf(c))for(u=-1!==[ed,nd].indexOf(a)?r:s;u>=0;){var h;if((h=A[u])===ld)return bd;if(-1===[hd,ad].indexOf(h))break;u--}if(wd===a&&-1!==[wd,yd,fd,Bd].indexOf(c)||-1!==[yd,fd].indexOf(a)&&-1!==[yd,Cd].indexOf(c)||-1!==[Cd,Bd].indexOf(a)&&c===Cd)return bd;if(-1!==Dd.indexOf(a)&&-1!==[sd,cd].indexOf(c)||-1!==Dd.indexOf(c)&&a===ud)return bd;if(-1!==Id.indexOf(a)&&-1!==Id.indexOf(c))return bd;if(a===ad&&-1!==Id.indexOf(c))return bd;if(-1!==Id.concat(ld).indexOf(a)&&c===od&&-1===vd.indexOf(t[o])||-1!==Id.concat(ld).indexOf(c)&&a===nd)return bd;if(41===a&&41===c){for(var d=e[s],p=1;d>0&&41===A[--d];)p++;if(p%2!=0)return bd}return a===pd&&c===gd?bd:Ud},Hd=function(t,A){A||(A={lineBreak:"normal",wordBreak:"normal"});var e=function(t,A){void 0===A&&(A="strict");var e=[],n=[],i=[];return t.forEach((function(t,s){var r=Fd.get(t);if(r>50?(i.push(!0),r-=50):i.push(!1),-1!==["normal","auto","loose"].indexOf(A)&&-1!==[8208,8211,12316,12448].indexOf(t))return n.push(s),e.push(16);if(4===r||11===r){if(0===s)return n.push(s),e.push(dd);var o=e[s-1];return-1===_d.indexOf(o)?(n.push(n[s-1]),e.push(o)):(n.push(s),e.push(dd))}return n.push(s),31===r?e.push("strict"===A?rd:md):r===Qd||29===r?e.push(dd):43===r?t>=131072&&t<=196605||t>=196608&&t<=262141?e.push(md):e.push(dd):void e.push(r)})),[n,e,i]}(t,A.lineBreak),n=e[0],i=e[1],s=e[2];"break-all"!==A.wordBreak&&"break-word"!==A.wordBreak||(i=i.map((function(t){return-1!==[ld,dd,Qd].indexOf(t)?md:t})));var r="keep-all"===A.wordBreak?s.map((function(A,e){return A&&t[e]>=19968&&t[e]<=40959})):void 0;return[n,i,r]},Od=function(){function t(t,A,e,n){this.codePoints=t,this.required="!"===A,this.start=e,this.end=n}return t.prototype.slice=function(){return Kh.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),kd=45,Nd=43,Kd=-1,Rd=function(t){return t>=48&&t<=57},jd=function(t){return Rd(t)||t>=65&&t<=70||t>=97&&t<=102},Pd=function(t){return 10===t||9===t||32===t},Gd=function(t){return function(t){return function(t){return t>=97&&t<=122}(t)||function(t){return t>=65&&t<=90}(t)}(t)||function(t){return t>=128}(t)||95===t},Vd=function(t){return Gd(t)||Rd(t)||t===kd},zd=function(t){return t>=0&&t<=8||11===t||t>=14&&t<=31||127===t},Jd=function(t,A){return 92===t&&10!==A},Yd=function(t,A,e){return t===kd?Gd(A)||Jd(A,e):!!Gd(t)||!(92!==t||!Jd(t,A))},Wd=function(t,A,e){return t===Nd||t===kd?!!Rd(A)||46===A&&Rd(e):Rd(46===t?A:t)},Xd=function(t){var A=0,e=1;t[A]!==Nd&&t[A]!==kd||(t[A]===kd&&(e=-1),A++);for(var n=[];Rd(t[A]);)n.push(t[A++]);var i=n.length?parseInt(Kh.apply(void 0,n),10):0;46===t[A]&&A++;for(var s=[];Rd(t[A]);)s.push(t[A++]);var r=s.length,o=r?parseInt(Kh.apply(void 0,s),10):0;69!==t[A]&&101!==t[A]||A++;var a=1;t[A]!==Nd&&t[A]!==kd||(t[A]===kd&&(a=-1),A++);for(var l=[];Rd(t[A]);)l.push(t[A++]);var c=l.length?parseInt(Kh.apply(void 0,l),10):0;return e*(i+o*Math.pow(10,-r))*Math.pow(10,a*c)},Zd={type:2},qd={type:3},tp={type:4},Ap={type:13},ep={type:8},np={type:21},ip={type:9},sp={type:10},rp={type:11},op={type:12},ap={type:14},lp={type:23},cp={type:1},up={type:25},hp={type:24},dp={type:26},pp={type:27},gp={type:28},fp={type:29},Bp={type:31},mp={type:32},wp=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(Nh(t))},t.prototype.read=function(){for(var t=[],A=this.consumeToken();A!==mp;)t.push(A),A=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var A=this.peekCodePoint(0),e=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Vd(A)||Jd(e,n)){var i=Yd(A,e,n)?2:1;return{type:5,value:this.consumeName(),flags:i}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ap;break;case 39:return this.consumeStringToken(39);case 40:return Zd;case 41:return qd;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ap;break;case Nd:if(Wd(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return tp;case kd:var s=t,r=this.peekCodePoint(0),o=this.peekCodePoint(1);if(Wd(s,r,o))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Yd(s,r,o))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(r===kd&&62===o)return this.consumeCodePoint(),this.consumeCodePoint(),hp;break;case 46:if(Wd(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var a=this.consumeCodePoint();if(42===a&&47===(a=this.consumeCodePoint()))return this.consumeToken();if(a===Kd)return this.consumeToken()}break;case 58:return dp;case 59:return pp;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===kd&&this.peekCodePoint(2)===kd)return this.consumeCodePoint(),this.consumeCodePoint(),up;break;case 64:var l=this.peekCodePoint(0),c=this.peekCodePoint(1),u=this.peekCodePoint(2);if(Yd(l,c,u))return{type:7,value:this.consumeName()};break;case 91:return gp;case 92:if(Jd(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return fp;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ep;break;case 123:return rp;case 125:return op;case 117:case 85:var h=this.peekCodePoint(0),d=this.peekCodePoint(1);return h!==Nd||!jd(d)&&63!==d||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ip;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),np;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),sp;break;case Kd:return mp}return Pd(t)?(this.consumeWhiteSpace(),Bp):Rd(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Gd(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Kh(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],A=this.consumeCodePoint();jd(A)&&t.length<6;)t.push(A),A=this.consumeCodePoint();for(var e=!1;63===A&&t.length<6;)t.push(A),A=this.consumeCodePoint(),e=!0;if(e)return{type:30,start:parseInt(Kh.apply(void 0,t.map((function(t){return 63===t?48:t}))),16),end:parseInt(Kh.apply(void 0,t.map((function(t){return 63===t?70:t}))),16)};var n=parseInt(Kh.apply(void 0,t),16);if(this.peekCodePoint(0)===kd&&jd(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var i=[];jd(A)&&i.length<6;)i.push(A),A=this.consumeCodePoint();return{type:30,start:n,end:parseInt(Kh.apply(void 0,i),16)}}return{type:30,start:n,end:n}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Kd)return{type:22,value:""};var A=this.peekCodePoint(0);if(39===A||34===A){var e=this.consumeStringToken(this.consumeCodePoint());return 0===e.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Kd||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:e.value}):(this.consumeBadUrlRemnants(),lp)}for(;;){var n=this.consumeCodePoint();if(n===Kd||41===n)return{type:22,value:Kh.apply(void 0,t)};if(Pd(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Kd||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:Kh.apply(void 0,t)}):(this.consumeBadUrlRemnants(),lp);if(34===n||39===n||40===n||zd(n))return this.consumeBadUrlRemnants(),lp;if(92===n){if(!Jd(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),lp;t.push(this.consumeEscapedCodePoint())}else t.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;Pd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||t===Kd)return;Jd(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var A="";t>0;){var e=Math.min(5e4,t);A+=Kh.apply(void 0,this._value.splice(0,e)),t-=e}return this._value.shift(),A},t.prototype.consumeStringToken=function(t){for(var A="",e=0;;){var n=this._value[e];if(n===Kd||void 0===n||n===t)return{type:0,value:A+=this.consumeStringSlice(e)};if(10===n)return this._value.splice(0,e),cp;if(92===n){var i=this._value[e+1];i!==Kd&&void 0!==i&&(10===i?(A+=this.consumeStringSlice(e),e=-1,this._value.shift()):Jd(n,i)&&(A+=this.consumeStringSlice(e),A+=Kh(this.consumeEscapedCodePoint()),e=-1))}e++}},t.prototype.consumeNumber=function(){var t=[],A=4,e=this.peekCodePoint(0);for(e!==Nd&&e!==kd||t.push(this.consumeCodePoint());Rd(this.peekCodePoint(0));)t.push(this.consumeCodePoint());e=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===e&&Rd(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),A=8;Rd(this.peekCodePoint(0));)t.push(this.consumeCodePoint());e=this.peekCodePoint(0),n=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((69===e||101===e)&&((n===Nd||n===kd)&&Rd(i)||Rd(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),A=8;Rd(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Xd(t),A]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),A=t[0],e=t[1],n=this.peekCodePoint(0),i=this.peekCodePoint(1),s=this.peekCodePoint(2);return Yd(n,i,s)?{type:15,number:A,flags:e,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:A,flags:e}):{type:17,number:A,flags:e}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(jd(t)){for(var A=Kh(t);jd(this.peekCodePoint(0))&&A.length<6;)A+=Kh(this.consumeCodePoint());Pd(this.peekCodePoint(0))&&this.consumeCodePoint();var e=parseInt(A,16);return 0===e||function(t){return t>=55296&&t<=57343}(e)||e>1114111?65533:e}return t===Kd?65533:t},t.prototype.consumeName=function(){for(var t="";;){var A=this.consumeCodePoint();if(Vd(A))t+=Kh(A);else{if(!Jd(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),t;t+=Kh(this.consumeEscapedCodePoint())}}},t}(),yp=function(){function t(t){this._tokens=t}return t.create=function(A){var e=new wp;return e.write(A),new t(e.read())},t.parseValue=function(A){return t.create(A).parseComponentValue()},t.parseValues=function(A){return t.create(A).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var A=this.consumeComponentValue();do{t=this.consumeToken()}while(31===t.type);if(32===t.type)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var A=this.consumeComponentValue();if(32===A.type)return t;t.push(A),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var A={type:t,values:[]},e=this.consumeToken();;){if(32===e.type||Mp(e,t))return A;this.reconsumeToken(e),A.values.push(this.consumeComponentValue()),e=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var A={name:t.value,values:[],type:18};;){var e=this.consumeToken();if(32===e.type||3===e.type)return A;this.reconsumeToken(e),A.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?mp:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),Cp=function(t){return 15===t.type},Qp=function(t){return 17===t.type},vp=function(t){return 20===t.type},bp=function(t){return 0===t.type},Up=function(t,A){return vp(t)&&t.value===A},Fp=function(t){return 31!==t.type},Ip=function(t){return 31!==t.type&&4!==t.type},Ep=function(t){var A=[],e=[];return t.forEach((function(t){if(4===t.type){if(0===e.length)throw new Error("Error parsing function args, zero tokens for arg");return A.push(e),void(e=[])}31!==t.type&&e.push(t)})),e.length&&A.push(e),A},Mp=function(t,A){return 11===A&&12===t.type||(28===A&&29===t.type||2===A&&3===t.type)},Lp=function(t){return 17===t.type||15===t.type},_p=function(t){return 16===t.type||Lp(t)},Dp=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},$p={type:17,number:0,flags:4},Sp={type:16,number:50,flags:4},xp={type:16,number:100,flags:4},Tp=function(t,A,e){var n=t[0],i=t[1];return[Hp(n,A),Hp(void 0!==i?i:n,e)]},Hp=function(t,A){if(16===t.type)return t.number/100*A;if(Cp(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},Op="grad",kp="turn",Np=function(t,A){if(15===A.type)switch(A.unit){case"deg":return Math.PI*A.number/180;case Op:return Math.PI/200*A.number;case"rad":return A.number;case kp:return 2*Math.PI*A.number}throw new Error("Unsupported angle type")},Kp=function(t){return 15===t.type&&("deg"===t.unit||t.unit===Op||"rad"===t.unit||t.unit===kp)},Rp=function(t){switch(t.filter(vp).map((function(t){return t.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[$p,$p];case"to top":case"bottom":return jp(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[$p,xp];case"to right":case"left":return jp(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[xp,xp];case"to bottom":case"top":return jp(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[xp,$p];case"to left":case"right":return jp(270)}return 0},jp=function(t){return Math.PI*t/180},Pp=function(t,A){if(18===A.type){var e=Zp[A.name];if(void 0===e)throw new Error('Attempting to parse an unsupported color function "'+A.name+'"');return e(t,A.values)}if(5===A.type){if(3===A.value.length){var n=A.value.substring(0,1),i=A.value.substring(1,2),s=A.value.substring(2,3);return zp(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(4===A.value.length){n=A.value.substring(0,1),i=A.value.substring(1,2),s=A.value.substring(2,3);var r=A.value.substring(3,4);return zp(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(r+r,16)/255)}if(6===A.value.length){n=A.value.substring(0,2),i=A.value.substring(2,4),s=A.value.substring(4,6);return zp(parseInt(n,16),parseInt(i,16),parseInt(s,16),1)}if(8===A.value.length){n=A.value.substring(0,2),i=A.value.substring(2,4),s=A.value.substring(4,6),r=A.value.substring(6,8);return zp(parseInt(n,16),parseInt(i,16),parseInt(s,16),parseInt(r,16)/255)}}if(20===A.type){var o=tg[A.value.toUpperCase()];if(void 0!==o)return o}return tg.TRANSPARENT},Gp=function(t){return 0==(255&t)},Vp=function(t){var A=255&t,e=255&t>>8,n=255&t>>16,i=255&t>>24;return A<255?"rgba("+i+","+n+","+e+","+A/255+")":"rgb("+i+","+n+","+e+")"},zp=function(t,A,e,n){return(t<<24|A<<16|e<<8|Math.round(255*n)<<0)>>>0},Jp=function(t,A){if(17===t.type)return t.number;if(16===t.type){var e=3===A?1:255;return 3===A?t.number/100*e:Math.round(t.number/100*e)}return 0},Yp=function(t,A){var e=A.filter(Ip);if(3===e.length){var n=e.map(Jp),i=n[0],s=n[1],r=n[2];return zp(i,s,r,1)}if(4===e.length){var o=e.map(Jp),a=(i=o[0],s=o[1],r=o[2],o[3]);return zp(i,s,r,a)}return 0};function Wp(t,A,e){return e<0&&(e+=1),e>=1&&(e-=1),e<1/6?(A-t)*e*6+t:e<.5?A:e<2/3?6*(A-t)*(2/3-e)+t:t}var Xp=function(t,A){var e=A.filter(Ip),n=e[0],i=e[1],s=e[2],r=e[3],o=(17===n.type?jp(n.number):Np(t,n))/(2*Math.PI),a=_p(i)?i.number/100:0,l=_p(s)?s.number/100:0,c=void 0!==r&&_p(r)?Hp(r,1):1;if(0===a)return zp(255*l,255*l,255*l,1);var u=l<=.5?l*(a+1):l+a-l*a,h=2*l-u,d=Wp(h,u,o+1/3),p=Wp(h,u,o),g=Wp(h,u,o-1/3);return zp(255*d,255*p,255*g,c)},Zp={hsl:Xp,hsla:Xp,rgb:Yp,rgba:Yp},qp=function(t,A){return Pp(t,yp.create(A).parseComponentValue())},tg={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Ag={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,A){return A.map((function(t){if(vp(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},eg={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ng=function(t,A){var e=Pp(t,A[0]),n=A[1];return n&&_p(n)?{color:e,stop:n}:{color:e,stop:null}},ig=function(t,A){var e=t[0],n=t[t.length-1];null===e.stop&&(e.stop=$p),null===n.stop&&(n.stop=xp);for(var i=[],s=0,r=0;r<t.length;r++){var o=t[r].stop;if(null!==o){var a=Hp(o,A);a>s?i.push(a):i.push(s),s=a}else i.push(null)}var l=null;for(r=0;r<i.length;r++){var c=i[r];if(null===c)null===l&&(l=r);else if(null!==l){for(var u=r-l,h=(c-i[l-1])/(u+1),d=1;d<=u;d++)i[l+d-1]=h*d;l=null}}return t.map((function(t,e){return{color:t.color,stop:Math.max(Math.min(1,i[e]/A),0)}}))},sg=function(t,A,e){var n="number"==typeof t?t:function(t,A,e){var n=A/2,i=e/2,s=Hp(t[0],A)-n,r=i-Hp(t[1],e);return(Math.atan2(r,s)+2*Math.PI)%(2*Math.PI)}(t,A,e),i=Math.abs(A*Math.sin(n))+Math.abs(e*Math.cos(n)),s=A/2,r=e/2,o=i/2,a=Math.sin(n-Math.PI/2)*o,l=Math.cos(n-Math.PI/2)*o;return[i,s-l,s+l,r-a,r+a]},rg=function(t,A){return Math.sqrt(t*t+A*A)},og=function(t,A,e,n,i){return[[0,0],[0,A],[t,0],[t,A]].reduce((function(t,A){var s=A[0],r=A[1],o=rg(e-s,n-r);return(i?o<t.optimumDistance:o>t.optimumDistance)?{optimumCorner:A,optimumDistance:o}:t}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},ag=function(t,A){var e=jp(180),n=[];return Ep(A).forEach((function(A,i){if(0===i){var s=A[0];if(20===s.type&&-1!==["top","left","right","bottom"].indexOf(s.value))return void(e=Rp(A));if(Kp(s))return void(e=(Np(t,s)+jp(270))%jp(360))}var r=ng(t,A);n.push(r)})),{angle:e,stops:n,type:1}},lg="closest-side",cg="farthest-side",ug="closest-corner",hg="farthest-corner",dg="circle",pg="ellipse",gg="cover",fg="contain",Bg=function(t,A){var e=0,n=3,i=[],s=[];return Ep(A).forEach((function(A,r){var o=!0;if(0===r?o=A.reduce((function(t,A){if(vp(A))switch(A.value){case"center":return s.push(Sp),!1;case"top":case"left":return s.push($p),!1;case"right":case"bottom":return s.push(xp),!1}else if(_p(A)||Lp(A))return s.push(A),!1;return t}),o):1===r&&(o=A.reduce((function(t,A){if(vp(A))switch(A.value){case dg:return e=0,!1;case pg:return e=1,!1;case fg:case lg:return n=0,!1;case cg:return n=1,!1;case ug:return n=2,!1;case gg:case hg:return n=3,!1}else if(Lp(A)||_p(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return t}),o)),o){var a=ng(t,A);i.push(a)}})),{size:n,shape:e,stops:i,position:s,type:2}},mg=function(t,A){if(22===A.type){var e={url:A.value,type:0};return t.cache.addImage(A.value),e}if(18===A.type){var n=yg[A.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+A.name+'"');return n(t,A.values)}throw new Error("Unsupported image type "+A.type)};var wg,yg={"linear-gradient":function(t,A){var e=jp(180),n=[];return Ep(A).forEach((function(A,i){if(0===i){var s=A[0];if(20===s.type&&"to"===s.value)return void(e=Rp(A));if(Kp(s))return void(e=Np(t,s))}var r=ng(t,A);n.push(r)})),{angle:e,stops:n,type:1}},"-moz-linear-gradient":ag,"-ms-linear-gradient":ag,"-o-linear-gradient":ag,"-webkit-linear-gradient":ag,"radial-gradient":function(t,A){var e=0,n=3,i=[],s=[];return Ep(A).forEach((function(A,r){var o=!0;if(0===r){var a=!1;o=A.reduce((function(t,A){if(a)if(vp(A))switch(A.value){case"center":return s.push(Sp),t;case"top":case"left":return s.push($p),t;case"right":case"bottom":return s.push(xp),t}else(_p(A)||Lp(A))&&s.push(A);else if(vp(A))switch(A.value){case dg:return e=0,!1;case pg:return e=1,!1;case"at":return a=!0,!1;case lg:return n=0,!1;case gg:case cg:return n=1,!1;case fg:case ug:return n=2,!1;case hg:return n=3,!1}else if(Lp(A)||_p(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return t}),o)}if(o){var l=ng(t,A);i.push(l)}})),{size:n,shape:e,stops:i,position:s,type:2}},"-moz-radial-gradient":Bg,"-ms-radial-gradient":Bg,"-o-radial-gradient":Bg,"-webkit-radial-gradient":Bg,"-webkit-gradient":function(t,A){var e=jp(180),n=[],i=1;return Ep(A).forEach((function(A,e){var s=A[0];if(0===e){if(vp(s)&&"linear"===s.value)return void(i=1);if(vp(s)&&"radial"===s.value)return void(i=2)}if(18===s.type)if("from"===s.name){var r=Pp(t,s.values[0]);n.push({stop:$p,color:r})}else if("to"===s.name){r=Pp(t,s.values[0]);n.push({stop:xp,color:r})}else if("color-stop"===s.name){var o=s.values.filter(Ip);if(2===o.length){r=Pp(t,o[1]);var a=o[0];Qp(a)&&n.push({stop:{type:16,number:100*a.number,flags:a.flags},color:r})}}})),1===i?{angle:(e+jp(180))%jp(360),stops:n,type:i}:{size:3,shape:0,stops:n,position:[],type:i}}},Cg={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,A){if(0===A.length)return[];var e=A[0];return 20===e.type&&"none"===e.value?[]:A.filter((function(t){return Ip(t)&&function(t){return!(20===t.type&&"none"===t.value||18===t.type&&!yg[t.name])}(t)})).map((function(A){return mg(t,A)}))}},Qg={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,A){return A.map((function(t){if(vp(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},vg={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,A){return Ep(A).map((function(t){return t.filter(_p)})).map(Dp)}},bg={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,A){return Ep(A).map((function(t){return t.filter(vp).map((function(t){return t.value})).join(" ")})).map(Ug)}},Ug=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}(wg||(wg={}));var Fg,Ig={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,A){return Ep(A).map((function(t){return t.filter(Eg)}))}},Eg=function(t){return vp(t)||_p(t)},Mg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Lg=Mg("top"),_g=Mg("right"),Dg=Mg("bottom"),$g=Mg("left"),Sg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,A){return Dp(A.filter(_p))}}},xg=Sg("top-left"),Tg=Sg("top-right"),Hg=Sg("bottom-right"),Og=Sg("bottom-left"),kg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Ng=kg("top"),Kg=kg("right"),Rg=kg("bottom"),jg=kg("left"),Pg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,A){return Cp(A)?A.number:0}}},Gg=Pg("top"),Vg=Pg("right"),zg=Pg("bottom"),Jg=Pg("left"),Yg={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Wg={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,A){return"rtl"===A?1:0}},Xg={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,A){return A.filter(vp).reduce((function(t,A){return t|Zg(A.value)}),0)}},Zg=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},qg={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},tf={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,A){return 20===A.type&&"normal"===A.value?0:17===A.type||15===A.type?A.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(Fg||(Fg={}));var Af,ef={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){return"strict"===A?Fg.STRICT:Fg.NORMAL}},nf={name:"line-height",initialValue:"normal",prefix:!1,type:4},sf=function(t,A){return vp(t)&&"normal"===t.value?1.2*A:17===t.type?A*t.number:_p(t)?Hp(t,A):A},rf={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,A){return 20===A.type&&"none"===A.value?null:mg(t,A)}},of={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,A){return"inside"===A?0:1}},af={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},lf=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},cf=lf("top"),uf=lf("right"),hf=lf("bottom"),df=lf("left"),pf={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,A){return A.filter(vp).map((function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},gf={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){return"break-word"===A?"break-word":"normal"}},ff=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Bf=ff("top"),mf=ff("right"),wf=ff("bottom"),yf=ff("left"),Cf={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,A){switch(A){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Qf={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,A){switch(A){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},vf={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return 1===A.length&&Up(A[0],"none")?[]:Ep(A).map((function(A){for(var e={color:tg.TRANSPARENT,offsetX:$p,offsetY:$p,blur:$p},n=0,i=0;i<A.length;i++){var s=A[i];Lp(s)?(0===n?e.offsetX=s:1===n?e.offsetY=s:e.blur=s,n++):e.color=Pp(t,s)}return e}))}},bf={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Uf={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,A){if(20===A.type&&"none"===A.value)return null;if(18===A.type){var e=Ff[A.name];if(void 0===e)throw new Error('Attempting to parse an unsupported transform function "'+A.name+'"');return e(A.values)}return null}},Ff={matrix:function(t){var A=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===A.length?A:null},matrix3d:function(t){var A=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),e=A[0],n=A[1];A[2],A[3];var i=A[4],s=A[5];A[6],A[7],A[8],A[9],A[10],A[11];var r=A[12],o=A[13];return A[14],A[15],16===A.length?[e,n,i,s,r,o]:null}},If={type:16,number:50,flags:4},Ef=[If,If],Mf={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,A){var e=A.filter(_p);return 2!==e.length?Ef:[e[0],e[1]]}},Lf={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,A){switch(A){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(Af||(Af={}));for(var _f={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"break-all":return Af.BREAK_ALL;case"keep-all":return Af.KEEP_ALL;default:return Af.NORMAL}}},Df={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,A){if(20===A.type)return{auto:!0,order:0};if(Qp(A))return{auto:!1,order:A.number};throw new Error("Invalid z-index number parsed")}},$f=function(t,A){if(15===A.type)switch(A.unit.toLowerCase()){case"s":return 1e3*A.number;case"ms":return A.number}throw new Error("Unsupported time type")},Sf={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,A){return Qp(A)?A.number:1}},xf={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Tf={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,A){return A.filter(vp).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},Hf={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,A){var e=[],n=[];return A.forEach((function(t){switch(t.type){case 20:case 0:e.push(t.value);break;case 17:e.push(t.number.toString());break;case 4:n.push(e.join(" ")),e.length=0}})),e.length&&n.push(e.join(" ")),n.map((function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"}))}},Of={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},kf={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,A){return Qp(A)?A.number:vp(A)&&"bold"===A.value?700:400}},Nf={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return A.filter(vp).map((function(t){return t.value}))}},Kf={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,A){switch(A){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Rf=function(t,A){return 0!=(t&A)},jf={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,A){if(0===A.length)return[];var e=A[0];return 20===e.type&&"none"===e.value?[]:A}},Pf={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,A){if(0===A.length)return null;var e=A[0];if(20===e.type&&"none"===e.value)return null;for(var n=[],i=A.filter(Fp),s=0;s<i.length;s++){var r=i[s],o=i[s+1];if(20===r.type){var a=o&&Qp(o)?o.number:1;n.push({counter:r.value,increment:a})}}return n}},Gf={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,A){if(0===A.length)return[];for(var e=[],n=A.filter(Fp),i=0;i<n.length;i++){var s=n[i],r=n[i+1];if(vp(s)&&"none"!==s.value){var o=r&&Qp(r)?r.number:0;e.push({counter:s.value,reset:o})}}return e}},Vf={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,A){return A.filter(Cp).map((function(A){return $f(t,A)}))}},zf={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,A){if(0===A.length)return null;var e=A[0];if(20===e.type&&"none"===e.value)return null;var n=[],i=A.filter(bp);if(i.length%2!=0)return null;for(var s=0;s<i.length;s+=2){var r=i[s].value,o=i[s+1].value;n.push({open:r,close:o})}return n}},Jf=function(t,A,e){if(!t)return"";var n=t[Math.min(A,t.length-1)];return n?e?n.open:n.close:""},Yf={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,A){return 1===A.length&&Up(A[0],"none")?[]:Ep(A).map((function(A){for(var e={color:255,offsetX:$p,offsetY:$p,blur:$p,spread:$p,inset:!1},n=0,i=0;i<A.length;i++){var s=A[i];Up(s,"inset")?e.inset=!0:Lp(s)?(0===n?e.offsetX=s:1===n?e.offsetY=s:2===n?e.blur=s:e.spread=s,n++):e.color=Pp(t,s)}return e}))}},Wf={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,A){var e=[];return A.filter(vp).forEach((function(t){switch(t.value){case"stroke":e.push(1);break;case"fill":e.push(0);break;case"markers":e.push(2)}})),[0,1,2].forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),e}},Xf={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Zf={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,A){return Cp(A)?A.number:0}},qf=function(){function t(t,A){var e,n;this.animationDuration=eB(t,Vf,A.animationDuration),this.backgroundClip=eB(t,Ag,A.backgroundClip),this.backgroundColor=eB(t,eg,A.backgroundColor),this.backgroundImage=eB(t,Cg,A.backgroundImage),this.backgroundOrigin=eB(t,Qg,A.backgroundOrigin),this.backgroundPosition=eB(t,vg,A.backgroundPosition),this.backgroundRepeat=eB(t,bg,A.backgroundRepeat),this.backgroundSize=eB(t,Ig,A.backgroundSize),this.borderTopColor=eB(t,Lg,A.borderTopColor),this.borderRightColor=eB(t,_g,A.borderRightColor),this.borderBottomColor=eB(t,Dg,A.borderBottomColor),this.borderLeftColor=eB(t,$g,A.borderLeftColor),this.borderTopLeftRadius=eB(t,xg,A.borderTopLeftRadius),this.borderTopRightRadius=eB(t,Tg,A.borderTopRightRadius),this.borderBottomRightRadius=eB(t,Hg,A.borderBottomRightRadius),this.borderBottomLeftRadius=eB(t,Og,A.borderBottomLeftRadius),this.borderTopStyle=eB(t,Ng,A.borderTopStyle),this.borderRightStyle=eB(t,Kg,A.borderRightStyle),this.borderBottomStyle=eB(t,Rg,A.borderBottomStyle),this.borderLeftStyle=eB(t,jg,A.borderLeftStyle),this.borderTopWidth=eB(t,Gg,A.borderTopWidth),this.borderRightWidth=eB(t,Vg,A.borderRightWidth),this.borderBottomWidth=eB(t,zg,A.borderBottomWidth),this.borderLeftWidth=eB(t,Jg,A.borderLeftWidth),this.boxShadow=eB(t,Yf,A.boxShadow),this.color=eB(t,Yg,A.color),this.direction=eB(t,Wg,A.direction),this.display=eB(t,Xg,A.display),this.float=eB(t,qg,A.cssFloat),this.fontFamily=eB(t,Hf,A.fontFamily),this.fontSize=eB(t,Of,A.fontSize),this.fontStyle=eB(t,Kf,A.fontStyle),this.fontVariant=eB(t,Nf,A.fontVariant),this.fontWeight=eB(t,kf,A.fontWeight),this.letterSpacing=eB(t,tf,A.letterSpacing),this.lineBreak=eB(t,ef,A.lineBreak),this.lineHeight=eB(t,nf,A.lineHeight),this.listStyleImage=eB(t,rf,A.listStyleImage),this.listStylePosition=eB(t,of,A.listStylePosition),this.listStyleType=eB(t,af,A.listStyleType),this.marginTop=eB(t,cf,A.marginTop),this.marginRight=eB(t,uf,A.marginRight),this.marginBottom=eB(t,hf,A.marginBottom),this.marginLeft=eB(t,df,A.marginLeft),this.opacity=eB(t,Sf,A.opacity);var i=eB(t,pf,A.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=eB(t,gf,A.overflowWrap),this.paddingTop=eB(t,Bf,A.paddingTop),this.paddingRight=eB(t,mf,A.paddingRight),this.paddingBottom=eB(t,wf,A.paddingBottom),this.paddingLeft=eB(t,yf,A.paddingLeft),this.paintOrder=eB(t,Wf,A.paintOrder),this.position=eB(t,Qf,A.position),this.textAlign=eB(t,Cf,A.textAlign),this.textDecorationColor=eB(t,xf,null!==(e=A.textDecorationColor)&&void 0!==e?e:A.color),this.textDecorationLine=eB(t,Tf,null!==(n=A.textDecorationLine)&&void 0!==n?n:A.textDecoration),this.textShadow=eB(t,vf,A.textShadow),this.textTransform=eB(t,bf,A.textTransform),this.transform=eB(t,Uf,A.transform),this.transformOrigin=eB(t,Mf,A.transformOrigin),this.visibility=eB(t,Lf,A.visibility),this.webkitTextStrokeColor=eB(t,Xf,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=eB(t,Zf,A.webkitTextStrokeWidth),this.wordBreak=eB(t,_f,A.wordBreak),this.zIndex=eB(t,Df,A.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return Gp(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return Rf(this.display,4)||Rf(this.display,33554432)||Rf(this.display,268435456)||Rf(this.display,536870912)||Rf(this.display,67108864)||Rf(this.display,134217728)},t}(),tB=function(t,A){this.content=eB(t,jf,A.content),this.quotes=eB(t,zf,A.quotes)},AB=function(t,A){this.counterIncrement=eB(t,Pf,A.counterIncrement),this.counterReset=eB(t,Gf,A.counterReset)},eB=function(t,A,e){var n=new wp,i=null!=e?e.toString():A.initialValue;n.write(i);var s=new yp(n.read());switch(A.type){case 2:var r=s.parseComponentValue();return A.parse(t,vp(r)?r.value:A.initialValue);case 0:return A.parse(t,s.parseComponentValue());case 1:return A.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(A.format){case"angle":return Np(t,s.parseComponentValue());case"color":return Pp(t,s.parseComponentValue());case"image":return mg(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Lp(o)?o:$p;case"length-percentage":var a=s.parseComponentValue();return _p(a)?a:$p;case"time":return $f(t,s.parseComponentValue())}}},nB=function(t,A){var e=function(t){switch(t.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(t);return 1===e||A===e},iB=function(t,A){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,nB(A,3),this.styles=new qf(t,window.getComputedStyle(A,null)),am(A)&&(this.styles.animationDuration.some((function(t){return t>0}))&&(A.style.animationDuration="0s"),null!==this.styles.transform&&(A.style.transform="none")),this.bounds=kh(this.context,A),nB(A,4)&&(this.flags|=16)},sB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rB="undefined"==typeof Uint8Array?[]:new Uint8Array(256),oB=0;oB<64;oB++)rB[sB.charCodeAt(oB)]=oB;for(var aB=function(t,A,e){return t.slice?t.slice(A,e):new Uint16Array(Array.prototype.slice.call(t,A,e))},lB=function(){function t(t,A,e,n,i,s){this.initialValue=t,this.errorValue=A,this.highStart=e,this.highValueIndex=n,this.index=i,this.data=s}return t.prototype.get=function(t){var A;if(t>=0){if(t<55296||t>56319&&t<=65535)return A=((A=this.index[t>>5])<<2)+(31&t),this.data[A];if(t<=65535)return A=((A=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[A];if(t<this.highStart)return A=2080+(t>>11),A=this.index[A],A+=t>>5&63,A=((A=this.index[A])<<2)+(31&t),this.data[A];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),cB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uB="undefined"==typeof Uint8Array?[]:new Uint8Array(256),hB=0;hB<64;hB++)uB[cB.charCodeAt(hB)]=hB;var dB,pB=8,gB=9,fB=11,BB=12,mB=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var e=t.length;if(!e)return"";for(var n=[],i=-1,s="";++i<e;){var r=t[i];r<=65535?n.push(r):(r-=65536,n.push(55296+(r>>10),r%1024+56320)),(i+1===e||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},wB=function(t,A){var e,n,i,s=function(t){var A,e,n,i,s,r=.75*t.length,o=t.length,a=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(r):new Array(r),c=Array.isArray(l)?l:new Uint8Array(l);for(A=0;A<o;A+=4)e=rB[t.charCodeAt(A)],n=rB[t.charCodeAt(A+1)],i=rB[t.charCodeAt(A+2)],s=rB[t.charCodeAt(A+3)],c[a++]=e<<2|n>>4,c[a++]=(15&n)<<4|i>>2,c[a++]=(3&i)<<6|63&s;return l}(t),r=Array.isArray(s)?function(t){for(var A=t.length,e=[],n=0;n<A;n+=4)e.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return e}(s):new Uint32Array(s),o=Array.isArray(s)?function(t){for(var A=t.length,e=[],n=0;n<A;n+=2)e.push(t[n+1]<<8|t[n]);return e}(s):new Uint16Array(s),a=aB(o,12,r[4]/2),l=2===r[5]?aB(o,(24+r[4])/2):(e=r,n=Math.ceil((24+r[4])/4),e.slice?e.slice(n,i):new Uint32Array(Array.prototype.slice.call(e,n,i)));return new lB(r[0],r[1],r[2],r[3],a,l)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),yB="×",CB=function(t){return wB.get(t)},QB=function(t,A,e){var n=e-2,i=A[n],s=A[e-1],r=A[e];if(2===s&&3===r)return yB;if(2===s||3===s||4===s)return"÷";if(2===r||3===r||4===r)return"÷";if(s===pB&&-1!==[pB,gB,fB,BB].indexOf(r))return yB;if(!(s!==fB&&s!==gB||r!==gB&&10!==r))return yB;if((s===BB||10===s)&&10===r)return yB;if(13===r||5===r)return yB;if(7===r)return yB;if(1===s)return yB;if(13===s&&14===r){for(;5===i;)i=A[--n];if(14===i)return yB}if(15===s&&15===r){for(var o=0;15===i;)o++,i=A[--n];if(o%2==0)return yB}return"÷"},vB=function(t){var A=function(t){for(var A=[],e=0,n=t.length;e<n;){var i=t.charCodeAt(e++);if(i>=55296&&i<=56319&&e<n){var s=t.charCodeAt(e++);56320==(64512&s)?A.push(((1023&i)<<10)+(1023&s)+65536):(A.push(i),e--)}else A.push(i)}return A}(t),e=A.length,n=0,i=0,s=A.map(CB);return{next:function(){if(n>=e)return{done:!0,value:null};for(var t=yB;n<e&&(t=QB(0,s,++n))===yB;);if(t!==yB||n===e){var r=mB.apply(null,A.slice(i,n));return i=n,{value:r,done:!1}}return{done:!0,value:null}}}},bB=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},UB=function(t,A,e,n,i){var s="http://www.w3.org/2000/svg",r=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return r.setAttributeNS(null,"width",t.toString()),r.setAttributeNS(null,"height",A.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),r.appendChild(o),o.appendChild(i),r},FB=function(t){return new Promise((function(A,e){var n=new Image;n.onload=function(){return A(n)},n.onerror=e,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},IB={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var A=t.createRange();if(A.getBoundingClientRect){var e=t.createElement("boundtest");e.style.height="123px",e.style.display="block",t.body.appendChild(e),A.selectNode(e);var n=A.getBoundingClientRect(),i=Math.round(n.height);if(t.body.removeChild(e),123===i)return!0}}return!1}(document);return Object.defineProperty(IB,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=IB.SUPPORT_RANGE_BOUNDS&&function(t){var A=t.createElement("boundtest");A.style.width="50px",A.style.display="block",A.style.fontSize="12px",A.style.letterSpacing="0px",A.style.wordSpacing="0px",t.body.appendChild(A);var e=t.createRange();A.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=A.firstChild,i=Nh(n.data).map((function(t){return Kh(t)})),s=0,r={},o=i.every((function(t,A){e.setStart(n,s),e.setEnd(n,s+t.length);var i=e.getBoundingClientRect();s+=t.length;var o=i.x>r.x||i.y>r.y;return r=i,0===A||o}));return t.body.removeChild(A),o}(document);return Object.defineProperty(IB,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var A=new Image,e=t.createElement("canvas"),n=e.getContext("2d");if(!n)return!1;A.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(A,0,0),e.toDataURL()}catch(t){return!1}return!0}(document);return Object.defineProperty(IB,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var A=t.createElement("canvas"),e=100;A.width=e,A.height=e;var n=A.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,e,e);var i=new Image,s=A.toDataURL();i.src=s;var r=UB(e,e,0,0,i);return n.fillStyle="red",n.fillRect(0,0,e,e),FB(r).then((function(A){n.drawImage(A,0,0);var i=n.getImageData(0,0,e,e).data;n.fillStyle="red",n.fillRect(0,0,e,e);var r=t.createElement("div");return r.style.backgroundImage="url("+s+")",r.style.height=e+"px",bB(i)?FB(UB(e,e,0,0,r)):Promise.reject(!1)})).then((function(t){return n.drawImage(t,0,0),bB(n.getImageData(0,0,e,e).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(IB,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(IB,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(IB,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(IB,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(IB,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},EB=function(t,A){this.text=t,this.bounds=A},MB=function(t,A){var e=A.ownerDocument;if(e){var n=e.createElement("html2canvaswrapper");n.appendChild(A.cloneNode(!0));var i=A.parentNode;if(i){i.replaceChild(n,A);var s=kh(t,n);return n.firstChild&&i.replaceChild(n.firstChild,n),s}}return Oh.EMPTY},LB=function(t,A,e){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(t,A),i.setEnd(t,A+e),i},_B=function(t){if(IB.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(A.segment(t)).map((function(t){return t.segment}))}return function(t){for(var A,e=vB(t),n=[];!(A=e.next()).done;)A.value&&n.push(A.value.slice());return n}(t)},DB=function(t,A){return 0!==A.letterSpacing?_B(t):function(t,A){if(IB.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(e.segment(t)).map((function(t){return t.segment}))}return SB(t,A)}(t,A)},$B=[32,160,4961,65792,65793,4153,4241],SB=function(t,A){for(var e,n=function(t,A){var e=Nh(t),n=Hd(e,A),i=n[0],s=n[1],r=n[2],o=e.length,a=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var t=bd;l<o&&(t=Td(e,s,i,++l,r))===bd;);if(t!==bd||l===o){var A=new Od(e,t,a,l);return a=l,{value:A,done:!1}}return{done:!0,value:null}}}}(t,{lineBreak:A.lineBreak,wordBreak:"break-word"===A.overflowWrap?"break-word":A.wordBreak}),i=[],s=function(){if(e.value){var t=e.value.slice(),A=Nh(t),n="";A.forEach((function(t){-1===$B.indexOf(t)?n+=Kh(t):(n.length&&i.push(n),i.push(Kh(t)),n="")})),n.length&&i.push(n)}};!(e=n.next()).done;)s();return i},xB=function(t,A,e){this.text=TB(A.data,e.textTransform),this.textBounds=function(t,A,e,n){var i=DB(A,e),s=[],r=0;return i.forEach((function(A){if(e.textDecorationLine.length||A.trim().length>0)if(IB.SUPPORT_RANGE_BOUNDS){var i=LB(n,r,A.length).getClientRects();if(i.length>1){var o=_B(A),a=0;o.forEach((function(A){s.push(new EB(A,Oh.fromDOMRectList(t,LB(n,a+r,A.length).getClientRects()))),a+=A.length}))}else s.push(new EB(A,Oh.fromDOMRectList(t,i)))}else{var l=n.splitText(A.length);s.push(new EB(A,MB(t,n))),n=l}else IB.SUPPORT_RANGE_BOUNDS||(n=n.splitText(A.length));r+=A.length})),s}(t,this.text,e,A)},TB=function(t,A){switch(A){case 1:return t.toLowerCase();case 3:return t.replace(HB,OB);case 2:return t.toUpperCase();default:return t}},HB=/(^|\s|:|-|\(|\))([a-z])/g,OB=function(t,A,e){return t.length>0?A+e.toUpperCase():t},kB=function(t){function A(A,e){var n=t.call(this,A,e)||this;return n.src=e.currentSrc||e.src,n.intrinsicWidth=e.naturalWidth,n.intrinsicHeight=e.naturalHeight,n.context.cache.addImage(n.src),n}return $h(A,t),A}(iB),NB=function(t){function A(A,e){var n=t.call(this,A,e)||this;return n.canvas=e,n.intrinsicWidth=e.width,n.intrinsicHeight=e.height,n}return $h(A,t),A}(iB),KB=function(t){function A(A,e){var n=t.call(this,A,e)||this,i=new XMLSerializer,s=kh(A,e);return e.setAttribute("width",s.width+"px"),e.setAttribute("height",s.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(e)),n.intrinsicWidth=e.width.baseVal.value,n.intrinsicHeight=e.height.baseVal.value,n.context.cache.addImage(n.svg),n}return $h(A,t),A}(iB),RB=function(t){function A(A,e){var n=t.call(this,A,e)||this;return n.value=e.value,n}return $h(A,t),A}(iB),jB=function(t){function A(A,e){var n=t.call(this,A,e)||this;return n.start=e.start,n.reversed="boolean"==typeof e.reversed&&!0===e.reversed,n}return $h(A,t),A}(iB),PB=[{type:15,flags:0,unit:"px",number:3}],GB=[{type:16,flags:0,number:50}],VB="checkbox",zB="radio",JB="password",YB=707406591,WB=function(t){function A(A,e){var n,i,s,r=t.call(this,A,e)||this;switch(r.type=e.type.toLowerCase(),r.checked=e.checked,r.value=0===(i=(n=e).type===JB?new Array(n.value.length+1).join("•"):n.value).length?n.placeholder||"":i,r.type!==VB&&r.type!==zB||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=(s=r.bounds).width>s.height?new Oh(s.left+(s.width-s.height)/2,s.top,s.height,s.height):s.width<s.height?new Oh(s.left,s.top+(s.height-s.width)/2,s.width,s.width):s),r.type){case VB:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=PB;break;case zB:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=GB}return r}return $h(A,t),A}(iB),XB=function(t){function A(A,e){var n=t.call(this,A,e)||this,i=e.options[e.selectedIndex||0];return n.value=i&&i.text||"",n}return $h(A,t),A}(iB),ZB=function(t){function A(A,e){var n=t.call(this,A,e)||this;return n.value=e.value,n}return $h(A,t),A}(iB),qB=function(t){function A(A,e){var n=t.call(this,A,e)||this;n.src=e.src,n.width=parseInt(e.width,10)||0,n.height=parseInt(e.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement){n.tree=nm(A,e.contentWindow.document.documentElement);var i=e.contentWindow.document.documentElement?qp(A,getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):tg.TRANSPARENT,s=e.contentWindow.document.body?qp(A,getComputedStyle(e.contentWindow.document.body).backgroundColor):tg.TRANSPARENT;n.backgroundColor=Gp(i)?Gp(s)?n.styles.backgroundColor:s:i}}catch(t){}return n}return $h(A,t),A}(iB),tm=["OL","UL","MENU"],Am=function(t,A,e,n){for(var i=A.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,rm(i)&&i.data.trim().length>0)e.textNodes.push(new xB(t,i,e.styles));else if(om(i))if(Qm(i)&&i.assignedNodes)i.assignedNodes().forEach((function(A){return Am(t,A,e,n)}));else{var r=em(t,i);r.styles.isVisible()&&(im(i,r,n)?r.flags|=4:sm(r.styles)&&(r.flags|=2),-1!==tm.indexOf(i.tagName)&&(r.flags|=8),e.elements.push(r),i.slot,i.shadowRoot?Am(t,i.shadowRoot,r,n):ym(i)||dm(i)||Cm(i)||Am(t,i,r,n))}},em=function(t,A){return Bm(A)?new kB(t,A):gm(A)?new NB(t,A):dm(A)?new KB(t,A):cm(A)?new RB(t,A):um(A)?new jB(t,A):hm(A)?new WB(t,A):Cm(A)?new XB(t,A):ym(A)?new ZB(t,A):mm(A)?new qB(t,A):new iB(t,A)},nm=function(t,A){var e=em(t,A);return e.flags|=4,Am(t,A,e,e),e},im=function(t,A,e){return A.styles.isPositionedWithZIndex()||A.styles.opacity<1||A.styles.isTransformed()||pm(t)&&e.styles.isTransparent()},sm=function(t){return t.isPositioned()||t.isFloating()},rm=function(t){return t.nodeType===Node.TEXT_NODE},om=function(t){return t.nodeType===Node.ELEMENT_NODE},am=function(t){return om(t)&&void 0!==t.style&&!lm(t)},lm=function(t){return"object"==typeof t.className},cm=function(t){return"LI"===t.tagName},um=function(t){return"OL"===t.tagName},hm=function(t){return"INPUT"===t.tagName},dm=function(t){return"svg"===t.tagName},pm=function(t){return"BODY"===t.tagName},gm=function(t){return"CANVAS"===t.tagName},fm=function(t){return"VIDEO"===t.tagName},Bm=function(t){return"IMG"===t.tagName},mm=function(t){return"IFRAME"===t.tagName},wm=function(t){return"STYLE"===t.tagName},ym=function(t){return"TEXTAREA"===t.tagName},Cm=function(t){return"SELECT"===t.tagName},Qm=function(t){return"SLOT"===t.tagName},vm=function(t){return t.tagName.indexOf("-")>0},bm=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var A=this.counters[t];return A&&A.length?A[A.length-1]:1},t.prototype.getCounterValues=function(t){var A=this.counters[t];return A||[]},t.prototype.pop=function(t){var A=this;t.forEach((function(t){return A.counters[t].pop()}))},t.prototype.parse=function(t){var A=this,e=t.counterIncrement,n=t.counterReset,i=!0;null!==e&&e.forEach((function(t){var e=A.counters[t.counter];e&&0!==t.increment&&(i=!1,e.length||e.push(1),e[Math.max(0,e.length-1)]+=t.increment)}));var s=[];return i&&n.forEach((function(t){var e=A.counters[t.counter];s.push(t.counter),e||(e=A.counters[t.counter]=[]),e.push(t.reset)})),s},t}(),Um={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Fm={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Im={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Em={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Mm=function(t,A,e,n,i,s){return t<A||t>e?Om(t,i,s.length>0):n.integers.reduce((function(A,e,i){for(;t>=e;)t-=e,A+=n.values[i];return A}),"")+s},Lm=function(t,A,e,n){var i="";do{e||t--,i=n(t)+i,t/=A}while(t*A>=A);return i},_m=function(t,A,e,n,i){var s=e-A+1;return(t<0?"-":"")+(Lm(Math.abs(t),s,n,(function(t){return Kh(Math.floor(t%s)+A)}))+i)},Dm=function(t,A,e){void 0===e&&(e=". ");var n=A.length;return Lm(Math.abs(t),n,!1,(function(t){return A[Math.floor(t%n)]}))+e},$m=function(t,A,e,n,i,s){if(t<-9999||t>9999)return Om(t,4,i.length>0);var r=Math.abs(t),o=i;if(0===r)return A[0]+o;for(var a=0;r>0&&a<=4;a++){var l=r%10;0===l&&Rf(s,1)&&""!==o?o=A[l]+o:l>1||1===l&&0===a||1===l&&1===a&&Rf(s,2)||1===l&&1===a&&Rf(s,4)&&t>100||1===l&&a>1&&Rf(s,8)?o=A[l]+(a>0?e[a-1]:"")+o:1===l&&a>0&&(o=e[a-1]+o),r=Math.floor(r/10)}return(t<0?n:"")+o},Sm="十百千萬",xm="拾佰仟萬",Tm="マイナス",Hm="마이너스",Om=function(t,A,e){var n=e?". ":"",i=e?"、":"",s=e?", ":"",r=e?" ":"";switch(A){case 0:return"•"+r;case 1:return"◦"+r;case 2:return"◾"+r;case 5:var o=_m(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Dm(t,"〇一二三四五六七八九",i);case 6:return Mm(t,1,3999,Um,3,n).toLowerCase();case 7:return Mm(t,1,3999,Um,3,n);case 8:return _m(t,945,969,!1,n);case 9:return _m(t,97,122,!1,n);case 10:return _m(t,65,90,!1,n);case 11:return _m(t,1632,1641,!0,n);case 12:case 49:return Mm(t,1,9999,Fm,3,n);case 35:return Mm(t,1,9999,Fm,3,n).toLowerCase();case 13:return _m(t,2534,2543,!0,n);case 14:case 30:return _m(t,6112,6121,!0,n);case 15:return Dm(t,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return Dm(t,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return $m(t,"零一二三四五六七八九",Sm,"負",i,14);case 47:return $m(t,"零壹貳參肆伍陸柒捌玖",xm,"負",i,15);case 42:return $m(t,"零一二三四五六七八九",Sm,"负",i,14);case 41:return $m(t,"零壹贰叁肆伍陆柒捌玖",xm,"负",i,15);case 26:return $m(t,"〇一二三四五六七八九","十百千万",Tm,i,0);case 25:return $m(t,"零壱弐参四伍六七八九","拾百千万",Tm,i,7);case 31:return $m(t,"영일이삼사오육칠팔구","십백천만",Hm,s,7);case 33:return $m(t,"零一二三四五六七八九","十百千萬",Hm,s,0);case 32:return $m(t,"零壹貳參四五六七八九","拾百千",Hm,s,7);case 18:return _m(t,2406,2415,!0,n);case 20:return Mm(t,1,19999,Em,3,n);case 21:return _m(t,2790,2799,!0,n);case 22:return _m(t,2662,2671,!0,n);case 22:return Mm(t,1,10999,Im,3,n);case 23:return Dm(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Dm(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return _m(t,3302,3311,!0,n);case 28:return Dm(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return Dm(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return _m(t,3792,3801,!0,n);case 37:return _m(t,6160,6169,!0,n);case 38:return _m(t,4160,4169,!0,n);case 39:return _m(t,2918,2927,!0,n);case 40:return _m(t,1776,1785,!0,n);case 43:return _m(t,3046,3055,!0,n);case 44:return _m(t,3174,3183,!0,n);case 45:return _m(t,3664,3673,!0,n);case 46:return _m(t,3872,3881,!0,n);default:return _m(t,48,57,!0,n)}},km="data-html2canvas-ignore",Nm=function(){function t(t,A,e){if(this.context=t,this.options=e,this.scrolledElements=[],this.referenceElement=A,this.counters=new bm,this.quoteDepth=0,!A.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(A.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(t,A){var e=this,n=Rm(t,A);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,s=t.defaultView.pageYOffset,r=n.contentWindow,o=r.document,a=Gm(n).then((function(){return xh(e,void 0,void 0,(function(){var t,e;return Th(this,(function(i){switch(i.label){case 0:return this.scrolledElements.forEach(Wm),r&&(r.scrollTo(A.left,A.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||r.scrollY===A.top&&r.scrollX===A.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(r.scrollX-A.left,r.scrollY-A.top,0,0))),t=this.options.onclone,void 0===(e=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:i.sent(),i.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Pm(o)]:[3,4];case 3:i.sent(),i.label=4;case 4:return"function"==typeof t?[2,Promise.resolve().then((function(){return t(o,e)})).then((function(){return n}))]:[2,n]}}))}))}));return o.open(),o.write(Jm(document.doctype)+"<html></html>"),Ym(this.referenceElement.ownerDocument,i,s),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),a},t.prototype.createElementClone=function(t){if(nB(t,2),gm(t))return this.createCanvasClone(t);if(fm(t))return this.createVideoClone(t);if(wm(t))return this.createStyleClone(t);var A=t.cloneNode(!1);return Bm(A)&&(Bm(t)&&t.currentSrc&&t.currentSrc!==t.src&&(A.src=t.currentSrc,A.srcset=""),"lazy"===A.loading&&(A.loading="eager")),vm(A)?this.createCustomElementClone(A):A},t.prototype.createCustomElementClone=function(t){var A=document.createElement("html2canvascustomelement");return zm(t.style,A),A},t.prototype.createStyleClone=function(t){try{var A=t.sheet;if(A&&A.cssRules){var e=[].slice.call(A.cssRules,0).reduce((function(t,A){return A&&"string"==typeof A.cssText?t+A.cssText:t}),""),n=t.cloneNode(!1);return n.textContent=e,n}}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){var A;if(this.options.inlineImages&&t.ownerDocument){var e=t.ownerDocument.createElement("img");try{return e.src=t.toDataURL(),e}catch(A){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var i=t.getContext("2d"),s=n.getContext("2d");if(s)if(!this.options.allowTaint&&i)s.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var r=null!==(A=t.getContext("webgl2"))&&void 0!==A?A:t.getContext("webgl");if(r){var o=r.getContextAttributes();!1===(null==o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}s.drawImage(t,0,0)}return n}catch(A){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},t.prototype.createVideoClone=function(t){var A=t.ownerDocument.createElement("canvas");A.width=t.offsetWidth,A.height=t.offsetHeight;var e=A.getContext("2d");try{return e&&(e.drawImage(t,0,0,A.width,A.height),this.options.allowTaint||e.getImageData(0,0,A.width,A.height)),A}catch(A){this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},t.prototype.appendChildNode=function(t,A,e){om(A)&&("SCRIPT"===A.tagName||A.hasAttribute(km)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(A))||this.options.copyStyles&&om(A)&&wm(A)||t.appendChild(this.cloneNode(A,e))},t.prototype.cloneChildNodes=function(t,A,e){for(var n=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(om(i)&&Qm(i)&&"function"==typeof i.assignedNodes){var s=i.assignedNodes();s.length&&s.forEach((function(t){return n.appendChildNode(A,t,e)}))}else this.appendChildNode(A,i,e)},t.prototype.cloneNode=function(t,A){if(rm(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var e=t.ownerDocument.defaultView;if(e&&om(t)&&(am(t)||lm(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var i=e.getComputedStyle(t),s=e.getComputedStyle(t,":before"),r=e.getComputedStyle(t,":after");this.referenceElement===t&&am(n)&&(this.clonedReferenceElement=n),pm(n)&&tw(n);var o=this.counters.parse(new AB(this.context,i)),a=this.resolvePseudoContent(t,n,s,dB.BEFORE);vm(t)&&(A=!0),fm(t)||this.cloneChildNodes(t,n,A),a&&n.insertBefore(a,n.firstChild);var l=this.resolvePseudoContent(t,n,r,dB.AFTER);return l&&n.appendChild(l),this.counters.pop(o),(i&&(this.options.copyStyles||lm(t))&&!mm(t)||A)&&zm(i,n),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(ym(t)||Cm(t))&&(ym(n)||Cm(n))&&(n.value=t.value),n}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,A,e,n){var i=this;if(e){var s=e.content,r=A.ownerDocument;if(r&&s&&"none"!==s&&"-moz-alt-content"!==s&&"none"!==e.display){this.counters.parse(new AB(this.context,e));var o=new tB(this.context,e),a=r.createElement("html2canvaspseudoelement");zm(e,a),o.content.forEach((function(A){if(0===A.type)a.appendChild(r.createTextNode(A.value));else if(22===A.type){var e=r.createElement("img");e.src=A.value,e.style.opacity="1",a.appendChild(e)}else if(18===A.type){if("attr"===A.name){var n=A.values.filter(vp);n.length&&a.appendChild(r.createTextNode(t.getAttribute(n[0].value)||""))}else if("counter"===A.name){var s=A.values.filter(Ip),l=s[0],c=s[1];if(l&&vp(l)){var u=i.counters.getCounterValue(l.value),h=c&&vp(c)?af.parse(i.context,c.value):3;a.appendChild(r.createTextNode(Om(u,h,!1)))}}else if("counters"===A.name){var d=A.values.filter(Ip),p=(l=d[0],d[1]);c=d[2];if(l&&vp(l)){var g=i.counters.getCounterValues(l.value),f=c&&vp(c)?af.parse(i.context,c.value):3,B=p&&0===p.type?p.value:"",m=g.map((function(t){return Om(t,f,!1)})).join(B);a.appendChild(r.createTextNode(m))}}}else if(20===A.type)switch(A.value){case"open-quote":a.appendChild(r.createTextNode(Jf(o.quotes,i.quoteDepth++,!0)));break;case"close-quote":a.appendChild(r.createTextNode(Jf(o.quotes,--i.quoteDepth,!1)));break;default:a.appendChild(r.createTextNode(A.value))}})),a.className=Xm+" "+Zm;var l=n===dB.BEFORE?" "+Xm:" "+Zm;return lm(A)?A.className.baseValue+=l:A.className+=l,a}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(dB||(dB={}));var Km,Rm=function(t,A){var e=t.createElement("iframe");return e.className="html2canvas-container",e.style.visibility="hidden",e.style.position="fixed",e.style.left="-10000px",e.style.top="0px",e.style.border="0",e.width=A.width.toString(),e.height=A.height.toString(),e.scrolling="no",e.setAttribute(km,"true"),t.body.appendChild(e),e},jm=function(t){return new Promise((function(A){t.complete?A():t.src?(t.onload=A,t.onerror=A):A()}))},Pm=function(t){return Promise.all([].slice.call(t.images,0).map(jm))},Gm=function(t){return new Promise((function(A,e){var n=t.contentWindow;if(!n)return e("No window assigned for iframe");var i=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var e=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(e),A(t))}),50)}}))},Vm=["all","d","content"],zm=function(t,A){for(var e=t.length-1;e>=0;e--){var n=t.item(e);-1===Vm.indexOf(n)&&A.style.setProperty(n,t.getPropertyValue(n))}return A},Jm=function(t){var A="";return t&&(A+="<!DOCTYPE ",t.name&&(A+=t.name),t.internalSubset&&(A+=t.internalSubset),t.publicId&&(A+='"'+t.publicId+'"'),t.systemId&&(A+='"'+t.systemId+'"'),A+=">"),A},Ym=function(t,A,e){t&&t.defaultView&&(A!==t.defaultView.pageXOffset||e!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(A,e)},Wm=function(t){var A=t[0],e=t[1],n=t[2];A.scrollLeft=e,A.scrollTop=n},Xm="___html2canvas___pseudoelement_before",Zm="___html2canvas___pseudoelement_after",qm='{\n    content: "" !important;\n    display: none !important;\n}',tw=function(t){Aw(t,"."+Xm+":before"+qm+"\n         ."+Zm+":after"+qm)},Aw=function(t,A){var e=t.ownerDocument;if(e){var n=e.createElement("style");n.textContent=A,t.appendChild(n)}},ew=function(){function t(){}return t.getOrigin=function(A){var e=t._link;return e?(e.href=A,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},t.isSameOrigin=function(A){return t.getOrigin(A)===t._origin},t.setContext=function(A){t._link=A.document.createElement("a"),t._origin=t.getOrigin(A.location.href)},t._origin="about:blank",t}(),nw=function(){function t(t,A){this.context=t,this._options=A,this._cache={}}return t.prototype.addImage=function(t){var A=Promise.resolve();return this.has(t)?A:cw(t)||ow(t)?((this._cache[t]=this.loadImage(t)).catch((function(){})),A):A},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return xh(this,void 0,void 0,(function(){var A,e,n,i,s=this;return Th(this,(function(r){switch(r.label){case 0:return A=ew.isSameOrigin(t),e=!aw(t)&&!0===this._options.useCORS&&IB.SUPPORT_CORS_IMAGES&&!A,n=!aw(t)&&!A&&!cw(t)&&"string"==typeof this._options.proxy&&IB.SUPPORT_CORS_XHR&&!e,A||!1!==this._options.allowTaint||aw(t)||cw(t)||n||e?(i=t,n?[4,this.proxy(i)]:[3,2]):[2];case 1:i=r.sent(),r.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,A){var n=new Image;n.onload=function(){return t(n)},n.onerror=A,(lw(i)||e)&&(n.crossOrigin="anonymous"),n.src=i,!0===n.complete&&setTimeout((function(){return t(n)}),500),s._options.imageTimeout>0&&setTimeout((function(){return A("Timed out ("+s._options.imageTimeout+"ms) loading image")}),s._options.imageTimeout)}))];case 3:return[2,r.sent()]}}))}))},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var A=this,e=this._options.proxy;if(!e)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise((function(i,s){var r=IB.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===r)i(o.response);else{var t=new FileReader;t.addEventListener("load",(function(){return i(t.result)}),!1),t.addEventListener("error",(function(t){return s(t)}),!1),t.readAsDataURL(o.response)}else s("Failed to proxy resource "+n+" with status code "+o.status)},o.onerror=s;var a=e.indexOf("?")>-1?"&":"?";if(o.open("GET",""+e+a+"url="+encodeURIComponent(t)+"&responseType="+r),"text"!==r&&o instanceof XMLHttpRequest&&(o.responseType=r),A._options.imageTimeout){var l=A._options.imageTimeout;o.timeout=l,o.ontimeout=function(){return s("Timed out ("+l+"ms) proxying "+n)}}o.send()}))},t}(),iw=/^data:image\/svg\+xml/i,sw=/^data:image\/.*;base64,/i,rw=/^data:image\/.*/i,ow=function(t){return IB.SUPPORT_SVG_DRAWING||!uw(t)},aw=function(t){return rw.test(t)},lw=function(t){return sw.test(t)},cw=function(t){return"blob"===t.substr(0,4)},uw=function(t){return"svg"===t.substr(-3).toLowerCase()||iw.test(t)},hw=function(){function t(t,A){this.type=0,this.x=t,this.y=A}return t.prototype.add=function(A,e){return new t(this.x+A,this.y+e)},t}(),dw=function(t,A,e){return new hw(t.x+(A.x-t.x)*e,t.y+(A.y-t.y)*e)},pw=function(){function t(t,A,e,n){this.type=1,this.start=t,this.startControl=A,this.endControl=e,this.end=n}return t.prototype.subdivide=function(A,e){var n=dw(this.start,this.startControl,A),i=dw(this.startControl,this.endControl,A),s=dw(this.endControl,this.end,A),r=dw(n,i,A),o=dw(i,s,A),a=dw(r,o,A);return e?new t(this.start,n,r,a):new t(a,o,s,this.end)},t.prototype.add=function(A,e){return new t(this.start.add(A,e),this.startControl.add(A,e),this.endControl.add(A,e),this.end.add(A,e))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),gw=function(t){return 1===t.type},fw=function(t){var A=t.styles,e=t.bounds,n=Tp(A.borderTopLeftRadius,e.width,e.height),i=n[0],s=n[1],r=Tp(A.borderTopRightRadius,e.width,e.height),o=r[0],a=r[1],l=Tp(A.borderBottomRightRadius,e.width,e.height),c=l[0],u=l[1],h=Tp(A.borderBottomLeftRadius,e.width,e.height),d=h[0],p=h[1],g=[];g.push((i+o)/e.width),g.push((d+c)/e.width),g.push((s+p)/e.height),g.push((a+u)/e.height);var f=Math.max.apply(Math,g);f>1&&(i/=f,s/=f,o/=f,a/=f,c/=f,u/=f,d/=f,p/=f);var B=e.width-o,m=e.height-u,w=e.width-c,y=e.height-p,C=A.borderTopWidth,Q=A.borderRightWidth,v=A.borderBottomWidth,b=A.borderLeftWidth,U=Hp(A.paddingTop,t.bounds.width),F=Hp(A.paddingRight,t.bounds.width),I=Hp(A.paddingBottom,t.bounds.width),E=Hp(A.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||s>0?Bw(e.left+b/3,e.top+C/3,i-b/3,s-C/3,Km.TOP_LEFT):new hw(e.left+b/3,e.top+C/3),this.topRightBorderDoubleOuterBox=i>0||s>0?Bw(e.left+B,e.top+C/3,o-Q/3,a-C/3,Km.TOP_RIGHT):new hw(e.left+e.width-Q/3,e.top+C/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?Bw(e.left+w,e.top+m,c-Q/3,u-v/3,Km.BOTTOM_RIGHT):new hw(e.left+e.width-Q/3,e.top+e.height-v/3),this.bottomLeftBorderDoubleOuterBox=d>0||p>0?Bw(e.left+b/3,e.top+y,d-b/3,p-v/3,Km.BOTTOM_LEFT):new hw(e.left+b/3,e.top+e.height-v/3),this.topLeftBorderDoubleInnerBox=i>0||s>0?Bw(e.left+2*b/3,e.top+2*C/3,i-2*b/3,s-2*C/3,Km.TOP_LEFT):new hw(e.left+2*b/3,e.top+2*C/3),this.topRightBorderDoubleInnerBox=i>0||s>0?Bw(e.left+B,e.top+2*C/3,o-2*Q/3,a-2*C/3,Km.TOP_RIGHT):new hw(e.left+e.width-2*Q/3,e.top+2*C/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?Bw(e.left+w,e.top+m,c-2*Q/3,u-2*v/3,Km.BOTTOM_RIGHT):new hw(e.left+e.width-2*Q/3,e.top+e.height-2*v/3),this.bottomLeftBorderDoubleInnerBox=d>0||p>0?Bw(e.left+2*b/3,e.top+y,d-2*b/3,p-2*v/3,Km.BOTTOM_LEFT):new hw(e.left+2*b/3,e.top+e.height-2*v/3),this.topLeftBorderStroke=i>0||s>0?Bw(e.left+b/2,e.top+C/2,i-b/2,s-C/2,Km.TOP_LEFT):new hw(e.left+b/2,e.top+C/2),this.topRightBorderStroke=i>0||s>0?Bw(e.left+B,e.top+C/2,o-Q/2,a-C/2,Km.TOP_RIGHT):new hw(e.left+e.width-Q/2,e.top+C/2),this.bottomRightBorderStroke=c>0||u>0?Bw(e.left+w,e.top+m,c-Q/2,u-v/2,Km.BOTTOM_RIGHT):new hw(e.left+e.width-Q/2,e.top+e.height-v/2),this.bottomLeftBorderStroke=d>0||p>0?Bw(e.left+b/2,e.top+y,d-b/2,p-v/2,Km.BOTTOM_LEFT):new hw(e.left+b/2,e.top+e.height-v/2),this.topLeftBorderBox=i>0||s>0?Bw(e.left,e.top,i,s,Km.TOP_LEFT):new hw(e.left,e.top),this.topRightBorderBox=o>0||a>0?Bw(e.left+B,e.top,o,a,Km.TOP_RIGHT):new hw(e.left+e.width,e.top),this.bottomRightBorderBox=c>0||u>0?Bw(e.left+w,e.top+m,c,u,Km.BOTTOM_RIGHT):new hw(e.left+e.width,e.top+e.height),this.bottomLeftBorderBox=d>0||p>0?Bw(e.left,e.top+y,d,p,Km.BOTTOM_LEFT):new hw(e.left,e.top+e.height),this.topLeftPaddingBox=i>0||s>0?Bw(e.left+b,e.top+C,Math.max(0,i-b),Math.max(0,s-C),Km.TOP_LEFT):new hw(e.left+b,e.top+C),this.topRightPaddingBox=o>0||a>0?Bw(e.left+Math.min(B,e.width-Q),e.top+C,B>e.width+Q?0:Math.max(0,o-Q),Math.max(0,a-C),Km.TOP_RIGHT):new hw(e.left+e.width-Q,e.top+C),this.bottomRightPaddingBox=c>0||u>0?Bw(e.left+Math.min(w,e.width-b),e.top+Math.min(m,e.height-v),Math.max(0,c-Q),Math.max(0,u-v),Km.BOTTOM_RIGHT):new hw(e.left+e.width-Q,e.top+e.height-v),this.bottomLeftPaddingBox=d>0||p>0?Bw(e.left+b,e.top+Math.min(y,e.height-v),Math.max(0,d-b),Math.max(0,p-v),Km.BOTTOM_LEFT):new hw(e.left+b,e.top+e.height-v),this.topLeftContentBox=i>0||s>0?Bw(e.left+b+E,e.top+C+U,Math.max(0,i-(b+E)),Math.max(0,s-(C+U)),Km.TOP_LEFT):new hw(e.left+b+E,e.top+C+U),this.topRightContentBox=o>0||a>0?Bw(e.left+Math.min(B,e.width+b+E),e.top+C+U,B>e.width+b+E?0:o-b+E,a-(C+U),Km.TOP_RIGHT):new hw(e.left+e.width-(Q+F),e.top+C+U),this.bottomRightContentBox=c>0||u>0?Bw(e.left+Math.min(w,e.width-(b+E)),e.top+Math.min(m,e.height+C+U),Math.max(0,c-(Q+F)),u-(v+I),Km.BOTTOM_RIGHT):new hw(e.left+e.width-(Q+F),e.top+e.height-(v+I)),this.bottomLeftContentBox=d>0||p>0?Bw(e.left+b+E,e.top+y,Math.max(0,d-(b+E)),p-(v+I),Km.BOTTOM_LEFT):new hw(e.left+b+E,e.top+e.height-(v+I))};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Km||(Km={}));var Bw=function(t,A,e,n,i){var s=(Math.sqrt(2)-1)/3*4,r=e*s,o=n*s,a=t+e,l=A+n;switch(i){case Km.TOP_LEFT:return new pw(new hw(t,l),new hw(t,l-o),new hw(a-r,A),new hw(a,A));case Km.TOP_RIGHT:return new pw(new hw(t,A),new hw(t+r,A),new hw(a,l-o),new hw(a,l));case Km.BOTTOM_RIGHT:return new pw(new hw(a,A),new hw(a,A+o),new hw(t+r,l),new hw(t,l));case Km.BOTTOM_LEFT:default:return new pw(new hw(a,l),new hw(a-r,l),new hw(t,A+o),new hw(t,A))}},mw=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},ww=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},yw=function(t,A,e){this.offsetX=t,this.offsetY=A,this.matrix=e,this.type=0,this.target=6},Cw=function(t,A){this.path=t,this.target=A,this.type=1},Qw=function(t){this.opacity=t,this.type=2,this.target=6},vw=function(t){return 1===t.type},bw=function(t,A){return t.length===A.length&&t.some((function(t,e){return t===A[e]}))},Uw=function(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Fw=function(){function t(t,A){if(this.container=t,this.parent=A,this.effects=[],this.curves=new fw(this.container),this.container.styles.opacity<1&&this.effects.push(new Qw(this.container.styles.opacity)),null!==this.container.styles.transform){var e=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new yw(e,n,i))}if(0!==this.container.styles.overflowX){var s=mw(this.curves),r=ww(this.curves);bw(s,r)?this.effects.push(new Cw(s,6)):(this.effects.push(new Cw(s,2)),this.effects.push(new Cw(r,4)))}}return t.prototype.getEffects=function(t){for(var A=-1===[2,3].indexOf(this.container.styles.position),e=this.parent,n=this.effects.slice(0);e;){var i=e.effects.filter((function(t){return!vw(t)}));if(A||0!==e.container.styles.position||!e.parent){if(n.unshift.apply(n,i),A=-1===[2,3].indexOf(e.container.styles.position),0!==e.container.styles.overflowX){var s=mw(e.curves),r=ww(e.curves);bw(s,r)||n.unshift(new Cw(r,6))}}else n.unshift.apply(n,i);e=e.parent}return n.filter((function(A){return Rf(A.target,t)}))},t}(),Iw=function(t,A,e,n){t.container.elements.forEach((function(i){var s=Rf(i.flags,4),r=Rf(i.flags,2),o=new Fw(i,t);Rf(i.styles.display,2048)&&n.push(o);var a=Rf(i.flags,8)?[]:n;if(s||r){var l=s||i.styles.isPositioned()?e:A,c=new Uw(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;l.negativeZIndex.some((function(t,A){return u>t.element.container.styles.zIndex.order?(h=A,!1):h>0})),l.negativeZIndex.splice(h,0,c)}else if(u>0){var d=0;l.positiveZIndex.some((function(t,A){return u>=t.element.container.styles.zIndex.order?(d=A+1,!1):d>0})),l.positiveZIndex.splice(d,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);Iw(o,c,s?c:e,a)}else i.styles.isInlineLevel()?A.inlineLevel.push(o):A.nonInlineLevel.push(o),Iw(o,A,e,a);Rf(i.flags,8)&&Ew(i,a)}))},Ew=function(t,A){for(var e=t instanceof jB?t.start:1,n=t instanceof jB&&t.reversed,i=0;i<A.length;i++){var s=A[i];s.container instanceof RB&&"number"==typeof s.container.value&&0!==s.container.value&&(e=s.container.value),s.listValue=Om(e,s.container.styles.listStyleType,!0),e+=n?-1:1}},Mw=function(t,A){switch(A){case 0:return _w(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return _w(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return _w(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return _w(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Lw=function(t,A){var e=[];return gw(t)?e.push(t.subdivide(.5,!1)):e.push(t),gw(A)?e.push(A.subdivide(.5,!0)):e.push(A),e},_w=function(t,A,e,n){var i=[];return gw(t)?i.push(t.subdivide(.5,!1)):i.push(t),gw(e)?i.push(e.subdivide(.5,!0)):i.push(e),gw(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),gw(A)?i.push(A.subdivide(.5,!1).reverse()):i.push(A),i},Dw=function(t){var A=t.bounds,e=t.styles;return A.add(e.borderLeftWidth,e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth),-(e.borderTopWidth+e.borderBottomWidth))},$w=function(t){var A=t.styles,e=t.bounds,n=Hp(A.paddingLeft,e.width),i=Hp(A.paddingRight,e.width),s=Hp(A.paddingTop,e.width),r=Hp(A.paddingBottom,e.width);return e.add(n+A.borderLeftWidth,s+A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth+n+i),-(A.borderTopWidth+A.borderBottomWidth+s+r))},Sw=function(t,A,e){var n=function(t,A){return 0===t?A.bounds:2===t?$w(A):Dw(A)}(Ow(t.styles.backgroundOrigin,A),t),i=function(t,A){return 0===t?A.bounds:2===t?$w(A):Dw(A)}(Ow(t.styles.backgroundClip,A),t),s=Hw(Ow(t.styles.backgroundSize,A),e,n),r=s[0],o=s[1],a=Tp(Ow(t.styles.backgroundPosition,A),n.width-r,n.height-o);return[kw(Ow(t.styles.backgroundRepeat,A),a,s,n,i),Math.round(n.left+a[0]),Math.round(n.top+a[1]),r,o]},xw=function(t){return vp(t)&&t.value===wg.AUTO},Tw=function(t){return"number"==typeof t},Hw=function(t,A,e){var n=A[0],i=A[1],s=A[2],r=t[0],o=t[1];if(!r)return[0,0];if(_p(r)&&o&&_p(o))return[Hp(r,e.width),Hp(o,e.height)];var a=Tw(s);if(vp(r)&&(r.value===wg.CONTAIN||r.value===wg.COVER))return Tw(s)?e.width/e.height<s!=(r.value===wg.COVER)?[e.width,e.width/s]:[e.height*s,e.height]:[e.width,e.height];var l=Tw(n),c=Tw(i),u=l||c;if(xw(r)&&(!o||xw(o)))return l&&c?[n,i]:a||u?u&&a?[l?n:i*s,c?i:n/s]:[l?n:e.width,c?i:e.height]:[e.width,e.height];if(a){var h=0,d=0;return _p(r)?h=Hp(r,e.width):_p(o)&&(d=Hp(o,e.height)),xw(r)?h=d*s:o&&!xw(o)||(d=h/s),[h,d]}var p=null,g=null;if(_p(r)?p=Hp(r,e.width):o&&_p(o)&&(g=Hp(o,e.height)),null===p||o&&!xw(o)||(g=l&&c?p/n*i:e.height),null!==g&&xw(r)&&(p=l&&c?g/i*n:e.width),null!==p&&null!==g)return[p,g];throw new Error("Unable to calculate background-size for element")},Ow=function(t,A){var e=t[A];return void 0===e?t[0]:e},kw=function(t,A,e,n,i){var s=A[0],r=A[1],o=e[0],a=e[1];switch(t){case 2:return[new hw(Math.round(n.left),Math.round(n.top+r)),new hw(Math.round(n.left+n.width),Math.round(n.top+r)),new hw(Math.round(n.left+n.width),Math.round(a+n.top+r)),new hw(Math.round(n.left),Math.round(a+n.top+r))];case 3:return[new hw(Math.round(n.left+s),Math.round(n.top)),new hw(Math.round(n.left+s+o),Math.round(n.top)),new hw(Math.round(n.left+s+o),Math.round(n.height+n.top)),new hw(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new hw(Math.round(n.left+s),Math.round(n.top+r)),new hw(Math.round(n.left+s+o),Math.round(n.top+r)),new hw(Math.round(n.left+s+o),Math.round(n.top+r+a)),new hw(Math.round(n.left+s),Math.round(n.top+r+a))];default:return[new hw(Math.round(i.left),Math.round(i.top)),new hw(Math.round(i.left+i.width),Math.round(i.top)),new hw(Math.round(i.left+i.width),Math.round(i.height+i.top)),new hw(Math.round(i.left),Math.round(i.height+i.top))]}},Nw="Hidden Text",Kw=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,A){var e=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),s=this._document.body;e.style.visibility="hidden",e.style.fontFamily=t,e.style.fontSize=A,e.style.margin="0",e.style.padding="0",e.style.whiteSpace="nowrap",s.appendChild(e),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=A,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Nw)),e.appendChild(i),e.appendChild(n);var r=n.offsetTop-i.offsetTop+2;e.removeChild(i),e.appendChild(this._document.createTextNode(Nw)),e.style.lineHeight="normal",n.style.verticalAlign="super";var o=n.offsetTop-e.offsetTop+2;return s.removeChild(e),{baseline:r,middle:o}},t.prototype.getMetrics=function(t,A){var e=t+" "+A;return void 0===this._data[e]&&(this._data[e]=this.parseMetrics(t,A)),this._data[e]},t}(),Rw=function(t,A){this.context=t,this.options=A},jw=function(t){function A(A,e){var n=t.call(this,A,e)||this;return n._activeEffects=[],n.canvas=e.canvas?e.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),e.canvas||(n.canvas.width=Math.floor(e.width*e.scale),n.canvas.height=Math.floor(e.height*e.scale),n.canvas.style.width=e.width+"px",n.canvas.style.height=e.height+"px"),n.fontMetrics=new Kw(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-e.x,-e.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+e.width+"x"+e.height+") with scale "+e.scale),n}return $h(A,t),A.prototype.applyEffects=function(t){for(var A=this;this._activeEffects.length;)this.popEffect();t.forEach((function(t){return A.applyEffect(t)}))},A.prototype.applyEffect=function(t){this.ctx.save(),function(t){return 2===t.type}(t)&&(this.ctx.globalAlpha=t.opacity),function(t){return 0===t.type}(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),vw(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(t){return xh(this,void 0,void 0,(function(){return Th(this,(function(A){switch(A.label){case 0:return t.element.container.styles.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}}))}))},A.prototype.renderNode=function(t){return xh(this,void 0,void 0,(function(){return Th(this,(function(A){switch(A.label){case 0:return Rf(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return A.sent(),[4,this.renderNodeContent(t)];case 2:A.sent(),A.label=3;case 3:return[2]}}))}))},A.prototype.renderTextWithLetterSpacing=function(t,A,e){var n=this;0===A?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+e):_B(t.text).reduce((function(A,i){return n.ctx.fillText(i,A,t.bounds.top+e),A+n.ctx.measureText(i).width}),t.bounds.left)},A.prototype.createFontStyle=function(t){var A=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),e=Jw(t.fontFamily).join(", "),n=Cp(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,A,t.fontWeight,n,e].join(" "),e,n]},A.prototype.renderTextNode=function(t,A){return xh(this,void 0,void 0,(function(){var e,n,i,s,r,o,a,l,c=this;return Th(this,(function(u){return e=this.createFontStyle(A),n=e[0],i=e[1],s=e[2],this.ctx.font=n,this.ctx.direction=1===A.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(i,s),o=r.baseline,a=r.middle,l=A.paintOrder,t.textBounds.forEach((function(t){l.forEach((function(e){switch(e){case 0:c.ctx.fillStyle=Vp(A.color),c.renderTextWithLetterSpacing(t,A.letterSpacing,o);var n=A.textShadow;n.length&&t.text.trim().length&&(n.slice(0).reverse().forEach((function(e){c.ctx.shadowColor=Vp(e.color),c.ctx.shadowOffsetX=e.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=e.offsetY.number*c.options.scale,c.ctx.shadowBlur=e.blur.number,c.renderTextWithLetterSpacing(t,A.letterSpacing,o)})),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),A.textDecorationLine.length&&(c.ctx.fillStyle=Vp(A.textDecorationColor||A.color),A.textDecorationLine.forEach((function(A){switch(A){case 1:c.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+o),t.bounds.width,1);break;case 2:c.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:c.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+a),t.bounds.width,1)}})));break;case 1:A.webkitTextStrokeWidth&&t.text.trim().length&&(c.ctx.strokeStyle=Vp(A.webkitTextStrokeColor),c.ctx.lineWidth=A.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+o)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}}))})),[2]}))}))},A.prototype.renderReplacedElement=function(t,A,e){if(e&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var n=$w(t),i=ww(A);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(e,0,0,t.intrinsicWidth,t.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(t){return xh(this,void 0,void 0,(function(){var e,n,i,s,r,o,a,l,c,u,h,d,p,g,f,B,m,w;return Th(this,(function(y){switch(y.label){case 0:this.applyEffects(t.getEffects(4)),e=t.container,n=t.curves,i=e.styles,s=0,r=e.textNodes,y.label=1;case 1:return s<r.length?(o=r[s],[4,this.renderTextNode(o,i)]):[3,4];case 2:y.sent(),y.label=3;case 3:return s++,[3,1];case 4:if(!(e instanceof kB))return[3,8];y.label=5;case 5:return y.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return f=y.sent(),this.renderReplacedElement(e,n,f),[3,8];case 7:return y.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof NB&&this.renderReplacedElement(e,n,e.canvas),!(e instanceof KB))return[3,12];y.label=9;case 9:return y.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return f=y.sent(),this.renderReplacedElement(e,n,f),[3,12];case 11:return y.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof qB&&e.tree?[4,new A(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:a=y.sent(),e.width&&e.height&&this.ctx.drawImage(a,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),y.label=14;case 14:if(e instanceof WB&&(l=Math.min(e.bounds.width,e.bounds.height),e.type===VB?e.checked&&(this.ctx.save(),this.path([new hw(e.bounds.left+.39363*l,e.bounds.top+.79*l),new hw(e.bounds.left+.16*l,e.bounds.top+.5549*l),new hw(e.bounds.left+.27347*l,e.bounds.top+.44071*l),new hw(e.bounds.left+.39694*l,e.bounds.top+.5649*l),new hw(e.bounds.left+.72983*l,e.bounds.top+.23*l),new hw(e.bounds.left+.84*l,e.bounds.top+.34085*l),new hw(e.bounds.left+.39363*l,e.bounds.top+.79*l)]),this.ctx.fillStyle=Vp(YB),this.ctx.fill(),this.ctx.restore()):e.type===zB&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+l/2,e.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=Vp(YB),this.ctx.fill(),this.ctx.restore())),Pw(e)&&e.value.length){switch(c=this.createFontStyle(i),m=c[0],u=c[1],h=this.fontMetrics.getMetrics(m,u).baseline,this.ctx.font=m,this.ctx.fillStyle=Vp(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Vw(e.styles.textAlign),w=$w(e),d=0,e.styles.textAlign){case 1:d+=w.width/2;break;case 2:d+=w.width}p=w.add(d,0,0,-w.height/2+1),this.ctx.save(),this.path([new hw(w.left,w.top),new hw(w.left+w.width,w.top),new hw(w.left+w.width,w.top+w.height),new hw(w.left,w.top+w.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new EB(e.value,p),i.letterSpacing,h),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Rf(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(g=e.styles.listStyleImage).type)return[3,18];f=void 0,B=g.url,y.label=15;case 15:return y.trys.push([15,17,,18]),[4,this.context.cache.match(B)];case 16:return f=y.sent(),this.ctx.drawImage(f,e.bounds.left-(f.width+10),e.bounds.top),[3,18];case 17:return y.sent(),this.context.logger.error("Error loading list-style-image "+B),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==e.styles.listStyleType&&(m=this.createFontStyle(i)[0],this.ctx.font=m,this.ctx.fillStyle=Vp(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",w=new Oh(e.bounds.left,e.bounds.top+Hp(e.styles.paddingTop,e.bounds.width),e.bounds.width,sf(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new EB(t.listValue,w),i.letterSpacing,sf(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),y.label=20;case 20:return[2]}}))}))},A.prototype.renderStackContent=function(t){return xh(this,void 0,void 0,(function(){var A,e,n,i,s,r,o,a,l,c,u,h,d,p,g;return Th(this,(function(f){switch(f.label){case 0:return Rf(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:f.sent(),A=0,e=t.negativeZIndex,f.label=2;case 2:return A<e.length?(g=e[A],[4,this.renderStack(g)]):[3,5];case 3:f.sent(),f.label=4;case 4:return A++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:f.sent(),n=0,i=t.nonInlineLevel,f.label=7;case 7:return n<i.length?(g=i[n],[4,this.renderNode(g)]):[3,10];case 8:f.sent(),f.label=9;case 9:return n++,[3,7];case 10:s=0,r=t.nonPositionedFloats,f.label=11;case 11:return s<r.length?(g=r[s],[4,this.renderStack(g)]):[3,14];case 12:f.sent(),f.label=13;case 13:return s++,[3,11];case 14:o=0,a=t.nonPositionedInlineLevel,f.label=15;case 15:return o<a.length?(g=a[o],[4,this.renderStack(g)]):[3,18];case 16:f.sent(),f.label=17;case 17:return o++,[3,15];case 18:l=0,c=t.inlineLevel,f.label=19;case 19:return l<c.length?(g=c[l],[4,this.renderNode(g)]):[3,22];case 20:f.sent(),f.label=21;case 21:return l++,[3,19];case 22:u=0,h=t.zeroOrAutoZIndexOrTransformedOrOpacity,f.label=23;case 23:return u<h.length?(g=h[u],[4,this.renderStack(g)]):[3,26];case 24:f.sent(),f.label=25;case 25:return u++,[3,23];case 26:d=0,p=t.positiveZIndex,f.label=27;case 27:return d<p.length?(g=p[d],[4,this.renderStack(g)]):[3,30];case 28:f.sent(),f.label=29;case 29:return d++,[3,27];case 30:return[2]}}))}))},A.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},A.prototype.formatPath=function(t){var A=this;t.forEach((function(t,e){var n=gw(t)?t.start:t;0===e?A.ctx.moveTo(n.x,n.y):A.ctx.lineTo(n.x,n.y),gw(t)&&A.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},A.prototype.renderRepeat=function(t,A,e,n){this.path(t),this.ctx.fillStyle=A,this.ctx.translate(e,n),this.ctx.fill(),this.ctx.translate(-e,-n)},A.prototype.resizeImage=function(t,A,e){var n;if(t.width===A&&t.height===e)return t;var i=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return i.width=Math.max(1,A),i.height=Math.max(1,e),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,A,e),i},A.prototype.renderBackgroundImage=function(t){return xh(this,void 0,void 0,(function(){var A,e,n,i,s,r;return Th(this,(function(o){switch(o.label){case 0:A=t.styles.backgroundImage.length-1,e=function(e){var i,s,r,o,a,l,c,u,h,d,p,g,f,B,m,w,y,C,Q,v,b,U,F,I,E,M,L,_,D,$,S;return Th(this,(function(x){switch(x.label){case 0:if(0!==e.type)return[3,5];i=void 0,s=e.url,x.label=1;case 1:return x.trys.push([1,3,,4]),[4,n.context.cache.match(s)];case 2:return i=x.sent(),[3,4];case 3:return x.sent(),n.context.logger.error("Error loading background-image "+s),[3,4];case 4:return i&&(r=Sw(t,A,[i.width,i.height,i.width/i.height]),w=r[0],U=r[1],F=r[2],Q=r[3],v=r[4],B=n.ctx.createPattern(n.resizeImage(i,Q,v),"repeat"),n.renderRepeat(w,B,U,F)),[3,6];case 5:1===e.type?(o=Sw(t,A,[null,null,null]),w=o[0],U=o[1],F=o[2],Q=o[3],v=o[4],a=sg(e.angle,Q,v),l=a[0],c=a[1],u=a[2],h=a[3],d=a[4],(p=document.createElement("canvas")).width=Q,p.height=v,g=p.getContext("2d"),f=g.createLinearGradient(c,h,u,d),ig(e.stops,l).forEach((function(t){return f.addColorStop(t.stop,Vp(t.color))})),g.fillStyle=f,g.fillRect(0,0,Q,v),Q>0&&v>0&&(B=n.ctx.createPattern(p,"repeat"),n.renderRepeat(w,B,U,F))):function(t){return 2===t.type}(e)&&(m=Sw(t,A,[null,null,null]),w=m[0],y=m[1],C=m[2],Q=m[3],v=m[4],b=0===e.position.length?[Sp]:e.position,U=Hp(b[0],Q),F=Hp(b[b.length-1],v),I=function(t,A,e,n,i){var s=0,r=0;switch(t.size){case 0:0===t.shape?s=r=Math.min(Math.abs(A),Math.abs(A-n),Math.abs(e),Math.abs(e-i)):1===t.shape&&(s=Math.min(Math.abs(A),Math.abs(A-n)),r=Math.min(Math.abs(e),Math.abs(e-i)));break;case 2:if(0===t.shape)s=r=Math.min(rg(A,e),rg(A,e-i),rg(A-n,e),rg(A-n,e-i));else if(1===t.shape){var o=Math.min(Math.abs(e),Math.abs(e-i))/Math.min(Math.abs(A),Math.abs(A-n)),a=og(n,i,A,e,!0),l=a[0],c=a[1];r=o*(s=rg(l-A,(c-e)/o))}break;case 1:0===t.shape?s=r=Math.max(Math.abs(A),Math.abs(A-n),Math.abs(e),Math.abs(e-i)):1===t.shape&&(s=Math.max(Math.abs(A),Math.abs(A-n)),r=Math.max(Math.abs(e),Math.abs(e-i)));break;case 3:if(0===t.shape)s=r=Math.max(rg(A,e),rg(A,e-i),rg(A-n,e),rg(A-n,e-i));else if(1===t.shape){o=Math.max(Math.abs(e),Math.abs(e-i))/Math.max(Math.abs(A),Math.abs(A-n));var u=og(n,i,A,e,!1);l=u[0],c=u[1],r=o*(s=rg(l-A,(c-e)/o))}}return Array.isArray(t.size)&&(s=Hp(t.size[0],n),r=2===t.size.length?Hp(t.size[1],i):s),[s,r]}(e,U,F,Q,v),E=I[0],M=I[1],E>0&&M>0&&(L=n.ctx.createRadialGradient(y+U,C+F,0,y+U,C+F,E),ig(e.stops,2*E).forEach((function(t){return L.addColorStop(t.stop,Vp(t.color))})),n.path(w),n.ctx.fillStyle=L,E!==M?(_=t.bounds.left+.5*t.bounds.width,D=t.bounds.top+.5*t.bounds.height,S=1/($=M/E),n.ctx.save(),n.ctx.translate(_,D),n.ctx.transform(1,0,0,$,0,0),n.ctx.translate(-_,-D),n.ctx.fillRect(y,S*(C-D)+D,Q,v*S),n.ctx.restore()):n.ctx.fill())),x.label=6;case 6:return A--,[2]}}))},n=this,i=0,s=t.styles.backgroundImage.slice(0).reverse(),o.label=1;case 1:return i<s.length?(r=s[i],[5,e(r)]):[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},A.prototype.renderSolidBorder=function(t,A,e){return xh(this,void 0,void 0,(function(){return Th(this,(function(n){return this.path(Mw(e,A)),this.ctx.fillStyle=Vp(t),this.ctx.fill(),[2]}))}))},A.prototype.renderDoubleBorder=function(t,A,e,n){return xh(this,void 0,void 0,(function(){var i,s;return Th(this,(function(r){switch(r.label){case 0:return A<3?[4,this.renderSolidBorder(t,e,n)]:[3,2];case 1:return r.sent(),[2];case 2:return i=function(t,A){switch(A){case 0:return _w(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return _w(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return _w(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return _w(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}}(n,e),this.path(i),this.ctx.fillStyle=Vp(t),this.ctx.fill(),s=function(t,A){switch(A){case 0:return _w(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return _w(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return _w(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return _w(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}}(n,e),this.path(s),this.ctx.fill(),[2]}}))}))},A.prototype.renderNodeBackgroundAndBorders=function(t){return xh(this,void 0,void 0,(function(){var A,e,n,i,s,r,o,a,l=this;return Th(this,(function(c){switch(c.label){case 0:return this.applyEffects(t.getEffects(2)),A=t.container.styles,e=!Gp(A.backgroundColor)||A.backgroundImage.length,n=[{style:A.borderTopStyle,color:A.borderTopColor,width:A.borderTopWidth},{style:A.borderRightStyle,color:A.borderRightColor,width:A.borderRightWidth},{style:A.borderBottomStyle,color:A.borderBottomColor,width:A.borderBottomWidth},{style:A.borderLeftStyle,color:A.borderLeftColor,width:A.borderLeftWidth}],i=Gw(Ow(A.backgroundClip,0),t.curves),e||A.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Gp(A.backgroundColor)||(this.ctx.fillStyle=Vp(A.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:c.sent(),this.ctx.restore(),A.boxShadow.slice(0).reverse().forEach((function(A){l.ctx.save();var e,n,i,s,r,o=mw(t.curves),a=A.inset?0:1e4,c=(e=o,n=-a+(A.inset?1:-1)*A.spread.number,i=(A.inset?1:-1)*A.spread.number,s=A.spread.number*(A.inset?-2:2),r=A.spread.number*(A.inset?-2:2),e.map((function(t,A){switch(A){case 0:return t.add(n,i);case 1:return t.add(n+s,i);case 2:return t.add(n+s,i+r);case 3:return t.add(n,i+r)}return t})));A.inset?(l.path(o),l.ctx.clip(),l.mask(c)):(l.mask(o),l.ctx.clip(),l.path(c)),l.ctx.shadowOffsetX=A.offsetX.number+a,l.ctx.shadowOffsetY=A.offsetY.number,l.ctx.shadowColor=Vp(A.color),l.ctx.shadowBlur=A.blur.number,l.ctx.fillStyle=A.inset?Vp(A.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),c.label=2;case 2:s=0,r=0,o=n,c.label=3;case 3:return r<o.length?0!==(a=o[r]).style&&!Gp(a.color)&&a.width>0?2!==a.style?[3,5]:[4,this.renderDashedDottedBorder(a.color,a.width,s,t.curves,2)]:[3,11]:[3,13];case 4:return c.sent(),[3,11];case 5:return 3!==a.style?[3,7]:[4,this.renderDashedDottedBorder(a.color,a.width,s,t.curves,3)];case 6:return c.sent(),[3,11];case 7:return 4!==a.style?[3,9]:[4,this.renderDoubleBorder(a.color,a.width,s,t.curves)];case 8:return c.sent(),[3,11];case 9:return[4,this.renderSolidBorder(a.color,s,t.curves)];case 10:c.sent(),c.label=11;case 11:s++,c.label=12;case 12:return r++,[3,3];case 13:return[2]}}))}))},A.prototype.renderDashedDottedBorder=function(t,A,e,n,i){return xh(this,void 0,void 0,(function(){var s,r,o,a,l,c,u,h,d,p,g,f,B,m,w,y;return Th(this,(function(C){return this.ctx.save(),s=function(t,A){switch(A){case 0:return Lw(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Lw(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Lw(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return Lw(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}}(n,e),r=Mw(n,e),2===i&&(this.path(r),this.ctx.clip()),gw(r[0])?(o=r[0].start.x,a=r[0].start.y):(o=r[0].x,a=r[0].y),gw(r[1])?(l=r[1].end.x,c=r[1].end.y):(l=r[1].x,c=r[1].y),u=0===e||2===e?Math.abs(o-l):Math.abs(a-c),this.ctx.beginPath(),3===i?this.formatPath(s):this.formatPath(r.slice(0,2)),h=A<3?3*A:2*A,d=A<3?2*A:A,3===i&&(h=A,d=A),p=!0,u<=2*h?p=!1:u<=2*h+d?(h*=g=u/(2*h+d),d*=g):(f=Math.floor((u+d)/(h+d)),B=(u-f*h)/(f-1),d=(m=(u-(f+1)*h)/f)<=0||Math.abs(d-B)<Math.abs(d-m)?B:m),p&&(3===i?this.ctx.setLineDash([0,h+d]):this.ctx.setLineDash([h,d])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=A):this.ctx.lineWidth=2*A+1.1,this.ctx.strokeStyle=Vp(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(gw(r[0])&&(w=r[3],y=r[0],this.ctx.beginPath(),this.formatPath([new hw(w.end.x,w.end.y),new hw(y.start.x,y.start.y)]),this.ctx.stroke()),gw(r[1])&&(w=r[1],y=r[2],this.ctx.beginPath(),this.formatPath([new hw(w.end.x,w.end.y),new hw(y.start.x,y.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},A.prototype.render=function(t){return xh(this,void 0,void 0,(function(){var A;return Th(this,(function(e){switch(e.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Vp(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),A=function(t){var A=new Fw(t,null),e=new Uw(A),n=[];return Iw(A,e,e,n),Ew(A.container,n),e}(t),[4,this.renderStack(A)];case 1:return e.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},A}(Rw),Pw=function(t){return t instanceof ZB||(t instanceof XB||t instanceof WB&&t.type!==zB&&t.type!==VB)},Gw=function(t,A){switch(t){case 0:return mw(A);case 2:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(A);default:return ww(A)}},Vw=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},zw=["-apple-system","system-ui"],Jw=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter((function(t){return-1===zw.indexOf(t)})):t},Yw=function(t){function A(A,e){var n=t.call(this,A,e)||this;return n.canvas=e.canvas?e.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=e,n.canvas.width=Math.floor(e.width*e.scale),n.canvas.height=Math.floor(e.height*e.scale),n.canvas.style.width=e.width+"px",n.canvas.style.height=e.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-e.x,-e.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale),n}return $h(A,t),A.prototype.render=function(t){return xh(this,void 0,void 0,(function(){var A,e;return Th(this,(function(n){switch(n.label){case 0:return A=UB(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,Ww(A)];case 1:return e=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Vp(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(e,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},A}(Rw),Ww=function(t){return new Promise((function(A,e){var n=new Image;n.onload=function(){A(n)},n.onerror=e,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},Xw=function(){function t(t){var A=t.id,e=t.enabled;this.id=A,this.enabled=e,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,Hh([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,Hh([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,Hh([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,Hh([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={},t}(),Zw=function(){function t(A,e){var n;this.windowBounds=e,this.instanceName="#"+t.instanceCount++,this.logger=new Xw({id:this.instanceName,enabled:A.logging}),this.cache=null!==(n=A.cache)&&void 0!==n?n:new nw(this,A)}return t.instanceCount=1,t}();"undefined"!=typeof window&&ew.setContext(window);var qw=function(t,A){return xh(void 0,void 0,void 0,(function(){var e,n,i,s,r,o,a,l,c,u,h,d,p,g,f,B,m,w,y,C,Q,v,b,U,F,I,E,M,L,_,D,$,S,x,T,H,O,k;return Th(this,(function(N){switch(N.label){case 0:if(!t||"object"!=typeof t)return[2,Promise.reject("Invalid element provided as first argument")];if(!(e=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(n=e.defaultView))throw new Error("Document is not attached to a Window");return i={allowTaint:null!==(v=A.allowTaint)&&void 0!==v&&v,imageTimeout:null!==(b=A.imageTimeout)&&void 0!==b?b:15e3,proxy:A.proxy,useCORS:null!==(U=A.useCORS)&&void 0!==U&&U},s=Sh({logging:null===(F=A.logging)||void 0===F||F,cache:A.cache},i),r={windowWidth:null!==(I=A.windowWidth)&&void 0!==I?I:n.innerWidth,windowHeight:null!==(E=A.windowHeight)&&void 0!==E?E:n.innerHeight,scrollX:null!==(M=A.scrollX)&&void 0!==M?M:n.pageXOffset,scrollY:null!==(L=A.scrollY)&&void 0!==L?L:n.pageYOffset},o=new Oh(r.scrollX,r.scrollY,r.windowWidth,r.windowHeight),a=new Zw(s,o),l=null!==(_=A.foreignObjectRendering)&&void 0!==_&&_,c={allowTaint:null!==(D=A.allowTaint)&&void 0!==D&&D,onclone:A.onclone,ignoreElements:A.ignoreElements,inlineImages:l,copyStyles:l},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),u=new Nm(a,t,c),(h=u.clonedReferenceElement)?[4,u.toIFrame(e,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return d=N.sent(),p=pm(h)||"HTML"===h.tagName?function(t){var A=t.body,e=t.documentElement;if(!A||!e)throw new Error("Unable to get document size");var n=Math.max(Math.max(A.scrollWidth,e.scrollWidth),Math.max(A.offsetWidth,e.offsetWidth),Math.max(A.clientWidth,e.clientWidth)),i=Math.max(Math.max(A.scrollHeight,e.scrollHeight),Math.max(A.offsetHeight,e.offsetHeight),Math.max(A.clientHeight,e.clientHeight));return new Oh(0,0,n,i)}(h.ownerDocument):kh(a,h),g=p.width,f=p.height,B=p.left,m=p.top,w=ty(a,h,A.backgroundColor),y={canvas:A.canvas,backgroundColor:w,scale:null!==(S=null!==($=A.scale)&&void 0!==$?$:n.devicePixelRatio)&&void 0!==S?S:1,x:(null!==(x=A.x)&&void 0!==x?x:0)+B,y:(null!==(T=A.y)&&void 0!==T?T:0)+m,width:null!==(H=A.width)&&void 0!==H?H:Math.ceil(g),height:null!==(O=A.height)&&void 0!==O?O:Math.ceil(f)},l?(a.logger.debug("Document cloned, using foreign object rendering"),[4,new Yw(a,y).render(h)]):[3,3];case 2:return C=N.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+B+","+m+" with size "+g+"x"+f+" using computed rendering"),a.logger.debug("Starting DOM parsing"),Q=nm(a,h),w===Q.styles.backgroundColor&&(Q.styles.backgroundColor=tg.TRANSPARENT),a.logger.debug("Starting renderer for element at "+y.x+","+y.y+" with size "+y.width+"x"+y.height),[4,new jw(a,y).render(Q)];case 4:C=N.sent(),N.label=5;case 5:return(null===(k=A.removeContainer)||void 0===k||k)&&(Nm.destroy(d)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,C]}}))}))},ty=function(t,A,e){var n=A.ownerDocument,i=n.documentElement?qp(t,getComputedStyle(n.documentElement).backgroundColor):tg.TRANSPARENT,s=n.body?qp(t,getComputedStyle(n.body).backgroundColor):tg.TRANSPARENT,r="string"==typeof e?qp(t,e):null===e?tg.TRANSPARENT:4294967295;return A===n.documentElement?Gp(i)?Gp(s)?r:s:i:r};class Ay{constructor(t,A={},e={},n={}){this.$options={rootConfig:null,options:null,config:null,kpOption:null,children:null,parent:null,root:null,canvas:null,topUi:null,elm:null,globalManager:null,manager:null,dataManager:null,globalDataManager:null,id:ph(),parentGlobalId:null,globalId:null,type:null,status:null,attrs:{},isBeingDestroyed:null,isDestroyed:null,isEdit:null,events:null},this.$topUi=null,this.$parentUi=null,this.$parent=null,this.$root=null,this.$canvas=null,this.adapter=null,this.children=null,this.$complete=null,this.$events={elements:{},events:{}},this._beforeInit(),this._initBegin(t,A,e,n),this.$emit("newElementEnd",this),this.$root.$emit("newElementEnd",this),this.$emit("newElementEnd:"+this.$options.type,this),this.$root.$emit("newElementEnd:"+this.$options.type,this)}_registerAttr(t,A,e,n,i,s={}){if(this.$options.status)console.warn("当前状态不允许注册属性");else if(this.$options.attrs[t])console.warn(`${t} 已被注册`);else{const r={name:t,value:A,init:e,get:n,set:i,option:s};this.$options.attrs[t]=r,Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>function(t){return t.get?t.get():t.value}(r),set(t){!function(t,A,e){if(!A.set)return;const n=t[A.name];if(n===e)return;const{setBefore:i,setAfter:s}=A.option;i&&i(),t._updateAttr(A,e,Xi(n)),s&&s()}(this,r,t)}})}return this}_removeAttr(t){return this.$options.status?console.warn("当前状态不允许移除属性"):(delete this.$options.attrs[t],delete this[t]),this}_beforeInit(){var t;return(t=this)._registerAttr("id",null,(function(t){return t.option.id}),null,null,{initUi:function(t){return t.id}})._registerAttr("name",null,(function(t){return t.option.name}),null,(function(A){try{t.$uiComp.name=A}catch(A){console.warn(t.id+" 设置ui实例名称失败",A.message)}return A}),{initUi:function(t){return t.name}})._registerAttr("type",null,(function(t){return t.type}),null,null,{initUi:function(t){return t.type}})._registerAttr("isSelected",null,null,null,(function(t){return t}),{noAdd:!0})._registerAttr("isLock",null,(function(t){return!!t.option.isLock}),null,(function(A){try{t.$uiComp.lock=A}catch(A){console.warn(t.id+" 设置ui实例加解锁失败",A.message)}return A}),{initUi:t=>!!t.lock,setAfter:()=>{"Group"===t.$parent.type&&t.$parent.$updateUiAttr("isLock")}})._registerAttr("visible",null,(function(t){return!!t.option.visible}),null,(function(A){try{A?t.$uiComp.show():t.$uiComp.hidden()}catch(A){console.warn(t.id+" 设置ui实例显隐操作失败",A.message)}return A}),{initUi:t=>!!t.visible})._registerAttr("top",null,(function(t){return t.option.style?.top||0}),null,(function(A){try{t.$uiComp.top=A}catch(A){console.warn(t.id+" 设置ui实例top失败",A.message)}return A}),{initUi:t=>t.top})._registerAttr("left",null,(function(t){return t.option.style?.left||0}),null,(function(A){try{t.$uiComp.left=A}catch(A){console.warn(t.id+" 设置ui实例left失败",A.message)}return A}),{initUi:t=>t.left})._registerAttr("width",null,(function(t){return t.option.style?.width||0}),null,(function(A){try{t.$uiComp.width=A}catch(A){console.warn(t.id+" 设置ui宽度失败",A.message)}return A}),{initUi:t=>t.width})._registerAttr("height",null,(function(t){return t.option.style?.height||0}),null,(function(A){try{t.$uiComp.height=A}catch(A){console.warn(t.id+" 设置ui高度失败",A.message)}return A}),{initUi:t=>t.height})._registerAttr("rotate",null,(function(t){return ny(t.option.style?.rotate||0)}),null,(function(A){const e=ny(A);try{t.$uiComp.setRotate(e)}catch(A){console.warn(t.id+" 设置ui旋转失败",A.message)}return e}),{initUi:t=>ny(t.rotate||0)})._registerAttr("backgroundColor",null,(function(t){return t.option.style?.backgroundColor||""}),null,(function(A){try{t.$uiComp.backgroundColor=A}catch(A){console.warn(t.id+" 设置ui背景色失败",A.message)}return A}),{initUi:t=>t.backgroundColor||""})._registerAttr("backgroundImage",null,(function(t){return t.option.style?.backgroundImage||""}),null,(function(A){try{t.$uiComp.backgroundImage=A}catch(A){console.warn(t.id+" 设置ui背景图失败",A.message)}return A}),{initUi:t=>t.backgroundImage||""})._registerAttr("animation",null,(function(t){return Xi(t.option.animation||null)}),null,(function(t){return t})),this}async init(){return this.$options.status||(this.$canvas=this.$options.canvas=this.$root.$canvas,this.$options.status="beforeCreate",this.$emit("beforeCreate",this),this.$root.$emit("beforeCreate",this),this.$emit("beforeCreate:"+this.$options.type,this),this.$root.$emit("beforeCreate:"+this.$options.type,this),this._create(),this.$options.status="created",this.$emit("created",this),this.$root.$emit("created",this),this.$emit("created:"+this.$options.type,this),this.$root.$emit("created:"+this.$options.type,this),await this._mount(),this.$options.status="mounted",this.$emit("mounted",this),this.$root.$emit("mounted",this),this.$emit("mounted:"+this.$options.type,this),this.$root.$emit("mounted:"+this.$options.type,this),this._initEnd()),this}_initBegin(t,A,e,n){return this.$options.rootConfig=t.$options.rootConfig,this.$options.options=A,this.$options.config=n,this.$options.kpOption=e,this.$options.parent=t,this.$options.root=t.$options.root,this.$options.topUi=t.$options.topUi,this.$options.parentGlobalId=t.$root.$options.parentGlobalId,this.$options.globalId="",this.$options.globalManager=t.$options.globalManager,this.$options.manager=t.$options.manager,this.$options.dataManager=t.$options.dataManager,this.$options.globalDataManager=t.$options.globalDataManager,this.$options.type=t.$options.manager.getType(this),this.$options.isDestroyed=null,this.$options.isEdit=t.$options.isEdit,this.$options.children=[],this.$parent=t,this.$root=t.$options.root,this.$topUi=t.$options.topUi,this.children=[],this.$complete=!1,this}_create(){return this.$parentUi=this.$parent.$options.manager.parent,this._initAttrs(),this._initChildren(),this}_updateChildren(t){return this.$emit("updateChildren",this),this.$root.$emit("updateChildren",this),this._update("children",this.children,t),this}_initEvent(){return this}_destroyEvent(){return this}_initCompCreateUi(){const t=this.$options;if($n[t.type])return new $n[t.type](this.$parent.$uiComp,Xi(t.options?.option));console.warn(`ThingUi没有${t.type}方法`)}_initComp(){const t=this._initCompCreateUi();return t||console.warn("没有ui实例"),this._initGlobalId(t.id),this.$options.manager.addUiComp(this,t),t.__DIAGRAM__=this,this}_destroyComp(){const t=this.$uiComp;this.$options.manager.removeUiComp(this,t),delete t.__DIAGRAM__;try{t.destroy()}catch(t){console.warn("ui实例销毁失败",t)}return this}_initChildren(){const t=this.$options.options.children||[];for(const A of t){const t=this.$options.manager.create(this,A,A.kpOption,{});this.$options.children.push(t)}return this}async _mountChildren(){const t=this.$options.children;for(const A of t)await A.init();return this}_initSubUiComps(){this.$parentUi.isTopUi}async _mount(){return this._initComp(),this._initUiAttrs(),this._initEvent(),this._initUiEvents(),this.$emit("elementMounted",this),this.$root.$emit("elementMounted",this),this.$emit("elementMounted:"+this.$options.type,this),this.$root.$emit("elementMounted:"+this.$options.type,this),this._initAddParent(),this._initSubUiComps(),await this._mountChildren(),await this._mountEnd(),this}_mountEnd(){return this}_initGlobalId(t){const A=this.$options.parentGlobalId;return this.$options.globalId=A?A+"/"+t:t,this}_initUiAttrs(){return this.$parent.$options.config.newCreate&&this.$updateUiAttrs(),this}_initUiEvents(){return this.$options.isEdit&&this.$uiComp.addEventListener("contextmenu.stop.prevent",this._updateContextmenuEvent,this),this}_initAddParent(){const t=this.$options.config.nextComp;if(t){const A=t.$ranking;this.$parent._spliceChildren&&this.$parent._spliceChildren(A,0,this)}else this.$parent._addChildren&&this.$parent._addChildren(this);return this}_initAttrs(){return this.$updateAttrs(),this}_initEnd(){return this.$complete=!0,this}_updateContextMenuGroupEvent(t,A){const e=t.$root.$selectComponent,n=t.$rootGroup;if(n){const i=function(t){function A(t){if("Group"===t.type)return t.isSelected?t:A(t.$parent)}return A(t.$parent)}(t);i?i.$root._updateContextmenu(e,A):(n.select(!0),n.$root._updateContextmenu([n],A))}else t.select(!0),t.$root._updateContextmenu([t],A)}_updateContextmenuEvent({event:t}){const A=this,{moveCanvasEndTime:e}=A.$topUi;if(e&&!(Date.now()-e>50)&&A.$topUi.$parent.state.contextMenuRunning){const e=A.type;"Container"===e?A.isSelected?A.$root._updateContextmenu(A.$root.$selectComponent,t):A._updateContextMenuGroupEvent(A,t):"Layer"===e&&(A.$parent.select(),A.$root._updateContextmenu([A.$parent],t))}}_spliceChildren(t,A,...e){const n=[...this.children];let i=t;i>=n.length&&(i=n.length),A&&(this.children.splice(i,A),this._updateChildren(n)),e.length&&(this.children.splice(i,0,...e),this._updateChildren(n))}_addChildren(...t){const A=[...this.children];this.children.push(...t),this._updateChildren(A)}$addEventListener(t,A,e,n){return Ki(this,t,A,e,n),this}$removeEventListener(t,A,e,n){return Ri(this,t,A,e,n),this}$on(t,A,e){return ji(this,t,A,e),this}$once(t,A,e){return Pi(this,t,A,e),this}$off(t,A,e){return Gi(this,t,A,e),this}$emit(t,...A){return Vi(this,t,A),this}async $syncEmit(t,...A){return await zi(this,t,A),this}_updateAttr(t,A,e){return t.value=t.set(A),this._update(t.name,A,e),this}_update(t,A,e){return this.$emit("update",this,t,A,e),this.$root.$emit("update",this,t,A,e),this}updateAttrs(t=[]){return t.forEach((t=>{this[t.name]=t.value})),this}$updateAttrs(){return Object.keys(this.$options.attrs).forEach((t=>{this.$updateAttr(t)})),this}$updateAttr(t){const A=this.$options.attrs[t];if(A&&A.init){const t=Xi(A.value),e=A.init(this.$options.options,this.$options.kpOption);e!==t&&(A.option.setBefore&&A.option.setBefore(),A.value=e,A.option.setAfter&&A.option.setAfter(),this._update(A.name,e,t))}return this}$updateUiAttrs(){Object.keys(this.$options.attrs).forEach((t=>{this.$updateUiAttr(t)}))}$updateUiAttr(t){const A=this.$options.attrs[t];if(this.$uiComp&&A&&A.option?.initUi){const t=Xi(A.value),e=A.option.initUi(this.$uiComp);e!==t&&(A.option.setBefore&&A.option.setBefore(),A.value=e,A.option.setAfter&&A.option.setAfter(),this._update(A.name,e,t))}return this}_updateSelect(t){const A=this.$options.attrs.isSelected,e=A.value;return t!==e&&(A.value=t,this._update(A.name,t,e),t?(this.$emit("select",this),this.$root.$emit("select",this)):(this.$emit("unSelect",this),this.$root.$emit("unSelect",this))),this}toJSON(){const{children:t,$uiComp:A,animation:e}=this,n=A.toJSON();return n.kpOption={},e&&(e.enter||e.leave)&&(n.option.animation=Xi(e)),t&&t.length>0?n.children=t.map((t=>t.toJSON())):delete n.children,n}showOverComp(){return this.$ui.boundBox.showBorder(this.$uiComp),this}hiddenOverComp(){return this.$ui.boundBox.hiddenBorder(),this}select(t=!1){return this.$uiComp&&this.$uiComp.select(),this}unSelect(){return this.$uiComp&&this.$uiComp.unselect(),this}selectAll(){return this.$ui.selector.select(...this.children.map((t=>t.$uiComp))),this}show(){return this.visible||(this.visible=!0),this}hidden(){return this.visible&&(this.visible=!1),this}moveToTarget(t,A){if(this.$uiComp.moveToTarget(t.$uiComp,A),this._deletePaternity(),A){let e=t.$parent.children.findIndex((A=>A===t));"after"===A&&e++,t.$parent._spliceChildren(e,0,this)}else t._addChildren(this);return A?(this.$parent=t.$parent,this.$options.parent=t.$options.parent):(this.$parent=t,this.$options.parent=t),this.$emit("moveToTarget",this),this.$root.$emit("moveToTarget",this),this}clear(){return this.children.forEach((t=>t.destroy())),this}async _toImage(t,A){const e="data:image/jpeg;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=";if(!this.width||!this.height)return e;const n={backgroundColor:"#282A2E",width:this.width,height:this.height};let i;Object.assign(n,t.html2canvas,{onclone(t){const e=t.body,n=t.querySelector(`[${A}]`);if(n){n.style.transform="";[...e.childNodes].forEach((t=>t.remove())),e.appendChild(n)}},ignoreElements:t=>{const A=document.body,e=this.$root.$el;if(A.contains(t)&&!e.contains(t)&&!t.contains(e))return!0;if(["VIDEO","IMG","CANVAS"].includes(t.nodeName)){const A=document.createElement("canvas");A.width=t.offsetWidth,A.height=t.offsetHeight;const e=A.getContext("2d");try{e.drawImage(t,0,0,A.width,A.height),e.getImageData(0,0,A.width,A.height)}catch(t){return!0}}}});try{i=await this.getSnapshot(this.$el,n,t.dataURL)}catch(t){console.warn("截图失败",t),i=e}return i}async toImage(t={}){this.$emit("beforeToImage",this),this.$root.$emit("beforeToImage",this),this.$canvas.select();const A=function(t,A){let e=0;return function t(n){const i=""+n+e++;return document.querySelector(`[${i}=${A}]`)?t(i):i}(t)}("canvas-image-dom",!0);this.$canvas.$el.setAttribute(A,""),await Promise.resolve();const e=await this._toImage(t,A);return this.$canvas.$el.removeAttribute(A),this.$emit("toImaged",this),this.$root.$emit("toImaged",this),e}async getSnapshot(t,A,e={type:"image/jpeg",quality:1}){const n=t||this.$canvas.$el,i=A||{},s=n.getBoundingClientRect().width,r=n.getBoundingClientRect().height,o=await function(t,A){return void 0===A&&(A={}),qw(t,A)}(n,{width:s,height:r,allowTaint:!0,taintTest:!1,useCORS:!0,logging:!1,...i,scrollY:0,scrollX:0}),{type:a,quality:l}=e;return o&&o.toDataURL(a,l)}_deletePaternity(){if("Canvas"===this.$options.type)this.$parent.$canvas=null;else{const t=this.$parent.children.findIndex((t=>t===this));~t&&this.$parent._spliceChildren(t,1)}return this}_destroyBegin(){return this.$complete=null,this.$options.isBeingDestroyed=!0,this.$options.status=null,this}_destroyUiEvents(){return this.$uiComp.removeEventListener("contextmenu",this._updateContextmenuEvent,this),this}_destroy(){this._destroyUiEvents();if([...this.children].forEach((t=>{t.destroy()})),this._destroyComp(),this.$options.manager.removeComp(this),this.$parent.children){const t=this.$parent.children.findIndex((t=>t===this));~t?this.$parent._spliceChildren(t,1):console.warn("已经从父节点销毁了")}return"Group"===this.$parent.type&&!this.$parent.children.length&&this.$parent.$options.status&&this.$parent.destroy(),this}_destroyEnd(){return this._destroyEvent(),this.$options.isBeingDestroyed=null,this.$options.isDestroyed=!0,this.$options.rootConfig=null,this.$options.options=null,this.$options.config=null,this.$options.kpOption=null,this.$options.children=null,this.$options.parent=null,this.$options.root=null,this.$options.topUi=null,this.$options.parentGlobalId=null,this.$options.globalId=null,this.$options.globalManager=null,this.$options.type=null,this.$options.isEdit=null,this.$options.elm=null,this.$options.manager=null,this.$options.dataManager=null,this.$options.globalDataManager=null,this.$options.events=null,this.$parent=null,this.$root=null,this.$canvas=null,this.adapter=null,this.children=null,this.$events={elements:{},events:{}},this}destroy(t={}){return this.$options.isBeingDestroyed?console.warn("节点正在销毁"):this.$options.isDestroyed?console.warn("节点已经销毁"):(this._destroyBegin(t),this.$emit("beforeDestroy",this),this.$root.$emit("beforeDestroy",this),this.$emit("beforeDestroy:"+this.$options.type,this),this.$root.$emit("beforeDestroy:"+this.$options.type,this),this._destroy(t),this.$emit("destroyed",this),this.$root.$emit("destroyed",this),this.$emit("destroyed:"+this.$options.type,this),this.$root.$emit("destroyed:"+this.$options.type,this),this._destroyEnd(t)),this}next(){return this.$next}prev(){return this.$prev}get $el(){return this.$uiComp.el}get $uiComp(){return this.$options.manager?.getUiCompById(this.$options.id)}get $ui(){return this.$root.$uiComp}get $next(){let t=null;if(this.$parent?.children){const A=this.$parent.children.findIndex((t=>t===this));~A&&(t=this.$parent.children[A+1])}return t}get $prev(){let t=null;if(this.$parent?.children){const A=this.$parent.children.findIndex((t=>t===this));~A&&(t=this.$parent.children[A-1])}return t}get $ranking(){return this.$parent?.children.findIndex((t=>t===this))}get $realVisible(){return ey(this)}get $dataAdapterRealVisible(){return!!this.adapter.$dataAdapter&&(this.$options.isEdit?this.$realVisible:this.$parent.$realVisible)}get $nextSibling(){return this.$parent.children.slice(this.$parent.children.findIndex((t=>t===this)))}get $prevSibling(){return this.$parent.children.slice(0,this.$parent.children.findIndex((t=>t===this))-1)}get $sibling(){return this.$parent.children.filter((t=>t!==this))}}function ey(t){return"Canvas"===t.type?t.visible:t.visible?ey(t.$parent):t.visible}function ny(t){const A=t%360;return A<0?A+360:A}class iy extends Ay{_beforeInit(){super._beforeInit();const t=this;return this.isCanvas=!0,t._removeAttr("rotate")._removeAttr("isSelected")._removeAttr("top")._removeAttr("left")._removeAttr("backgroundColor")._removeAttr("backgroundImage")._removeAttr("width")._removeAttr("height")._registerAttr("backgroundColor",null,(function(t){return t.option.style.backgroundColor||""}),null,(function(A){try{t.$uiComp.backgroundColor=A}catch(A){console.warn(t.id+" 画布设置背景色失败",A.message)}return A}),{initUi:t=>t.backgroundColor||""})._registerAttr("backgroundImage",null,(function(t){return t.option.style.backgroundImage||""}),null,(function(A){try{t.$uiComp.backgroundImage=A}catch(A){console.warn(t.id+" 画布设置背景图片失败",A.message)}return A}),{initUi:t=>t.backgroundImage||""})._registerAttr("scaleMode",null,(function(t){return t.option.scaleMode}),null,(function(A){try{t.$ui.setScaleMode(A)}catch(A){console.warn(t.id+" 画布设置放缩方式失败",A.message)}return A}),{initUi:t=>t.getScaleMode()})._registerAttr("canvasZoom",null,(function(){return 1}),null,(function(A){try{t.$topUi.$canvas.$uiComp.setZoom(A)}catch(A){console.warn(t.id+" 画布设置缩放失败",A.message)}return A}),{noAdd:!0,initUi:function(){return t.$topUi.$canvas.$uiComp.getZoom()}})._registerAttr("isSelected",null,null,null,(function(A){try{A?(t.$ui.selector.clear(),t.$emit("select",t)):t.$emit("unSelect",t)}catch(A){console.warn(t.id+" 画布设置选择失败",A.message)}return A}),{noAdd:!0})._registerAttr("width",null,(function(t){return t.option.style.width||0}),null,(function(A){try{t.$uiComp.width=A}catch(A){console.warn(t.id+" 画布设置宽度失败",A.message)}return A}),{initUi:t=>t.width,setAfter:()=>{t._initLayerSize()}})._registerAttr("height",null,(function(t){return t.option.style.height||0}),null,(function(A){try{t.$uiComp.height=A}catch(A){console.warn(t.id+" 画布设置高度失败",A.message)}return A}),{initUi:t=>t.height,setAfter:()=>{t._initLayerSize()}}),t._registerAttr("filters",null,(function(t){return Xi(t.option.filters)}),null,null,{initUi:t=>t.filter.toJSON()}),this.$currentLayer=null,this.isSelected=null,this}_initBegin(t,A,e,n){return super._initBegin(t,A,e,n),this.$topUi.$on("hook:uiCanvasZoom",this.updateZoom,this),this.$root.$on("hook:selectLayer",this._selectLayer,this),this.$root.$on("hook:unSelectLayer",this._unSelectLayer,this),this}_updateLayerSelect(){for(const t of this.layers)t._sendSelectEvent()}_create(){return super._create(),this}_initLayerSize(){const{width:t,height:A}=this;this.layers.forEach((e=>{e.isLock=!1,e.width=t,e.height=A}))}_selectLayer(t){this.$currentLayer!==t&&(this.$currentLayer=t)}_unSelectLayer(t){this.$currentLayer===t&&(this.$currentLayer=null)}_destroyEvent(){return super._destroyEvent(),this.$options.events&&(this.$options.events(),this.$options.events=null),this}_destroyComp(){delete this.$uiComp.__DIAGRAM__,this.$options.manager.removeUiComp(this)}updateZoom(){return this.$updateUiAttr("canvasZoom"),this.$emit("updateCanvasZoom",this.canvasZoom),this.$root.$emit("updateCanvasZoom",this.canvasZoom),this}async _mount(){return await super._mount(),this.$uiComp.lock=!1,this.$options.isEdit&&(this.$currentLayer=this.$ui.selector.getSelectLayer()?.__DIAGRAM__,this.updateZoom()),this}_initEnd(){return super._initEnd(),this._initLayerSize(),this.isSelected||this._updateSelect(!0),this.$options.isEdit&&this.$parent._updateSelect(),this.$topUi.$on("hook:enteredUi",this._enteredUiEvent,this),this.$topUi.$on("hook:exitedUi",this._exitedUiEvent,this),this}_enteredUiEvent(t){t===this.$root&&this.isSelected&&(this._updateSelect(!0),this.$parent._updateSelect())}_exitedUiEvent(t){t===this.$parentUi&&this.isSelected&&(this._updateSelect(!0),this.$parent._updateSelect())}updateBound(t={}){try{isFinite(t.bottom)&&this.$uiComp.scaleManage.setOrigin(0,-t.bottom)}catch(t){console.warn("更新画布原点位置失败",t)}return this}updateCanvasCenter(){try{this.$uiComp.zoomAvailCenter()}catch(t){console.warn("更新画布居中位置失败",t)}return this}resetFilter(){return this.$uiComp.filter.reset(),this.$updateUiAttr("filters"),this}setFilter(t,A){return this.$uiComp.filter.update(t,A),this.$updateUiAttr("filters"),this}clearFiler(){return this.$uiComp.filter.clear(),this.$updateUiAttr("filters"),this}setSize(t=[]){return this.updateAttrs(t),this.$topUi.$canvas.updateBound(),this.$topUi.$canvas.updateCanvasCenter(),this}getThingLayer(){return this.children.find((t=>t.isThingLayer))}async createLayer(t={},A={}){const e=this.$options.manager.create(this,t,t.kpOption,{...A,newCreate:!0});return await e.init(),A.clip&&(e.clip=!0),Wi(A.beforeCompIndex)&&e.moveToTarget(this.children[A.beforeCompIndex],"before"),A.select&&e.select(),this.$emit("createLayer",e),this.$root.$emit("createLayer",e),e}toJSON(){const t=super.toJSON(),A=this.$options.dataManager.filterManager.toJSON();return A.length>0&&(t.kpOption.dataFilters=Xi(A)),t}transformLocation(t,A){const e=this.$canvas.$uiComp,{x:n,y:i}=e.el.getBoundingClientRect(),{canvasZoom:s}=this;return{x:(t-n)/s-0,y:(A-i)/s-0}}_destroyEnd(){return this.$topUi.$off("hook:uiCanvasZoom",this.updateZoom,this),this.$root.$off("hook:selectLayer",this._selectLayer,this),this.$root.$off("hook:unSelectLayer",this._unSelectLayer,this),super._destroyEnd(),this}get layers(){return this.children}get groups(){return this.$options.manager.getAllChildren(this,"Group")}get containers(){return this.$options.manager.getAllChildren(this,["Container","DefaultContainer"])}get allLayersEmpty(){return this.layers&&this.layers.every((t=>t.isEmpty))}get $twinContainers(){return this.containers.filter((t=>t.adapter?.isThing))}}class sy extends Ay{_beforeInit(t,A){super._beforeInit(t,A);const e=this;return this.isLayer=!0,e._removeAttr("rotate")._removeAttr("isSelected")._removeAttr("backgroundColor")._removeAttr("backgroundImage")._registerAttr("isSelected",!1,(function(t){return!!t.option.isSelected}),null,(function(t){return t}),{noAdd:!0})._registerAttr("clip",null,(function(t={}){return!!t.option.userData?.clip}),null,(function(t){try{t?e.show():e.isSelected||e.hidden(),e.$uiComp.setUserData("clip",t)}catch(t){console.warn(e.id+" 图层设置常显失败",t.message)}return t})),this}_initComp(){super._initComp(),this.$uiComp.lock=!1}_mountEnd(){super._mountEnd(),!this.visible&&this.clip&&this.show()}_sendSelectEvent(){this.isSelected&&(this.$emit("selectLayer",this),this.$root.$emit("selectLayer",this))}select(){return this.$uiComp&&this.$uiComp.select(),this}unSelect(){return this.$uiComp&&this.$uiComp.unselect(),this}async createContainer(t,A){return this._createContainer(t,A)}async _createContainer(t={},A={}){const e=t?.kpOption?.adapter?.isThing?t.kpOption:{},n=this.$options.manager.create(this,t,e,{newCreate:!0,...A.container});return await n.init(),A.lock&&(n.isLock=!0),A.select&&n.select(),this.$emit("createContainer",n),this.$root.$emit("createContainer",n),n}async createGroup(t=[],A={},e={}){return Yi(this,t,A,{...e,newCreate:!0})}async parseJSON(t,A={}){Array.isArray(t)||(t=[t]),t.forEach((t=>this.$root.queryById(t.id)?.destroy()));const e=await Promise.all(t.map((t=>this._createContainer(t,{container:{newCreate:!1}}))));return A.select&&this.$root.select(e),e}toJSON(){const t=super.toJSON();return t.option.visible=!(!this.clip||!this.visible),t.kpOption._kpClip=this.clip,t.kpOption._kpSelected=this.isSelected,t}getEmptyContainerByLocation(t,A){return this.containers.filter((({visible:e,adapter:n,top:i,left:s,width:r,height:o,backgroundImage:a})=>!n&&e&&!a&&i<=A&&i+o>=A&&s<=t&&s+r>=t))}_destroy(t){const A=t.selectLayer||this.$next||this.$prev;return super._destroy(),A&&A.select&&A.select(),this}get groups(){return this.$options.manager.getAllChildren(this,"Group")}get containers(){return this.$options.manager.getAllChildren(this,["Container","DefaultContainer"])}get $twinContainers(){return this.containers.filter((t=>t.adapter?.isThing))}get isEmpty(){return(this.groups?.length||0)+(this.containers?.length||0)===0}}class ry extends sy{_beforeInit(t,A){return super._beforeInit(t,A),this.isThingLayer=!0,this}_initCompCreateUi(){const t=this.$options;return new $n.Layer(this.$parent.$uiComp,t.options.option)}parseJSON(){return Promise.reject(new Error("无法导入定义文件，只能创建孪生图表"))}toJSON(){const t=super.toJSON();return t.kpOption._kp3DLayer=!0,t}}const oy=t=>(void 0===t&&(t=1),t);class ay{constructor(t,A){this.element=t,this.parent=A,this.current=0,this.total=null,this.data=null,this.animation=null}execute(t){this.record(),this.animation=t;const A=t?.enter||[],e=t?.leave||[];this.setTotal(A,e);const n=A.length>0?"enter":"leave";this.do(n)}do(t){(this.animation?.[t]||[]).forEach((A=>{const e=this.getParams(t,A[0]);let n=this.$ui.animation;n=n.run([{...e.animation}],(()=>{e.after&&e.after()}));const i=A.slice(1);for(const A of i){const e=this.getParams(t,A);n=n.run([{...e.animation}],(()=>{e.after&&e.after()}))}}))}getParams(t,A){const{total:e}=this,{animation:n,duration:i}=A,s=this.animation?.enter||[],r=this.animation?.leave||[],o=this.element?.$uiComp;let a;if("enter"===t&&r.length>0){const t=s.flat().length;a=()=>{++this.current,t>=this.current&&this.do("leave")}}else a=()=>{++this.current,e===this.current&&(this.current=0,setTimeout((()=>{this.element.$emit("afterAnimation",this.element)})))};return{animation:{target:o,animation:n,duration:i},after:a}}record(){this.data=(t=>{const{id:A,width:e,height:n,top:i,left:s,isLock:r,visible:o,$uiComp:a}=t,{translate:l,scale:c,opacity:u}=a.style||{};return{id:A,visible:o,basic:{lock:r},style:{width:e,height:n,top:i,left:s,opacity:oy(u),translate:l||[0,0],scale:c||[1,1]}}})(this.element)}restore(){const{basic:t,style:A,visible:e}=this.data||{},n=this.element?.$uiComp;if(n){n.setVisible(e);for(const A in t)n[A]=t[A];for(const t in A)n.style[t]=A[t]}}setTotal(t,A){const e=t?.flat()?.length||0,n=A?.flat()?.length||0;this.total=e+n}end(){this.restore(),Object.assign(this,{current:0,total:null,animation:null})}get $ui(){return this.element?.$ui}}var ly=new class{constructor(){this.map=new Map}set(t,A){this.map.set(t,A)}get(t){return this.map.get(t)}has(t){return this.map.has(t)}delete(t){return this.map.delete(t)}clear(){this.map.clear()}get size(){return this.map.size}};var cy=new class{constructor(){this.element=null,this.parent=null,this.current=0,this.total=0}getAnimator(t){return this._init(t),this}_init(t){this.element?.id&&this.element.id!==t.id&&this.end(),this.element=t,this.parent=(t=>{let A=t;for(;A.$parent;){if("Layer"===A.$parent.type)return{$id:A.id,animation:A.animation,name:A.name,$comp:A};A=A.$parent}})(t)}execute(t){this.element.$root.$emit("beforeAnimation",this.element);const{containers:A}=this;this.total=A.length,this.setOperate({resize:!1,rotate:!1});for(const e of A){const A=new ay(e,this.parent);ly.set(e.id,A),A.execute(t),e.$on("afterAnimation",(t=>{++this.current,e.$off("afterAnimation"),this.total===this.current&&(this.end(),this.element.$root.$emit("afterAnimation",this.element))}))}}setOperate({resize:t,rotate:A}){const{$ui:e}=this;e&&e.setOperatHandlerDisplay({resize:t,rotate:A})}end(){ly.size&&(this.$ui?.animation?.end(),this.$ui?.setOperatHandlerDisplay({resize:!0,rotate:!0}),ly.map.forEach(((t,A)=>{t.end(),ly.delete(A)})),ly.clear(),this.current=0)}destroy(){this.end(),Object.assign(this,{element:null,parent:null,total:null})}transform(t){return function(t){const A={enter:[],leave:[]};let e=null;return t.length?(t.forEach(((t,n)=>{const{animation:i,basic:s,duration:r}=t,{execute:o}=s,a={animation:i,duration:r,index:n};if("after"!==o)e=o,A[o].push([a]);else{const t=A[e];t[t.length-1].push(a)}})),A):null}(t)}update(t){this.parent.$comp.animation=t,this.parent.animation=t}get $ui(){return this.element?.$ui}get containers(){const{element:t}=this||{};return t.isGroup?t.containers:[t]}get enter(){return this.parent?.animation?.enter||[]}get leave(){return this.parent?.animation?.leave||[]}};class uy extends Ay{_beforeInit(){super._beforeInit();const t=this;return this.isGroup=!0,t._removeAttr("rotate")._removeAttr("backgroundColor")._removeAttr("backgroundImage")._removeAttr("isLock")._registerAttr("isLock",null,(function(t){return!!t.option.isLock}),null,(function(A){try{t.$uiComp.lock=A}catch(A){console.warn(t.id+" 设置ui实例加解锁失败",A.message)}return A}),{initUi:t=>!!t.lock,setAfter:()=>{hy(t,"isLock"),"Group"===t.$parent.type&&t.$parent.$updateUiAttr("isLock")}}),this}_mountEnd(){if(super._mountEnd(),!this.$parent.$options.config.newCreate){["width","height","left","top"].forEach((t=>this.$updateUiAttr(t)))}return this}_initEnd(){return super._initEnd(),this.children.forEach((t=>{t.animation=null})),this}async createGroup(t=[],A={},e={}){return Yi(this,t,A,{...e,newCreate:!0})}dismiss(){const t=this.$root,A=[...this.children];return this._destroyAnimator(),A.forEach((t=>{t.moveToTarget(this,"before")})),this.destroy(),t.select(A),this}toJSON(){const{children:t}=this,A=super.toJSON();return A.kpOption={},t&&t.length>0?A.children=t.map((t=>t.toJSON())):delete A.children,A}_destroy(){this.unSelect(),this._destroyAnimator(),super._destroy()}_destroyComp(){delete this.$uiComp.__DIAGRAM__;try{this.$uiComp?.destroy()}catch(t){console.warn(t)}return this.$options.manager.removeUiComp(this),this}_destroyAnimator(){this.animator&&this.animator.destroy&&this.animator.destroy()}get groups(){return this.$options.manager.getAllChildren(this,"Group")}get containers(){return this.$options.manager.getAllChildren(this,["Container","DefaultContainer"])}get $parentLayer(){return function t(A){return"Layer"===A.type?A:t(A.$parent)}(this.$parent)}get $twinContainers(){return this.containers.filter((t=>t.adapter?.isThing))}get animator(){return cy?.getAnimator(this)}}function hy(t,A){const{children:e}=t;if(e)for(const t of e)t.$updateUiAttr(A),hy(t,A)}class dy extends Ay{_beforeInit(){super._beforeInit();const t=this;return this.isContainer=!0,t._removeAttr("isLock")._registerAttr("penetrateOnplay",null,(function(t){return!!t.option.penetrateOnplay}),null,(function(A){try{t.$uiComp.penetrateOnplay=A}catch(A){console.warn(t.id+" 容器设置事件穿透失败",A.message)}return A}),{initUi:t=>!!t.penetrateOnplay})._registerAttr("isLock",null,(function(t){return!!t.option.isLock}),null,(function(A){try{t.$uiComp.lock=A}catch(A){console.warn(t.id+" 设置ui实例加解锁失败",A.message)}return A}),{initUi:t=>!!t.lock,setAfter:()=>{"Group"===t.$parent.type&&t.$parent.$updateUiAttr("isLock")}}),this}_create(){super._create();const t=this.$options.options.option,A=this.$options.kpOption,e=this.$options.config;return!t.adapter||this.$options.rootConfig.twin?.disable&&A.adapter?.isThing||(this.adapter=this.$options.manager.createAdapter(this,t.adapter,A.adapter,{...e.adapter,newCreate:e.newCreate})),this}_initCompCreateUi(){const t=this.$options,A=Xi(t.options?.option);let e;delete A.adapter;try{e=new $n[t.type](this.$parent.$uiComp,A)}catch(t){console.error("创建ui实例失败",t)}return e}async _mount(){await super._mount(),this.adapter&&await this.adapter.init()}async createAdapter(t,A,e={}){return this.adapter?(console.warn("节点已包含适配器"),this.adapter):(this.adapter=this.$options.manager.createAdapter(this,t,A,{...e.adapter,newCreate:!0}),await this.adapter.init(),e.select&&this.select(!0),this.adapter)}async updateAdapter(t={},A={},e={}){if(this.adapter){const n=this.adapter.toJSON(),i={options:Xi(n.option),kpOption:Xi(n.kpOption),config:Xi(this.$options.config)};return this.$emit("updateAdapter",this),this.$root.$emit("updateAdapter",this),this.adapter.$destroy(),this.adapter=this.$options.manager.createAdapter(this,t,A,{merge:!e.noMerge,newCreate:!1}),await this.adapter.init(),this.$emit("updatedAdapter",this),this.$root.$emit("updatedAdapter",this),this._update("adapter",{options:this.$options.options,kpOption:this.$options.kpOption,config:this.$options.config},i),this.adapter}return console.error("节点没有适配器")}enterInsidePreview(){this.$root.enterInsidePreview(this)}exitInsidePreview(){this.$root.exitInsidePreview()}_destroySubUIComps(){this.adapter?.isUIAdapter&&!this.$parentUi?.isTopUi&&(this.$topUi.$manager.removeComp(this),this.$topUi.$manager.removeUiComp(this),this.$topUi.$manager.compUiIdMap.delete(`${this.$parentUi.$parent.$parent.id}/${this.id}`))}_destroy(){this._destroySubUIComps(),this._destroyAnimator(),super._destroy(),this.adapter=null}_destroyAnimator(){this.animator&&this.animator.destroy&&this.animator.destroy()}toJSON(){const{adapter:t}=this,A=super.toJSON();if(t){const e=t.toJSON();A.kpOption.adapter=e.kpOption,A.option.adapter=e.option}return A}get animator(){return cy.getAnimator(this)}get $uiAdapter(){return this.$uiComp.adapter}get $uiApp(){return this.$uiComp.app}get $rootGroup(){return function(t){const A=[];function e(t){"Group"===t.type&&(A.push(t),e(t.$parent))}return e(t.$parent),A}(this).shift()}get $parentLayer(){return function t(A){return A.isLayer?A:t(A.$parent)}(this.$parent)}}class py extends dy{_beforeInit(){return super._beforeInit(),this.isDefaultContainer=!0,this._removeAttr("penetrateOnplay"),this}_initCompCreateUi(){const t=this.$options,A=Xi(t.options?.option);delete A.adapter;try{return new $n[t.type](this.$parentLayer.$uiComp,A)}catch(t){console.error("创建ui实例失败",t)}}toJSON(){const t=super.toJSON();return delete t.option.penetrateOnplay,t}}class gy{constructor(t,A={},e={},n={}){this.$options={rootConfig:null,name:null,options:null,_kpOption:null,kpOption:null,config:null,parent:null,root:null,topUi:null,canvas:null,globalManager:null,globalDataManager:null,attrs:{},status:null,type:null},this.$parent=null,this.$root=null,this.$topUi=null,this.$parentUi=null,this.$type=null,this.$complete=null,this.isAdapter=!0,this.dom=null,this._beforeInit(),this._initBegin(t,A,e,n),this.$emit("newAdapter",this),this.$root.$emit("newAdapter",this),this.$emit("newAdapter:"+this.$type,this),this.$root.$emit("newAdapter:"+this.$type,this)}_registerAttr(t,A,e=null,n=null,i=null,s={}){if(this.$options.attrs[t])console.warn(`${t} 已被注册`);else{const r={name:t,value:A,init:e,get:n,set:i,option:s};this.$options.attrs[t]=r,Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>r.get?r.get():r.value,set(A){if(!r.set)return;const e=this[t];e!==A&&(r.option.setBefore&&r.option.setBefore(),this._updateAttr(r,A,Xi(e)),r.option.setAfter&&r.option.setAfter())}})}return this}_removeAttr(t){return delete this.$options.attrs[t],this}_updateAttr(t,A,e){return t.value=t.set(A),this._update(t.name,A,e),this}_update(t,A,e){return this.$emit("adapterUpdate",this,t,A,e),this.$root.$emit("adapterUpdate",this,t,A,e),this.$emit("update",this.$parent,t,A,e),this.$root.$emit("update",this.$parent,t,A,e),this}_beforeInit(){var t;return(t=this)._registerAttr("name",null,(function(){return t.$options.options.name}),null,null,{initUi:function(t){return Xi(t.name)}})._registerAttr("opts",null,(function(){return Xi(t.$options.options.opts)}),null,(function(A){try{t.$uiAdapter.setOption(Xi(A))}catch(A){console.warn(t.$parent.id+" 图表设置样式失败",A.message)}return A}),{initUi:function(){return Xi((A=t.$uiApp)?"echarts"===A.type?A.config:A.opts:null);var A}})._registerAttr("type",null,(function(){return Xi(t.$options.options.type)}),null,null,{initUi:function(t){return Xi(t.type)}})._registerAttr("option",null,(function(){return Xi(t.$options.options.option)}),null,null,{initUi:function(t){return Xi(t.config.option)}}),this}_initBegin(t,A,e,n){return this.$options.rootConfig=t.$options.rootConfig,this.$options.name=A.name,this.$options.options=A,this.$options._kpOption=e,this.$options.kpOption=e,this.$options.config=n,this.$options.parent=t,this.$options.root=t.$options.root,this.$options.topUi=t.$options.topUi,this.$options.canvas=t.$options.canvas,this.$options.manager=t.$options.manager,this.$options.globalManager=t.$options.globalManager,this.$options.globalDataManager=t.$options.globalDataManager,this.$options.isEdit=t.$options.isEdit,this.$parent=t,this.$root=t.$root,this.$topUi=t.$root.$topUi,this.$parentUi=t.$parentUi,this.$type=t.$options.globalManager.getAdapterType(this),this}async _mounted(){return await this._initComp(),this.$updateUiAttrs(),await this._completed(),this.$complete=!0,this}async _initEnd(){return this}async init(){return this.$options.status||(this.$options.status=!0,this.$emit("beforeCreateAdapter",this),this.$root.$emit("beforeCreateAdapter",this),this.$emit("beforeCreateAdapter:"+this.$type,this),this.$root.$emit("beforeCreateAdapter:"+this.$type,this),await this._create(),await this._mounted(),this.$emit("adapterCompleted",this),this.$root.$emit("adapterCompleted",this),this.$emit("adapterCompleted:"+this.$type,this),this.$root.$emit("adapterCompleted:"+this.$type,this),await this._initEnd()),this}_create(){return this.$updateAttrs(),this}async _initComp(){return this}_completed(){return this}setOption(t){return this.opts=t,this}_toJSON(){const{type:t,opts:A}=this;return{option:{type:t,opts:Xi(A),option:{}}}}toJSON(){const t=this._toJSON();return Object.values(this.$options.attrs).forEach((A=>{A.option.toJSONFn&&A.option.toJSONFn(t)})),t}_destroyBegin(){return this.$options.status=!1,this}_destroy(){return this.$uiAdapter?.destroy(),this.$parent.adapter=null,this}_destroyEnd(){return this.$data=null,this.$dataManager=null,this.$dataAdapter=null,this.$complete=null,this.$type=null,this.$root=null,this.$parent=null,this.$options.name=null,this.$options.options=null,this.$options._kpOption=null,this.$options.kpOption=null,this.$options.config=null,this.$options.parent=null,this.$options.root=null,this.$options.globalManager=null,this.$options.globalDataManager=null,this}$destroy(){return this._destroyBegin(),this.$emit("beforeDestroyAdapter",this),this.$root.$emit("beforeDestroyAdapter",this),this.$emit("beforeDestroyAdapter:"+this.$type,this),this.$root.$emit("beforeDestroyAdapter:"+this.$type,this),this._destroy(),this.$emit("destroyedAdapter",this),this.$root.$emit("destroyedAdapter",this),this.$emit("destroyedAdapter:"+this.$type,this),this.$root.$emit("destroyedAdapter:"+this.$type,this),this._destroyEnd(),this}$updateAttrs(){return Object.keys(this.$options.attrs).forEach((t=>{this.$updateAttr(t)})),this}$updateAttr(t){const A=this.$options.attrs[t];if(A&&A.init){const t=Xi(A.value),e=A.init(this.$options.options,this.$options.kpOption);e!==t&&(A.value=e)}return this}$updateUiAttrs(){this.$parent.$options.config.newCreate&&Object.keys(this.$options.attrs).forEach((t=>{this.$updateUiAttr(t)}))}$updateUiAttr(t){const A=this.$options.attrs[t];if(A&&A.option?.initUi){const t=Xi(A.value),e=A.option.initUi(this.$uiAdapter);e!==t&&(A.value=e,this._update(A.name,e,t))}return this}$addEventListener(t,A,e){return this.$parent.$addEventListener(t,A,e),this}$removeEventListener(t,A,e){return this.$parent.$removeEventListener(t,A,e),this}$on(t,A,e){return this.$parent.$on(t,A,e),this}$once(t,A,e){return this.$parent.$once(t,A,e),this}$off(t,A,e){return this.$parent.$off(t,A,e),this}$emit(t,...A){return this.$parent.$emit(t,...A),this}get $canvas(){return this.$parent.$canvas}get $el(){return this.$parent.$el}get $uiAdapter(){return this.$uiComp?.adapter}get $uiApp(){return this.$uiAdapter?.componentInstance}get $uiComp(){return this.$parent.$uiComp}}function fy(t,A){let e=t;if(""!==A)try{e=new Function("return "+A)()(t)}catch(n){try{e=t[A]}catch(t){e={type:"error",message:t}}}return e}class By{constructor(t){this.parent=t,this.subscriberList=null,this.data=null}init(){return this.subscriberList=[],this.data=null,this}sub(t,A){this.subscriberList.push({option:t,dataItem:A})}unsub(t){const A=this.subscriberList.findIndex((A=>A.dataItem===t));~A&&this.subscriberList.splice(A,1)}setData(t){this.data=t,this.subscriberList.forEach((A=>{A.dataItem._setData(fy(t,A.option.level))}))}get(){return this.subscriberList.map((t=>t.option))}destroy(){const t=[...this.subscriberList];for(const A of t)A.dataItem.dataSource.setType("staticData"),A.dataItem.refresh();this.parent=null,this.subscriberList=null,this.data=null}}function my(){return Date.now()}class wy{constructor(t,A={}){this.parent=t,this.timerManager=t.globalDataManager.timeManager,this._options=A,this.options=Xi(A),this.close=null,this.time=null,this.now=null,this.running=null,this.init()}init(){return this.close=!!Zi(this.options.close)||this.options.close,this.time=+this.options.time||10,this.updateNow(),this.timerManager.add(this),this}start(){this.running=!0}stop(){this.running=!1}get(){return this.options}updateTime(t){Object.assign(this.options,{time:t}),this.init()}updateClose(t){Object.assign(this.options,{close:t}),this.init()}updateNow(){return this.now=my(),this}run(){return this.parent.refresh(),this}getRefreshable(){return!this.close&&this.running&&this.parent.getRefreshable()&&this.now+1e3*this.time<=my()}toJSON(){return{time:this.time,close:this.close}}destroy(){this.timerManager.remove(this),this.parent=null,this.options=null,this.close=null,this.time=null,this.now=null,this.running=null}}class yy{constructor(t,A={}){this.parent=t,this._options=A,this.options=Xi(A),this.fieldList=null,this.data=null}init(){const t=this.options.fields||[];return this.fieldList=t.map((({desc:t,name:A,value:e})=>({field:{desc:t,name:A,value:e||A},status:!1}))),this}addFields(t){this.options.fields=t,this.init()}update(t,A){const e=this.fieldList.find((A=>A.field.name===t));e&&(e.field.value=""===A?e.field.name:A)}get(t){return this.fieldList.find((A=>A.field.name===t))}_initFieldStatus(){this.fieldList.forEach((t=>{t.status=!1}))}execute(t){const A=Xi(t);if(this.fieldList.length){this._initFieldStatus();switch(e=A,Object.prototype.toString.call(e)){case"[object Object]":this._execute(A);break;case"[object Array]":A.forEach((t=>{this._execute(t)}))}}var e;return this.data=A,A}_execute(t){return"object"==typeof t&&this.fieldList.forEach((A=>{Reflect.has(t,A.field.value)&&(A.status=!0,t[A.field.name]=t[A.field.value])})),t}toJSON(){return this.fieldList.map((t=>Xi(t.field)))}destroy(){this.parent=null,this.options=null,this.fieldList=null,this.data=null}}class Cy{constructor(t,A){this.parent=t,this.dataManager=t.dataManager,this.type=null,this.root=t.root,this.adapter=t.adapter,this._options=A,this.options=Xi(A),this.data=null,this.isReady=null,this.running=null}init(){this.isReady=!1,this.running=!1}_getDefaultData(){return{status:200,statusText:"",body:null,type:this.type}}getData(t){const A=this._getDefaultData();return A.body=this.data,A}set(t){this.options=t,this.start()}get(){return this.options}start(){this.running=!0,this.isReady=!0,this.parent._updateReady()}stop(){this.running=!1,this.isReady=!1}destroy(){this.stop(),this.parent=null,this.dataManager=null,this.root=null,this._options=null,this.options=null,this.data=null,this.isReady=null,this.running=null}}class Qy extends Cy{constructor(t,A){super(t,A),this.type="staticData"}init(){super.init(),this.data=this.options}set(t){this.options=t,this.data=t,this.start()}}class vy extends Cy{static defaultOptions={url:"",header:null,level:null,body:null,method:"POST",conditionType:"condition",callbackArgs:[],code:"return body"};constructor(t,A){super(t,A),this.type="restData"}init(){super.init(),this.options||(this.options=Xi(vy.defaultOptions))}async getData(t){const A=await this.dataManager.restDataManager.getData(this.parent.parent,{...this.options,body:this._getBody()},t);this.data=A.data;const e=this._getDefaultData();return e.status=A.status,e.body=this.data,e}_getBody(){const{body:t,code:A}=this.options,e={},n=this.options.callbackArgs||[],i=this.dataManager.filterArgs;for(const t of n)i[t]&&(e[t]=i[t]);try{let n;t&&(n=new Function("return "+t)());const i=new Function("body","callbackArgs",A)(n,e);return i&&(Array.isArray(i)||(s=i,r="Object",Object.prototype.toString.call(s).includes(r)))?JSON.stringify(i):i}catch(t){console.error(t.message)}var s,r}}class by extends Cy{constructor(t,A){super(t,A),this.subscribeComp=null,this.type="subscriberData"}_init(){if(this.options){const t=this.root.$queryById(this.options.id);t?.adapter.$complete?this._sub(t):this.root.$on("adapterCompleted",this._subEvent,this)}else this.isReady=!0,this.parent._updateReady()}_subEvent(t){t.$parent.id===this.options.id&&this._sub(t.$parent)}_sub(t){this.subscribeComp=t,this.subscribeComp.adapter.$data.subscriber.sub(this.options,this.parent.parent),this.isReady=!0,this.parent._updateReady()}_unSub(){this.subscribeComp&&(this.subscribeComp.adapter.$data.subscriber.unsub(this.parent.parent),this.subscribeComp=null)}set(t={}){this._unSub(),super.set(t)}start(){this.running=!0,this._init()}stop(){super.stop(),this._unSub(),this.options={}}async getData(t){const A=await this.subscribeComp.adapter.$data.getData(void 0,{getFn:A=>{t&&t((()=>{A.cancelFn()}))}});if(200===A.status){this.data=fy(A.body,this.options.level);const t=this._getDefaultData();return t.status=200,t.body=this.data,t}return A}destroy(){this.root.$off("adapterCompleted",this._subEvent,this),super.destroy()}}class Uy{constructor(t,A={}){this.parent=t,this.root=t.root,this.dataManager=t.dataManager,this.adapter=t.parent,this.options=A,this.dataType=A.dataType||"staticData",this.typeMap={staticData:new Qy(this,A.source?.staticData),restData:new vy(this,A.source?.restData),subscribeData:new by(this,A.subscribeData)}}init(){return Object.values(this.typeMap).forEach((t=>t.init())),this.typeMap[this.dataType].start(),this}getReady(){return this.typeMap[this.dataType].isReady}_updateReady(){this.getReady()&&(this.adapter.$emit("dataSourceReady",this),this.root.$emit("dataSourceReady",this))}setType(t){return this.typeMap[this.dataType]?.stop(),this.dataType=t,this.typeMap[this.dataType]?.start(),this}set(t,A){return this.typeMap[this.dataType]?.stop(),this.dataType=t,this.typeMap[this.dataType]?.set(A),this}get(t){return this.typeMap[t]?.get()}async getData(t){return this.typeMap[this.dataType].getData(t)}async getDataByType(t=this.dataType,A=null){return this.typeMap[t].getData(A)}toJSON(){const t=this.typeMap,A={};for(const e in t)A[e]=Xi(t[e].get());return A}_destroyMap(){const t=this.typeMap;for(const A in t)t[A].destroy()}destroy(){this._destroyMap(),this.parent=null,this.root=null,this.dataManager=null,this.adapter=null,this.options=null,this.dataType=null,this.typeMap=null}}class Fy{constructor(t,A={}){this.parent=t,this.root=t.root,this.dataManager=t.dataManager,this.filterManager=t.dataManager.filterManager,this.options=A,this.enabled=null,this.filterList=null}init(){this.enabled=!!this.options.enabled;const t=this.options.list||[];return this.filterList=[],t.forEach((t=>{const A=this.filterManager.getFilterByName(t.name);A&&(A.addUse(this),this.filterList.push({enabled:t.enabled,filter:A}))})),this}addUse(t,A=!1,e=null){return t.addUse(this),Wi(e)?this.filterList.splice(e,0,{enabled:A,filter:t}):this.filterList.push({enabled:A,filter:t}),A&&this._updateMainEnabled(A),!0}add(t,A,e){this.filterList.find((A=>A.filter===t))||this.addUse(t,A,e)}getMainEnabled(){return this.enabled}execute(t){let A=Xi(t);return this.enabled&&this.filterList.forEach((t=>{t.enabled&&(A=t.filter.execute(A))})),A}getFilterItem(t){return this.filterList.find((A=>A.filter===t))}getFilterItemIndex(t){return t&&this.filterList.findIndex((A=>A===t))}getFilterItemByName(t){return this.filterList.find((A=>A.filter.name===t))}updateMainEnabled(t){return this._updateMainEnabled(t),!0}_updateMainEnabled(t){this.enabled=t}updateEnabled(t,A){return t.enabled=A,A&&this._updateMainEnabled(A),!0}updateName(t,A){const e=this.filterManager.getFilterByName(A);return!(!A||e||!t)&&(t.filter.updateName(A),!0)}updateData(t,A,e=[]){return t.filter.updateData(A,e),!0}moveTo(t,A,e){if(t&&A&&e){if("before"===e)return this._moveTo(t,A,0);if("after"===e)return this._moveTo(t,A,1)}}_moveTo(t,A,e){const n=this.getFilterItemIndex(t),i=this.getFilterItemIndex(A);if(~n&&~i){const t=this.filterList.splice(n,1)[0];this.filterList.splice(i+e,0,t)}}toJSON(){return{enabled:this.enabled,list:this.filterList.map((t=>({enabled:t.enabled,name:t.filter.name})))}}remove(t){const A=this.filterList.findIndex((A=>A.filter===t));if(~A){return this.filterList.splice(A,1)[0].filter.removeUse(this),!0}return!1}clear(){this.filterList.forEach((t=>{t.filter.removeUse(this)})),this.filterList=[],this.enabled&&this.parent.refresh()}destroy(){this.enabled=null,this.clear(),this.filterList=null,this.options=null,this.filterManager=null,this.dataManager=null,this.root=null,this.parent=null}}class Iy{constructor(){this.parent=null,this.root=null,this.dataManager=null,this.globalDataManager=null,this.options=null,this.starting=null,this.firstLoad=null,this.getDataFn=null,this.cancelFn=null,this.sourceData=null,this.filterBeforeData=null,this.overData=null,this.emptyData=null,this.status=null,this.beforeDestroyStatus=null,this.destroyStatus=null,this.fieldMapping=null,this.dataSource=null,this.subscriber=null,this.filterWork=null,this.timerItem=null}_initBegin(t,A){this.parent=t,this.root=t.$root,this.dataManager=t.$options.dataManager,this.globalDataManager=t.$options.globalDataManager,this.options=A,this.starting=!1,this.firstLoad=!1,this.dataManager._add(this),this.dataSource=new Uy(this,this.options).init(),this.subscriber=new By(this).init(),this.fieldMapping=new yy(this,{fields:this.options.fieldMapping}).init(),this.timerItem=new wy(this,this.options).init(),this.filterWork=new Fy(this,this.options.filter).init()}init(t,A={}){return this.status||(this.beforeDestroyStatus=null,this.destroyStatus=null,this._initBegin(t,A),this.emptyData=Zi(this.dataSource.get("staticData")),this.dataSource.getReady()?this.start():this.parent.$on("dataSourceReady",this.start,this),this.status=!0),this}set(t,A){this.dataSource.set(t,A)}get(t){return this.dataSource.get(t)}_getRealVisible(){return this.parent.$dataAdapter?this.parent.$parent.$dataAdapterRealVisible:this.parent.$parent.$realVisible}getRefreshable(){return this.starting&&!this.cancelFn&&(!this.throttlingMode||this._getRealVisible())}async refresh(){if(this.starting&&this.dataSource.getReady())return"subscribeData"===this.dataSource.dataType?this._setData(Xi(this.sourceData)):this.getData()}async refreshRealData(){if(this.starting)return"subscribeData"===this.dataSource.dataType?this.dataSource.typeMap.subscribeData.subscribeComp.adapter.$data.refresh():this.getData()}async getData(t,A={}){if(this.cancelFn&&(this.cancelFn(),this.cancelFn=null),this.getDataFn&&await this.getDataFn,!this.starting)return;this.getDataFn=this.dataSource.getDataByType(t,(t=>{this.cancelFn=t})),A.getFn&&A.getFn(this);const e=await this.getDataFn;return this.cancelFn=null,this.beforeDestroyStatus||this.destroyStatus?void 0:(200===e.status&&(this._setData(e.body,A),this.timerItem.updateNow()),e)}_execute(t){this.sourceData=Xi(t);let A=Xi(t);return A=this.fieldMapping.execute(A),this.filterBeforeData=Xi(A),A=this.filterWork.execute(A),this.overData=A,A}_setData(t,A={}){const e=this._execute(t);return this._setAppData(e),this.parent.$emit("dataChange",e),this.root.$emit("dataChange",this.parent.$parent,e),this.root!==this.parent.$topUi&&this.parent.$topUi.$emit("dataChange",this.parent.$parent,e),A.disableSubscriber||this.subscriber.setData(e),e}_setAppData(t){try{this.parent.$uiApp.setData(Xi(t))}catch(t){console.warn(this.parent.$parent.id+" 这个图表设置数据失败",t)}}async _firstStart(){const t=this.dataSource.dataType;this.firstLoad=!0,await this.getData("staticData",{disableSubscriber:"staticData"!==t}),["subscribeData","staticData"].includes(t)||await this.getData()}start(){return this.dataManager.started&&this.parent.$complete&&!this.starting&&(this.starting=!0,this.firstLoad?["subscribeData"].includes(this.dataSource.dataType)||this.refresh():this._firstStart(),this.timerItem.start()),this}stop(){return this.starting?(this.starting=!1,this.timerItem.stop()):console.warn("已经停止了"),this}toJSON(){const t=this.dataSource.toJSON(),A=this.dataSource.dataType,e=this.fieldMapping.toJSON(),{close:n,time:i}=this.timerItem.toJSON(),s=this.filterWork.toJSON(),r=t.subscribeData;return delete t.subscribeData,{close:n,time:i,dataType:A,source:t,subscribeData:r,fieldMapping:e,filter:s}}destroy(){return this.parent.$off("dataSourceReady",this.start,this),this.status=!1,this.beforeDestroyStatus=!0,this.dataManager.remove(this),this.subscriber.destroy(),this.dataSource.destroy(),this.timerItem.destroy(),this.fieldMapping.destroy(),this.filterWork.destroy(),this.beforeDestroyStatus=!1,this.destroyStatus=!0,this.timerItem=null,this.filterWork=null,this.subscriber=null,this.dataSource=null,this.fieldMapping=null,this.emptyData=null,this.overData=null,this.filterBeforeData=null,this.sourceData=null,this.getDataFn=null,this.firstLoad=null,this.starting=null,this.options=null,this.dataManager=null,this.globalDataManager=null,this.root=null,this.parent=null,this}get throttlingMode(){return!this.parent?.$dataAdapter||!!this.parent?.opts?.dataThrottling}}class Ey extends gy{_beforeInit(){return super._beforeInit(),this.$options.dataManager=null,this.$dataAdapter=null,this.$dataManager=null,this.$data=null,this}_initBegin(t,A,e,n){return super._initBegin(t,A,e,n),this.$options.dataManager=t.$options.dataManager,this.$dataManager=t.$options.dataManager,this}_create(){return this.$data=new Iy,super._create(),this}async _mounted(){await super._mounted();const t=this.$options.kpOption.kpData,A=this.$options.options;return t?.source&&!Reflect.has(t.source,"staticData")&&Reflect.has(A,"data")&&(t.source.staticData=A.data),this.$data.init(this,t),this}updateDataField(t,A){const e=this.$data.fieldMapping.get(t);return this.$data.fieldMapping.update(t,A),this._update("data:field",{name:t,value:A},{name:t,value:e}),this}updateDataClose(t){const A=this.$data.timerItem.close;return this.$data.timerItem.updateClose(t),this._update("data:timerClose",t,A),this}updateDataTime(t){const A=this.$data.timerItem.time;return this.$data.timerItem.updateTime(t),this._update("data:timerTime",t,A),this}updateSourceData(t,A){const e=this.$data.dataSource.dataType,n=this.$data.dataSource.get(e);return this.$data.dataSource.set(t,A),this.$data.refreshRealData(),this._update("data:source",{type:t,data:A},{type:e,oldValue:n}),this}updateFilterMainEnable(t){const A=this.$data.filterWork.getMainEnabled();return this.$data.filterWork.updateMainEnabled(t),this.$data.refresh(),this._update("data:filterMainEnable",t,A),this}updateFilterEnabled(t,A){const e=t.enabled;return this.$data.filterWork.updateEnabled(t,A),this.$data.refresh(),this._update("data:filterEnable",{filterItem:t,enabled:A},{filterItem:t,enabled:e}),this}updateFilterName(t,A){const e=t.filter.name;return this.$data.filterWork.updateName(t,A),this._update("data:filterName",{filter:t,name:A},{filter:t,name:e}),this}updateFilterData(t,A,e){const n=t.filter.code,i=Xi(t.filter.callbackArgs);return this.$data.filterWork.updateData(t,A,e),this.$data.refresh(),this._update("data:filterData",{filter:t,code:A,callbackArgs:e},{filter:t,code:n,callbackArgs:i}),this}addFilter(t){const A=this.$data.dataManager.filterManager.add(t);return this.$data.filterWork.add(A)}removeFilter(t){return this.$data.dataManager.filterManager.remove(t),t.enabled&&this.$data.refresh(),this}useFilter(t,A){return this.$data.filterWork.addUse(t,A),this.$data.refresh(),this._update("data:filterUse",{filter:t,enabled:A},null),this}unUseFilter(t){return this.$data.filterWork.remove(t),this._update("data:filterUnUse",null,{filter:t}),this}moveFilter(t,A,e){return this.$data.filterWork.moveTo(t,A,e),this.$data.refresh(),this._update("data:filterMoveTo",{sourceFilterItem:t,targetFilterItem:A,type:e},null),this}_toJSON(){const{type:t,name:A,opts:e}=this,n=Xi(this.$data.dataSource.get("staticData")),i=this.$data.toJSON();return delete i.source.staticData,{option:{type:t,name:A,opts:Xi(e),data:n},kpOption:{kpData:i}}}_destroy(){return this.$topUi.$off("hook:componentComplete",this._componentComplete,this),this.$uiAdapter?.destroy(),this.$data.destroy(),this.$parent.adapter=null,this}_destroyEnd(){return super._destroyEnd(),this.$data=null,this.$dataManager=null,this.$dataAdapter=null,this.$options.dataManager=null,this}}class My{constructor(t,A){this.$container=t.$parent,this.$parent=t,this.$options=t.$options,this.$root=t.$root,this.$ui=null,this.options=null,this.scene=null,this.$root.$options.dynamicPanelList.push(this),this.$container.$uiComp.on("afterResize",this._resizeEvent,this),this._initBegin(t,A)}_initBegin(t,A={}){this.options=A,this.scene=A.scene}async init(){await this._initSubUiComp(),await this.$ui.init(),await this._initLayerComp(),this._initAppConfig(),this._initEnd()}_initEnd(){return this.$ui.$command.start(),this}_initAppConfig(){try{this.$uiApp.setConfig({container:this.$container})}catch(t){console.warn("设置app配置项失败",t.message)}return this}async _initSubUiComp(){return this.$ui=this.$options.manager.create(this,{type:"Ui",option:this.scene||this._getDefaultScene()},{disableTwin:!0,disableBluePrint:!0,dom:this.$uiApp.getDom()}),this}async _initLayerComp(){return this.$ui&&!this.$ui.$canvas.children.length&&await this._createLayer(),this}_getDefaultScene(){return{config:null,def:this._getDefaultDef(),jsCode:"// 大屏控制代码开发区\nconst canvas = ui.canvas"}}_getDefaultDef(){return{scene:{type:"Canvas",option:{id:this.$root.getUid("canvas"),name:"",isLock:!1,visible:!0,style:{width:this.$container.width,height:this.$container.height,backgroundColor:"#282A2E00"}},children:[]},userData:{},kpUiOption:{uid:this.$root.getUid("ui")}}}async _createLayer(){const t=this.$ui.$canvas;return await t.createLayer({type:"Layer",option:{id:this.$ui.getUid("Layer"),name:"图层1",style:{width:t.width,height:t.height}},kpOption:{}},{select:!0}),this}_updateContentAttr(t){this.$ui&&(this.$ui.$canvas[t]=this.$container[t])}_resizeEvent(){this.$ui.containerResize()}toJSON(){return this.$ui.toSceneJSON()}destroy(){this.$container.$uiComp.off("afterResize",this._resizeEvent,this);const t=this.$root.$options.dynamicPanelList.indexOf((t=>t===this));~t&&this.$root.$options.dynamicPanelList.splice(t,1),this.$ui&&(this.$ui.destroy(),this.$ui=null),this.adapter=null}get $uiAdapter(){return this.$uiComp?.adapter}get $uiApp(){return this.$uiAdapter?.componentInstance}get $uiComp(){return this.$parent.$uiComp}}const Ly="kunpeng-ui-adapter-scrolling",_y="kunpeng-ui-adapter-scrolling";class Dy{constructor(t,A){this.$container=t.$parent,this.$parent=t,this.$options=t.$options,this.$root=t.$root,this.rootDom=null,this.sceneList=null,this.options=null,this.sceneIds=null,this.selectedIndex=null,this.$root.$options.citePanelList.push(this),this.$container.$uiComp.on("afterResize",this._resizeEvent,this),this._initBegin(t,A)}_initBegin(t,A={}){this.options=A,this.sceneIds=A.sceneIds,this._initSceneScrollStyle()}async init(){this.sceneList=[],this.rootDom=this.$uiApp.getDom(),this._initAppConfig(),await this._create(),await this._mounted(),this._initSceneParentDomStyle()}async _create(){const t=this.sceneIds;for(const A of t){const t=this._createElement("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"none"}),e=await this._createUi(A,t);this.sceneList.push({parentDom:t,ui:e,sceneId:A,complete:!1})}}_createElement(t="div",A={}){const e=document.createElement(t);for(const t in A)e.style[t]=A[t];return e}async _createUi(t,A){const e=await this._getScene(t);return A&&e?this.$options.manager.create(this,{type:"Ui",option:e},{disableTwin:!0,disableBluePrint:!0,dom:A}):null}async _mounted(){await this._mountedUi()}async _mountedUi(){const t=this.sceneList;for(const A of t)A.ui&&(A.complete||(this.rootDom.appendChild(A.parentDom),A.ui&&!A.ui.$options.status&&await A.ui.init()),A.complete=!0)}_initAppConfig(){try{this.$uiApp.setConfig({container:this.$container,getCiteListFn:this.$options?.rootConfig?.onlineScene?.getCiteListFn,sceneId:this.$parent.$topUi.$options.sceneId})}catch(t){console.warn("设置app配置项失败",t.message)}return this}async updateSceneIds(t=[]){for(const A in t){const e=t[A],n=this.sceneList[A];if(n)n.sceneId!==e&&(n.ui&&n.ui.destroy(),n.complete=!1,n.ui=null,n.sceneId=null,n.ui=await this._createUi(e,n.parentDom),n.sceneId=e,this._updateSceneParentDomStyle(A));else{const t=this._createElement("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"none"}),n=await this._createUi(e,t);this.sceneList.splice(A,0,{parentDom:t,ui:n,sceneId:e,complete:!1}),this._updateSceneParentDomStyle(A)}}let A=this.sceneIds.length-t.length;if(A)for(;A>0;){const t=this.sceneIds[this.sceneList.length-1];this.removeScene(t),A--}return this.sceneIds=t,await this._mountedUi(),this}_resizeEvent(){this.sceneList.forEach((({ui:t})=>{t&&t.containerResize()}))}async _getScene(t){if(!t)return null;if(this._verificationSceneId(t))return console.warn(`${t}场景会造成死循环，已停止继续`),null;try{return await this._getSceneData(t)}catch(t){return console.warn("获取在线数据异常",t),null}}_verificationSceneId(t){return function A(e){return e.$options.sceneId===t||!e.isTopUi&&A(e.$parent.$root)}(this.$root)}async _getSceneData(t){const A=this.$options.rootConfig.onlineScene||{};if(!A.disable)return"function"==typeof A.getDataFn?A.getDataFn(t):void console.warn("没有配置获取在线场景方法");console.warn("获取在线场景被禁止")}removeScene(t){const A=this.sceneIds.findIndex((A=>A===t));if(~A){const{ui:t}=this.sceneList[A];t&&t.destroy(),this.sceneIds.splice(A,1),this.sceneList.splice(A,1)}}clearScene(){const t=[...this.sceneIds];for(const A of t)this.removeScene(A);this.sceneList=[]}destroy(){this.clearScene(),this.$container.$uiComp.off("afterResize",this._resizeEvent,this);const t=this.$root.$options.citePanelList.indexOf((t=>t===this));~t&&this.$root.$options.citePanelList.splice(t,1),this.sceneIds=null,this.options=null,this.sceneList=null,this.rootDom=null,this.$root=null,this.$options=null,this.$parent=null,this.$container=null,this.selectedIndex=null}_initSceneScrollStyle(){if(document.getElementById(Ly))return;const t=`\n      .${_y} {\n        overflow: auto !important;\n      }\n\n      .${_y}::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n        background-color: transparent;\n      }\n      .${_y}::-webkit-scrollbar-track,\n      .${_y}::-webkit-scrollbar-thumb {\n        border-radius: none;\n        background-color: transparent;\n      }\n    `,A=document.createElement("style");A.id=Ly,A.textContent=t,document.head.appendChild(A)}_initSceneParentDomStyle(){const t=this.sceneList[0];t?.ui&&(this.selectedIndex=0,this.showScene())}_updateSceneParentDomStyle(t){this.sceneList[t].ui&&this.selectedIndex!==t&&(this.hideScene(),this.selectedIndex=t,this.showScene())}_setSceneDisplay(t,A){t.parentDom.style.display=A}_verificationSelected(){if(null===this.selectedIndex)return console.warn("当前引用面板暂未选中场景"),null;const t=this.sceneList[this.selectedIndex];return t&&t.ui?t:(console.warn("当前引用面板尚未包含此场景"),null)}updateSceneResize(){const t=this.sceneList[this.selectedIndex]?.ui;t&&t.containerResize()}updateSelect(t){return this.selectedIndex=t,this}showScene(){const t=this._verificationSelected();return t&&this._setSceneDisplay(t,"block"),this}hideScene(){const t=this._verificationSelected();return t&&this._setSceneDisplay(t,"none"),this}toggleScrollScene(t){for(const A of this.sceneList){const e=A?.ui?.$uiComp?.el;e&&e.classList.toggle(_y,t)}}sceneLoop(t){const A=this.sceneList.length;return 0===A?null:setInterval((()=>{this.hideScene(),this.selectedIndex=(this.selectedIndex+1)%A,this.showScene(),this.updateSceneResize()}),1e3*+t)}get $uiAdapter(){return this.$uiComp?.adapter}get $uiApp(){return this.$uiAdapter?.componentInstance}get $uiComp(){return this.$parent.$uiComp}}class $y extends Ey{_beforeInit(){super._beforeInit(),this.isConch=!0,this.$ui=null,this.isDynamicPanel=!1,this.$dynamicPanel=null,this.isCitePanel=!1,this.$citePanel=null,this._waitComplete=null,this._waitResolve=null;const t=this;return t._removeAttr("opts")._registerAttr("events",null,(function(){return Xi(t.$options.options.events||[])}),null,(function(t){return t}),{toJSONFn:function(A){return A.option.events=Xi(t.events),A}})._registerAttr("theme",null,(function(){return Xi(t.$options.options.theme)}),null,(function(A){try{t.$uiApp.setTheme(Xi(A))}catch(A){console.warn(t.$parent.id+" 图表设置颜色方案失败",A.message)}return A}),{initUi:function(){return Xi(t.$uiApp.theme)}})._registerAttr("padding",null,(function(){return Xi(t.$options.options.padding)}),null,(function(A){try{t.$uiApp.setPadding(Xi(A))}catch(A){console.warn(t.$parent.id+" 图表设置边距失败",A.message)}return A}),{initUi:function(){return Xi(t.$uiApp.padding)}})._registerAttr("opts",null,(function(){return Xi(t.$options.options.opts)}),null,(function(A){try{t.$uiAdapter.setOption(Xi(A))}catch(A){console.warn(t.$parent.id+" 图表设置样式失败",A.message)}return A}),{initUi:function(){return Xi((A=t.$uiApp)?"echarts"===A.type?A.config:A.opts:null);var A},setAfter:()=>{if(t.isCitePanel){const A=this._getRelationsSceneIds();t.$citePanel.updateSceneIds(A)}}}),this}_getRelationsSceneIds(){return this.opts?.relations?.map((t=>t.id))||[]}async _initComp(){return await this._initUiComp(),await this._initConfig(),this}async _initUiComp(){if(!this.$uiAdapter){const t=Xi(this.$options.options);new $n.Adapter(this.$uiComp,t,t),await this.waitComplete()}return this}async waitComplete(){if(this._waitComplete)return this._waitComplete;if(this.$uiAdapter?.complete)return Promise.resolve(this);const t=this._waitComplete=new Promise((t=>{this._waitResolve=t,this.$root.$on("hook:componentComplete",this._componentComplete,this)}));return this._waitComplete=null,t}_componentComplete(t){if(t===this.$parent){const t=this._waitResolve;return this._waitResolve=null,t(this)}}async _completed(){const t=this.$uiApp?.tag;t&&(this.$dataAdapter="seabedData"===t,this.isDynamicPanel="UIAdapter"===t,this.isCitePanel="OnlineUIAdapter"===t);const A=this.$options.kpOption.kpData;if(A?this.$options.config.merge&&(A.fieldMapping=function(t,A){if(!A)return null;const e={};return t&&t.forEach((t=>{e[t.name]=t})),A.map((t=>{const A=e[t.name]||t;return{...t,value:A.value||A.name}}))}(A.fieldMapping,Xi(this.$uiApp?._options?.fields))):this.$options.kpOption.kpData={close:!0,time:10,dataType:"staticData",source:{staticData:Xi(this.$uiApp?.data),restData:{url:"",header:null,level:null,body:null,method:"POST",conditionType:"condition",callbackArgs:[],code:"return body"}},subscribeData:null,fieldMapping:Xi(this.$uiApp?._options?.fields),filter:{enabled:!1,list:[]}},await super._completed(),this.isDynamicPanel&&(this.$dynamicPanel=new My(this,{scene:this.$options.kpOption.scene}),await this.$dynamicPanel.init()),this.isCitePanel){const t=this._getRelationsSceneIds();this.$citePanel=new Dy(this,{sceneIds:t}),await this.$citePanel.init()}return this}async _initEnd(){if(await super._initEnd(),this.theme)try{this.$uiApp.setTheme(this.theme)}catch(t){console.warn(this.$parent.id+" 这个图表设置颜色方案失败",t)}if(this.padding)try{this.$uiApp.setPadding(this.padding)}catch(t){console.warn(this.$parent.id+" 这个图表设置边距失败",t)}return this}async _initConfig(){const t=this.$options.config||{};if(t.suCaiObj){const{type:A,url:e}=t.suCaiObj,n=this.$uiApp;switch(A){case"shape":await n.init({basic:e});break;case"image":await n.init({image:e});break;case"custom":await n.init({shapeType:"custom",custom:e});break;case"audio":case"video":await n.setOption(Object.assign(Xi(n.opts),{[A]:e}))}}}setTheme(t){this.theme=t}setPadding(t){this.padding=t}_toJSON(){const t=super._toJSON(),A={option:Xi(this.option),theme:Xi(this.theme),padding:Xi(this.padding)};return this.$dynamicPanel&&(t.kpOption.scene=this.$dynamicPanel.toJSON()),Object.assign(t.option,A),t}$destroy(){super.$destroy()}_destroy(){return this.$topUi.$off("hook:componentComplete",this._componentComplete,this),this.isDynamicPanel&&this.$dynamicPanel.destroy(),this.isCitePanel&&this.$citePanel.destroy(),super._destroy(),this}_destroyEnd(){return this._waitResolve=null,this._waitComplete=null,super._destroyEnd(),this}}class Sy extends Ey{_toJSON(){const t=super._toJSON();return t.option.options=this.$options.options?.options,t}}class xy extends $y{_beforeInit(){return super._beforeInit(),this.thingType=null,this.thingOpts=null,this.thingId=null,this.isThing=!0,this.$twinComplete=!1,this}_initBegin(t,A,e,n){return super._initBegin(t,A,e,n),this.thingType=e.thingType,this.thingOpts=Xi(e.thingOpts),this.thingId=e.thingId,this.$root.$options.twinAdapterList.push(this),this}async _initEnd(){return await super._initEnd(),this.$emit("createdTwin",this),this.$emit("createdTwin:"+this.$type,this),this.$root.$emit("createdTwin",this),this.$root.$emit("createdTwin:"+this.$type,this),this._initTwinApp(),this.$topUi.$on("hook:top:resize",this._initStyle,this),this.$topUi.$on("beforeToImage",this._beforeToImage,this),this.$topUi.$on("toImaged",this._toImaged,this),this}async _initTwinApp(){!this.$options.rootConfig.twin.disable&&this.$root.$options.enableTwin?await this._initApp():(console.warn("孪生功能已禁用"),this._twinCompleted())}async _getTwinConfig(t){const A=this.$options.rootConfig.twin.configFormatter;return A&&await A(t,this),t}async _initApp(){return this}_twinFailed(){this.$emit("failedTwin",this),this.$emit("failedTwin:"+this.$type,this),this.$root.$emit("failedTwin",this),this.$root.$emit("failedTwin:"+this.$type,this)}_twinCompleted(){this._initStyle(),this.$twinComplete=!0,this.$emit("completedTwin",this),this.$emit("completedTwin:"+this.$type,this),this.$root.$emit("completedTwin",this),this.$root.$emit("completedTwin:"+this.$type,this)}_initStyle(){"function"==typeof this.twinInstance?._initStyle&&this.twinInstance._initStyle()}async refresh(){this._destroyTwin(),await this._initTwinApp()}reset(){return this}fly(t,A,e){const n=this.twinInstance,i=n.query("##"+t)[0];return i?(n.camera.stopFlying(),n.pauseEvent(window.THING.EventType.EnterLevel,"*",window.THING.EventTag.LevelFly),n.one(window.THING.EventType.EnterLevel,"."+i.type,(t=>{const i=t.object;n.camera.flyTo({object:i,position:A,target:e,time:1e3,complete:function(){console.log("飞行结束")}}),n.resumeEvent(window.THING.EventType.EnterLevel,"*",window.THING.EventTag.LevelFly)}),"customLevelFly"),n.level.change(i),!0):(console.error("没有找到这个目标，uuid为："+t),!1)}earthFly(t,A){const e=this.twinInstance;e.camera.stopFlying();const n={position:t,target:A,time:1e3,complete:function(){console.log("飞行结束")}};return e.camera.earthFlyTo?e.camera.earthFlyTo(n):e.camera.flyTo(n),!0}_beforeToImage(){this.$uiComp.maskEl.style.backgroundImage=`url(${this.$uiApp.toImage()})`}_toImaged(){this.$uiComp.maskEl.style.backgroundImage=""}_toJSON(){const t=super._toJSON(),A={thingType:this.thingType,thingOpts:Xi(this.thingOpts),thingId:this.thingId,isThing:this.isThing};return Object.assign(t.kpOption,A),t}_destroyTwin(){try{this.$uiApp.destroyCampus()}catch(t){console.error("孪生销毁失败",t.message)}}_destroyBegin(){super._destroyBegin(),this.$emit("beforeDestroyTwin",this),this.$emit("beforeDestroyTwin:"+this.$type,this),this.$root.$emit("beforeDestroyTwin",this),this.$root.$emit("beforeDestroyTwin:"+this.$type,this);const t=this.$root.$options.twinAdapterList.indexOf((t=>t===this));return~t&&this.$root.$options.twinAdapterList.splice(t,1),this}_destroy(){return this._destroyTwin(),super._destroy()}_destroyEnd(){return this.isThing=null,this.thingType=null,this.thingOpts=null,this.thingId=null,this.$topUi.$off("hook:top:resize",this._initStyle,this),this.$topUi.$off("beforeToImage",this._beforeToImage,this),this.$topUi.$off("toImaged",this._toImaged,this),this.$emit("destroyedTwin",this),this.$emit("destroyedTwin:"+this.$type,this),this.$root.$emit("destroyedTwin",this),this.$root.$emit("destroyedTwin:"+this.$type,this),super._destroyEnd()}get twinInstance(){return this.$uiApp?.app}}let Ty,Hy;var Oy=new class{constructor(){this.app=null}init(t){if(this.hasEffectResource){this.app=t;const A=new THING.EffectThemeControl;t.addControl(A,"效果模板控制器"),Hy=t.getControl("效果模板控制器")}}decrypt(t){if(!window.CryptoJS)return null;const A=window.CryptoJS;if("object"==typeof t)return t;const e=A.enc.Utf8.parse("CityBuilder@2019"),n=A.AES.decrypt(t,e,{mode:A.mode.ECB,padding:A.pad.Pkcs7});return A.enc.Utf8.stringify(n).toString()}update(t,A){Ty="campus-"+(new Date).getTime(),Hy.registerTheme(Ty,t,A);const e=this.app.query(".Campus")[0];e.applyTheme(Ty),Hy.applyEffectTheme(Ty,e),Hy.applyThemeEnvironment(Ty,e)}destroy(){if(this.app){const t=this.app.query(".Campus")[0];THING.ThemeManager.findStyle(Ty)&&(Hy.destroyEffectTheme(Ty,t),t.applyTheme(null),THING.App.current.off(THING.EventType.EnterLevel,null,"ThemeEnterLevelToUpdateEnv"))}}destroyControl(){this.app=null,Hy=null,Ty=null}get hasEffectResource(){return window.THING.EffectThemeControl}};class ky extends xy{_beforeInit(){super._beforeInit();const t=this;t._registerAttr("effectTheme",null,(function(){let A=null;return t.$options.kpOption.effectTheme&&(A=Xi(t.$options.kpOption.effectTheme)),A}),null,(function(t){return t}),{noAdd:!0})}async _initApp(){this.$twinComplete=!1,!this.thingOpts.urlV1&&this.thingOpts.url&&(this.thingOpts.urlV1=this.thingOpts.url.split("/builder/api-campus/")[1],this.thingOpts.code=this.thingId);const t=await this._waitAppInit();return await this._campusCompleted(t),this}_waitAppInit(){let t=!1;return new Promise((async A=>{const e=this.$options.rootConfig,n=await this._getTwinConfig({authServerUrl:e.twin.thingJsAuthServerUrl,urlV1:e.prefix+"/builder/api-campus/"+this.thingOpts.urlV1,options:{complete:t=>A(t)}});try{const e=this.$uiApp.init(this.thingOpts,n);this.$uiApp.hasCompleteFn||e.one("load",(e=>{if(!t)return t=!0,A(e)}))}catch(t){console.warn("园区资源加载失败",t),this._twinFailed()}}))}async _campusCompleted(t){this.twinInstance&&(this.twinInstance.level.change(t.campus),this.twinInstance.level.options.autoChangeBackground=!1,this.effectControl.init(this.twinInstance),await this._setEffectTheme(this.effectTheme),this._twinCompleted(t))}async _setEffectTheme(t){return this.$uiApp.effectTheme=Xi(t),await this.$topUi.$syncEmit("campusEffectInit",this),this}async setEffectTheme(t){return this.clearEffectTheme(),this.effectTheme=t,await this._setEffectTheme(t),this}clearEffectTheme(){this.effectControl.destroy(),this.$uiApp.effectTheme=null,this.effectTheme=null}_toJSON(){const t=super._toJSON();return Object.assign(t.kpOption,{effectTheme:Xi(this.effectTheme)}),t}async reset(){return this.clearEffectTheme(),await this.refresh(),this}_destroy(){return this.clearEffectTheme(),this.effectControl.destroyControl(),super._destroy()}get effectControl(){return Oy}}class Ny extends xy{async _initApp(){this.$twinComplete=!1;const t=this.$options.rootConfig,A=await this._getTwinConfig({authServerUrl:t.twin.thingJsAuthServerUrl,url:this.thingOpts.resourceId.substr(1),isOffline:!1});return await this.$uiApp.init(this.thingOpts,A).catch((t=>{console.warn("低代码资源加载失败",t),this._twinFailed()})),this._waitLowCodeComplete(),this}_waitLowCodeComplete(){setTimeout((()=>{this.twinComplete?this.twinInstance.inited?this.$twinComplete||this._twinCompleted(this.twinInstance):this.twinComplete.one("complete",(t=>{this.$twinComplete||this._twinCompleted(t)})):console.warn("没有获取到孪生实例")}),500)}get twinComplete(){return window.app}}class Ky extends xy{async _initApp(){this.$twinComplete=!1;const t=this.$options.rootConfig,A=await this._getTwinConfig({id:this.thingOpts.id,mapJson:this.thingOpts.urlV1,offline:!1,authServerUrl:t.twin.thingJsAuthServerUrl});try{A.mapJson&&this.$uiApp.init(this.thingOpts,A,(()=>{this._twinCompleted(this.$uiApp.twinInstance)}))}catch(t){console.error("城市资源加载失败",t.message),this._twinFailed()}}_destroyTwin(){this.$uiApp.destroyMap()}}class Ry extends xy{_beforeInit(){return super._beforeInit(),this.isTopology=!0,this}async _initApp(){this.$twinComplete=!1;const t=this.$options.rootConfig,A=this.thingOpts.page?`?page=${this.thingOpts.page}`:"",e=await this._getTwinConfig({authServerUrl:t.twin.thingJsAuthServerUrl,url:`/diagrams/${this.thingOpts.resourceId}${A}`,isOffline:!1,enableAnimate:!this.$parent.$options.isEdit});try{this.$uiApp.init(this.thingOpts,e).once("load",(t=>{this.$twinComplete||this._twinCompleted(t)}))}catch(t){console.error("拓扑资源加载失败",t.message),this._twinFailed()}return this}_beforeToImage(){this.$uiComp.maskEl.style.backgroundImage=null}resetZoom(){const t=this.$uiApp.app;t&&(t.resetZoom(),t.resetZoom())}}function jy(t,A,e,n,i){return t.$root.$command.add({name:"更新属性",type:"fn",noAdd:!!e.option.noAdd,args:{selfId:t.id,value:[e.name,n,i],handler:function(t,{selfId:A,value:e}){const[n,i]=e;t.$queryById(A)[n]=i}},exec:()=>({result:A(e,n,i),params:{selfId:t.id,name:e.name,newValue:ou(n),oldValue:ou(i)}}),undo(t,{selfId:A,name:e,oldValue:n}){t.$queryById(A)[e]=n},redo(t,{selfId:A,name:e,newValue:n}){t.$queryById(A)[e]=n}})}function Py(t,A,e=[]){return t.$root.$command.add({name:"更新多个属性",type:"fn",args:{selfId:t.id,value:[ou(e)],handler:function(t,{selfId:A,value:e}){t.$queryById(A).updateAttrs(...e)}},exec(){const n=e.map((A=>({name:A.name,value:t[A.name]})));return{result:A(e),params:{selfId:t.id,oldAttrs:n,newAttrs:e}}},undo(t,{selfId:A,oldAttrs:e}){t.$queryById(A).updateAttrs(e)},redo(t,{selfId:A,newAttrs:e}){t.$queryById(A).updateAttrs(e)}})}function Gy(t,A,e,n){return t.$root.$command.add({name:"移到目标位置",type:"fn",args:{value:[e.id,n],handler:function(t,A,e){const[n,i]=e;return[t.$queryById(n),i]}},exec(){const i=t.$parent.id,s=t.$next?.id,r=A(e,n),o=t.$parent.id,a=t.$next?.id;return{result:r,params:{type:n,selfId:t.id,targetId:e.id,OldParentId:i,OldNextId:s,newParentId:o,newNextId:a}}},undo(t,{selfId:A,OldNextId:e,OldParentId:n}){const i=t.$queryById(A);e?i.moveToTarget(t.$queryById(e),"before"):i.moveToTarget(t.$queryById(n)),i.select()},redo(t,{selfId:A,newNextId:e,newParentId:n}){const i=t.$queryById(A);e?i.moveToTarget(t.$queryById(e),"before"):i.moveToTarget(t.$queryById(n)),i.select()}})}function Vy(t,{groupId:A,compObjs:e}){const n=t.$queryById(A),i=[...n.children];n.dismiss(),e.forEach((({compId:A,nextId:e,parentId:n})=>{e?t.$queryById(A).moveToTarget(t.$queryById(e),"before"):t.$queryById(A).moveToTarget(t.$queryById(n))})),t.select(i)}async function zy(t,{selfId:A,compObjs:e,oldOption:n,oldConfig:i}){await Yi(t.$queryById(A),e.map((A=>t.$queryById(A.compId))),n,i)}function Jy(t,A){return t.$root.$command.add({name:"选择图层",type:"fn",args:{value:[]},exec(){const e=t.$root.$selectLayer?.id;return{result:A(),params:{oldSelectId:e,newSelectId:t.id}}},undo(t,{oldSelectId:A}){t.$queryById(A).select()},redo(t,{newSelectId:A}){t.$queryById(A).select()}})}async function Yy(t,A,e,n={}){return t.$root.$command.asyncAdd({name:"创建容器",type:"fn",args:{selfId:t.id,value:[ou(e),ou(n)],handler:async function(t,{selfId:A,value:e}){await t.$queryById(A).createContainer(...e)}},async exec(){const i=ou(e),s=ou(n),r=t.$root.$selectComponent.map((t=>t.id)),o=await A(e,n);return{result:o,params:{selfId:t.id,newContainerId:o.id,newOptions:i,newConfig:s,oldSelectIds:r}}},undo(t,{newContainerId:A,oldSelectIds:e}){t.$queryById(A).destroy(),t.select(e.map((A=>t.$queryById(A))))},redo:async(t,{selfId:A,newOptions:e,newConfig:n})=>t.$queryById(A).createContainer(e,n)})}function Wy(t,{selfId:A,selectIds:e}){t.$queryById(A).adapter.$destroy(),t.select(e.map((A=>t.$queryById(A))))}async function Xy(t,{selfId:A,oldOptions:e,oldKpOption:n,oldConfig:i={}}){const s=t.$queryById(A),r=s.$options.manager.createAdapter(s,e,n,i.adapter);await r.init(),i.select&&s.select(!0)}async function Zy(t,A,e={},n={},i={}){return t.$root.$command.asyncAdd({name:"创建适配器",type:"fn",args:{value:[ou(e),ou(n),ou(i)]},async exec(){const s=t.$root.$selectComponent.map((t=>t.id));return{result:await A(e,n,i),params:{selfId:t.id,oldOptions:ou(e),oldKpOption:ou(n),oldConfig:ou(i),selectIds:s}}},undo:Wy,redo:Xy})}async function qy(t,A,e=[],n={},i={}){return t.$root.$command.asyncAdd({name:"创建编组",type:"fn",args:{value:[e.map((t=>t.id)),ou(n),ou(i)],handler:function(t,A,e){const[n,i,s]=e;return[n.map((A=>t.$queryById(A))),i,s]}},async exec(){const s=e.map((t=>({compId:t.id,parentId:t.$parent.id,nextId:t.$next?.id}))),r=await A(e,n,i);return{result:r,params:{selfId:t.id,groupId:r.id,compObjs:s,groupOptions:r.toJSON(),oldOption:ou(n),oldConfig:ou(i)}}},undo:Vy,redo:zy})}async function tC(t,{selfId:A,oldOptions:e,oldKpOption:n}){await t.$queryById(A).updateAdapter(e,n,{noMerge:!0})}async function AC(t,{selfId:A,newOptions:e,newKpOption:n}){await t.$queryById(A).updateAdapter(e,n,{noMerge:!0})}async function eC(t,A,e={},n={},i={}){return t.$root.$command.asyncAdd({name:"升级适配器",type:"fn",args:{value:[ou(e),ou(n),ou(i)]},async exec(){const s=ou(t.adapter.toJSON()),r=s.kpOption,o=s.option,a=await A(e,n),l=ou(a.toJSON());return{result:a,params:{selfId:t.id,newOptions:l.option,newKpOption:l.kpOption,newConfig:ou(i),oldOptions:o,oldKpOption:r}}},undo:tC,redo:AC})}async function nC(t,{oldOptions:A}){return Promise.all(A.map((({compId:A,option:e,kpOption:n})=>t.$queryById(A).updateAdapter(e,n))))}async function iC(t,{newOptions:A}){return Promise.all(A.map((({compId:A,option:e,kpOption:n})=>t.$queryById(A).updateAdapter(e,n))))}async function sC(t,A,e=[],n={}){return t.$root.$command.asyncAdd({name:"更新适配器列表",type:"fn",async exec(){const t=e.map((t=>{const A=ou(t.comp.adapter.toJSON());return{compId:t.comp.id,option:A.option,kpOption:A.kpOption}}));return{result:await A(e,n),params:{oldOptions:t,newOptions:e.map((t=>{const A=ou(t.comp.adapter.toJSON());return{compId:t.comp.id,option:A.option,kpOption:A.kpOption}}))}}},undo:nC,redo:iC})}function rC(t,A){t.updateCompsAttrs(A.map((A=>({comp:t.$queryById(A.compId),attrs:ou(A.attrs)}))))}async function oC(t,{compObjs:A}){const e=[],n=[];for(const i of A){const A=t.$options.manager.create(t.$queryById(i.parentId),i.compOptions);await A.init(),i.nextId&&A.moveToTarget(t.$queryById(i.nextId),"before"),i.dataSubscriberList&&n.push(i),e.push(A)}(function(t=[]){const A=[];return t.forEach((function t(e){if("subscribeData"===e?.adapter?.$data.dataSource.dataType){const t=e.adapter.$data.dataSource.typeMap.subscribeData.subscribeComp;A.find((A=>A===t))||A.push(t)}e.children&&e.children.forEach(t)})),A})(e).forEach((t=>t.adapter.$data.refresh())),n.forEach((A=>{const e=A.compId,n=t.$queryById(e);A.dataSubscriberList.forEach((A=>{t.$queryById(A.sourceId).adapter.updateSourceData("subscribeData",{id:e,level:A.level})})),n.adapter.$data.refresh()})),t.select(e)}function aC(t,{compObjs:A}){t.destroyComps(A.map((A=>t.$queryById(A.compId))))}async function lC(t,{groupObjs:A}){const e=[];for(const n of A){const A=await Yi(t.$queryById(n.parentId),n.childrenId.map((A=>t.$queryById(A))),n.option);e.push(A)}t.select(e)}function cC(t,{groupObjs:A}){A.forEach((A=>t.$queryById(A.groupId).dismiss()))}function uC(t,{oldCompsAttrs:A}){rC(t,A)}function hC(t,{newCompsAttrs:A}){rC(t,A)}function dC(t,{oldSelectCompIds:A,newSelectCompIds:e}){e.filter((t=>!A.includes(t))).forEach((A=>t.$queryById(A)._updateSelect(!1))),t.select(A.map((A=>t.$queryById(A))))}function pC(t,{oldSelectCompIds:A,newSelectCompIds:e}){A.filter((t=>!e.includes(t))).forEach((A=>t.$queryById(A)._updateSelect(!1))),t.select(e.map((A=>t.$queryById(A))))}async function gC(t,{oldDef:A,selectIds:e}){await t.parseJSON(A),t.select(e.map((A=>t.$queryById(A))))}async function fC(t,{newDef:A}){await t.parseJSON(A)}function BC(t,{oldCompsAttrs:A}){rC(t,A)}function mC(t,{newCompsAttrs:A}){rC(t,A)}function wC(t,{oldCompsAttrs:A}){rC(t,A)}function yC(t,{newCompsAttrs:A}){rC(t,A)}class CC extends _h{updateCompsAttrs(t){const A=super.updateCompsAttrs.bind(this);return this.$root.$command.add({name:"更新多个节点的多个属性",type:"fn",args:{value:[t.map((t=>({compId:t.comp.id,attrs:ou(t.attrs)})))],handler:function(t,{value:A}){t.updateCompsAttrs(A[0].map((A=>({comp:t.$queryById(A.compId),attrs:A.attrs}))))}},exec(){const e={value:[t]},n=[],i=[];t.forEach((t=>{n.push({compId:t.comp.id,attrs:t.attrs.map((t=>({name:t.name,value:ou(t.oldValue)})))}),i.push({compId:t.comp.id,attrs:t.attrs.map((t=>({name:t.name,value:ou(t.value)})))})}));return{result:A(t),args:e,params:{oldCompsAttrs:n,newCompsAttrs:i}}},undo:uC,redo:hC})}__updateSelect(t){const A=this,e=super.__updateSelect.bind(this);return this.$root.$command.add({name:"更新选择",type:"fn",args:{value:[t.map((t=>t.id))],handler:function(t,A,e){return[e[0].map((A=>t.$queryById(A)))]}},exec(){const n=A.$selectComponent.map((t=>t.id));return{result:e(t),params:{oldSelectCompIds:n,newSelectCompIds:A.$selectComponent.map((t=>t.id))}}},undo:dC,redo:pC})}async parseJSON(t,A){const e=this,n=super.parseJSON.bind(this);return this.$root.$command.asyncAdd({name:"导入定义文件",type:"fn",args:{value:[ou(t),ou(A)]},async exec(){const i=ou(t),s=ou(A),r=e.toJSON(),o=e.toJSON(),a=e.$selectComponent.map((t=>t.id));return{result:await n(t,A),params:{newDef:i,newOptions:s,oldDef:r,oldOptions:o,selectIds:a}}},undo:gC,redo:fC})}alignTo(t,A){const e=super.alignTo.bind(this);return this.$root.$command.add({name:"对齐",type:"fn",args:{value:[t,A.map((t=>t.id))],handler:function(t,A,e){return[e[0],e[1].map((A=>t.$queryById(A)))]}},exec(){const n=QC(A);return{result:e(t,A),params:{newCompsAttrs:QC(A),oldCompsAttrs:n}}},undo:BC,redo:mC})}equidistant(t,A,e){const n=super.equidistant.bind(this);return this.$root.$command.add({name:"等间距",type:"fn",args:{value:[t,A.map((t=>t.id)),e],handler:function(t,A,e){const[n,i,s]=e;return[n,i.map((A=>t.$queryById(A))),s]}},exec(){const i=QC(A);return{result:n(t,A,e),params:{newCompsAttrs:QC(A),oldCompsAttrs:i}}},undo:wC,redo:yC})}async updateAdapters(t=[],A={}){return sC(this,super.updateAdapters.bind(this),t,A)}dismissGroups(t=[]){const A=super.dismissGroups.bind(this);return this.$root.$command.add({name:"解散多个编组",type:"fn",args:{value:[t.map((t=>t.id))],handler:function(t,A,e){const[n]=e;return[n.map((A=>t.$queryById(A)))]}},exec(){const e=t.map((t=>{const A=ou(t.toJSON());return{parentId:t.$parent.id,groupId:t.id,option:A.option,childrenId:t.children.map((t=>t.id))}}));return{result:A(t),params:{groupObjs:e}}},undo:lC,redo:cC})}destroyComps(t=[]){const A=super.destroyComps.bind(this);return this.$root.$command.add({name:"销毁多个节点",key:"destroyComps",type:"fn",args:{value:[t.map((t=>t.id))],handler:function(t,A,e){const[n]=e;return[n.map((A=>t.$queryById(A)))]}},exec(){const e=function(t){const A={},e=[];return t.forEach((t=>{const e=t.$parent.id;A[e]||(A[e]={comp:t.$parent,children:[]}),A[e].children.push(t)})),Object.keys(A).forEach((t=>{const n=A[t];"Group"===n.comp.type&&n.comp.children.length===n.children.length?e.push(n.comp):e.push(...n.children.sort(((t,A)=>A.$ranking-t.$ranking)))})),e}(t),n=e.map((t=>({parentId:t.$parent.id,nextId:t.$next?.id,compId:t.id,compOptions:ou(t.toJSON()),dataSubscriberList:t.adapter?.$data&&t.adapter?.$data.subscriber.subscriberList.map((t=>({sourceId:t.dataItem.parent.$parent.id,level:ou(t.option.level)})))})));return{result:A(e),params:{compObjs:n}}},undo:oC,redo:aC})}}function QC(t){return t.map((t=>({compId:t.id,attrs:[{name:"top",value:t.top},{name:"left",value:t.left}]})))}function vC(t,A){t.updateCompsAttrs(A.map((A=>({comp:t.$queryById(A.compId),attrs:ou(A.attrs)}))))}async function bC(t,{compObjs:A}){const e=[],n=[];for(const i of A){const A=t.$options.manager.create(t.$queryById(i.parentId),i.compOptions);await A.init(),i.nextId&&A.moveToTarget(t.$queryById(i.nextId),"before"),i.dataSubscriberList&&n.push(i),e.push(A)}(function(t=[]){const A=[];return t.forEach((function t(e){if("subscribeData"===e?.adapter?.$data.dataSource.dataType){const t=e.adapter.$data.dataSource.typeMap.subscribeData.subscribeComp;A.find((A=>A===t))||A.push(t)}e.children&&e.children.forEach(t)})),A})(e).forEach((t=>t.adapter.$data.refresh())),n.forEach((A=>{const e=A.compId,n=t.$queryById(e);A.dataSubscriberList.forEach((A=>{t.$queryById(A.sourceId).adapter.updateSourceData("subscribeData",{id:e,level:A.level})})),n.adapter?.$data.refresh()})),t.select(e)}function UC(t,{compObjs:A}){t.destroyComps(A.map((A=>t.$queryById(A.compId))))}async function FC(t,{groupObjs:A}){const e=[];for(const n of A){const A=await Yi(t,n.childrenId.map((A=>t.$queryById(A))),n.option);e.push(A)}t.select(e)}function IC(t,{groupObjs:A}){A.forEach((A=>t.$queryById(A.groupId).dismiss()))}function EC(t,{oldCompsAttrs:A}){vC(t,A)}function MC(t,{newCompsAttrs:A}){vC(t,A)}function LC(t,{oldSelectCompIds:A,newSelectCompIds:e}){e.filter((t=>!A.includes(t))).forEach((A=>t.$queryById(A)._updateSelect(!1))),t.select(A.map((A=>t.$queryById(A))))}function _C(t,{oldSelectCompIds:A,newSelectCompIds:e}){A.filter((t=>!e.includes(t))).forEach((A=>t.$queryById(A)._updateSelect(!1))),t.select(e.map((A=>t.$queryById(A))))}async function DC(t,{oldDef:A,selectIds:e}){await t.parseJSON(A),t.select(e.map((A=>t.$queryById(A))))}async function $C(t,{newDef:A}){await t.parseJSON(A)}function SC(t,{selectIds:A}){t.select(A.map((A=>t.$queryById(A))))}function xC(t,{compIds:A}){t.select(A.map((A=>t.$queryById(A))))}function TC(t,{oldCompsAttrs:A}){vC(t,A)}function HC(t,{newCompsAttrs:A}){vC(t,A)}function OC(t,{oldCompsAttrs:A}){vC(t,A)}function kC(t,{newCompsAttrs:A}){vC(t,A)}class NC extends Ih{updateCompsAttrs(t){const A=super.updateCompsAttrs.bind(this);return this.$root.$command.add({name:"更新多个节点的多个属性",type:"fn",args:{value:[t.map((t=>({compId:t.comp.id,attrs:ou(t.attrs)})))],handler:function(t,{value:A}){t.updateCompsAttrs(A[0].map((A=>({comp:t.$queryById(A.compId),attrs:A.attrs}))))}},exec(){const e={value:[t]},n=[],i=[];t.forEach((t=>{n.push({compId:t.comp.id,attrs:t.attrs.map((t=>({name:t.name,value:ou(t.oldValue)})))}),i.push({compId:t.comp.id,attrs:t.attrs.map((t=>({name:t.name,value:ou(t.value)})))})}));return{result:A(t),args:e,params:{oldCompsAttrs:n,newCompsAttrs:i}}},undo:EC,redo:MC})}__updateSelect(t){const A=this,e=super.__updateSelect.bind(this);if(!function(t=[],A=[]){const e=[...new Set(t)],n=[...new Set(A)];return e.length===n.length&&e.every((t=>n.includes((A=>A===t))))}(A.$selectComponent,t))return this.$root.$command.add({name:"更新选择",type:"fn",args:{value:[t.map((t=>t.id))],handler:function(t,A,e){return[e[0].map((A=>t.$queryById(A)))]}},exec(){const n=A.$selectComponent.map((t=>t.id));return{result:e(t),params:{oldSelectCompIds:n,newSelectCompIds:A.$selectComponent.map((t=>t.id))}}},undo:LC,redo:_C})}async parseJSON(t,A){const e=this,n=super.parseJSON.bind(this);return this.$root.$command.asyncAdd({name:"导入定义文件",type:"fn",args:{value:[ou(t),ou(A)]},async exec(){const i=ou(t),s=ou(A),r=e.toJSON(),o=e.toJSON(),a=e.$selectComponent.map((t=>t.id));return{result:await n(t,A),params:{newDef:i,newOptions:s,oldDef:r,oldOptions:o,selectIds:a}}},undo:DC,redo:$C})}select(t){const A=this,e=super.select.bind(this);return this.$root.$command.add({name:"选择",type:"fn",args:{value:[t.map((t=>t.id))],handler:function(t,A,e){return[e[0].map((A=>t.$queryById(A)))]}},exec(){const n=A.$selectComponent.map((t=>t.id));return{result:e(t),params:{compIds:t.map((t=>t.id)),selectIds:n}}},undo:SC,redo:xC})}alignTo(t,A){const e=super.alignTo.bind(this);return this.$root.$command.add({name:"对齐",type:"fn",args:{value:[t,A.map((t=>t.id))],handler:function(t,A,e){return[e[0],e[1].map((A=>t.$queryById(A)))]}},exec(){const n=KC(A);return{result:e(t,A),params:{newCompsAttrs:KC(A),oldCompsAttrs:n}}},undo:TC,redo:HC})}equidistant(t,A,e){const n=super.equidistant.bind(this);return this.$root.$command.add({name:"等间距",type:"fn",args:{value:[t,A.map((t=>t.id)),e],handler:function(t,A,e){const[n,i,s]=e;return[n,i.map((A=>t.$queryById(A))),s]}},exec(){const i=KC(A);return{result:n(t,A,e),params:{newCompsAttrs:KC(A),oldCompsAttrs:i}}},undo:OC,redo:kC})}async updateAdapters(t=[],A={}){return sC(this,super.updateAdapters.bind(this),t,A)}dismissGroups(t=[]){const A=super.dismissGroups.bind(this);return this.$root.$command.add({name:"解散多个编组",type:"fn",args:{value:[t.map((t=>t.id))],handler:function(t,A,e){const[n]=e;return[n.map((A=>t.$queryById(A)))]}},exec(){const e=t.map((t=>{const A=ou(t.toJSON());return{groupId:t.id,option:A.option,childrenId:t.children.map((t=>t.id))}}));return{result:A(t),params:{groupObjs:e}}},undo:FC,redo:IC})}destroyComps(t=[]){const A=super.destroyComps.bind(this);return this.$root.$command.add({name:"销毁多个节点",key:"destroyComps",type:"fn",args:{value:[t.map((t=>t.id))],handler:function(t,A,e){const[n]=e;return[n.map((A=>t.$queryById(A)))]}},exec(){const e=function(t){const A={},e=[];return t.forEach((t=>{const e=t.$parent.id;A[e]||(A[e]={comp:t.$parent,children:[]}),A[e].children.push(t)})),Object.keys(A).forEach((t=>{const n=A[t];"Group"===n.comp.type&&n.comp.children.length===n.children.length?e.push(n.comp):e.push(...n.children.sort(((t,A)=>A.$ranking-t.$ranking)))})),e}(t),n=e.map((t=>({parentId:t.$parent.id,nextId:t.$next?.id,compId:t.id,compOptions:ou(t.toJSON()),dataSubscriberList:[]})));return{result:A(e),params:{compObjs:n}}},undo:bC,redo:UC})}destroy(){const t=this,A=super.destroy.bind(this);return this.$root.$command.add({name:"销毁",key:"destroy",type:"fn",args:{value:[],handler:function(t,A,e){}},exec(){const e=t.toSceneJSON();return{result:A(),params:{oldOptions:e}}},undo:function(){},redo:function(){}})}}function KC(t){return t.map((t=>({compId:t.id,attrs:[{name:"top",value:t.top},{name:"left",value:t.left}]})))}function RC(t,{selfId:A,oldAttrs:e,oldZoom:n}){const i=t.$queryById(A);i.updateAttrs(e),i.canvasZoom=n}function jC(t,{selfId:A,newAttrs:e}){const n=t.$queryById(A);n.updateAttrs(e),n.updateCanvasCenter()}function PC(t,{newLayerId:A,oldSelectLayerId:e,oldSelectIds:n}){t.$queryById(A).destroy({selectLayer:e&&t.$queryById(e)}),t.select(n.map((A=>t.$queryById(A))))}function GC(t,{selfId:A,newOptions:e,newConfig:n}){return t.$queryById(A).createLayer(e,n)}function VC(t,{selectIds:A}){t.select(A.map((A=>t.$queryById(A))))}function zC(t,{selfId:A}){t.$queryById(A).select()}function JC(t,A){eQ(t,A)}function YC(t,{selfId:A}){t.$queryById(A).resetFilter()}function WC(t,{selfId:A,oldKey:e,oldValue:n}){t.$queryById(A).setFilter(e,n)}function XC(t,{selfId:A,oldKey:e,newValue:n}){t.$queryById(A).setFilter(e,n)}function ZC(t,A){eQ(t,A)}function qC(t,{selfId:A}){t.$queryById(A).clearFiler()}class tQ extends iy{_updateAttr(t,A,e){return jy(this,super._updateAttr.bind(this),t,A,e)}updateAttrs(t=[]){return Py(this,super.updateAttrs.bind(this),t)}setSize(t=[]){const A=this,e=super.setSize.bind(this);return this.$root.$command.add({name:"设置画布尺寸",type:"fn",args:{value:ou(t)},exec(){const n=t.map((t=>({name:t.name,value:A[t.name]}))),i=ou(A.canvasZoom);return{result:e(t),params:{selfId:A.id,oldZoom:i,oldAttrs:n,newAttrs:ou(t)}}},undo:RC,redo:jC})}async createLayer(t={},A={}){const e=this,n=super.createLayer.bind(this);return this.$root.$command.asyncAdd({name:"创建图层",type:"fn",args:{value:[ou(t),ou(A)]},async exec(){const i=ou(t),s=ou(A),r=e.$currentLayer?.id,o=e.$root.$selectComponent.map((t=>t.id)),a=await n(t,A);return{result:a,params:{selfId:e.id,newLayerId:a.id,oldSelectLayerId:r,oldSelectIds:o,newOptions:i,newConfig:s}}},undo:PC,redo:GC})}select(){const t=this,A=super.select.bind(this);return this.$root.$command.add({name:"画布选择",type:"fn",noAdd:t.isSelected,args:{value:[]},exec(){const e=t.$root.$selectComponent.map((t=>t.id));return{result:A(),params:{selectIds:e,selfId:t.id}}},undo:VC,redo:zC})}resetFilter(){const t=this,A=super.resetFilter.bind(this);return this.$root.$command.add({name:"重置滤镜",type:"fn",args:{value:[]},exec:()=>AQ(t,A),undo:JC,redo:YC})}setFilter(t,A){const e=this,n=super.setFilter.bind(this);return this.$root.$command.add({name:"设置滤镜",type:"fn",args:{value:[t,A]},exec(){const i={value:[t,A]},s=ou(e.filters[t]);return{result:n(t,A),args:i,params:{selfId:e.id,oldKey:ou(t),newValue:ou(A),oldValue:s}}},undo:WC,redo:XC})}clearFiler(){const t=this,A=super.clearFiler.bind(this);return this.$root.$command.add({name:"设置滤镜",type:"fn",args:{value:[]},exec:()=>AQ(t,A),undo:ZC,redo:qC})}}function AQ(t,A){const e=ou(t.filters);return{result:A(),params:{selfId:t.id,oldValue:e}}}function eQ(t,{selfId:A,oldValue:e}){const n=t.$queryById(A);if(e){n.resetFilter();for(const t in e)n.setFilter(t,e[t])}else n.clearFiler()}function nQ(t,{newCompIds:A,oldSelectIds:e}){A.forEach((A=>t.$queryById(A).destroy())),t.select(e.map((A=>t.$queryById(A))))}function iQ(t,{selfId:A,newOptions:e,newConfig:n}){return t.$queryById(A).parseJSON(e,n)}async function sQ(t,{oldParentId:A,oldOptions:e,oldNextId:n,oldDataSubscriberCompsList:i}){const s=t.$queryById(A),r=s.$options.manager.create(s,e,e.kpOption,{nextComp:t.$queryById(n)});await r.init(),function(t=[]){const A=[];return t.forEach((function t(e){if("subscribeData"===e?.adapter?.$data.dataSource.dataType){const t=e.adapter.$data.dataSource.typeMap.subscribeData.subscribeComp;A.find((A=>A===t))||A.push(t)}e.children&&e.children.forEach(t)})),A}(r.containers).forEach((t=>t.adapter.$data.refresh())),i.forEach((A=>{const e=A.compId,n=t.$queryById(e);A.dataSubscriberList.forEach((A=>{t.$queryById(A.sourceId).adapter.updateSourceData("subscribeData",{id:e,level:A.level})})),n.adapter.$data.refresh()})),r.select()}function rQ(t,{selfId:A}){t.$queryById(A).destroy()}class oQ extends sy{_updateAttr(t,A,e){return jy(this,super._updateAttr.bind(this),t,A,e)}updateAttrs(t=[]){return Py(this,super.updateAttrs.bind(this),t)}moveToTarget(t,A){return Gy(this,super.moveToTarget.bind(this),t,A)}select(){Jy(this,super.select.bind(this))}createContainer(t,A){return Yy(this,super.createContainer.bind(this),t,A)}createGroup(t,A,e){return qy(this,super.createGroup.bind(this),t,A,e)}async parseJSON(t,A={}){const e=this,n=super.parseJSON.bind(this);return this.$root.$command.asyncAdd({name:"图层导入定义文件",type:"fn",args:{value:[ou(t),ou(A)]},async exec(){const i=ou(t),s=ou(A),r=e.$root.$selectComponent.map((t=>t.id)),o=await n(t,A);return{result:o,params:{selfId:e.id,newOptions:i,newConfig:s,newCompIds:o.map((t=>t.id)),oldSelectIds:r}}},undo:nQ,redo:iQ})}destroy(){const t=this,A=super.destroy.bind(this);return this.$root.$command.add({name:"图层销毁",type:"fn",args:{value:[]},exec(){const e=t.id,n=ou(t.toJSON()),i=t.$parent.id,s=t.$next?.id,r=t.containers.filter((t=>t.adapter?.$dataAdapter)),o=r.map((t=>({compId:t.id,dataSubscriberList:t.adapter.$data.subscriber.subscriberList.map((t=>({sourceId:t.dataItem.parent.$parent.id,level:ou(t.option.level)})))})));return{result:A(),params:{selfId:e,oldParentId:i,oldNextId:s,oldOptions:n,oldDataSubscriberCompsList:o}}},undo:sQ,redo:rQ})}}async function aQ(t,{parentId:A,parent:e,oldOptions:n,nextId:i}){const s=t.$queryById(A),r=s.$options.manager.create(n.type);await r.init(s,n,{nextComp:t.$queryById(i)})}function lQ(t,{selfId:A}){t.$queryById(A).destroy()}class cQ extends ry{_updateAttr(t,A,e){return jy(this,super._updateAttr.bind(this),t,A,e)}updateAttrs(t=[]){return Py(this,super.updateAttrs.bind(this),t)}moveToTarget(t,A){return Gy(this,super.moveToTarget.bind(this),t,A)}select(){Jy(this,super.select.bind(this))}createContainer(t,A,e){return Yy(this,super.createContainer.bind(this),t,A)}destroy(){const t=this,A=super.destroy.bind(this);return this.$root.$command.add({name:"3D图层销毁",type:"fn",args:{value:[]},exec(){const e=ou(t.toJSON()),n=t.$parent.id,i=t.$next?.id;return{result:A(),params:{selfId:t.id,parentId:n,nextId:i,oldOptions:e}}},undo:aQ,redo:lQ})}}async function uQ(t,{groupId:A,parentId:e,groupOptions:n}){const i=t.$queryById(A);await i.init(t.$queryById(e),n),i.select()}function hQ(t,{groupId:A}){const e=t.$queryById(A),n=[...e.children];e.dismiss(),t.select(n)}class dQ extends uy{_updateAttr(t,A,e){return jy(this,super._updateAttr.bind(this),t,A,e)}updateAttrs(t=[]){return Py(this,super.updateAttrs.bind(this),t)}moveToTarget(t,A){return Gy(this,super.moveToTarget.bind(this),t,A)}createGroup(t=[],A={},e={}){return qy(this,super.createGroup.bind(this),t,A,e)}dismiss(){const t=this,A=super.dismiss.bind(this);return this.$root.$command.add({name:"解散编组",type:"fn",args:{value:[]},async exec(){const e=t.$parent.id,n=ou(t.toJSON()),i=await A();return{result:i,params:{groupId:i.id,groupOptions:n,parentId:e}}},undo:uQ,redo:hQ})}}class pQ extends dy{_updateAttr(t,A,e){return jy(this,super._updateAttr.bind(this),t,A,e)}updateAttrs(t=[]){return Py(this,super.updateAttrs.bind(this),t)}moveToTarget(t,A){return Gy(this,super.moveToTarget.bind(this),t,A)}async createAdapter(t={},A={},e={}){return Zy(this,super.createAdapter.bind(this),t,A,e)}async createGroup(t=[],A={},e={}){return qy(this,super.createGroup.bind(this),t,A,e)}async updateAdapter(t={},A={},e={}){return eC(this,super.updateAdapter.bind(this),t,A,e)}}class gQ extends py{_updateAttr(t,A,e){return jy(this,super._updateAttr.bind(this),t,A,e)}updateAttrs(t=[]){return Py(this,super.updateAttrs.bind(this),t)}moveToTarget(t,A){return Gy(this,super.moveToTarget.bind(this),t,A)}async createAdapter(t={},A={},e={}){return Zy(this,super.createAdapter.bind(this),t,A,e)}async createGroup(t=[],A={},e={}){return qy(this,super.createGroup.bind(this),t,A,e)}async updateAdapter(t={},A={},e={}){return eC(this,super.updateAdapter.bind(this),t,A,e)}}function fQ(t,A,e,n,i){return t.$root.$command.add({name:"更新适配器属性",type:"fn",noAdd:!!e.option.noAdd,args:{selfId:t.$parent.id,value:[e.name,n,i],handler:function(t,{selfId:A,value:e}){const[n,i]=e;t.$queryById(A)[n]=i}},exec:()=>({result:A(e,n,i),params:{selfId:t.$parent.id,name:e.name,newValue:ou(n),oldValue:ou(i)}}),undo(t,{selfId:A,name:e,oldValue:n}){t.$queryById(A).adapter[e]=n},redo(t,{selfId:A,name:e,newValue:n}){t.$queryById(A).adapter[e]=n}})}function BQ(t,{selfId:A,oldName:e,oldValue:n}){const i=t.$queryById(A);i.adapter.updateDataField(e,n),i.adapter.$data.refresh()}function mQ(t,{selfId:A,oldName:e,newValue:n}){const i=t.$queryById(A);i.adapter.updateDataField(e,n),i.adapter.$data.refresh()}function wQ(t,{selfId:A,oldValue:e}){const n=t.$queryById(A);n.adapter.updateDataClose(e),n.adapter.$data.refresh()}function yQ(t,{selfId:A,newValue:e}){const n=t.$queryById(A);n.adapter.updateDataClose(e),n.adapter.$data.refresh()}function CQ(t,{selfId:A,oldValue:e}){const n=t.$queryById(A);n.adapter.updateDataTime(e),n.adapter.$data.refresh()}function QQ(t,{selfId:A,newValue:e}){const n=t.$queryById(A);n.adapter.updateDataTime(e),n.adapter.$data.refresh()}function vQ(t,{selfId:A,oldType:e,oldData:n}){t.$queryById(A).adapter.updateSourceData(e,n)}function bQ(t,{selfId:A,newType:e,newData:n}){t.$queryById(A).adapter.updateSourceData(e,ou(n))}function UQ(t,{selfId:A,oldValue:e}){t.$queryById(A).adapter.updateFilterMainEnable(e)}function FQ(t,{selfId:A,newValue:e}){t.$queryById(A).adapter.updateFilterMainEnable(e)}function IQ(t,{selfId:A,filterName:e,oldEnabled:n,oldMainEnabled:i}){const s=t.$queryById(A).adapter,r=s.$data.filterWork.getFilterItemByName(e);s.updateFilterEnabled(r,n),i!==s.$data.filterWork.getMainEnabled()&&s.updateFilterMainEnable(i)}function EQ(t,{selfId:A,filterName:e,newEnabled:n}){const i=t.$queryById(A).adapter,s=i.$data.filterWork.getFilterItemByName(e);i.updateFilterEnabled(s,n)}function MQ(t,{oldName:A,newName:e}){const n=t.$dataManager.filterManager;n.updateName(n.getFilterByName(e),A)}function LQ(t,{oldName:A,newName:e}){const n=t.$dataManager.filterManager;n.updateName(n.getFilterByName(A),e)}function _Q(t,{name:A,oldValue:e}){const n=t.$dataManager.filterManager;n.updateData(n.getFilterByName(A),e.code,e.callbackArgs)}function DQ(t,{name:A,newValue:e}){const n=t.$dataManager.filterManager;n.updateName(n.getFilterByName(A),e.code,e.callbackArgs)}function $Q(t,{oldOptions:A}){const e=t.$dataManager.filterManager;e.remove(e.getFilterByName(A.name))}function SQ(t,{selfId:A,oldOptions:e}){t.$queryById(A).adapter.addFilter(ou(e))}function xQ(t,{filterOptions:A,index:e,useList:n}){const i=t.$dataManager.filterManager.add(ou(A),e);n.forEach((A=>{t.$queryById(A.compId).adapter.$data.filterWork.addUse(i,A.enabled,A.index)}))}function TQ(t,{filterOptions:A}){const e=t.$dataManager.filterManager;e.remove(e.getFilterByName(A.name))}function HQ(t,{selfId:A,name:e,mainEnabled:n}){const i=t.$queryById(A);n!==i.adapter.$data.filterWork.getMainEnabled()&&i.adapter.updateFilterMainEnable(n),i.adapter.unUseFilter(t.$dataManager.filterManager.getFilterByName(e))}function OQ(t,A){PQ(t,A)}function kQ(t,A){PQ(t,A)}function NQ(t,{selfId:A,name:e}){t.$queryById(A).adapter.unUseFilter(t.$dataManager.filterManager.getFilterByName(e))}function KQ(t,{selfId:A,name:e,oldValue:n}){const i=t.$queryById(A).adapter,s=t.$dataManager.filterManager,r=s.getFilterByName(e),o=s.getFilterByName(n.targetName);i.moveFilter(i.$data.filterWork.getFilterItem(r),i.$data.filterWork.getFilterItem(o),n.type)}function RQ(t,{selfId:A,name:e,newValue:n}){const i=t.$queryById(A).adapter,s=t.$dataManager.filterManager,r=s.getFilterByName(e),o=s.getFilterByName(n.targetName);i.moveFilter(i.$data.filterWork.getFilterItem(r),i.$data.filterWork.getFilterItem(o),n.type)}class jQ extends $y{_updateAttr(t,A,e){return fQ(this,super._updateAttr.bind(this),t,A,e)}updateDataField(t,A){const e=this,n=super.updateDataField.bind(this);return this.$root.$command.add({name:"更新字段映射",type:"fn",args:{value:[t,A]},exec(){const i=ou(e.$data.fieldMapping.get(t)?.field.value);return{result:n(t,A),params:{selfId:e.$parent.id,oldName:t,oldValue:i,newValue:ou(A)}}},undo:BQ,redo:mQ})}updateDataClose(t){const A=this,e=super.updateDataClose.bind(this);return this.$root.$command.add({name:"更新数据定时器开关",type:"fn",args:{value:[t]},exec(){const n=ou(A.$data.timerItem.get().close);return{result:e(t),params:{selfId:A.$parent.id,oldValue:n,newValue:ou(t)}}},undo:wQ,redo:yQ})}updateDataTime(t){const A=this,e=super.updateDataTime.bind(this);return this.$root.$command.add({name:"更新数据定时器时间",type:"fn",args:{value:[t]},exec(){const n=ou(A.$data.timerItem.get().time);return{result:e(t),params:{selfId:A.$parent.id,oldValue:n,newValue:ou(t)}}},undo:CQ,redo:QQ})}updateSourceData(t,A){const e=this,n=super.updateSourceData.bind(this);return this.$root.$command.add({name:"更新源数据",type:"fn",args:{value:[t,ou(A)]},exec(){const i=e.$data.dataSource.dataType,s=ou(e.$data.dataSource.get(i));return{result:n(t,A),params:{selfId:e.$parent.id,oldType:i,oldData:s,newType:t,newData:ou(A)}}},undo:vQ,redo:bQ})}updateFilterMainEnable(t){const A=this,e=super.updateFilterMainEnable.bind(this);return this.$root.$command.add({name:"更新过滤器总开关",type:"fn",args:{value:[t]},exec(){const n=A.$data.filterWork.getMainEnabled();return{result:e(t),params:{selfId:A.$parent.id,oldValue:n,newValue:t}}},undo:UQ,redo:FQ})}updateFilterEnabled(t,A){const e=this,n=super.updateFilterEnabled.bind(this);return this.$root.$command.add({name:"更新过滤器状态",type:"fn",args:{value:[t.filter.name,A],handler:function(t,A,e){const[n,i]=e;return[A.adapter.$data.filterWork.getFilterItemByName(n),i]}},exec(){const i=ou(t.filter.enabled),s=e.$data.filterWork.getMainEnabled();return{result:n(t,A),params:{selfId:e.$parent.id,filterName:t.filter.name,oldEnabled:i,oldMainEnabled:s,newEnabled:ou(A)}}},undo:IQ,redo:EQ})}updateFilterName(t,A){const e=super.updateFilterName.bind(this);return this.$root.$command.add({name:"更新过滤器名称",type:"fn",args:{value:[t.name,A],handler:function(t,A,e){const[n,i]=e;return[t.$dataManager.filterManager.getFilterByName(n),i]}},exec(){const n=t.filter.name;return{result:e(t,A),params:{oldName:n,newName:A}}},undo:MQ,redo:LQ})}updateFilterData(t,A,e){const n=super.updateFilterData.bind(this);return this.$root.$command.add({name:"更新过滤器数据",type:"fn",args:{value:[t.name,A,ou(e)],handler:function(t,A,e){const[n,i,s]=e;return[t.$dataManager.filterManager.getFilterByName(n),i,s]}},exec(){const i={code:t.filter.code,callbackArgs:ou(t.filter.callbackArgs)};return{result:n(t,A,e),params:{name:t.filter.name,oldValue:i,newValue:{code:A,callbackArgs:ou(e)}}}},undo:_Q,redo:DQ})}addFilter(t){const A=this,e=super.addFilter.bind(this);return this.$root.$command.add({name:"添加过滤器",type:"fn",args:{value:[ou(t)]},exec:()=>({result:e(t),params:{selfId:A.$parent.id,oldOptions:ou(t)}}),undo:$Q,redo:SQ})}removeFilter(t){const A=this,e=super.removeFilter.bind(this);return this.$root.$command.add({name:"删除过滤器",type:"fn",args:{value:[t.name],handler:function(t,A,e){const[n]=e;return[t.$dataManager.filterManager.getFilterByName(n)]}},exec(){const n={name:t.name,code:t.code,callbackArgs:ou(t.callbackArgs)},i=A.$data.dataManager.filterManager.getFilterIndex(t),s=t.list.map((A=>({compId:A.parent.parent.$parent.id,enabled:A.enabled,index:A.getFilterItemIndex(t)})));return{result:e(t),params:{filterOptions:n,index:i,useList:s}}},undo:xQ,redo:TQ})}useFilter(t,A){const e=this,n=super.useFilter.bind(this);return this.$root.$command.add({name:"使用过滤器",type:"fn",args:{value:[t.name,A],handler:function(t,A,e){const[n,i]=e;return[t.$dataManager.filterManager.getFilterByName(n),i]}},exec(){const i=e.$data.filterWork.getMainEnabled();return{result:n(t,A),params:{selfId:e.$parent.id,name:t.name,mainEnabled:i,enabled:A}}},undo:HQ,redo:OQ})}unUseFilter(t){const A=this,e=super.unUseFilter.bind(this);return this.$root.$command.add({name:"移除使用过滤器",type:"fn",args:{value:[t.name],handler:function(t,A,e){const[n]=e;return[t.$dataManager.filterManager.getFilterByName(n)]}},exec(){const n=A.$data.filterWork.getFilterItem(t).enabled;return{result:e(t),params:{selfId:A.$parent.id,name:t.name,enabled:n}}},undo:kQ,redo:NQ})}moveFilter(t,A,e){const n=this,i=super.moveFilter.bind(this);return this.$root.$command.add({name:"移动过滤器",type:"fn",args:{value:[t.filter.name,A.filter.name,e],handler:function(t,A,e){const[n,i,s]=e,r=A.adapter.$data.filterWork;return[r.getFilterItemByName(n),r.getFilterItemByName(i),s]}},exec(){const s=n.$data.filterWork,r=s.getFilterItemIndex(t);let o,a;r?(o="after",a=s.filterList[r-1]):(o="before",a=s.filterList[r+1]);const l={targetName:a.filter.name,type:o};return{result:i(t,A,e),params:{selfId:n.$parent.id,name:t.filter.name,oldValue:l,newValue:{targetName:A.filter.name,type:e}}}},undo:KQ,redo:RQ})}}function PQ(t,{selfId:A,name:e,enabled:n}){t.$queryById(A).adapter.useFilter(t.$dataManager.filterManager.getFilterByName(e),n)}class GQ extends Sy{_updateAttr(t,A,e){return fQ(this,super._updateAttr.bind(this),t,A,e)}}async function VQ(t,{selfId:A,oldEffect:e}){await XQ(t,{selfId:A,effect:e})}async function zQ(t,{selfId:A,newEffect:e}){await XQ(t,{selfId:A,effect:e})}async function JQ(t,{selfId:A,oldEffect:e}){await XQ(t,{selfId:A,effect:e})}async function YQ(t,{selfId:A,newEffect:e}){await XQ(t,{selfId:A,effect:e})}class WQ extends ky{_updateAttr(t,A,e){return fQ(this,super._updateAttr.bind(this),t,A,e)}async refresh(){const t=super.refresh.bind(this);return this.$root.$command.asyncAdd({name:"刷新",type:"fn",noAdd:!0,exec:async()=>({result:await t()})})}async setEffectTheme(t){const A=this,e=super.setEffectTheme.bind(this);return this.$root.$command.asyncAdd({name:"更改园区效果",type:"fn",args:{value:[ou(t)]},async exec(){const n=ou(A.effectTheme);return{result:await e(t),params:{selfId:A.$parent.id,oldEffect:n,newEffect:ou(t)}}},undo:VQ,redo:zQ})}async reset(){const t=this,A=super.reset.bind(this);return this.$root.$command.asyncAdd({name:"重置园区效果",type:"fn",async exec(){const e=t.$parent.id,n=ou(t.effectTheme),i=await A();return{result:i,params:{selfId:e,oldEffect:n,newEffect:ou(i.effectTheme)}}},undo:JQ,redo:YQ})}}async function XQ(t,{selfId:A,effect:e}){const n=t.$queryById(A);e?await n.adapter.setEffectTheme(e):await n.adapter.reset()}class ZQ extends Ny{_updateAttr(t,A,e){return fQ(this,super._updateAttr.bind(this),t,A,e)}}class qQ extends Ky{_updateAttr(t,A,e){return fQ(this,super._updateAttr.bind(this),t,A,e)}}class tv extends Ry{_updateAttr(t,A,e){return fQ(this,super._updateAttr.bind(this),t,A,e)}}class Av{constructor(t,A={}){this.globalDataManager=t,this.parent=t.parent,this.config=A,this.url=null,this.ws=null,this.waitQueueList=null,this.requestQueue=null,this.requestQueueMax=null,this.timer=null,this.pingTimer=null,this.reconnectTimer=null,this.reconnectTime=null,this.status=null,this.destroying=null}init(){return this.config.disable?console.warn("接数功能已关闭，无法使用"):(this.status=null,this.requestQueue={},this.waitQueueList=[],this.url=this.config.websocketUrl,this.requestQueueMax=+this.config.restApiMaxQueue,this.reconnectTime=10,this.url?(this._initWs(),void this._initTime()):console.error("没有地址"))}start(){this.status=!0}stop(){this.status=!1}_initWs(){const t=this.ws=new WebSocket(this.url);t.onopen=()=>{console.log("数据服务连接成功"),this._startPing(),this.reconnectTime=10,this.sendWaitQueue()},t.onmessage=t=>{if(this.parent.$emit("getRestData",t.data),t.data+""=="423")return void this.parent.$emit("license-invalid");if("ping"===t.data||"连接成功"===t.data)return;const A=(t=>{try{return JSON.parse(t)}catch(t){return console.error(t.message),{}}})(t.data);if("object"==typeof A)for(const t in A)this._dataHandler(t,A[t])},t.onclose=A=>{this._wsExtract(A,t)},t.onerror=A=>{this._wsExtract(A,t)}}_wsExtract(t,A){this.destroying||(console.error("链接接数中断",t.message),A.close(),this.clearQueue(),this._closePing(),this._reconnect())}_closeWs(){this._closeReconnect(),this._closePing(),this._closeTime(),this.ws&&(this.ws.close(),this.ws=null)}_reconnect(){this._closeReconnect(),this.destroying||(console.log(`${this.reconnectTime}秒后重新链接接数功能`),this.reconnectTimer=setTimeout((()=>{this.reconnectTime+=10,this._closeWs(),this._initWs()}),1e3*this.reconnectTime))}_closeReconnect(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}_startPing(){this._closePing(),this.pingTimer=setInterval((()=>{this.ws.readyState===WebSocket.OPEN&&this.ws.send("ping")}),3e4)}_closePing(){this.pingTimer&&clearInterval(this.pingTimer),this.pingTimer=null}_initTime(){this._closeTime();const t=()=>{const t=Date.now(),A=this.requestQueue;for(const e in A){const n=A[e];t-n.time>n.timeout&&this._dataHandler(n.data[0].id,{type:"error",message:"链接已超时！"})}};this.timer=window.setInterval((()=>{t()}),1e3)}_closeTime(){this.timer&&(window.clearInterval(this.timer),this.timer=null)}_dataHandler(t,A){this.requestQueue[t]?.handler(A),delete this.requestQueue[t],this.sendWaitQueue()}send(t){this.parent.$emit("setRestData",t.data),this.ws.send(JSON.stringify(t.data)),t.time=Date.now()}sendWaitQueue(){if(this.ws.readyState!==WebSocket.OPEN)return;let t=this.requestQueueMax-Object.values(this.requestQueue).length;t>this.waitQueueList.length&&(t=this.waitQueueList.length);let A=0;for(;A<t;){const t=this.waitQueueList.shift();this.requestQueue[t.data[0].id]=t,this.send(t),A++}}addQueue(t){this.waitQueueList.push(t),this.sendWaitQueue()}clearQueue(){const t=this.requestQueue||{};for(const A in t){t[A].handler({type:"error",message:"主动退出请求"})}this.requestQueue={}}clearWaitQueue(){(this.waitQueueList||[]).forEach((t=>t.handler({type:"error",message:"主动退出请求"}))),this.waitQueueList=[]}removeQueueById(t){const A=this.waitQueueList.findIndex((A=>A.id===t));~A&&this.waitQueueList.splice(A,1);const e=Object.entries(this.requestQueue).find((A=>A.id===t));e&&(e.handler({type:"error",message:"主动退出请求"}),delete this.requestQueue[e.data[0].id],this.sendWaitQueue())}getQueueByDataId(t){return this.waitQueueList.find((A=>A.data[0].id===t))}_getId(t){let A=`${t}-${function(){const t=Math.random().toString(16);return t.substring(t.length-6)}()}`;return this.getQueueByDataId(A)&&(A=this._getId()),A}_getRealId(t){return t.parent.$parentUi.isTopUi?t.parent.$parent.id:`${t.parent.$parentUi.$parent.$parent.id}/${t.parent.$parent.id}`}getData(t,A,e){return new Promise((n=>{function i(t,A){return n({status:t,data:A})}if(!this.status||this.config.disable)return i(200,{type:"error",message:"接数功能已关闭，无法使用"});const s=this._getRealId(t);this.removeQueueById(s);const{header:r,body:o,level:a,method:l,url:c}=A;if(!c)return i(200,{type:"error",message:"url无效"});const u={id:s,dataItem:t,data:[{id:this._getId(this._getRealId(t)),type:"rest",config:{header:r,level:a,body:o,method:l,url:c}}],time:null,timeout:+this.config.restApiTimeout,handler:t=>i(200,t),errorHandler:t=>i(0,t)};this.addQueue(u),e&&e((()=>{u.errorHandler({type:"error",message:"主动退出请求"})}))}))}clear(){this.clearQueue(),this.clearWaitQueue()}destroy(){this.destroying=!0,this.status=!1,this.clear(),this._closeWs(),this.url=null,this.waitQueueList=null,this.requestQueue=null,this.requestQueueMax=null,this.reconnectTime=null}}class ev{constructor(t){this.parent=t,this.dataList=null,this.timer=null,this.started=null}init(){this.dataList=[],this.stop()}_initTime(){this._destroyTime(),this.timer=window.setInterval((()=>{if(!this.started)return;this._getExpireData().forEach((t=>t.run().updateNow()))}),1e3)}_destroyTime(){this.timer&&(window.clearInterval(this.timer),this.timer=null)}start(){this.started=!0,this._initTime()}stop(){this.started=!1,this._destroyTime()}_getExpireData(){return this.dataList.filter((t=>t.getRefreshable()))}add(t){this.dataList.find((A=>A===t))||this.dataList.push(t)}remove(t){const A=this.dataList.findIndex((A=>A===t));~A&&this.dataList.splice(A,1)}clear(){const t=[...this.dataList];for(const A of t)A.destroy();this.dataList=[]}destroy(){this.clear(),this._destroyTime(),this.dataList=null,this.timer=null,this.started=null}}class nv{constructor(t){this.parent=null,this.config=null,this.timeManager=null,this.restDataManager=null,this.started=null,this.managerList=null,this._init(t)}_init(t){return this.parent=t,this.config=t.config.data||{},this.timeManager=new ev(this),this.restDataManager=new Av(this,this.config),this.managerList=new Set,this.timeManager.init(),this.restDataManager.init(),this.parent.$on("hook:top:mounted:Ui",this.start,this),this}addManager(t){return this.managerList.add(t),this}removeManager(t){return this.managerList.delete(t),this}clearManager(){return this.managerList.clear(),this}start(){return this.started||(this.managerList.forEach((t=>t.start())),this.timeManager.start(),this.restDataManager.start(),this.started=!0),this}stop(){return this.started&&(this.managerList.forEach((t=>t.stop())),this.timeManager.stop(),this.restDataManager.stop(),this.started=!1),this}destroy(){return this.parent.$off("hook:top:mounted:Ui",this.start,this),this.clearManager(),this.timeManager&&this.timeManager.destroy(),this.restDataManager&&this.restDataManager.destroy(),this.timeManager=null,this.restDataManager=null,this.config=null,this.started=null,this.parent=null,this}}class iv{constructor(t,A){this.elementMap=t,this.adapterMap=A}install(t){return t.install(this)}}class sv{constructor(t){this.parent=t,this.elementMap=null,this.adapterMap=null,this.moduleManager=null,this.pluginList=null}init({elements:t,adapters:A}){this.pluginList=[],this.elementMap=t,this.adapterMap=A,this.moduleManager=new iv(t,A)}install(t){const A=this.moduleManager.install(t);this.pluginList.push({Fn:t,instance:A})}getElement(t){return this.elementMap[t]}getElementType(t){const A=this.elementMap;for(const e in A)if(t instanceof A[e])return e}getAdapter(t){return this.adapterMap[t]}getAdapterType(t){const A=this.adapterMap;for(const e in A)if(t instanceof A[e])return e}destroy(){this.pluginList&&this.pluginList.forEach((t=>{t.instance.destroy()})),this.pluginList=null,this.elementMap=null,this.adapterMap=null,this.moduleManager=null}}const rv={state:{callbackPool:{}},get:{getcallbackPool:t=>t.callbackPool},set:{addCBToStackHostPool:(t,A)=>{if(Array.isArray(A)){const[e,n]=A;if(!e.id||!e.callback)return;const i=t.callbackPool;i[n]||(i[n]=[]),i[n].push(e)}},clearFromStackHostPool(t,A){const e=t.callbackPool,[n,i]=A;if(e[i]){const A=t.callbackPool[i];let e=A.length;for(;e--;){A[e].id===n&&A.splice(e,1)}}}}};const ov=new class{constructor(t){this.statePool={},this.getPool={},this.setPool={},t.forEach((t=>{this.register(t)}))}register(t){Object.assign(this.statePool,t.state),Object.assign(this.getPool,t.get),Object.assign(this.setPool,t.set)}get(t,A){return this.getPool[t](this.statePool,A)}commit(t,A){this.setPool[t](this.statePool,A)}}([{state:{compData:[]},get:{getById:(t,A)=>{let e;if(A&&"string"==typeof A)return null===(e=t.compData.find((t=>t.id===A)))||void 0===e?void 0:e.data},getByAlias:(t,A)=>{let e;if(A&&"string"==typeof A)return null===(e=t.compData.find((t=>t.alias===A)))||void 0===e?void 0:e.data},getcompData:t=>t.compData},set:{setUdata:(t,A)=>t.compData=A}},rv]);Math.random().toString(36).substr(-8);const av=(t,A)=>Object.prototype.toString.call(t).includes(A),lv=t=>{if(!t)return null;let A="";for(const e in t){if(["bgImageUrl","isBgImage","backgroundColorLgColor","backgroundColorisUseLgColor","webkitTextFillColor","colorisUseLgColor","colorLgColor"].includes(e))continue;const n=/\w/g;let i="";i=e.replace(n,(function(t){return t>="A"&&t<="Z"?"-"+t.toLowerCase():t})),A+=`${i}:${t[e]};`}return A},cv=t=>{const A=document.createElement("div");return A.setAttribute("style",t),A},uv=(t,A,e)=>{const n=t.padStart(A,"0");return e&&n.length>4?n.substring(0,A-4)+"万"+n.substring(A-4,A):n},hv=function(t){let A="";if("string"==typeof t){const e=t.length;";"!==t.substr(e-1,1)&&(A=";")}return A};class dv{constructor(t,A){this.config=A,this.el=t,this.uBizData=A.data,this.options=A.opts,this._options={},this.cbArr=[],this.comTimes=null,this.componentAliasObj={},this.initApi()}get JSCode(){return this.config.options.JSCode||""}get compType(){return this.config.options.type}_initComponent(){this.initBizData(),this.initOptions(),this.runJSCode(),this.initCompDom()}resize(){}initBizData(){}initOptions(){}initCompDom(){}update(){}getOption(){return this.options}setOption(t){this.options=t,this.update()}getData(){return this.uBizData}setData(t){this.uBizData=t,this.update()}runJSCode(){if(this.JSCode){const t=new Function("param",`${this.JSCode}`);if("function"==typeof t)try{t.call(this.api)}catch(t){console.error(`组件执行代码逻辑失败: ${t.message}`)}}}runTimesFunction(t,A){this.comTimes=null,this.comTimes&&window.clearTimeout(this.comTimes),this.comTimes=window.setTimeout((()=>{this.runTimesFunction(t,A),t.call(this.api)}),parseInt(A))}getCSSTextFromStyle(t){let A="";const e=t=>{if(!t)return null;if(av(t,"Array"))return t.forEach((t=>{e(t)})),null;if(av(t,"Object")){const e=this.api.getStyleStringByObject(t);e&&(A+=e,A+=hv(A))}av(t,"String")&&(A+=t,A+=hv(A))};return e(t),A}initApi(){const t=this.compType;this.api={getDom:()=>this.el,getEcharts:()=>window.echarts,getJquery:()=>window.$,getOptions:()=>this.options,setOptions:t=>{this.options=t},getComponentData:()=>this.uBizData},this.api.getSceneDataByAlias=t=>ov.get("getByAlias",t)||null,this.api.getPublishDataById=t=>ov.get("getById",t)||null,this.api.getPublishDataByAlias=t=>ov.get("getByAlias",t)||null,this.api.clearDom=()=>{const t=this.el;window.$(t).empty()},this.api.setStyle=(t,A)=>{if(t&&t instanceof HTMLElement&&A&&"object"==typeof A)for(const e in A)t.style[e]=A[e]},this.api.setStyleByArray=(t,A)=>{let e;if(t instanceof Array&&A instanceof Array&&t.length===A.length){const n=t.length;for(let i=0;i<n;i++){const n=t[i],s=A[i];null===(e=this.api)||void 0===e||e.setStyle(n,s)}}},this.api.setItemValue=(t,A)=>{t&&t instanceof HTMLElement&&("string"==typeof A||"number"==typeof A)&&(t.innerText=A)},this.api.mountToDom=(t,A)=>{A instanceof HTMLElement&&t instanceof HTMLElement&&A.appendChild(t)},this.api.setItemHTML=(t,A)=>{t&&t instanceof HTMLElement&&"string"==typeof A&&(t.innerHTML=A)},this.api.getStyleStringByObject=t=>{let A="";for(const e in t)A+=`${e}:${t[e]};`;return A},this.api.createDOMByDefinition=(t,A,e)=>{if(t&&A&&av(A,"Array"))return!1;A.forEach((A=>{let n=null;const i=A.type;if(!i)return null;if(["svg","defs","rect","linearGradient","stop"].includes(i)){const t="http://www.w3.org/2000/svg";n=document.createElementNS(t,i)}else n=document.createElement(i);const s=A.style;s&&(n.style.cssText=this.getCSSTextFromStyle(s));const r=A.text;r&&(n.innerText=r),t.appendChild(n),e&&av(e,"Function")&&e.call(this,n,A),A.children&&this.api.createDOMByDefinition(n,A.children,e)}))},this.api.setComponentSize=(t,A)=>{t&&Number.isInteger(parseInt(t))?this.parent.options.style.width=`${parseInt(t)}px`:console.warn("Javascript脚本中调用setComponentSize函数缺少宽度参数,或者参数宽度不为数字"),A&&Number.isInteger(parseInt(A))?this.parent.options.style.height=`${parseInt(A)}px`:console.warn("Javascript脚本中调用setComponentSize函数缺少高度参数,或者参数高度不为数字")},this.api.setTimes=(t,A)=>{"function"==typeof t&&parseInt(A)?(this.comTimes&&window.clearTimeout(this.comTimes),this.comTimes=null,this.runTimesFunction(t,A)):console.error("setTimes传入参数错误")},this.api.addCallback=t=>{t instanceof Function&&this.cbArr.push(t)},this.api.clearCallback=()=>{this.cbArr=[]},this.api.addCBToStackHostPool=(t,A)=>{const e=[{id:this.config.name,callback:t,self:this},A];return ov.commit("addCBToStackHostPool",e)},this.api.clearFromStackHostPool=t=>{const A=[this.config.name,t];return ov.commit("clearFromStackHostPool",A)},this.api.clearTimes=()=>{this.comTimes&&window.clearTimeout(this.comTimes),this.comTimes=null},this.api.setComponentData=A=>{if(A)if("ctextlist"===t){if(this.uBizData=window.$.extend(!0,[],A),this.initOptions(),this.initBizData(),!this.options.isCarousel)for(const t of this.uBizData)t.isShow=!0}else this.uBizData=A;else console.warn("没有获取到合法的数据")},this.api.startAnimate=()=>{},window.callCBStack=t=>{if(!t||"string"!=typeof t)return void console.error("call回调队列时参数字符中需要携带队列id,并且参数必须为字符串");if(t.indexOf("，")>=0)return void console.error("call回调队列的参数中不能含有中文逗号,如果传多参，参数之间用英文逗号隔开");const A=t.split(","),[e,...n]=A,i=ov.get("getcallbackPool").all;if(i&&i instanceof Array){const t=i.length;for(let A=0;A<t;A++){if(i[A][1]!==e)continue;const t=i[A][0];t.callback.call(t.self,n)}}}}destory(){this.options=void 0,this.uBizData=void 0,this.api=void 0,this.dom&&(this.el?.removeChild(this.dom),this.dom=void 0),window.$(this.el).empty()}}class pv extends dv{}function gv(t,A){t.forEach(((t,e)=>{t.style.transition="",t.style.transform="",t._height||(t._height=t.style.height),t._display||(t._display=t.style.display),t.ontransitionend=null,e<=A-1?(t.style.display=t._display,t.style.opacity="1"):(t.style.display="none",t.style.opacity="0")}))}function fv(t,A,e){let n=0;const i=t.length-1;gv(t,A);let s,r=!0;return async function o(){const a=t[n+A];await function(t){return new Promise((A=>{t.style.display=t._display,setTimeout((()=>{t.style.transition="transform 0.5s, opacity 0.5s, height 0.5s",t.style.transform="translateY(20px) rotateX(90deg)",t.style.opacity="0",t.style.height="0",t.ontransitionend=function(){t.style.transition="",t.style.display="none",t.style.opacity="0",t.style.height=t._height,t.ontransitionend=null,A()}}))}))}(t[n]),a&&await function(t){return new Promise((A=>{t.style.display=t._display,t.style.opacity="0",t.style.transform="translateY(50px)",t.style.transition="",setTimeout((()=>{t.style.transition="transform 0.8s, opacity 0.8s",t.style.opacity="1",t.style.transform="translateY(0)",t.ontransitionend=function(){t.style.transform="translateY(0)",t.style.opacity="1",t.ontransitionend=null,A()}}))}))}(a),n>=i?(gv(t,A),n=0):n++,r&&(s=setTimeout((()=>{clearTimeout(s),o()}),1e3*+e))}(),()=>{r=!1,s&&clearTimeout(s)}}class Bv extends pv{initCompDom(){let t;this.dom=document.createElement("iframe"),this.dom.setAttribute("style","width:100%;height:100%"),this.initOptions(),null===(t=this.el)||void 0===t||t.appendChild(this.dom)}initOptions(){this.dom&&this.options&&this.options.iframeURL&&!0===this.options.isOpenIframe&&(this.dom.src=/^(http|https):/.test(this.options.iframeURL)?this.options.iframeURL:`http://${this.options.iframeURL}`)}update(){this.initOptions(),this.runJSCode()}}class mv extends dv{constructor(t,A){super(t,A),this.echartsInstance=void 0}initApi(){super.initApi(),this.api&&(this.api.renderCharts=()=>{setTimeout((()=>{this.echartsInstance?this.echartsInstance.clear():this.echartsInstance=window.echarts&&window.echarts.init(this.el),this.options&&this.echartsInstance.setOption(this.options)}))},this.api.getChartsInstance=()=>this.echartsInstance,this.api.getChartsData=()=>this.uBizData,this.api.getChartsOptions=()=>this.options)}}const wv={ctext:class extends pv{_initComponent(){this.initOptions(),this.initCompDom(),this.initBizData(),this.runJSCode()}initCompDom(){const t=document.createElement("div");t.setAttribute("style","width:100%;height:100%;overflow:hidden;"),this.dom=document.createElement("div"),this.dom.innerText=this.uBizData?.value||"数据不符合规范",t.appendChild(this.dom),this.options&&this._setOption(this.options),this.el?.appendChild(t)}initOptions(){if(this.options){const t=this.options;t?.colorLgColor&&t?.colorisUseLgColor&&(t.backgroundImage=t?.colorLgColor.replace(/_/g,","),t["-webkit-background-clip"]="text",t["-webkit-text-fill-color"]=t.webkitTextFillColor),this._setOption(t)}}_setOption(t){this.dom&&(this.compStyle=lv(t),this.dom.setAttribute("style",this.compStyle))}initBizData(){let t=this.uBizData;Array.isArray(t)&&(t=t[0]),t||(t={value:"数据为null"}),this._setData(t)}_setData(t){this.dom&&(this.uBizData=t,this.dom.innerText=t.value||"数据不符合规范")}update(){this.initOptions(),this.runJSCode(),this.initBizData()}destory(){this.uBizData=void 0,this.compStyle=void 0,super.destory()}},clayout:class extends pv{initCompDom(){let t;this.dom=document.createElement("div"),this.initOptions(),null===(t=this.el)||void 0===t||t.appendChild(this.dom)}initOptions(){if(this.dom&&this.options){const t=this.options;let A="height:100%;";t.backgroundColor&&(A+=`background-color:${t.backgroundColor};`),t.isBgImage&&t.bgImageUrl&&(A+=`background-image:${t.bgImageUrl};background-size:100%;background-position:center;background-repeat:no-repeat;`),this.dom.setAttribute("style",A),(null==t?void 0:t.backgroundColorisUseLgColor)&&t.backgroundColorLgColor&&(this.dom.style.background=t.backgroundColorLgColor.replace(/_/g,","))}}update(){this.initOptions(),this.runJSCode()}},ctextlist:class extends pv{initBizData(){this.uBizData&&(this.cacheData||(this.cacheData=JSON.parse(JSON.stringify(this.uBizData))),this.uBizData=this.cacheData.map((t=>Object.assign(Object.assign({},t),{cellStyle:{}}))))}initOptions(){const t=this.options;if(!t)return null;const A="px"===t.titleLineheight?"50px":t.titleLineheight,e={color:t.titleColor,textAlign:t.titleTextAlign,fontFamily:t.titleFontFamily,fontSize:t.titleFongSize,fontWeight:t.titleFontWeight,lineHeight:A,backgroundColor:t.titleBackgroundColor,borderColor:t.titleBorderColor,borderStyle:t.titleBorderStyle,borderWidth:t.titleBorderWeight,height:A,background:""},n={textAlign:t.fontTextAlign,lineHeight:t.fontLineHeight},i={borderColor:t.borderColor,borderStyle:t.borderStyle,borderWidth:t.borderWeight},s={color:t.oddFontColor,fontFamily:t.oddFontFamily,fontSize:t.oddFontSize,fontWeight:t.oddFontWeight,height:t.fontLineHeight,backgroundColor:t?.oddBackgroundColor,background:""},r={color:t.evenFontColor,fontFamily:t.evenFontFamily,fontSize:t.evenFontSize,fontWeight:t.evenFontWeight,height:t.fontLineHeight,backgroundColor:t?.evenBackgroundColor,background:""};t?.titleBackgroundColorLgColor&&t?.titleBackgroundColorisUseLgColor&&(e.background=t?.titleBackgroundColorLgColor.replace(/_/g,",")),t?.oddBackgroundColorLgColor&&t?.oddBackgroundColorisUseLgColor&&(s.background=t?.oddBackgroundColorLgColor.replace(/_/g,",")),t?.evenBackgroundColorLgColor&&t?.evenBackgroundColorisUseLgColor&&(r.background=t?.evenBackgroundColorLgColor.replace(/_/g,",")),this.compStyle={titleStyle:lv(e),bodyStyle:lv(n),borderStyle:lv(i),oddStyle:lv(s),evenStyle:lv(r)}}_destoryDom(){this.textListDom&&window.$(this.textListDom).empty(),this.clearTimer&&this.clearTimer()}createHead(){const{titleStyle:t}=this.compStyle,A=cv(`display:flex;${t}`);return this.options.title.forEach((t=>{const e=cv(`width:${t.titleWidth};`);e.innerText=t.titleName||"",A.appendChild(e)})),A}createBodyDom(){const{bodyStyle:t,borderStyle:A,oddStyle:e,evenStyle:n}=this.compStyle,i=document.createElement("div");return Array.isArray(this.uBizData)?(this.uBizData.forEach(((s,r)=>{const o=cv(`box-sizing:border-box;width:100%;display:flex;${A};${(r+1)%2?e:n}`);this.options.title.forEach((A=>{if(s.cellStyle){let e="";s.cellStyle[A.compName]&&(e=lv(s.cellStyle[A.compName])||"");const n=cv(`${t};width:${A.titleWidth};${e}`);n.innerText=s[A.compName]||"",o.appendChild(n)}})),i.appendChild(o)})),i):i}initCompDom(){if(this.textListDom?this._destoryDom():(this.textListDom=document.createElement("div"),this.textListDom.setAttribute("style","width:100%;height:100%;overflow:hidden;"),this.el?.appendChild(this.textListDom)),this.compStyle){const t=this.options,A=this.createHead(),e=this.createBodyDom();this.uBizData?.length>0&&t?.isCarousel&&"onebyone"===t.animateType&&(this.clearTimer=fv(Array.from(e.childNodes),+t.pageNumber,t.carouselCycle)),this.textListDom.appendChild(A),this.textListDom.appendChild(e)}}update(){this.initBizData(),this.initOptions(),this.runJSCode(),this.initCompDom()}getData(){return this.cacheData}setData(t){this.cacheData=t,this.update()}},ciframe:Bv,ciframedpd:Bv,cprogress:class extends pv{initCompDom(){let t;const A=cv("width:100%;height:100%;overflow:hidden;");av(this.uBizData,"Array")&&this.uBizData.forEach((t=>{A.appendChild(this.createProgressDom(t,this.compStyle))})),null===(t=this.el)||void 0===t||t.appendChild(A)}update(){window.$(this.el).empty(),this.initBizData(),this.initOptions(),this.runJSCode(),this.initCompDom()}getData(){return this.cacheData}setData(t){this.cacheData=t,this.update()}initBizData(){av(this.uBizData,"Array")?(this.cacheData||(this.cacheData=JSON.parse(JSON.stringify(this.uBizData))),this.uBizData=this.cacheData.map((t=>Object.assign(Object.assign({},t),{cProgressColor:{}})))):console.warn("数据不符合规范，cprogress类型数据应该是一个数组")}createProgressDom(t,A){let e="";t.cProgressColor&&(e=lv(t.cProgressColor));const{progress:n,title:i,unit:s,progressbg:r}=A,o=cv(`${i}`),a=cv(`${r}`),l=cv(`${s}`);t.title?o.innerHTML=`${t.title}`:o.style.display="none",l.innerHTML=100*t.progress+" %";const c=cv(`${n}${e}width:${t.progress*parseInt(this.options.progress_width)}px`);a.appendChild(c);const u=cv("display:flex;");return u.appendChild(o),u.appendChild(a),u.appendChild(l),u}initOptions(){this.compStyle||(this.compStyle={progress:"",title:"",unit:""});const t=this.options,A={};for(const e in t){const n=e.split("_");n[1]&&(A[n[0]]?A[n[0]][n[1]]=t[e]:A[n[0]]={[n[1]]:t[e]})}const{title:e,progress:n,unit:i}=A;e?.backgroundColorLgColor&&e?.backgroundColorisUseLgColor&&(e.background=e.backgroundColorLgColor.replace(/_/g,",")),n?.backgroundColorLgColor&&n?.backgroundColorisUseLgColor&&(n.background=n.backgroundColorLgColor.replace(/_/g,",")),i?.backgroundColorLgColor&&i?.backgroundColorisUseLgColor&&(i.background=i.backgroundColorLgColor.replace(/_/g,","));const{backgroundColor:s,borderRadius:r,color:o,height:a,marginTop:l,width:c}=n;A.progressbg={backgroundColor:s,borderRadius:r,height:a,width:c,marginTop:l},A.progress={backgroundColor:o,borderRadius:r,height:a};for(const t in A)this.compStyle[t]=lv(A[t])}},ctimecard:class extends pv{initOptions(){if(this.options){const t=this.options;let A=`color:${t.fontColor};font-family:${t.fontFamily};font-size:${t.fontSize};`;this.dateStyle=t.isShowDay?"":"display:none;",this.timerStyle=t.isShowTime?"":"display:none;",t.isLineWarp||(A+="display: flex;",this.dateStyle+=`margin-right:${t.spacing};`),this.compStyle=A,this._setOption()}}initCompDom(){let t;this.dom=cv(this.compStyle||""),this.dateDom=cv(this.dateStyle||""),this.timeDom=cv(this.timerStyle||""),this.dom.appendChild(this.dateDom),this.dom.appendChild(this.timeDom),null===(t=this.el)||void 0===t||t.appendChild(this.dom),this.setCurrentTime()}update(){this.initOptions()}_setOption(){this.dateDom&&this.timeDom&&(this.dateDom.setAttribute("style",this.dateStyle||""),this.timeDom.setAttribute("style",this.timerStyle||""))}_changeInerHTML(t){this.dateDom.innerText=t[0],this.timeDom.innerText=t[1]}_getNowTime(){const t=new Date;return[t.toLocaleTimeString(),t.getFullYear(),t.getMonth()+1,t.getDate(),t]}setCurrentTime(){this._timer&&clearTimeout(this._timer),this._timer=void 0;const[t,A,e,n,i]=this._getNowTime(),s={0:`${A}年${e}月${n}日`,1:`${A}-${e}-${n}`,2:i.toLocaleDateString()},r=this.options?this.options.timeFormat:0;this._changeInerHTML([s[r],t]),this._timer=setTimeout((()=>{this.setCurrentTime()}),1e3)}destory(){this._timer&&clearTimeout(this._timer),this._timer=void 0,this.dateDom=void 0,this.timeDom=void 0,this.dateStyle=void 0,this.timerStyle=void 0,this.compStyle=void 0,super.destory()}},echarts:class extends mv{constructor(t,A){super(t,A),this.el=t,this.dbapitype=this.config.options.dbapitype||"1",this.defaultColor=[["#2b908f","#90ee7e","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],["#C1232B","#27727B","#FCCE10","#E87C25","#B5C334","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B"],["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4"],["#c12e34","#e6b600","#0098d9","#2b821d","#005eaa","#339ca8","#cda819","#32a487","#7798BF","#aaeeee","#DF5353"],["#E01F54","#001852","#f5e8c8","#b8d2c7","#c6b38e","#a4d8c2","#f3d999","#d3758f","#dcc392","#2e4783","#82b6e9"]]}resize(){this.echartsInstance&&this.echartsInstance.resize()}_initComponent(){this.initBizData(),this.initOptions(),this.runJSCode(),this.initCompDom()}initCompDom(){let t;this.dom||(this.dom=cv("width:100%;height:100%;"),null===(t=this.el)||void 0===t||t.appendChild(this.dom),this.echartsInstance=window.echarts&&window.echarts.init(this.dom));const A=this.options;try{this.echartsInstance&&A&&this.echartsInstance.setOption(A)}catch(t){console.error(t.message)}}update(){this._initComponent()}setAxis(t){av(t,"Array")&&t.forEach((t=>{this.setAxis(t)})),"category"===t?.type&&(t.data=this.xAxisData)}setSeries(){const t=this.uBizData.length,A=this.options.series.length,e=[];for(let n=0;n<t;n++)if(n<A)this.options.series[n].name=this.uBizData[n].name,this.options.series[n].data=this.uBizData[n].data;else if(A>0){const t=this.options.series[A-1];t.name=this.uBizData[n].name,t.data=this.uBizData[n].data,e.push(t)}e.length>0&&(this.options.series=this.options.series.concat(e))}dealDbapitype1(){if(!av(this.uBizData,"Array"))return null;this.xAxisData.length>0&&(this.setAxis(this.options.xAxis),this.setAxis(this.options.yAxis)),this.legendData.length>0&&(this.options.legend||(this.options.legend={}),this.options.legend.data=this.legendData),this.setSeries()}dealDbapitype3(){return av(this.uBizData,"Array")&&this.options&&Object.keys(this.options).length>0?(this.options.series&&(this.options.series[0].data=this.uBizData),void(this.legendData.length>0&&(this.options.legend||(this.options.legend={}),this.options.legend.data=this.legendData))):null}initOptions(){const t=this.dbapitype;if(this.options&&this.xAxisData&&this.legendData){const A=this.options.color;(!A||av(A,"Array")&&0===A.length)&&(this.options.color=this.defaultColor[0]),"1"===t&&this.dealDbapitype1(),"3"===t&&this.dealDbapitype3(),this.initOptionsFunction(this.options)}}initOptionsFunction(t){if(!t||!av(t,"Object"))return null;const A=Object.keys(t);for(const e of A){const A=t[e];if(av(t,"Object")&&this.initOptionsFunction(A),av(t,"Array"))for(const t of A)this.initOptionsFunction(t);av(t,"String")&&A.includes("function")&&(t[e]=new Function("return "+A)())}}_dealBizData(t){if(!(t&&av(t,"Object")&&t.name))return[];const A=[];this.legendData=[],this.xAxisData=[];for(const[e,n]of Object.entries(t))"name"===e&&av(n,"Array")&&(this.xAxisData=n),"name"!==e&&(av(n,"Array")&&A.push({name:e,data:n}),this.legendData.push(e));return A}initBizData(){let t=[];const A=this.uBizData,e=this.dbapitype;if("1"===e&&(t=this._dealBizData(A)),"3"===e&&A&&av(A,"Array")&&A.length>0){t=A,this.legendData=[],this.xAxisData=[];for(const A of t)A.name&&this.legendData.push(A.name)}this.uBizData=t}},cblankcomponent:class extends pv{update(){this.runJSCode()}},ccountdown:class extends pv{constructor(t,A){super(t,A),this.currentValue=0,this.oldValue=0,this.len=0,this.compDom=null}initCompDom(){let t,{value:A,maxValue:e}=this.uBizData;const{pageAlign:n}=this.options;e||(e=A,A="0"),this.compDom=cv(`height:100%;width:100%;overflow:hidden;text-align: ${n};`),this.currentValue=+A,this.len=e.split("").length,e.split("").forEach(((t,A)=>{this.createPage(t,A)})),this.options.split&&this.createPage("0",0),this.loadData(+A,+e),null===(t=this.el)||void 0===t||t.appendChild(this.compDom)}loadData(t,A){this.timer&&clearTimeout(this.timer);const e=Math.floor((A-t)/30)||1;A-this.currentValue>=e?this.currentValue=+this.currentValue+e:this.currentValue=A,this.changeNumber(),+this.currentValue>=+A||(this.timer=setTimeout((()=>{this.oldValue=this.currentValue,this.loadData(t,A)}),1e3))}changeNumber(){let t,A,e;const n=this.options.split,i=(uv(this.currentValue.toString(),this.len,n)+this.options.unit).split(""),s=(uv(this.oldValue.toString(),this.len,n)+this.options.unit).split("");if(null===(t=this.compDom)||void 0===t?void 0:t.childNodes)for(let t=0;t<(null===(A=this.compDom)||void 0===A?void 0:A.childNodes.length);t++){const A=null===(e=this.compDom)||void 0===e?void 0:e.childNodes[t];if(A.childNodes[0].setAttribute("data-before",s[t]),A.childNodes[1].setAttribute("data-before",i[t]),A.classList.remove("go"),s[t]!==i[t]){const t=setTimeout((()=>{clearTimeout(t),A.classList.add("go")}),600)}}}update(){window.$(this.el).empty(),this.initOptions(),this.runJSCode(),this.initCompDom()}_createPage(t){if(this.compStyle){const{pageMargin:A}=this.options,e=document.createElement("div"),{font:n,number:i,page:s}=this.compStyle,r=document.createElement("div"),o=document.createElement("div");return r.setAttribute("class","card-font-number front"),o.setAttribute("class","card-font-number next"),e.setAttribute("class","down"),e.appendChild(r),e.appendChild(o),e.setAttribute("style",`${/^[0-9]*$/.test(t)?s+i:n};position: relative;display: inline-block; margin-left: ${A}`),e}}createPage(t,A){let e,n;if(this.compStyle){const i=this._createPage(t);if(i&&(null===(e=this.compDom)||void 0===e||e.appendChild(i)),4===A){const t=this._createPage("0");t&&(null===(n=this.compDom)||void 0===n||n.appendChild(t))}}}initOptions(){const t=this.options,A={color:t.fontColor,fontFamily:t.fontFamily,lineHeight:t.fontLineHeight,fontSize:t.fontSize,textAlign:t.fontTextAlign,fontWeight:t.fontWeight},e={color:t.numberColor,fontFamily:t.numberFontFamily,fontSize:t.numberSize,textAlign:t.numberTextAlign,fontWeight:t.numberWeight},n={borderRadius:t.pageRadius,width:t.pageWidth,height:t.pageHeight,lineHeight:t.pageHeight,textAlign:t.pageAlign,background:t.bottomBackgroundColor};this.compStyle||(this.compStyle={font:"string",number:"string",page:"string"});const i={font:A,number:e,page:n};for(const t in i)this.compStyle[t]=lv(i[t]);this.setStyle()}setStyle(){let t=document.getElementById("style_card");t||(t=document.createElement("style"),t.id="style_card",document.head.appendChild(t));let A=`.card-font-number:before,\n      .card-font-number:after {\n        content:attr(data-before);\n        position:absolute;\n        left: 0;\n        right:0;\n        overflow:hidden;\n        box-sizing:border-box;\n      }\n      .card-font-number:before{\n        top:0;\n        bottom:50%;\n        background:${this.options.topBackgroundColor};\n      }\n      .card-font-number:after{\n        top:50%;\n        bottom:0;\n        line-height: 0;\n        background:${this.options.bottomBackgroundColor};\n      }\n      .front:before {\n        z-index: 3;\n      }\n      .next:after {\n        z-index: 2;\n        transform-origin: 50% 0%;\n        transform: perspective(160px) rotateX(180deg);\n      }\n      .front:after, .next:before {\n        z-index: 1;\n      }\n      .go .front:after{\n        animation: fade 0.6s ease-in-out both;\n      }\n      .go .front:before {\n        opacity: 0;\n      }\n      .down:not(.go) .next{\n        display: none;\n      }\n      .go .next:after {\n        animation: backFlipDown 0.6s ease-in-out both;\n      }\n      @keyframes fade {\n        100% {\n          opacity: 0;\n        }\n      }\n      @keyframes frontFlipDown {\n        0% {\n          transform: perspective(160px) rotateX(0deg);\n        }\n\n        100% {\n          transform: perspective(160px) rotateX(-180deg);\n        }\n      }\n      @keyframes backFlipDown {\n        0% {\n          transform: perspective(160px) rotateX(180deg);\n        }\n\n        100% {\n          transform: perspective(160px) rotateX(0deg);\n        }\n      }\n      `;A=A.replace(/[\r\n]/g,""),t.innerText=A}},ccountdown_v2:class extends pv{constructor(t,A){super(t,A),this.currentValue=0,this.len=0}async initCompDom(){let t,A,{value:e,maxValue:n}=this.uBizData;n||(n=e,e="0"),this.currentValue=+e,this.len=n.split("").length,this.compDom=document.createElement("span"),null===(t=this.compDom)||void 0===t||t.setAttribute("style",`display: block;${this.compStyle}`),null===(A=this.el)||void 0===A||A.appendChild(this.compDom),this.creatPromise(),this.loadData(+e,+n),await this.promise,this.options.setCountDown&&await this._loopLoadData(+e,+n)}async _loopLoadData(t,A){this.currentValue=t,this.creatPromise(),this.loadData(t,A),await this.promise;const e=setTimeout((()=>{this._loopLoadData(t,A),clearTimeout(e)}),1e3)}creatPromise(){this.promise&&(this.promise=void 0,this.resolve=void 0),this.promise=new Promise((t=>{this.resolve=t}))}loadData(t,A){const{separate:e,udurationTime:n,udecimal:i}=this.options,s={0:Math.floor((A-t)/30)||1,1:+((A-t)/30).toFixed(1),2:+((A-t)/30).toFixed(2)}[i];if(A-this.currentValue>=s?this.currentValue=+(this.currentValue+s).toFixed(+i):this.currentValue=A,this.compDom.innerHTML=this.formatData(e),+this.currentValue>=+A)return void(this.resolve&&this.resolve());const r=setTimeout((()=>{this.loadData(t,A),clearTimeout(r)}),parseInt(n)/30||50)}formatData(t){const A=this.currentValue.toString().padStart(this.len,this.options.autoNumber);if(!t)return A;const e=A.split(".");return e[0].replace(/(\d)(?=(\d{3})+$)/g,(function(t){return t+","}))+""+(e[1]?"."+e[1]:"")}initOptions(){const{color:t,fontFamily:A,fontSize:e,fontWeight:n,lineHeight:i,fontTextAlign:s,letterSpacing:r}=this.options,o={color:t,fontFamily:A,lineHeight:i,fontSize:e,fontWeight:n,letterSpacing:r,textAlign:s};this.compStyle=lv(o)}},cvideo:class extends pv{initCompDom(){let t;this.dom=document.createElement("video"),this.dom.setAttribute("style","width:100%;"),null===(t=this.el)||void 0===t||t.appendChild(this.dom)}initOptions(){if(this.dom&&this.options)for(const t in this.options)"videoSrc"===t?this.dom.src=this.options.videoSrc:this.dom.setAttribute(t,this.options[t]?t:"")}update(){this.initOptions()}},udata:class extends pv{initCompDom(){let t,A;this.dom=document.createElement("div"),this.dom.setAttribute("style","display:flex;justify-content:center;align-items:center;");const e=document.createElement("div");e.innerHTML='<svg width="175px" height="75px" viewBox="0 0 75 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<title>jieshuzujian</title>\n<g id="大屏编辑器" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="大屏编辑器-接数组件" transform="translate(-72.000000, -103.000000)">\n        <g id="左侧导航/二级菜单" transform="translate(44.000000, 76.000000)">\n            <g id="卡片/小" transform="translate(16.000000, 16.000000)">\n                <g id="图片/小96" transform="translate(0.000000, 0.000000)">\n                    <g id="jieshuzujian" transform="translate(12.375000, 11.407407)">\n                        <rect id="矩形" x="0" y="0" width="74.25" height="33.1851852"></rect>\n                        <path d="M50.3421875,16.5061728 C50.3421875,23.8467872 44.4246511,29.7975309 37.125,29.7975309 C31.8999056,29.7975309 27.2636158,26.720868 25.1326467,22.1026495 C24.3314718,21.9765021 23.71875,21.2793428 23.71875,20.4382716 C23.71875,19.5075695 24.4690228,18.7530864 25.3945312,18.7530864 C26.3200397,18.7530864 27.0703125,19.5075695 27.0703125,20.4382716 C27.0703125,20.7627404 26.9791232,21.0657913 26.8211106,21.3229216 C28.6519328,25.2885573 32.6358305,27.9308642 37.125,27.9308642 C43.2998777,27.9308642 48.3241631,22.9769481 48.4821084,16.8057152 L48.4859375,16.5061728 L50.3421875,16.5061728 Z M34.531242,17.4449999 L34.51475,18.5608148 L41.2542362,18.5611614 L41.2542362,20.427828 L34.48775,20.4278148 L34.474347,21.359156 L32.0495318,19.5146603 L34.531242,17.4449999 Z M37.125,3.21481481 C42.3634969,3.21481481 46.9937637,6.30572435 49.118067,10.9102843 C49.9185282,11.0358436 50.53125,11.7330029 50.53125,12.5740741 C50.53125,13.5047762 49.7809772,14.2592593 48.8554688,14.2592593 C47.9299603,14.2592593 47.1796875,13.5047762 47.1796875,12.5740741 C47.1796875,12.2496053 47.2708768,11.9465544 47.4288894,11.6894241 C45.60436,7.73613076 41.6255432,5.08148148 37.125,5.08148148 C30.9501223,5.08148148 25.9258369,10.0353975 25.7678916,16.2066304 L25.7640625,16.5061728 L23.9078125,16.5061728 C23.9078125,9.1655585 29.8253489,3.21481481 37.125,3.21481481 Z M40.0950456,11.827716 L42.5767558,13.8973763 L40.1519406,15.741872 L40.13775,14.8098148 L33.0066409,14.8105441 L33.0066409,12.9438774 L40.11075,12.9438148 L40.0950456,11.827716 Z" id="形状结合" fill="#3284FF"></path>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</g>\n</svg>',null===(t=this.dom)||void 0===t||t.appendChild(e),null===(A=this.el)||void 0===A||A.appendChild(this.dom)}}};let yv=!1,Cv=!1,Qv=[];const vv=$n.adapterManager.getBaseAdapter();class bv extends vv{static factory(t,A,e,n){return new bv(t,A,e,n)}async _initComponent(){const t=this.config.options.type,A=wv[t];A?yv?this._render(A):Cv?Qv.push((()=>{this._render(A)})):(Cv=!0,await this.loadResource(),yv=!0,this._render(A),Qv.forEach((t=>{t()})),Qv=[]):(console.warn(`${t}：该类型暂时没有实现，请联系开发者！！！`),this.componentInstance={setOption(){},setData(){},resize(){}},this._componentComplete(),this.complete=!0)}_render(t){this.parent.contentEl.appendChild(this.dom);try{this.componentInstance=new t(this.dom,this.config),this.componentInstance._initComponent(),console.warn("_render",this,this.config),Reflect.has(this.config,"data")&&this.componentInstance.setOption(this.config.data),Reflect.has(this.config,"opts")&&this.componentInstance.setOption(this.config.opts),this._componentComplete(),this.complete=!0}catch(t){console.error(t.message)}}async loadResource(){const t=["jquery.min.js","echarts410.js","echarts-gl110.js","echarts-liquidfill4echarts4.js"];for(const A of t)await iu(A.split(".")[0],`/s-static/lib/${A}`)}setOption(t){t&&(this.config.opts=t,this.componentInstance.setOption(t))}setData(t){this.config.data=t,this.componentInstance.setData(t)}_destroyComponent(){this.componentInstance&&this.componentInstance.destory(),this.config=null,this.dom&&this.parent.contentEl&&this.parent.contentEl.removeChild(this.dom),this.parent.adapter=null,this.parent.previewModeLock=!0,this.parent=null}toJSON(){const t={type:this.type,name:this.name},A=this.componentInstance;return A&&(t.data=this.componentInstance.uBizData,"echarts"===A.compType&&A.config?t.opts=A.config:t.opts=this.componentInstance.options),this.config.option&&(t.option=this.config.option),this.config.options&&(t.options=this.config.options),t}}const Uv=/\/s-static(\/[\w-]+)+\.(bmp|gif|ico|pcx|tif|png|jpg|jpeg|webm|webp)/gi,Fv=/\/s-static(\/[\w-]+)+\.(svg|mp4|ogg|webm|mp3|wav)/gi;class Iv{static getUid(t){return t.toLowerCase()+"-"+window.Math.random().toString(24).slice(-10)}constructor(){this.$events={events:{}},this.rootDom=null,this.dom=null,this.options=null,this.config=null,this.module=null,this.globalManager=null,this.globalDataManager=null,this.isEdit=null,this.canShortcutKey=null,this.topUi=null,this.ui=null,this.$options={globalManager:null,globalDataManager:null,rootConfig:null,isEdit:null,regs:{image:null,material:null,font:null},fontList:null},this.state={initComplete:null,complete:null,canvasComplete:null,offline:!1,undo:null,redo:null,select:{layer:null,isSingle:null,isSingleHasAdapter:null,isSingleCanvas:null,isSingleGroup:null,isSingleContainer:null,isSingleTwin:null,isSingleTwinTopology:null,isMultiple:null,hasTwinContainer:null,hasEmptyContainer:null,hasDataContainer:null,single:null,twinContainer:null,comps:[]},canvasZoom:1,enableCanvasZoom:!0,textEditing:!1,contextMenuRunning:!0},this.status=null,this.complete=null,$n.adapterManager.register("UdatavAdapter",bv)}async init(t,A={},e={}){if(!t)throw new Error("dom 无效");return this.status?console.warn("已经初始化过了"):(this._initBegin(t,A,e),this.state.canvasComplete=!1,this.state.initComplete=!1,await this.$emit("initComplete",this),this._create(),await this._mount(),this.ui.$command.start(),this.state.initComplete=!0,this.state.canvasComplete=!0,this.complete=!0,await this.$emit("initCompleted",this),this._initEnd()),this}_initBegin(t,A={},e={}){return this.status=!0,this.rootDom=t,this.options=A,this.config=e,this.$options.rootConfig=e,this.isEdit=this.$options.isEdit="edit"===e.mode,this.$options.regs.image=Uv,this.$options.regs.material=Fv,this.canShortcutKey=!0,this}_create(){return this.dom=document.createElement("div"),this.dom.style.cssText="position: relative;width: 100%;height: 100%;line-height: 1.5;font-size: 12px;font-weight: normal;font-style: normal;color: white;",this.module=new sv(this),this.$options.globalManager=this.globalManager=new gh(this),this.module.init(function(t=!1){return t?{elements:{RootUi:CC,Ui:NC,Canvas:tQ,ThingJSLayer:cQ,Layer:oQ,Group:dQ,DefaultContainer:gQ,Container:pQ},adapters:{CampusAdapter:WQ,LowCodeAdapter:ZQ,MapAdapter:qQ,TopologyAdapter:tv,UdatavAdapter:GQ,ConchAdapter:jQ}}:{elements:{RootUi:_h,Ui:Ih,Canvas:iy,ThingJSLayer:ry,Layer:sy,Group:uy,Container:dy,DefaultContainer:py},adapters:{CampusAdapter:ky,LowCodeAdapter:Ny,MapAdapter:Ky,TopologyAdapter:Ry,UdatavAdapter:Sy,ConchAdapter:$y}}}(this.isEdit)),this.globalDataManager=this.$options.globalDataManager=new nv(this),this.topUi=this.globalManager.create(this,{type:"RootUi",option:this.options},{prefix:this.config.prefix,enableWatermark:this.config.enableWatermark,uiParams:this.config.uiParams}),this.ui=this.topUi,this._initEvent(),this}async _mount(){return this.rootDom.appendChild(this.dom),await this.topUi.init(),this}_initEnd(){return this}_initEvent(){const t=()=>{this.state.undo=this.ui.$command.canUndo(),this.state.redo=this.ui.$command.canRedo()};this.$on("hook:now:commandAdd",t),this.$on("hook:now:commandUndo",t),this.$on("hook:now:commandRedo",t),this.$on("hook:now:commandClear",t),this.$on("hook:now:CommandBeforeExec",t),this.$on("hook:now:CommandExec",t),this.$on("hook:now:selectLayer",(t=>{this.state.select.layer=t})),this.$on("hook:now:unSelectLayer",(t=>{this.state.select.layer===t&&(this.state.select.layer=null),this.state.select.layer=t})),this.$on("hook:now:updateSelectComponent",(t=>{const A=1===t.length,e=A?t[0]:null;this.state.select.isSingle=A,this.state.select.isSingleHasAdapter=!!e?.adapter,this.state.select.isSingleCanvas=e&&"Canvas"===e.type,this.state.select.isSingleGroup=e&&"Group"===e.type,this.state.select.isSingleContainer=e&&"Container"===e.type,this.state.select.isSingleTwin=!!e?.adapter?.isThing,this.state.select.isSingleTwinTopology=!!e?.adapter?.isTopology,this.state.select.isMultiple=!A,this.state.select.hasTwinContainer=!!t.find((t=>t?.$twinContainers?.length||t?.adapter?.isThing)),this.state.select.hasEmptyContainer=!!t.find((t=>!t.adapter)),this.state.select.hasDataContainer=!!t.find((t=>t.adapter?.$dataAdapter)),this.state.select.single=e,this.state.select.comps=t})),this.$on("hook:now:mounted:Canvas",(()=>{this.state.canvasComplete=!0})),this.$on("hook:now:beforeDestroy:Canvas",(()=>{this.state.canvasComplete=!1})),this.$on("hook:now:createdTwin",(t=>{if(!t.isTopology){const A=t.$uiComp.id,e=this.ui.queryById(A);this.state.select.twinContainer=e}})),this.$on("hook:now:destroyedTwin",(t=>{t.isTopology||(this.state.select.twinContainer=null)})),this.$on("hook:top:updateCanvasZoom",(t=>{this.state.canvasZoom=t})),this.$on("hook:beforeEnterUi",(t=>{this.ui=t})),this.$on("hook:beforeExitedUi",(t=>{this.ui=t.$parentUi}))}startShortcutKey(){this.canShortcutKey=!0}stopShortcutKey(){this.canShortcutKey=!1}setFontList(t=[]){this.$options.fontList=t;const A=Array.from(new Set(t.map((t=>t.psName)))).sort(((t,A)=>A.length-t.length));this.$options.regs.font=new RegExp(`(${A.join("|")})`,"g")}async parseJSON(t={}){if(t)return await this.ui.parseJSON(t),this;console.warn("parseJSON参数不能为空")}toJSON(){return this.topUi.toSceneJSON()}destroy(){this.ui&&this.ui.destroy(),this.globalDataManager&&this.globalDataManager.destroy(),this.globalManager&&this.globalManager.destroy(),this.module&&this.module.destroy(),this.dom&&this.dom.remove(),this.complete=null,this.status=null,this.ui=null,this.topUi=null,this.canShortcutKey=null,this.isEdit=null,this.globalDataManager=null,this.globalManager=null,this.module=null,this.config=null,this.options=null,this.dom=null,this.rootDom=null,this.$options=null,this.state=null,this.$events={events:{}}}$on(t,A,e){return ji(this,t,A,e)}$once(t,A,e){return Pi(this,t,A,e)}$off(t,A,e){return Gi(this,t,A,e)}$emit(t,...A){return Vi(this,t,A)}$syncEmit(t,...A){return zi(this,t,A)}get canvas(){return this.ui?.$canvas}get currentLayer(){return this.canvas?.$currentLayer}get selectComponent(){return this.ui?.$selectComponent||[]}}var Ev="2.13.6";function Mv(t,A){const{prefix:e}=A;Object.entries(t).forEach((([n,i])=>{var s;ru(i,"String")&&(/^\/s-static/.test(s=i)||/^url\(\/s-static/.test(s))&&(t[n]=function(t,A){const{prefix:e,offline:n}=A;return t.replace("/s-static",e+(n?"":"/s-static"))}(i,A)),"series"===n&&Array.isArray(i)&&i.forEach((t=>{t.symbol&&(t.symbol=t.symbol.replace("image://",e))})),ru(i,"Array")&&i.forEach((t=>Mv(t,A))),ru(i,"Object")&&Mv(i,A)}))}function Lv(t){return fetch(t).then((t=>200!==t.status?console.warn("接口返回异常"):t.text()))}const _v=(t,A)=>fetch(t,{method:A}).then((t=>t.text())).then((t=>{try{return JSON.parse(t)}catch(t){console.warn("解析失败",t)}}));class Dv{constructor(t){this.options=t,this.wrapper=null,this.config=null,this.diagram=null,this._init()}async _init(){this.promise=new Promise((t=>{this.resolve=t}));const t=this.options,{baseUrl:A,offline:e}=t,n=A||"https://charts.thingjs.com";let i=t.container||t.el;if(ru(i,"String")&&i.includes("#")&&(i=document.getElementById(i.replace("#",""))),!(i&&i instanceof HTMLElement))return console.warn("需要有效节点");this.wrapper=document.createElement("div"),this.wrapper.style="display: none; width: 100%; height: 100%;pointer-events: none;position: relative;",i.appendChild(this.wrapper);const s={...t,prefix:n,container:this.wrapper};if(this.config=s,window.conch&&(window.conch.__globalVar.printLog=!1,window.conch.errorHandler=function(t,A){console.warn(`${t.parent.name}(${t.parent.id})执行错误`,A)}),!e){s.online=!0;const A=await this._getInfoByConfig(n,t);return A&&this.createInstance(A,s)}const r=await _v(`${n}/bundle.json`);if(!r)return console.warn("该路径下bundle文件不存在");const{main:o,type:a,id:l}=r;if("chart"===a&&await this.loadCompBundle(r,s),"dashboard"===a){s.online=!1,s.prefix=`${n}/web`;const t=await _v(`${n}/web/scene-data/${o}`);t.jsCode=await Lv(`${n}/web/scene/${l}.js`),await this.createInstance(t,s)}}async _getInfoByConfig(t,A){const e=`${t}/spray/scene/scene/config`,n={method:"POST",body:A.id,headers:{"Content-Type":"text/plain"}},i=await fetch(e,n).then((t=>t.json()));if(200!==i?.code)return console.warn("接口返回异常",i?.message);if(!i.data)return null;const s=(new Date).getTime();return{config:i.data,jsCode:await Lv(`${t}/s-static/scene/${A.id}.js?t=${s}`),def:await Lv(`${t}/s-static/scene-def/${A.id}.def?t=${s}`),bluePrint:window.ThingBlueprintEditor&&await Lv(`${t}/s-static/blue-print/${A.id}.json?t=${s}`)}}async createInstance(t={},A={}){const e=A.container,n=new Iv;this.diagram=n,n.$on("created",this._createdEvent,this),n.$on("mounted:Layer",this._mountedLayerEvent,this),n.$on("elementMounted:RootUi",this._elementMountedRootUiEvent,this),await n.init(e,t,function(t={}){const A=t?.dataSource,{online:e,prefix:n="https://charts.thingjs.com"}=t;return{mode:"preview",prefix:function(t){return e||(t=t.replace("/s-static","")),n+t},Blueprint:null,BlueprintModules:null,uiParams:{},twin:{disable:t.hide3D,configFormatter:function(A,e){const n=t.offline;switch(e.$type){case"CampusAdapter":n&&(A.urlV1=`/campus/${e.thingOpts.code}`);break;case"LowCodeAdapter":n&&(A.url=`/lowCode/${e.thingOpts.name}.js`);break;case"MapAdapter":A.offline=n;break;case"TopologyAdapter":n&&(A.url=`/topo/${e.thingOpts.resourceId}/diagram.json`,A.isOffline=!0)}return A},thingJsAuthServerUrl:"http://47.94.3.222:2044/spray/processrequest1"},data:{disable:A?.disable,websocketUrl:A?.http?.server||"wss://charts.thingjs.com/spray/websocket",restApiTimeout:6e4,restApiMaxQueue:5}}}(A)),this.wrapper.style.display="block",n.ui.$ui.update(),A.hideCanvasBackground&&(n.canvas.backgroundColor="transparent",n.canvas.backgroundImage="");const i=n.ui.$canvas.layers.filter((t=>!t.isThingLayer));i.some((t=>t.visible))||i[0].show(),n.ui.$canvas.containers.forEach((t=>{t?.adapter?.$dataAdapter&&t.hidden()})),window.conch.$emit("complete"),this.resolve&&this.resolve(n.ui.$ui),A.complete&&A.complete(n.ui.$ui)}_createdEvent(t){t.adapter&&function(t,A={}){const{prefix:e,offline:n}=A;t.option?.prefix&&(t.option.prefix=n?`${e}`:e+"/s-static"),t.opts&&Mv(t.opts,A),t.theme&&Mv(t.theme,A),t.events&&Mv(t.events,A)}(t.adapter.$options.options,this.config)}_mountedLayerEvent(t){!t.visible&&t.isSelected&&t.show()}_elementMountedRootUiEvent(){window.ui=this.diagram.ui.$ui}async loadCompBundle(t,A){const{main:e,id:n}=t,{prefix:i}=A;await iu(e,`${i}/${e}`);const s=new window.conch[`C${n}`](A.container,{prefix:i},window.Vue);await s.render(),this.resolve&&this.resolve(s)}waitForComplete(){return this.promise}destroy(){this.wrapper&&this.wrapper.remove(),this.diagram&&this.diagram.destroy(),this.resolve=null,this.promise=null,this.options=null,this.wrapper=null,this.config=null,this.diagram=null}}window.THING||(window.THING={}),window.THING.CHARTS||(window.THING.CHARTS=Dv,window.THING.CHARTS.version=Ev),window.THING.CHARTS.Utils||(window.THING.CHARTS.Utils={}),window.THING.CHARTS.Utils.loadBundle=function(t,A={}){return new Dv({...A,baseUrl:t,offline:!0})}}));
